/**
 * @license
 * pixi.js - v2.2.7
 * Copyright (c) 2012-2014, Mat Groves
 * http://goodboydigital.com/
 *
 * Compiled: 2015-02-25
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license.php
 */

// MIT license

/*
     PolyK library
     url: http://polyk.ivank.net
     Released under MIT licence.

     Copyright (c) 2012 Ivan Kuckir

     Permission is hereby granted, free of charge, to any person
     obtaining a copy of this software and associated documentation
     files (the "Software"), to deal in the Software without
     restriction, including without limitation the rights to use,
     copy, modify, merge, publish, distribute, sublicense, and/or sell
     copies of the Software, and to permit persons to whom the
     Software is furnished to do so, subject to the following
     conditions:

     The above copyright notice and this permission notice shall be
     included in all copies or substantial portions of the Software.

     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
     OTHER DEALINGS IN THE SOFTWARE.

     This is an amazing lib!

     Slightly modified by Mat Groves (matgroves.com);
     */

/**
     * @author Mat Groves http://matgroves.com/ @Doormat23
     * @copyright Mat Groves, Rovanion Luckey
     */

/******************************************************************************
     * Spine Runtimes Software License
     * Version 2.1
     *
     * Copyright (c) 2013, Esoteric Software
     * All rights reserved.
     *
     * You are granted a perpetual, non-exclusive, non-sublicensable and
     * non-transferable license to install, execute and perform the Spine Runtimes
     * Software (the "Software") solely for internal use. Without the written
     * permission of Esoteric Software (typically granted by licensing Spine), you
     * may not (a) modify, translate, adapt or otherwise create derivative works,
     * improvements of the Software or develop new applications using the Software
     * or (b) remove, delete, alter or obscure any trademarks or any copyright,
     * trademark, patent or other intellectual property or proprietary rights
     * notices on or in the Software, including any copy thereof. Redistributions
     * in binary or source form must include this license and terms.
     *
     * THIS SOFTWARE IS PROVIDED BY ESOTERIC SOFTWARE "AS IS" AND ANY EXPRESS OR
     * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
     * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO
     * EVENT SHALL ESOTERIC SOFTARE BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
     * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
     * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
     * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
     * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
     * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
     * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     *****************************************************************************/

// Based on code by Ryan Juckett with permission: Copyright (c) 2008-2009 Ryan Juckett, http://www.ryanjuckett.com/

/*! jQuery v2.1.0 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

//     Underscore.js 1.7.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*!
 * VERSION: 1.13.1
 * DATE: 2014-07-19
 * UPDATES AND DOCS AT: http://www.greensock.com
 * 
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2014, GreenSock. All rights reserved.
 * This work is subject to the terms at http://www.greensock.com/terms_of_use.html or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/

/*! http://mths.be/placeholder v2.0.8 by @mathias */

/*
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

/**
 * @license RequireJS text 2.0.0 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/**@license
 * RequireJS Hogan Plugin | v0.3.0 (2013/06/11)
 * Author: Miller Medeiros | MIT License
 */

/** @license
 * RequireJS plugin for async dependency load like JSONP and Google Maps
 * Author: Miller Medeiros
 * Version: 0.1.1 (2011/11/17)
 * Released under the MIT license
 */

/* grunticon Stylesheet Loader | https://github.com/filamentgroup/grunticon | (c) 2012 Scott Jehl, Filament Group, Inc. | MIT license. */

/**
 * dat-gui JavaScript Controller Library
 * http://code.google.com/p/dat-gui
 *
 * Copyright 2011 Data Arts Team, Google Creative Lab
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 */

/**
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function MarkerClusterer(t,e,i){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=t,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var n=i||{};this.gridSize_=n.gridSize||60,this.minClusterSize_=n.minimumClusterSize||2,this.maxZoom_=n.maxZoom||null,this.styles_=n.styles||[],this.imagePath_=n.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=n.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=n.zoomOnClick&&(this.zoomOnClick_=n.zoomOnClick),this.averageCenter_=!1,void 0!=n.averageCenter&&(this.averageCenter_=n.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var r=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var t=r.map_.getZoom();r.prevZoom_!=t&&(r.prevZoom_=t,r.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){r.redraw()}),e&&e.length&&this.addMarkers(e,!1)}function Cluster(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,t.getStyles(),t.getGridSize())}function ClusterIcon(t,e,i){t.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=e,this.padding_=i||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}function parseAvailableCopy(t){var e=parseInt(t.substr(0,4)),i=parseInt(t.substr(4,2)),n=parseInt(t.substr(6,2)),r=new Date(e,i-1,n),s=new Date;return s>r?"Available now":"Available "+i+"/"+n+"/"+t.substr(2,2)}(function(){var t=this,e=e||{};e.WEBGL_RENDERER=0,e.CANVAS_RENDERER=1,e.VERSION="v2.2.7",e.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},e.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},e._UID=0,"undefined"!=typeof Float32Array?(e.Float32Array=Float32Array,e.Uint16Array=Uint16Array,e.Uint32Array=Uint32Array,e.ArrayBuffer=ArrayBuffer):(e.Float32Array=Array,e.Uint16Array=Array),e.INTERACTION_FREQUENCY=30,e.AUTO_PREVENT_DEFAULT=!0,e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RETINA_PREFIX="@2x",e.dontSayHello=!1,e.defaultRenderOptions={view:null,transparent:!1,antialias:!1,preserveDrawingBuffer:!1,resolution:1,clearBeforeRender:!0,autoResize:!1},e.sayHello=function(t){if(!e.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["%c %c %c Pixi.js "+e.VERSION+" - "+t+"  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,i)}else window.console&&console.log("Pixi.js "+e.VERSION+" - http://www.pixijs.com/");e.dontSayHello=!0}},e.Point=function(t,e){this.x=t||0,this.y=e||0},e.Point.prototype.clone=function(){return new e.Point(this.x,this.y)},e.Point.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},e.Point.prototype.constructor=e.Point,e.Rectangle=function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},e.Rectangle.prototype.clone=function(){return new e.Rectangle(this.x,this.y,this.width,this.height)},e.Rectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(t>=i&&t<=i+this.width){var n=this.y;if(e>=n&&e<=n+this.height)return!0}return!1},e.Rectangle.prototype.constructor=e.Rectangle,e.EmptyRectangle=new e.Rectangle(0,0,0,0),e.Polygon=function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),t[0]instanceof e.Point){for(var i=[],n=0,r=t.length;r>n;n++)i.push(t[n].x,t[n].y);t=i}this.closed=!0,this.points=t},e.Polygon.prototype.clone=function(){var t=this.points.slice();return new e.Polygon(t)},e.Polygon.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,s=n-1;n>r;s=r++){var o=this.points[2*r],a=this.points[2*r+1],l=this.points[2*s],h=this.points[2*s+1],c=a>e!=h>e&&(l-o)*(e-a)/(h-a)+o>t;c&&(i=!i)}return i},e.Polygon.prototype.constructor=e.Polygon,e.Circle=function(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0},e.Circle.prototype.clone=function(){return new e.Circle(this.x,this.y,this.radius)},e.Circle.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.x-t,n=this.y-e,r=this.radius*this.radius;return i*=i,n*=n,r>=i+n},e.Circle.prototype.getBounds=function(){return new e.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e.Circle.prototype.constructor=e.Circle,e.Ellipse=function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},e.Ellipse.prototype.clone=function(){return new e.Ellipse(this.x,this.y,this.width,this.height)},e.Ellipse.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,1>=i+n},e.Ellipse.prototype.getBounds=function(){return new e.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},e.Ellipse.prototype.constructor=e.Ellipse,e.RoundedRectangle=function(t,e,i,n,r){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this.radius=r||20},e.RoundedRectangle.prototype.clone=function(){return new e.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},e.RoundedRectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(t>=i&&t<=i+this.width){var n=this.y;if(e>=n&&e<=n+this.height)return!0}return!1},e.RoundedRectangle.prototype.constructor=e.RoundedRectangle,e.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},e.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},e.Matrix.prototype.toArray=function(t){this.array||(this.array=new e.Float32Array(9));var i=this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},e.Matrix.prototype.apply=function(t,i){return i=i||new e.Point,i.x=this.a*t.x+this.c*t.y+this.tx,i.y=this.b*t.x+this.d*t.y+this.ty,i},e.Matrix.prototype.applyInverse=function(t,i){i=i||new e.Point;var n=1/(this.a*this.d+this.c*-this.b);return i.x=this.d*n*t.x+-this.c*n*t.y+(this.ty*this.c-this.tx*this.d)*n,i.y=this.a*n*t.y+-this.b*n*t.x+(-this.ty*this.a+this.tx*this.b)*n,i},e.Matrix.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},e.Matrix.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},e.Matrix.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,s=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},e.Matrix.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},e.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.identityMatrix=new e.Matrix,e.DisplayObject=function(){this.position=new e.Point,this.scale=new e.Point(1,1),this.pivot=new e.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new e.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new e.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},e.DisplayObject.prototype.constructor=e.DisplayObject,Object.defineProperty(e.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive=t,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(e.DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(e.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(e.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(t){if(t){for(var e=[],i=0;i<t.length;i++)for(var n=t[i].passes,r=0;r<n.length;r++)e.push(n[r]);this._filterBlock={target:this,filterPasses:e}}this._filters=t}}),Object.defineProperty(e.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),e.DisplayObject.prototype.updateTransform=function(){var t,i,n,r,s,o,a=this.parent.worldTransform,l=this.worldTransform;this.rotation%e.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,i=this._sr*this.scale.x,n=-this._sr*this.scale.y,r=this._cr*this.scale.y,s=this.position.x,o=this.position.y,(this.pivot.x||this.pivot.y)&&(s-=this.pivot.x*t+this.pivot.y*n,o-=this.pivot.x*i+this.pivot.y*r),l.a=t*a.a+i*a.c,l.b=t*a.b+i*a.d,l.c=n*a.a+r*a.c,l.d=n*a.b+r*a.d,l.tx=s*a.a+o*a.c+a.tx,l.ty=s*a.b+o*a.d+a.ty):(t=this.scale.x,r=this.scale.y,s=this.position.x-this.pivot.x*t,o=this.position.y-this.pivot.y*r,l.a=t*a.a,l.b=t*a.b,l.c=r*a.c,l.d=r*a.d,l.tx=s*a.a+o*a.c+a.tx,l.ty=s*a.b+o*a.d+a.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.DisplayObject.prototype.displayObjectUpdateTransform=e.DisplayObject.prototype.updateTransform,e.DisplayObject.prototype.getBounds=function(t){return t=t,e.EmptyRectangle},e.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(e.identityMatrix)},e.DisplayObject.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0)},e.DisplayObject.prototype.generateTexture=function(t,i,n){var r=this.getLocalBounds(),s=new e.RenderTexture(0|r.width,0|r.height,n,i,t);return e.DisplayObject._tempMatrix.tx=-r.x,e.DisplayObject._tempMatrix.ty=-r.y,s.render(this,e.DisplayObject._tempMatrix),s},e.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},e.DisplayObject.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},e.DisplayObject.prototype.toLocal=function(t,e){return e&&(t=e.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},e.DisplayObject.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,t.gl?e.Sprite.prototype._renderWebGL.call(this._cachedSprite,t):e.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},e.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var i=new e.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new e.Sprite(i),this._cachedSprite.worldTransform=this.worldTransform}var n=this._filters;this._filters=null,this._cachedSprite.filters=n,e.DisplayObject._tempMatrix.tx=-t.x,e.DisplayObject._tempMatrix.ty=-t.y,this._cachedSprite.texture.render(this,e.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._filters=n,this._cacheAsBitmap=!0},e.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},e.DisplayObject.prototype._renderWebGL=function(t){t=t},e.DisplayObject.prototype._renderCanvas=function(t){t=t},e.DisplayObject._tempMatrix=new e.Matrix,Object.defineProperty(e.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(e.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),e.DisplayObjectContainer=function(){e.DisplayObject.call(this),this.children=[]},e.DisplayObjectContainer.prototype=Object.create(e.DisplayObject.prototype),e.DisplayObjectContainer.prototype.constructor=e.DisplayObjectContainer,Object.defineProperty(e.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;0!==e?this.scale.x=t/e:this.scale.x=1,this._width=t}}),Object.defineProperty(e.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;0!==e?this.scale.y=t/e:this.scale.y=1,this._height=t}}),e.DisplayObjectContainer.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},e.DisplayObjectContainer.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.stage&&t.setStageReference(this.stage),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},e.DisplayObjectContainer.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);if(0>i||0>n)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[i]=e,this.children[n]=t}},e.DisplayObjectContainer.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.DisplayObjectContainer.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);this.children.splice(i,1),this.children.splice(e,0,t)},e.DisplayObjectContainer.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[t]},e.DisplayObjectContainer.prototype.removeChild=function(t){var e=this.children.indexOf(t);if(-1!==e)return this.removeChildAt(e)},e.DisplayObjectContainer.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return this.stage&&e.removeStageReference(),e.parent=void 0,this.children.splice(t,1),e},e.DisplayObjectContainer.prototype.removeChildren=function(t,e){var i=t||0,n="number"==typeof e?e:this.children.length,r=n-i;if(r>0&&n>=r){for(var s=this.children.splice(i,r),o=0;o<s.length;o++){var a=s[o];this.stage&&a.removeStageReference(),a.parent=void 0}return s}if(0===r&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},e.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform()},e.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=e.DisplayObjectContainer.prototype.updateTransform,e.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return e.EmptyRectangle;for(var t,i,n,r=1/0,s=1/0,o=-(1/0),a=-(1/0),l=!1,h=0,c=this.children.length;c>h;h++){var u=this.children[h];u.visible&&(l=!0,t=this.children[h].getBounds(),r=r<t.x?r:t.x,s=s<t.y?s:t.y,i=t.width+t.x,n=t.height+t.y,o=o>i?o:i,a=a>n?a:n)}if(!l)return e.EmptyRectangle;var d=this._bounds;return d.x=r,d.y=s,d.width=o-r,d.height=a-s,d},e.DisplayObjectContainer.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=e.identityMatrix;for(var i=0,n=this.children.length;n>i;i++)this.children[i].updateTransform();var r=this.getBounds();return this.worldTransform=t,r},e.DisplayObjectContainer.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0);for(var e=0,i=this.children.length;i>e;e++){var n=this.children[e];n.setStageReference(t)}},e.DisplayObjectContainer.prototype.removeStageReference=function(){for(var t=0,e=this.children.length;e>t;t++){var i=this.children[t];i.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},e.DisplayObjectContainer.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);var e,i;if(this._mask||this._filters){for(this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),t.spriteBatch.start()}else for(e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t)}},e.DisplayObjectContainer.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);this._mask&&t.maskManager.pushMask(this._mask,t);for(var e=0,i=this.children.length;i>e;e++){var n=this.children[e];n._renderCanvas(t)}this._mask&&t.maskManager.popMask(t)}},e.Sprite=function(t){e.DisplayObjectContainer.call(this),this.anchor=new e.Point,this.texture=t||e.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.blendMode=e.blendModes.NORMAL,this.shader=null,this.texture.baseTexture.hasLoaded?this.onTextureUpdate():this.texture.on("update",this.onTextureUpdate.bind(this)),this.renderable=!0},e.Sprite.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Sprite.prototype.constructor=e.Sprite,Object.defineProperty(e.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(e.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),e.Sprite.prototype.setTexture=function(t){this.texture=t,this.cachedTint=16777215},e.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},e.Sprite.prototype.getBounds=function(t){var e=this.texture.frame.width,i=this.texture.frame.height,n=e*(1-this.anchor.x),r=e*-this.anchor.x,s=i*(1-this.anchor.y),o=i*-this.anchor.y,a=t||this.worldTransform,l=a.a,h=a.b,c=a.c,u=a.d,d=a.tx,p=a.ty,f=-(1/0),g=-(1/0),m=1/0,v=1/0;if(0===h&&0===c)0>l&&(l*=-1),0>u&&(u*=-1),m=l*r+d,f=l*n+d,v=u*o+p,g=u*s+p;else{var b=l*r+c*o+d,y=u*o+h*r+p,_=l*n+c*o+d,x=u*o+h*n+p,w=l*n+c*s+d,T=u*s+h*n+p,C=l*r+c*s+d,S=u*s+h*r+p;m=m>b?b:m,m=m>_?_:m,m=m>w?w:m,m=m>C?C:m,v=v>y?y:v,v=v>x?x:v,v=v>T?T:v,v=v>S?S:v,f=b>f?b:f,f=_>f?_:f,f=w>f?w:f,f=C>f?C:f,g=y>g?y:g,g=x>g?x:g,g=T>g?T:g,g=S>g?S:g}var E=this._bounds;return E.x=m,E.width=f-m,E.y=v,E.height=g-v,this._currentBounds=E,E},e.Sprite.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){var e,i;if(this._mask||this._filters){var n=t.spriteBatch;for(this._filters&&(n.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(n.stop(),t.maskManager.pushMask(this.mask,t),n.start()),n.render(this),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t);n.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),n.start()}else for(t.spriteBatch.render(this),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t)}},e.Sprite.prototype._renderCanvas=function(t){if(!(this.visible===!1||0===this.alpha||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=e.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid){var i=this.texture.baseTexture.resolution/t.resolution;t.context.globalAlpha=this.worldAlpha,t.smoothProperty&&t.scaleMode!==this.texture.baseTexture.scaleMode&&(t.scaleMode=this.texture.baseTexture.scaleMode,t.context[t.smoothProperty]=t.scaleMode===e.scaleModes.LINEAR);var n=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,r=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;t.roundPixels?(t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution|0,this.worldTransform.ty*t.resolution|0),n=0|n,r=0|r):t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution,this.worldTransform.ty*t.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=e.CanvasTinter.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,n/i,r/i,this.texture.crop.width/i,this.texture.crop.height/i)):t.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,n/i,r/i,this.texture.crop.width/i,this.texture.crop.height/i)}for(var s=0,o=this.children.length;o>s;s++)this.children[s]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.Sprite.fromFrame=function(t){var i=e.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new e.Sprite(i)},e.Sprite.fromImage=function(t,i,n){var r=e.Texture.fromImage(t,i,n);return new e.Sprite(r)},e.SpriteBatch=function(t){e.DisplayObjectContainer.call(this),this.textureThing=t,this.ready=!1},e.SpriteBatch.prototype=Object.create(e.DisplayObjectContainer.prototype),e.SpriteBatch.prototype.constructor=e.SpriteBatch,e.SpriteBatch.prototype.initWebGL=function(t){this.fastSpriteBatch=new e.WebGLFastSpriteBatch(t),this.ready=!0},e.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.SpriteBatch.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(t.gl),this.fastSpriteBatch.gl!==t.gl&&this.fastSpriteBatch.setContext(t.gl),t.spriteBatch.stop(),t.shaderManager.setShader(t.shaderManager.fastShader),this.fastSpriteBatch.begin(this,t),this.fastSpriteBatch.render(this),t.spriteBatch.start())},e.SpriteBatch.prototype._renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.children.length){var e=t.context;e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var i=this.worldTransform,n=!0,r=0;r<this.children.length;r++){var s=this.children[r];if(s.visible){var o=s.texture,a=o.frame;if(e.globalAlpha=this.worldAlpha*s.alpha,s.rotation%(2*Math.PI)===0)n&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),n=!1),e.drawImage(o.baseTexture.source,a.x,a.y,a.width,a.height,s.anchor.x*(-a.width*s.scale.x)+s.position.x+.5|0,s.anchor.y*(-a.height*s.scale.y)+s.position.y+.5|0,a.width*s.scale.x,a.height*s.scale.y);else{n||(n=!0),s.displayObjectUpdateTransform();var l=s.worldTransform;t.roundPixels?e.setTransform(l.a,l.b,l.c,l.d,0|l.tx,0|l.ty):e.setTransform(l.a,l.b,l.c,l.d,l.tx,l.ty),e.drawImage(o.baseTexture.source,a.x,a.y,a.width,a.height,s.anchor.x*-a.width+.5|0,s.anchor.y*-a.height+.5|0,a.width,a.height)}}}}},e.MovieClip=function(t){e.Sprite.call(this,t[0]),this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},e.MovieClip.prototype=Object.create(e.Sprite.prototype),e.MovieClip.prototype.constructor=e.MovieClip,Object.defineProperty(e.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),e.MovieClip.prototype.stop=function(){this.playing=!1},e.MovieClip.prototype.play=function(){this.playing=!0},e.MovieClip.prototype.gotoAndStop=function(t){this.playing=!1,this.currentFrame=t;var e=this.currentFrame+.5|0;this.setTexture(this.textures[e%this.textures.length])},e.MovieClip.prototype.gotoAndPlay=function(t){this.currentFrame=t,this.playing=!0},e.MovieClip.prototype.updateTransform=function(){if(this.displayObjectContainerUpdateTransform(),this.playing){this.currentFrame+=this.animationSpeed;var t=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||t<this.textures.length?this.setTexture(this.textures[t%this.textures.length]):t>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},e.MovieClip.fromFrames=function(t){for(var i=[],n=0;n<t.length;n++)i.push(new e.Texture.fromFrame(t[n]));return new e.MovieClip(i)},e.MovieClip.fromImages=function(t){for(var i=[],n=0;n<t.length;n++)i.push(new e.Texture.fromImage(t[n]));return new e.MovieClip(i)},e.FilterBlock=function(){this.visible=!0,this.renderable=!0},e.FilterBlock.prototype.constructor=e.FilterBlock,e.Text=function(t,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,e.Sprite.call(this,e.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(i)},e.Text.prototype=Object.create(e.Sprite.prototype),e.Text.prototype.constructor=e.Text,Object.defineProperty(e.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(e.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),e.Text.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},e.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},e.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),i=[],n=0,r=this.determineFontProperties(this.style.font),s=0;s<e.length;s++){var o=this.context.measureText(e[s]).width;i[s]=o,n=Math.max(n,o)}var a=n+this.style.strokeThickness;this.style.dropShadow&&(a+=this.style.dropShadowDistance),this.canvas.width=(a+this.context.lineWidth)*this.resolution;var l=r.fontSize+this.style.strokeThickness,h=l*e.length;this.style.dropShadow&&(h+=this.style.dropShadowDistance),this.canvas.height=h*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic";var c,u;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var d=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,p=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(s=0;s<e.length;s++)c=this.style.strokeThickness/2,u=this.style.strokeThickness/2+s*l+r.ascent,"right"===this.style.align?c+=n-i[s]:"center"===this.style.align&&(c+=(n-i[s])/2),this.style.fill&&this.context.fillText(e[s],c+d,u+p)}for(this.context.fillStyle=this.style.fill,s=0;s<e.length;s++)c=this.style.strokeThickness/2,u=this.style.strokeThickness/2+s*l+r.ascent,"right"===this.style.align?c+=n-i[s]:"center"===this.style.align&&(c+=(n-i[s])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[s],c,u),this.style.fill&&this.context.fillText(e[s],c,u);this.updateTexture()},e.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},e.Text.prototype._renderWebGL=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),e.Sprite.prototype._renderWebGL.call(this,t)},e.Text.prototype._renderCanvas=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),e.Sprite.prototype._renderCanvas.call(this,t)},e.Text.prototype.determineFontProperties=function(t){var i=e.Text.fontPropertiesCache[t];if(!i){i={};var n=e.Text.fontPropertiesCanvas,r=e.Text.fontPropertiesContext;r.font=t;var s=Math.ceil(r.measureText("|Mq").width),o=Math.ceil(r.measureText("M").width),a=2*o;o=1.4*o|0,n.width=s,n.height=a,r.fillStyle="#f00",r.fillRect(0,0,s,a),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText("|MÉq",0,o);var l,h,c=r.getImageData(0,0,s,a).data,u=c.length,d=4*s,p=0,f=!1;for(l=0;o>l;l++){for(h=0;d>h;h+=4)if(255!==c[p+h]){f=!0;break}if(f)break;p+=d}for(i.ascent=o-l,p=u-d,f=!1,l=a;l>o;l--){for(h=0;d>h;h+=4)if(255!==c[p+h]){f=!0;break}if(f)break;p-=d}i.descent=l-o,i.descent+=6,i.fontSize=i.ascent+i.descent,e.Text.fontPropertiesCache[t]=i}return i},e.Text.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),n=0;n<i.length;n++){for(var r=this.style.wordWrapWidth,s=i[n].split(" "),o=0;o<s.length;o++){var a=this.context.measureText(s[o]).width,l=a+this.context.measureText(" ").width;0===o||l>r?(o>0&&(e+="\n"),e+=s[o],r=this.style.wordWrapWidth-a):(r-=l,e+=" "+s[o])}n<i.length-1&&(e+="\n")}return e},e.Text.prototype.getBounds=function(t){return this.dirty&&(this.updateText(),this.dirty=!1),e.Sprite.prototype.getBounds.call(this,t)},e.Text.prototype.destroy=function(t){this.context=null,this.canvas=null,this.texture.destroy(void 0===t?!0:t)},e.Text.fontPropertiesCache={},e.Text.fontPropertiesCanvas=document.createElement("canvas"),e.Text.fontPropertiesContext=e.Text.fontPropertiesCanvas.getContext("2d"),e.BitmapText=function(t,i){e.DisplayObjectContainer.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this.setText(t),this.setStyle(i),this.updateText(),this.dirty=!1},e.BitmapText.prototype=Object.create(e.DisplayObjectContainer.prototype),e.BitmapText.prototype.constructor=e.BitmapText,e.BitmapText.prototype.setText=function(t){this.text=t||" ",this.dirty=!0},e.BitmapText.prototype.setStyle=function(t){t=t||{},t.align=t.align||"left",this.style=t;var i=t.font.split(" ");this.fontName=i[i.length-1],this.fontSize=i.length>=2?parseInt(i[i.length-2],10):e.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=t.tint},e.BitmapText.prototype.updateText=function(){for(var t=e.BitmapText.fonts[this.fontName],i=new e.Point,n=null,r=[],s=0,o=[],a=0,l=this.fontSize/t.size,h=0;h<this.text.length;h++){var c=this.text.charCodeAt(h);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(h)))o.push(i.x),s=Math.max(s,i.x),a++,i.x=0,i.y+=t.lineHeight,n=null;else{var u=t.chars[c];u&&(n&&u.kerning[n]&&(i.x+=u.kerning[n]),r.push({texture:u.texture,line:a,charCode:c,position:new e.Point(i.x+u.xOffset,i.y+u.yOffset)}),i.x+=u.xAdvance,n=c)}}o.push(i.x),s=Math.max(s,i.x);var d=[];for(h=0;a>=h;h++){
var p=0;"right"===this.style.align?p=s-o[h]:"center"===this.style.align&&(p=(s-o[h])/2),d.push(p)}var f=this.children.length,g=r.length,m=this.tint||16777215;for(h=0;g>h;h++){var v=f>h?this.children[h]:this._pool.pop();v?v.setTexture(r[h].texture):v=new e.Sprite(r[h].texture),v.position.x=(r[h].position.x+d[r[h].line])*l,v.position.y=r[h].position.y*l,v.scale.x=v.scale.y=l,v.tint=m,v.parent||this.addChild(v)}for(;this.children.length>g;){var b=this.getChildAt(this.children.length-1);this._pool.push(b),this.removeChild(b)}this.textWidth=s*l,this.textHeight=(i.y+t.lineHeight)*l},e.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),e.DisplayObjectContainer.prototype.updateTransform.call(this)},e.BitmapText.fonts={},e.InteractionData=function(){this.global=new e.Point,this.target=null,this.originalEvent=null},e.InteractionData.prototype.getLocalPosition=function(t,i){var n=t.worldTransform,r=this.global,s=n.a,o=n.c,a=n.tx,l=n.b,h=n.d,c=n.ty,u=1/(s*h+o*-l);return i=i||new e.Point,i.x=h*u*r.x+-o*u*r.y+(c*o-a*h)*u,i.y=s*u*r.y+-l*u*r.x+(-c*s+a*l)*u,i},e.InteractionData.prototype.constructor=e.InteractionData,e.InteractionManager=function(t){this.stage=t,this.mouse=new e.InteractionData,this.touches={},this.tempPoint=new e.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1,this._tempPoint=new e.Point},e.InteractionManager.prototype.constructor=e.InteractionManager,e.InteractionManager.prototype.collectInteractiveSprite=function(t,e){for(var i=t.children,n=i.length,r=n-1;r>=0;r--){var s=i[r];s._interactive?(e.interactiveChildren=!0,this.interactiveItems.push(s),s.children.length>0&&this.collectInteractiveSprite(s,s)):(s.__iParent=null,s.children.length>0&&this.collectInteractiveSprite(s,e))}},e.InteractionManager.prototype.setTarget=function(t){this.target=t,this.resolution=t.resolution,null===this.interactionDOMElement&&this.setTargetDomElement(t.view)},e.InteractionManager.prototype.setTargetDomElement=function(t){this.removeEvents(),window.navigator.msPointerEnabled&&(t.style["-ms-content-zooming"]="none",t.style["-ms-touch-action"]="none"),this.interactionDOMElement=t,t.addEventListener("mousemove",this.onMouseMove,!0),t.addEventListener("mousedown",this.onMouseDown,!0),t.addEventListener("mouseout",this.onMouseOut,!0),t.addEventListener("touchstart",this.onTouchStart,!0),t.addEventListener("touchend",this.onTouchEnd,!0),t.addEventListener("touchleave",this.onTouchCancel,!0),t.addEventListener("touchcancel",this.onTouchCancel,!0),t.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},e.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchleave",this.onTouchCancel,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onTouchCancel,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},e.InteractionManager.prototype.update=function(){if(this.target){var t=Date.now(),i=t-this.last;if(i=i*e.INTERACTION_FREQUENCY/1e3,!(1>i)){this.last=t;var n=0;this.dirty&&this.rebuildInteractiveGraph();var r=this.interactiveItems.length,s="inherit",o=!1;for(n=0;r>n;n++){var a=this.interactiveItems[n];a.__hit=this.hitTest(a,this.mouse),this.mouse.target=a,a.__hit&&!o?(a.buttonMode&&(s=a.defaultCursor),a.interactiveChildren||(o=!0),a.__isOver||(a.mouseover&&a.mouseover(this.mouse),a.__isOver=!0)):a.__isOver&&(a.mouseout&&a.mouseout(this.mouse),a.__isOver=!1)}this.currentCursorStyle!==s&&(this.currentCursorStyle=s,this.interactionDOMElement.style.cursor=s)}}},e.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var t=this.interactiveItems.length,e=0;t>e;e++)this.interactiveItems[e].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},e.InteractionManager.prototype.onMouseMove=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(t.clientX-e.left)*(this.target.width/e.width)/this.resolution,this.mouse.global.y=(t.clientY-e.top)*(this.target.height/e.height)/this.resolution;for(var i=this.interactiveItems.length,n=0;i>n;n++){var r=this.interactiveItems[n];r.mousemove&&r.mousemove(this.mouse)}},e.InteractionManager.prototype.onMouseDown=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t,e.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var i=this.interactiveItems.length,n=this.mouse.originalEvent,r=2===n.button||3===n.which,s=r?"rightdown":"mousedown",o=r?"rightclick":"click",a=r?"__rightIsDown":"__mouseIsDown",l=r?"__isRightDown":"__isDown",h=0;i>h;h++){var c=this.interactiveItems[h];if((c[s]||c[o])&&(c[a]=!0,c.__hit=this.hitTest(c,this.mouse),c.__hit&&(c[s]&&c[s](this.mouse),c[l]=!0,!c.interactiveChildren)))break}},e.InteractionManager.prototype.onMouseOut=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var i=0;e>i;i++){var n=this.interactiveItems[i];n.__isOver&&(this.mouse.target=n,n.mouseout&&n.mouseout(this.mouse),n.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},e.InteractionManager.prototype.onMouseUp=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;for(var e=this.interactiveItems.length,i=!1,n=this.mouse.originalEvent,r=2===n.button||3===n.which,s=r?"rightup":"mouseup",o=r?"rightclick":"click",a=r?"rightupoutside":"mouseupoutside",l=r?"__isRightDown":"__isDown",h=0;e>h;h++){var c=this.interactiveItems[h];(c[o]||c[s]||c[a])&&(c.__hit=this.hitTest(c,this.mouse),c.__hit&&!i?(c[s]&&c[s](this.mouse),c[l]&&c[o]&&c[o](this.mouse),c.interactiveChildren||(i=!0)):c[l]&&c[a]&&c[a](this.mouse),c[l]=!1)}},e.InteractionManager.prototype.hitTest=function(t,i){var n=i.global;if(!t.worldVisible)return!1;t.worldTransform.applyInverse(n,this._tempPoint);var r,s=this._tempPoint.x,o=this._tempPoint.y;if(i.target=t,t.hitArea&&t.hitArea.contains)return t.hitArea.contains(s,o);if(t instanceof e.Sprite){var a,l=t.texture.frame.width,h=t.texture.frame.height,c=-l*t.anchor.x;if(s>c&&c+l>s&&(a=-h*t.anchor.y,o>a&&a+h>o))return!0}else if(t instanceof e.Graphics){var u=t.graphicsData;for(r=0;r<u.length;r++){var d=u[r];if(d.fill&&d.shape&&d.shape.contains(s,o))return!0}}var p=t.children.length;for(r=0;p>r;r++){var f=t.children[r],g=this.hitTest(f,i);if(g)return i.target=t,!0}return!1},e.InteractionManager.prototype.onTouchMove=function(t){this.dirty&&this.rebuildInteractiveGraph();var e,i=this.interactionDOMElement.getBoundingClientRect(),n=t.changedTouches,r=0;for(r=0;r<n.length;r++){var s=n[r];e=this.touches[s.identifier],e.originalEvent=t,e.global.x=(s.clientX-i.left)*(this.target.width/i.width)/this.resolution,e.global.y=(s.clientY-i.top)*(this.target.height/i.height)/this.resolution,!navigator.isCocoonJS||i.left||i.top||t.target.style.width||t.target.style.height||(e.global.x=s.clientX,e.global.y=s.clientY);for(var o=0;o<this.interactiveItems.length;o++){var a=this.interactiveItems[o];a.touchmove&&a.__touchData&&a.__touchData[s.identifier]&&a.touchmove(e)}}},e.InteractionManager.prototype.onTouchStart=function(t){this.dirty&&this.rebuildInteractiveGraph();var i=this.interactionDOMElement.getBoundingClientRect();e.AUTO_PREVENT_DEFAULT&&t.preventDefault();for(var n=t.changedTouches,r=0;r<n.length;r++){var s=n[r],o=this.pool.pop();o||(o=new e.InteractionData),o.originalEvent=t,this.touches[s.identifier]=o,o.global.x=(s.clientX-i.left)*(this.target.width/i.width)/this.resolution,o.global.y=(s.clientY-i.top)*(this.target.height/i.height)/this.resolution,!navigator.isCocoonJS||i.left||i.top||t.target.style.width||t.target.style.height||(o.global.x=s.clientX,o.global.y=s.clientY);for(var a=this.interactiveItems.length,l=0;a>l;l++){var h=this.interactiveItems[l];if((h.touchstart||h.tap)&&(h.__hit=this.hitTest(h,o),h.__hit&&(h.touchstart&&h.touchstart(o),h.__isDown=!0,h.__touchData=h.__touchData||{},h.__touchData[s.identifier]=o,!h.interactiveChildren)))break}}},e.InteractionManager.prototype.onTouchEnd=function(t){this.dirty&&this.rebuildInteractiveGraph();for(var e=this.interactionDOMElement.getBoundingClientRect(),i=t.changedTouches,n=0;n<i.length;n++){var r=i[n],s=this.touches[r.identifier],o=!1;s.global.x=(r.clientX-e.left)*(this.target.width/e.width)/this.resolution,s.global.y=(r.clientY-e.top)*(this.target.height/e.height)/this.resolution,!navigator.isCocoonJS||e.left||e.top||t.target.style.width||t.target.style.height||(s.global.x=r.clientX,s.global.y=r.clientY);for(var a=this.interactiveItems.length,l=0;a>l;l++){var h=this.interactiveItems[l];h.__touchData&&h.__touchData[r.identifier]&&(h.__hit=this.hitTest(h,h.__touchData[r.identifier]),s.originalEvent=t,(h.touchend||h.tap)&&(h.__hit&&!o?(h.touchend&&h.touchend(s),h.__isDown&&h.tap&&h.tap(s),h.interactiveChildren||(o=!0)):h.__isDown&&h.touchendoutside&&h.touchendoutside(s),h.__isDown=!1),h.__touchData[r.identifier]=null)}this.pool.push(s),this.touches[r.identifier]=null}},e.InteractionManager.prototype.onTouchCancel=function(t){this.dirty&&this.rebuildInteractiveGraph();for(var e=this.interactionDOMElement.getBoundingClientRect(),i=t.changedTouches,n=0;n<i.length;n++){var r=i[n],s=this.touches[r.identifier],o=!1;s.global.x=(r.clientX-e.left)*(this.target.width/e.width)/this.resolution,s.global.y=(r.clientY-e.top)*(this.target.height/e.height)/this.resolution,!navigator.isCocoonJS||e.left||e.top||t.target.style.width||t.target.style.height||(s.global.x=r.clientX,s.global.y=r.clientY);for(var a=this.interactiveItems.length,l=0;a>l;l++){var h=this.interactiveItems[l];h.__touchData&&h.__touchData[r.identifier]&&(h.__hit=this.hitTest(h,h.__touchData[r.identifier]),s.originalEvent=t,h.touchcancel&&!o&&(h.touchcancel(s),h.interactiveChildren||(o=!0)),h.__isDown=!1,h.__touchData[r.identifier]=null)}this.pool.push(s),this.touches[r.identifier]=null}},e.Stage=function(t){e.DisplayObjectContainer.call(this),this.worldTransform=new e.Matrix,this.interactive=!0,this.interactionManager=new e.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new e.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(t)},e.Stage.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Stage.prototype.constructor=e.Stage,e.Stage.prototype.setInteractionDelegate=function(t){this.interactionManager.setTargetDomElement(t)},e.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},e.Stage.prototype.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=e.hex2rgb(this.backgroundColor);var i=this.backgroundColor.toString(16);i="000000".substr(0,6-i.length)+i,this.backgroundColorString="#"+i},e.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},function(t){for(var e=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!t.requestAnimationFrame;++n)t.requestAnimationFrame=t[i[n]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[i[n]+"CancelAnimationFrame"]||t[i[n]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(i){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),s=t.setTimeout(function(){i(n+r)},r);return e=n+r,s}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)}),t.requestAnimFrame=t.requestAnimationFrame}(this),e.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},e.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){return function(t){function e(){for(var n=arguments.length,s=new Array(n);n--;)s[n]=arguments[n];return s=r.concat(s),i.apply(this instanceof e?this:t,s)}var i=this,n=arguments.length-1,r=[];if(n>0)for(r.length=n;n--;)r[n]=arguments[n+1];if("function"!=typeof i)throw new TypeError;return e.prototype=function s(t){return t&&(s.prototype=t),this instanceof s?void 0:new s}(i.prototype),e}}()),e.AjaxRequest=function(){var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var e=0;e<t.length;e++)try{return new window.ActiveXObject(t[e])}catch(i){}},e.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="#000",e.fillRect(0,0,1,1),e.globalCompositeOperation="multiply",e.fillStyle="#fff",e.fillRect(0,0,1,1),0===e.getImageData(0,0,1,1).data[0]},e.getNextPowerOfTwo=function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},e.isPowerOfTwo=function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},e.EventTarget={call:function(t){t&&(t=t.prototype||t,e.EventTarget.mixin(t))},mixin:function(t){t.listeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?this._listeners[t].slice():[]},t.emit=t.dispatchEvent=function(t,i){if(this._listeners=this._listeners||{},"object"==typeof t&&(i=t,t=t.type),i&&i.__isEventObject===!0||(i=new e.Event(this,t,i)),this._listeners&&this._listeners[t]){var n,r=this._listeners[t].slice(0),s=r.length,o=r[0];for(n=0;s>n;o=r[++n])if(o.call(this,i),i.stoppedImmediate)return this;if(i.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,t,i),this},t.on=t.addEventListener=function(t,e){return this._listeners=this._listeners||{},(this._listeners[t]=this._listeners[t]||[]).push(e),this},t.once=function(t,e){function i(){e.apply(n.off(t,i),arguments)}this._listeners=this._listeners||{};var n=this;return i._originalHandler=e,this.on(t,i)},t.off=t.removeEventListener=function(t,e){if(this._listeners=this._listeners||{},!this._listeners[t])return this;for(var i=this._listeners[t],n=e?i.length:0;n-- >0;)(i[n]===e||i[n]._originalHandler===e)&&i.splice(n,1);return 0===i.length&&delete this._listeners[t],this},t.removeAllListeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?(delete this._listeners[t],this):this}}},e.Event=function(t,e,i){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=t,this.type=e,this.data=i,this.content=i,this.timeStamp=Date.now()},e.Event.prototype.stopPropagation=function(){this.stopped=!0},e.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0},e.autoDetectRenderer=function(t,i,n){t||(t=800),i||(i=600);var r=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}();return r?new e.WebGLRenderer(t,i,n):new e.CanvasRenderer(t,i,n)},e.autoDetectRecommendedRenderer=function(t,i,n){t||(t=800),i||(i=600);var r=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}(),s=/Android/i.test(navigator.userAgent);return r&&!s?new e.WebGLRenderer(t,i,n):new e.CanvasRenderer(t,i,n)},e.PolyK={},e.PolyK.Triangulate=function(t){var i=!0,n=t.length>>1;if(3>n)return[];for(var r=[],s=[],o=0;n>o;o++)s.push(o);o=0;for(var a=n;a>3;){var l=s[(o+0)%a],h=s[(o+1)%a],c=s[(o+2)%a],u=t[2*l],d=t[2*l+1],p=t[2*h],f=t[2*h+1],g=t[2*c],m=t[2*c+1],v=!1;if(e.PolyK._convex(u,d,p,f,g,m,i)){v=!0;for(var b=0;a>b;b++){var y=s[b];if(y!==l&&y!==h&&y!==c&&e.PolyK._PointInTriangle(t[2*y],t[2*y+1],u,d,p,f,g,m)){v=!1;break}}}if(v)r.push(l,h,c),s.splice((o+1)%a,1),a--,o=0;else if(o++>3*a){if(!i)return null;for(r=[],s=[],o=0;n>o;o++)s.push(o);o=0,a=n,i=!1}}return r.push(s[0],s[1],s[2]),r},e.PolyK._PointInTriangle=function(t,e,i,n,r,s,o,a){var l=o-i,h=a-n,c=r-i,u=s-n,d=t-i,p=e-n,f=l*l+h*h,g=l*c+h*u,m=l*d+h*p,v=c*c+u*u,b=c*d+u*p,y=1/(f*v-g*g),_=(v*m-g*b)*y,x=(f*b-g*m)*y;return _>=0&&x>=0&&1>_+x},e.PolyK._convex=function(t,e,i,n,r,s,o){return(e-n)*(r-i)+(i-t)*(s-n)>=0===o},e.initDefaultShaders=function(){},e.CompileVertexShader=function(t,i){return e._CompileShader(t,i,t.VERTEX_SHADER)},e.CompileFragmentShader=function(t,i){return e._CompileShader(t,i,t.FRAGMENT_SHADER)},e._CompileShader=function(t,e,i){var n=e.join("\n"),r=t.createShader(i);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(window.console.log(t.getShaderInfoLog(r)),null)},e.compileProgram=function(t,i,n){var r=e.CompileFragmentShader(t,n),s=e.CompileVertexShader(t,i),o=t.createProgram();return t.attachShader(o,s),t.attachShader(o,r),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||window.console.log("Could not initialise shaders"),o},e.PixiShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},e.PixiShader.prototype.constructor=e.PixiShader,e.PixiShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc||e.PixiShader.defaultVertexSrc,this.fragmentSrc);t.useProgram(i),this.uSampler=t.getUniformLocation(i,"uSampler"),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.dimensions=t.getUniformLocation(i,"dimensions"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(i,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(i,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var n in this.uniforms)this.uniforms[n].uniformLocation=t.getUniformLocation(i,n);this.initUniforms(),this.program=i},e.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var i in this.uniforms){t=this.uniforms[i];var n=t.type;"sampler2D"===n?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"===n||"mat3"===n||"mat4"===n?(t.glMatrix=!0,t.glValueLength=1,"mat2"===n?t.glFunc=e.uniformMatrix2fv:"mat3"===n?t.glFunc=e.uniformMatrix3fv:"mat4"===n&&(t.glFunc=e.uniformMatrix4fv)):(t.glFunc=e["uniform"+n],"2f"===n||"2i"===n?t.glValueLength=2:"3f"===n||"3i"===n?t.glValueLength=3:"4f"===n||"4i"===n?t.glValueLength=4:t.glValueLength=1)}},e.PixiShader.prototype.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){var e=this.gl;if(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),t.textureData){var i=t.textureData,n=i.magFilter?i.magFilter:e.LINEAR,r=i.minFilter?i.minFilter:e.LINEAR,s=i.wrapS?i.wrapS:e.CLAMP_TO_EDGE,o=i.wrapT?i.wrapT:e.CLAMP_TO_EDGE,a=i.luminance?e.LUMINANCE:e.RGBA;if(i.repeat&&(s=e.REPEAT,o=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var l=i.width?i.width:512,h=i.height?i.height:2,c=i.border?i.border:0;e.texImage2D(e.TEXTURE_2D,0,a,l,h,c,a,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,a,e.RGBA,e.UNSIGNED_BYTE,t.value.baseTexture.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,o)}e.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},e.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var t,i=this.gl;for(var n in this.uniforms)t=this.uniforms[n],1===t.glValueLength?t.glMatrix===!0?t.glFunc.call(i,t.uniformLocation,t.transpose,t.value):t.glFunc.call(i,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength?t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"===t.type&&(t._init?(i.activeTexture(i["TEXTURE"+this.textureCount]),t.value.baseTexture._dirty[i.id]?e.instances[i.id].updateTexture(t.value.baseTexture):i.bindTexture(i.TEXTURE_2D,t.value.baseTexture._glTextures[i.id]),i.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},e.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},e.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"],e.PixiFastShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},e.PixiFastShader.prototype.constructor=e.PixiFastShader,e.PixiFastShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(i),this.uSampler=t.getUniformLocation(i,"uSampler"),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.dimensions=t.getUniformLocation(i,"dimensions"),this.uMatrix=t.getUniformLocation(i,"uMatrix"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.aPositionCoord=t.getAttribLocation(i,"aPositionCoord"),this.aScale=t.getAttribLocation(i,"aScale"),this.aRotation=t.getAttribLocation(i,"aRotation"),this.aTextureCoord=t.getAttribLocation(i,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(i,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=i},e.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},e.StripShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},e.StripShader.prototype.constructor=e.StripShader,e.StripShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(i),this.uSampler=t.getUniformLocation(i,"uSampler"),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.colorAttribute=t.getAttribLocation(i,"aColor"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(i,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=t.getUniformLocation(i,"translationMatrix"),this.alpha=t.getUniformLocation(i,"alpha"),this.program=i},e.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},e.PrimitiveShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},e.PrimitiveShader.prototype.constructor=e.PrimitiveShader,e.PrimitiveShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(i),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.tintColor=t.getUniformLocation(i,"tint"),this.flipY=t.getUniformLocation(i,"flipY"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(i,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(i,"translationMatrix"),this.alpha=t.getUniformLocation(i,"alpha"),this.program=i},e.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},e.ComplexPrimitiveShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},e.ComplexPrimitiveShader.prototype.constructor=e.ComplexPrimitiveShader,e.ComplexPrimitiveShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(i),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.tintColor=t.getUniformLocation(i,"tint"),this.color=t.getUniformLocation(i,"color"),this.flipY=t.getUniformLocation(i,"flipY"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(i,"translationMatrix"),this.alpha=t.getUniformLocation(i,"alpha"),this.program=i},e.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},e.WebGLGraphics=function(){},e.WebGLGraphics.renderGraphics=function(t,i){var n,r=i.gl,s=i.projection,o=i.offset,a=i.shaderManager.primitiveShader;t.dirty&&e.WebGLGraphics.updateGraphics(t,r);for(var l=t._webGL[r.id],h=0;h<l.data.length;h++)1===l.data[h].mode?(n=l.data[h],i.stencilManager.pushStencil(t,n,i),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(n.indices.length-4)),i.stencilManager.popStencil(t,n,i)):(n=l.data[h],i.shaderManager.setShader(a),a=i.shaderManager.primitiveShader,r.uniformMatrix3fv(a.translationMatrix,!1,t.worldTransform.toArray(!0)),r.uniform1f(a.flipY,1),r.uniform2f(a.projectionVector,s.x,-s.y),r.uniform2f(a.offsetVector,-o.x,-o.y),r.uniform3fv(a.tintColor,e.hex2rgb(t.tint)),r.uniform1f(a.alpha,t.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,n.buffer),r.vertexAttribPointer(a.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(a.colorAttribute,4,r.FLOAT,!1,24,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n.indexBuffer),r.drawElements(r.TRIANGLE_STRIP,n.indices.length,r.UNSIGNED_SHORT,0))},e.WebGLGraphics.updateGraphics=function(t,i){var n=t._webGL[i.id];n||(n=t._webGL[i.id]={lastIndex:0,data:[],gl:i}),t.dirty=!1;var r;if(t.clearDirty){for(t.clearDirty=!1,r=0;r<n.data.length;r++){var s=n.data[r];s.reset(),e.WebGLGraphics.graphicsDataPool.push(s)}n.data=[],n.lastIndex=0}var o;for(r=n.lastIndex;r<t.graphicsData.length;r++){var a=t.graphicsData[r];if(a.type===e.Graphics.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]!==a.points[a.points.length-2]||a.points[1]!==a.points[a.points.length-1])&&a.points.push(a.points[0],a.points[1]),a.fill&&a.points.length>=6)if(a.points.length<12){o=e.WebGLGraphics.switchMode(n,0);var l=e.WebGLGraphics.buildPoly(a,o);l||(o=e.WebGLGraphics.switchMode(n,1),e.WebGLGraphics.buildComplexPoly(a,o))}else o=e.WebGLGraphics.switchMode(n,1),e.WebGLGraphics.buildComplexPoly(a,o);a.lineWidth>0&&(o=e.WebGLGraphics.switchMode(n,0),e.WebGLGraphics.buildLine(a,o))}else o=e.WebGLGraphics.switchMode(n,0),a.type===e.Graphics.RECT?e.WebGLGraphics.buildRectangle(a,o):a.type===e.Graphics.CIRC||a.type===e.Graphics.ELIP?e.WebGLGraphics.buildCircle(a,o):a.type===e.Graphics.RREC&&e.WebGLGraphics.buildRoundedRectangle(a,o);n.lastIndex++}for(r=0;r<n.data.length;r++)o=n.data[r],o.dirty&&o.upload()},e.WebGLGraphics.switchMode=function(t,i){var n;return t.data.length?(n=t.data[t.data.length-1],(n.mode!==i||1===i)&&(n=e.WebGLGraphics.graphicsDataPool.pop()||new e.WebGLGraphicsData(t.gl),n.mode=i,t.data.push(n))):(n=e.WebGLGraphics.graphicsDataPool.pop()||new e.WebGLGraphicsData(t.gl),n.mode=i,t.data.push(n)),n.dirty=!0,n},e.WebGLGraphics.buildRectangle=function(t,i){
var n=t.shape,r=n.x,s=n.y,o=n.width,a=n.height;if(t.fill){var l=e.hex2rgb(t.fillColor),h=t.fillAlpha,c=l[0]*h,u=l[1]*h,d=l[2]*h,p=i.points,f=i.indices,g=p.length/6;p.push(r,s),p.push(c,u,d,h),p.push(r+o,s),p.push(c,u,d,h),p.push(r,s+a),p.push(c,u,d,h),p.push(r+o,s+a),p.push(c,u,d,h),f.push(g,g,g+1,g+2,g+3,g+3)}if(t.lineWidth){var m=t.points;t.points=[r,s,r+o,s,r+o,s+a,r,s+a,r,s],e.WebGLGraphics.buildLine(t,i),t.points=m}},e.WebGLGraphics.buildRoundedRectangle=function(t,i){var n=t.shape,r=n.x,s=n.y,o=n.width,a=n.height,l=n.radius,h=[];if(h.push(r,s+l),h=h.concat(e.WebGLGraphics.quadraticBezierCurve(r,s+a-l,r,s+a,r+l,s+a)),h=h.concat(e.WebGLGraphics.quadraticBezierCurve(r+o-l,s+a,r+o,s+a,r+o,s+a-l)),h=h.concat(e.WebGLGraphics.quadraticBezierCurve(r+o,s+l,r+o,s,r+o-l,s)),h=h.concat(e.WebGLGraphics.quadraticBezierCurve(r+l,s,r,s,r,s+l)),t.fill){var c=e.hex2rgb(t.fillColor),u=t.fillAlpha,d=c[0]*u,p=c[1]*u,f=c[2]*u,g=i.points,m=i.indices,v=g.length/6,b=e.PolyK.Triangulate(h),y=0;for(y=0;y<b.length;y+=3)m.push(b[y]+v),m.push(b[y]+v),m.push(b[y+1]+v),m.push(b[y+2]+v),m.push(b[y+2]+v);for(y=0;y<h.length;y++)g.push(h[y],h[++y],d,p,f,u)}if(t.lineWidth){var _=t.points;t.points=h,e.WebGLGraphics.buildLine(t,i),t.points=_}},e.WebGLGraphics.quadraticBezierCurve=function(t,e,i,n,r,s){function o(t,e,i){var n=e-t;return t+n*i}for(var a,l,h,c,u,d,p=20,f=[],g=0,m=0;p>=m;m++)g=m/p,a=o(t,i,g),l=o(e,n,g),h=o(i,r,g),c=o(n,s,g),u=o(a,h,g),d=o(l,c,g),f.push(u,d);return f},e.WebGLGraphics.buildCircle=function(t,i){var n,r,s=t.shape,o=s.x,a=s.y;t.type===e.Graphics.CIRC?(n=s.radius,r=s.radius):(n=s.width,r=s.height);var l=40,h=2*Math.PI/l,c=0;if(t.fill){var u=e.hex2rgb(t.fillColor),d=t.fillAlpha,p=u[0]*d,f=u[1]*d,g=u[2]*d,m=i.points,v=i.indices,b=m.length/6;for(v.push(b),c=0;l+1>c;c++)m.push(o,a,p,f,g,d),m.push(o+Math.sin(h*c)*n,a+Math.cos(h*c)*r,p,f,g,d),v.push(b++,b++);v.push(b-1)}if(t.lineWidth){var y=t.points;for(t.points=[],c=0;l+1>c;c++)t.points.push(o+Math.sin(h*c)*n,a+Math.cos(h*c)*r);e.WebGLGraphics.buildLine(t,i),t.points=y}},e.WebGLGraphics.buildLine=function(t,i){var n=0,r=t.points;if(0!==r.length){if(t.lineWidth%2)for(n=0;n<r.length;n++)r[n]+=.5;var s=new e.Point(r[0],r[1]),o=new e.Point(r[r.length-2],r[r.length-1]);if(s.x===o.x&&s.y===o.y){r=r.slice(),r.pop(),r.pop(),o=new e.Point(r[r.length-2],r[r.length-1]);var a=o.x+.5*(s.x-o.x),l=o.y+.5*(s.y-o.y);r.unshift(a,l),r.push(a,l)}var h,c,u,d,p,f,g,m,v,b,y,_,x,w,T,C,S,E,M,A,k,P,R,B=i.points,I=i.indices,L=r.length/2,O=r.length,D=B.length/6,F=t.lineWidth/2,N=e.hex2rgb(t.lineColor),$=t.lineAlpha,j=N[0]*$,U=N[1]*$,H=N[2]*$;for(u=r[0],d=r[1],p=r[2],f=r[3],v=-(d-f),b=u-p,R=Math.sqrt(v*v+b*b),v/=R,b/=R,v*=F,b*=F,B.push(u-v,d-b,j,U,H,$),B.push(u+v,d+b,j,U,H,$),n=1;L-1>n;n++)u=r[2*(n-1)],d=r[2*(n-1)+1],p=r[2*n],f=r[2*n+1],g=r[2*(n+1)],m=r[2*(n+1)+1],v=-(d-f),b=u-p,R=Math.sqrt(v*v+b*b),v/=R,b/=R,v*=F,b*=F,y=-(f-m),_=p-g,R=Math.sqrt(y*y+_*_),y/=R,_/=R,y*=F,_*=F,T=-b+d-(-b+f),C=-v+p-(-v+u),S=(-v+u)*(-b+f)-(-v+p)*(-b+d),E=-_+m-(-_+f),M=-y+p-(-y+g),A=(-y+g)*(-_+f)-(-y+p)*(-_+m),k=T*M-E*C,Math.abs(k)<.1?(k+=10.1,B.push(p-v,f-b,j,U,H,$),B.push(p+v,f+b,j,U,H,$)):(h=(C*A-M*S)/k,c=(E*S-T*A)/k,P=(h-p)*(h-p)+(c-f)+(c-f),P>19600?(x=v-y,w=b-_,R=Math.sqrt(x*x+w*w),x/=R,w/=R,x*=F,w*=F,B.push(p-x,f-w),B.push(j,U,H,$),B.push(p+x,f+w),B.push(j,U,H,$),B.push(p-x,f-w),B.push(j,U,H,$),O++):(B.push(h,c),B.push(j,U,H,$),B.push(p-(h-p),f-(c-f)),B.push(j,U,H,$)));for(u=r[2*(L-2)],d=r[2*(L-2)+1],p=r[2*(L-1)],f=r[2*(L-1)+1],v=-(d-f),b=u-p,R=Math.sqrt(v*v+b*b),v/=R,b/=R,v*=F,b*=F,B.push(p-v,f-b),B.push(j,U,H,$),B.push(p+v,f+b),B.push(j,U,H,$),I.push(D),n=0;O>n;n++)I.push(D++);I.push(D-1)}},e.WebGLGraphics.buildComplexPoly=function(t,i){var n=t.points.slice();if(!(n.length<6)){var r=i.indices;i.points=n,i.alpha=t.fillAlpha,i.color=e.hex2rgb(t.fillColor);for(var s,o,a=1/0,l=-(1/0),h=1/0,c=-(1/0),u=0;u<n.length;u+=2)s=n[u],o=n[u+1],a=a>s?s:a,l=s>l?s:l,h=h>o?o:h,c=o>c?o:c;n.push(a,h,l,h,l,c,a,c);var d=n.length/2;for(u=0;d>u;u++)r.push(u)}},e.WebGLGraphics.buildPoly=function(t,i){var n=t.points;if(!(n.length<6)){var r=i.points,s=i.indices,o=n.length/2,a=e.hex2rgb(t.fillColor),l=t.fillAlpha,h=a[0]*l,c=a[1]*l,u=a[2]*l,d=e.PolyK.Triangulate(n);if(!d)return!1;var p=r.length/6,f=0;for(f=0;f<d.length;f+=3)s.push(d[f]+p),s.push(d[f]+p),s.push(d[f+1]+p),s.push(d[f+2]+p),s.push(d[f+2]+p);for(f=0;o>f;f++)r.push(n[2*f],n[2*f+1],h,c,u,l);return!0}},e.WebGLGraphics.graphicsDataPool=[],e.WebGLGraphicsData=function(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},e.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},e.WebGLGraphicsData.prototype.upload=function(){var t=this.gl;this.glPoints=new e.Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndicies=new e.Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndicies,t.STATIC_DRAW),this.dirty=!1},e.glContexts=[],e.instances=[],e.WebGLRenderer=function(t,i,n){if(n)for(var r in e.defaultRenderOptions)"undefined"==typeof n[r]&&(n[r]=e.defaultRenderOptions[r]);else n=e.defaultRenderOptions;e.defaultRenderer||(e.sayHello("webGL"),e.defaultRenderer=this),this.type=e.WEBGL_RENDERER,this.resolution=n.resolution,this.transparent=n.transparent,this.autoResize=n.autoResize||!1,this.preserveDrawingBuffer=n.preserveDrawingBuffer,this.clearBeforeRender=n.clearBeforeRender,this.width=t||800,this.height=i||600,this.view=n.view||document.createElement("canvas"),this.contextLostBound=this.handleContextLost.bind(this),this.contextRestoredBound=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLostBound,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredBound,!1),this._contextOptions={alpha:this.transparent,antialias:n.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer},this.projection=new e.Point,this.offset=new e.Point(0,0),this.shaderManager=new e.WebGLShaderManager,this.spriteBatch=new e.WebGLSpriteBatch,this.maskManager=new e.WebGLMaskManager,this.filterManager=new e.WebGLFilterManager,this.stencilManager=new e.WebGLStencilManager,this.blendModeManager=new e.WebGLBlendModeManager,this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,this.renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},e.WebGLRenderer.prototype.constructor=e.WebGLRenderer,e.WebGLRenderer.prototype.initContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=t.id=e.WebGLRenderer.glContextId++,e.glContexts[this.glContextId]=t,e.instances[this.glContextId]=this,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.shaderManager.setContext(t),this.spriteBatch.setContext(t),this.maskManager.setContext(t),this.filterManager.setContext(t),this.blendModeManager.setContext(t),this.stencilManager.setContext(t),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},e.WebGLRenderer.prototype.render=function(t){if(!this.contextLost){this.__stage!==t&&(t.interactive&&t.interactionManager.removeEvents(),this.__stage=t),t.updateTransform();var e=this.gl;t._interactive?t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)):t._interactiveEventsAdded&&(t._interactiveEventsAdded=!1,t.interactionManager.setTarget(this)),e.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?e.clearColor(0,0,0,0):e.clearColor(t.backgroundColorSplit[0],t.backgroundColorSplit[1],t.backgroundColorSplit[2],1),e.clear(e.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.projection)}},e.WebGLRenderer.prototype.renderDisplayObject=function(t,i,n){this.renderSession.blendModeManager.setBlendMode(e.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=n?-1:1,this.renderSession.projection=i,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,n),t._renderWebGL(this.renderSession),this.spriteBatch.end()},e.WebGLRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},e.WebGLRenderer.prototype.updateTexture=function(t){if(t.hasLoaded){var i=this.gl;return t._glTextures[i.id]||(t._glTextures[i.id]=i.createTexture()),i.bindTexture(i.TEXTURE_2D,t._glTextures[i.id]),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t.source),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t.scaleMode===e.scaleModes.LINEAR?i.LINEAR:i.NEAREST),t.mipmap&&e.isPowerOfTwo(t.width,t.height)?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t.scaleMode===e.scaleModes.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),i.generateMipmap(i.TEXTURE_2D)):i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t.scaleMode===e.scaleModes.LINEAR?i.LINEAR:i.NEAREST),t._powerOf2?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.REPEAT)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE)),t._dirty[i.id]=!1,t._glTextures[i.id]}},e.WebGLRenderer.prototype.handleContextLost=function(t){t.preventDefault(),this.contextLost=!0},e.WebGLRenderer.prototype.handleContextRestored=function(){this.initContext();for(var t in e.TextureCache){var i=e.TextureCache[t].baseTexture;i._glTextures=[]}this.contextLost=!1},e.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLostBound),this.view.removeEventListener("webglcontextrestored",this.contextRestoredBound),e.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},e.WebGLRenderer.prototype.mapBlendModes=function(){var t=this.gl;e.blendModesWebGL||(e.blendModesWebGL=[],e.blendModesWebGL[e.blendModes.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],e.blendModesWebGL[e.blendModes.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.SCREEN]=[t.SRC_ALPHA,t.ONE],e.blendModesWebGL[e.blendModes.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA])},e.WebGLRenderer.glContextId=0,e.WebGLBlendModeManager=function(){this.currentBlendMode=99999},e.WebGLBlendModeManager.prototype.constructor=e.WebGLBlendModeManager,e.WebGLBlendModeManager.prototype.setContext=function(t){this.gl=t},e.WebGLBlendModeManager.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var i=e.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(i[0],i[1]),!0},e.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},e.WebGLMaskManager=function(){},e.WebGLMaskManager.prototype.constructor=e.WebGLMaskManager,e.WebGLMaskManager.prototype.setContext=function(t){this.gl=t},e.WebGLMaskManager.prototype.pushMask=function(t,i){var n=i.gl;t.dirty&&e.WebGLGraphics.updateGraphics(t,n),t._webGL[n.id].data.length&&i.stencilManager.pushStencil(t,t._webGL[n.id].data[0],i)},e.WebGLMaskManager.prototype.popMask=function(t,e){var i=this.gl;e.stencilManager.popStencil(t,t._webGL[i.id].data[0],e)},e.WebGLMaskManager.prototype.destroy=function(){this.gl=null},e.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},e.WebGLStencilManager.prototype.setContext=function(t){this.gl=t},e.WebGLStencilManager.prototype.pushStencil=function(t,e,i){var n=this.gl;this.bindGraphics(t,e,i),0===this.stencilStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(e);var r=this.count;n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),1===e.mode?(n.drawElements(n.TRIANGLE_FAN,e.indices.length-4,n.UNSIGNED_SHORT,0),this.reverse?(n.stencilFunc(n.EQUAL,255-r,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,r,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),this.reverse?n.stencilFunc(n.EQUAL,255-(r+1),255):n.stencilFunc(n.EQUAL,r+1,255),this.reverse=!this.reverse):(this.reverse?(n.stencilFunc(n.EQUAL,r,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,255-r,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,r+1,255):n.stencilFunc(n.EQUAL,255-(r+1),255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.count++},e.WebGLStencilManager.prototype.bindGraphics=function(t,i,n){this._currentGraphics=t;var r,s=this.gl,o=n.projection,a=n.offset;1===i.mode?(r=n.shaderManager.complexPrimitiveShader,n.shaderManager.setShader(r),s.uniform1f(r.flipY,n.flipY),s.uniformMatrix3fv(r.translationMatrix,!1,t.worldTransform.toArray(!0)),s.uniform2f(r.projectionVector,o.x,-o.y),s.uniform2f(r.offsetVector,-a.x,-a.y),s.uniform3fv(r.tintColor,e.hex2rgb(t.tint)),s.uniform3fv(r.color,i.color),s.uniform1f(r.alpha,t.worldAlpha*i.alpha),s.bindBuffer(s.ARRAY_BUFFER,i.buffer),s.vertexAttribPointer(r.aVertexPosition,2,s.FLOAT,!1,8,0),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,i.indexBuffer)):(r=n.shaderManager.primitiveShader,n.shaderManager.setShader(r),s.uniformMatrix3fv(r.translationMatrix,!1,t.worldTransform.toArray(!0)),s.uniform1f(r.flipY,n.flipY),s.uniform2f(r.projectionVector,o.x,-o.y),s.uniform2f(r.offsetVector,-a.x,-a.y),s.uniform3fv(r.tintColor,e.hex2rgb(t.tint)),s.uniform1f(r.alpha,t.worldAlpha),s.bindBuffer(s.ARRAY_BUFFER,i.buffer),s.vertexAttribPointer(r.aVertexPosition,2,s.FLOAT,!1,24,0),s.vertexAttribPointer(r.colorAttribute,4,s.FLOAT,!1,24,8),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,i.indexBuffer))},e.WebGLStencilManager.prototype.popStencil=function(t,e,i){var n=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)n.disable(n.STENCIL_TEST);else{var r=this.count;this.bindGraphics(t,e,i),n.colorMask(!1,!1,!1,!1),1===e.mode?(this.reverse=!this.reverse,this.reverse?(n.stencilFunc(n.EQUAL,255-(r+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,r+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),n.drawElements(n.TRIANGLE_FAN,e.indices.length-4,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,r,255):n.stencilFunc(n.EQUAL,255-r,255)):(this.reverse?(n.stencilFunc(n.EQUAL,r+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,255-(r+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,r,255):n.stencilFunc(n.EQUAL,255-r,255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)}},e.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},e.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.stack=[]},e.WebGLShaderManager.prototype.constructor=e.WebGLShaderManager,e.WebGLShaderManager.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new e.PrimitiveShader(t),this.complexPrimitiveShader=new e.ComplexPrimitiveShader(t),this.defaultShader=new e.PixiShader(t),this.fastShader=new e.PixiFastShader(t),this.stripShader=new e.StripShader(t),this.setShader(this.defaultShader)},e.WebGLShaderManager.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(e=0;e<t.length;e++){var i=t[e];this.tempAttribState[i]=!0}var n=this.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?n.enableVertexAttribArray(e):n.disableVertexAttribArray(e))},e.WebGLShaderManager.prototype.setShader=function(t){return this._currentId===t._UID?!1:(this._currentId=t._UID,this.currentShader=t,this.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},e.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},e.WebGLSpriteBatch=function(){this.vertSize=5,this.size=2e3;var t=4*this.size*4*this.vertSize,i=6*this.size;this.vertices=new e.ArrayBuffer(t),this.positions=new e.Float32Array(this.vertices),this.colors=new e.Uint32Array(this.vertices),this.indices=new e.Uint16Array(i),this.lastIndexCount=0;for(var n=0,r=0;i>n;n+=6,r+=4)this.indices[n+0]=r+0,this.indices[n+1]=r+1,this.indices[n+2]=r+2,this.indices[n+3]=r+0,this.indices[n+4]=r+2,this.indices[n+5]=r+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new e.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},e.WebGLSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999;var i=new e.PixiShader(t);i.fragmentSrc=this.defaultShader.fragmentSrc,i.uniforms={},i.init(),this.defaultShader.shaders[t.id]=i},e.WebGLSpriteBatch.prototype.begin=function(t){this.renderSession=t,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},e.WebGLSpriteBatch.prototype.end=function(){this.flush()},e.WebGLSpriteBatch.prototype.render=function(t){var e=t.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture);var i=e._uvs;if(i){var n,r,s,o,a=t.anchor.x,l=t.anchor.y;if(e.trim){var h=e.trim;r=h.x-a*h.width,n=r+e.crop.width,o=h.y-l*h.height,s=o+e.crop.height}else n=e.frame.width*(1-a),r=e.frame.width*-a,s=e.frame.height*(1-l),o=e.frame.height*-l;var c=4*this.currentBatchSize*this.vertSize,u=e.baseTexture.resolution,d=t.worldTransform,p=d.a/u,f=d.b/u,g=d.c/u,m=d.d/u,v=d.tx,b=d.ty,y=this.colors,_=this.positions;this.renderSession.roundPixels?(_[c]=p*r+g*o+v|0,_[c+1]=m*o+f*r+b|0,_[c+5]=p*n+g*o+v|0,_[c+6]=m*o+f*n+b|0,_[c+10]=p*n+g*s+v|0,_[c+11]=m*s+f*n+b|0,_[c+15]=p*r+g*s+v|0,_[c+16]=m*s+f*r+b|0):(_[c]=p*r+g*o+v,_[c+1]=m*o+f*r+b,_[c+5]=p*n+g*o+v,_[c+6]=m*o+f*n+b,_[c+10]=p*n+g*s+v,_[c+11]=m*s+f*n+b,_[c+15]=p*r+g*s+v,_[c+16]=m*s+f*r+b),_[c+2]=i.x0,_[c+3]=i.y0,_[c+7]=i.x1,_[c+8]=i.y1,_[c+12]=i.x2,_[c+13]=i.y2,_[c+17]=i.x3,_[c+18]=i.y3;var x=t.tint;y[c+4]=y[c+9]=y[c+14]=y[c+19]=(x>>16)+(65280&x)+((255&x)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},e.WebGLSpriteBatch.prototype.renderTilingSprite=function(t){var i=t.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=i.baseTexture),t._uvs||(t._uvs=new e.TextureUvs);var n=t._uvs;t.tilePosition.x%=i.baseTexture.width*t.tileScaleOffset.x,t.tilePosition.y%=i.baseTexture.height*t.tileScaleOffset.y;var r=t.tilePosition.x/(i.baseTexture.width*t.tileScaleOffset.x),s=t.tilePosition.y/(i.baseTexture.height*t.tileScaleOffset.y),o=t.width/i.baseTexture.width/(t.tileScale.x*t.tileScaleOffset.x),a=t.height/i.baseTexture.height/(t.tileScale.y*t.tileScaleOffset.y);n.x0=0-r,n.y0=0-s,n.x1=1*o-r,n.y1=0-s,n.x2=1*o-r,n.y2=1*a-s,n.x3=0-r,n.y3=1*a-s;var l=t.tint,h=(l>>16)+(65280&l)+((255&l)<<16)+(255*t.alpha<<24),c=this.positions,u=this.colors,d=t.width,p=t.height,f=t.anchor.x,g=t.anchor.y,m=d*(1-f),v=d*-f,b=p*(1-g),y=p*-g,_=4*this.currentBatchSize*this.vertSize,x=i.baseTexture.resolution,w=t.worldTransform,T=w.a/x,C=w.b/x,S=w.c/x,E=w.d/x,M=w.tx,A=w.ty;c[_++]=T*v+S*y+M,c[_++]=E*y+C*v+A,c[_++]=n.x0,c[_++]=n.y0,u[_++]=h,c[_++]=T*m+S*y+M,c[_++]=E*y+C*m+A,c[_++]=n.x1,c[_++]=n.y1,u[_++]=h,c[_++]=T*m+S*b+M,c[_++]=E*b+C*m+A,c[_++]=n.x2,c[_++]=n.y2,u[_++]=h,c[_++]=T*v+S*b+M,c[_++]=E*b+C*v+A,c[_++]=n.x3,c[_++]=n.y3,u[_++]=h,this.sprites[this.currentBatchSize++]=t},e.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t,i=this.gl;if(this.dirty){this.dirty=!1,i.activeTexture(i.TEXTURE0),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffer),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t=this.defaultShader.shaders[i.id];var n=4*this.vertSize;i.vertexAttribPointer(t.aVertexPosition,2,i.FLOAT,!1,n,0),i.vertexAttribPointer(t.aTextureCoord,2,i.FLOAT,!1,n,8),i.vertexAttribPointer(t.colorAttribute,4,i.UNSIGNED_BYTE,!0,n,16)}if(this.currentBatchSize>.5*this.size)i.bufferSubData(i.ARRAY_BUFFER,0,this.vertices);else{var r=this.positions.subarray(0,4*this.currentBatchSize*this.vertSize);i.bufferSubData(i.ARRAY_BUFFER,0,r)}for(var s,o,a,l,h=0,c=0,u=null,d=this.renderSession.blendModeManager.currentBlendMode,p=null,f=!1,g=!1,m=0,v=this.currentBatchSize;v>m;m++){if(l=this.sprites[m],s=l.texture.baseTexture,o=l.blendMode,a=l.shader||this.defaultShader,f=d!==o,g=p!==a,(u!==s||f||g)&&(this.renderBatch(u,h,c),c=m,h=0,u=s,f&&(d=o,this.renderSession.blendModeManager.setBlendMode(d)),g)){p=a,t=p.shaders[i.id],t||(t=new e.PixiShader(i),t.fragmentSrc=p.fragmentSrc,t.uniforms=p.uniforms,t.init(),p.shaders[i.id]=t),this.renderSession.shaderManager.setShader(t),t.dirty&&t.syncUniforms();var b=this.renderSession.projection;i.uniform2f(t.projectionVector,b.x,b.y);var y=this.renderSession.offset;i.uniform2f(t.offsetVector,y.x,y.y)}h++}this.renderBatch(u,h,c),this.currentBatchSize=0}},e.WebGLSpriteBatch.prototype.renderBatch=function(t,e,i){if(0!==e){var n=this.gl;t._dirty[n.id]?this.renderSession.renderer.updateTexture(t):n.bindTexture(n.TEXTURE_2D,t._glTextures[n.id]),n.drawElements(n.TRIANGLES,6*e,n.UNSIGNED_SHORT,6*i*2),this.renderSession.drawCount++}},e.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},e.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},e.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},e.WebGLFastSpriteBatch=function(t){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var i=4*this.size*this.vertSize,n=6*this.maxSize;this.vertices=new e.Float32Array(i),this.indices=new e.Uint16Array(n),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var r=0,s=0;n>r;r+=6,s+=4)this.indices[r+0]=s+0,this.indices[r+1]=s+1,this.indices[r+2]=s+2,this.indices[r+3]=s+0,this.indices[r+4]=s+2,this.indices[r+5]=s+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(t)},e.WebGLFastSpriteBatch.prototype.constructor=e.WebGLFastSpriteBatch,e.WebGLFastSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW)},e.WebGLFastSpriteBatch.prototype.begin=function(t,e){this.renderSession=e,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=t.worldTransform.toArray(!0),this.start()},e.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},e.WebGLFastSpriteBatch.prototype.render=function(t){var e=t.children,i=e[0];if(i.texture._uvs){this.currentBaseTexture=i.texture.baseTexture,i.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(i.blendMode));for(var n=0,r=e.length;r>n;n++)this.renderSprite(e[n]);this.flush()}},e.WebGLFastSpriteBatch.prototype.renderSprite=function(t){if(t.visible&&(t.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=t.texture.baseTexture,t.texture._uvs))){var e,i,n,r,s,o,a,l,h=this.vertices;if(e=t.texture._uvs,i=t.texture.frame.width,n=t.texture.frame.height,t.texture.trim){var c=t.texture.trim;s=c.x-t.anchor.x*c.width,r=s+t.texture.crop.width,a=c.y-t.anchor.y*c.height,o=a+t.texture.crop.height}else r=t.texture.frame.width*(1-t.anchor.x),s=t.texture.frame.width*-t.anchor.x,o=t.texture.frame.height*(1-t.anchor.y),a=t.texture.frame.height*-t.anchor.y;l=4*this.currentBatchSize*this.vertSize,h[l++]=s,h[l++]=a,h[l++]=t.position.x,h[l++]=t.position.y,h[l++]=t.scale.x,h[l++]=t.scale.y,h[l++]=t.rotation,h[l++]=e.x0,h[l++]=e.y1,h[l++]=t.alpha,h[l++]=r,h[l++]=a,h[l++]=t.position.x,h[l++]=t.position.y,h[l++]=t.scale.x,h[l++]=t.scale.y,h[l++]=t.rotation,h[l++]=e.x1,h[l++]=e.y1,h[l++]=t.alpha,h[l++]=r,h[l++]=o,h[l++]=t.position.x,h[l++]=t.position.y,h[l++]=t.scale.x,h[l++]=t.scale.y,h[l++]=t.rotation,h[l++]=e.x2,h[l++]=e.y2,h[l++]=t.alpha,h[l++]=s,h[l++]=o,h[l++]=t.position.x,h[l++]=t.position.y,h[l++]=t.scale.x,h[l++]=t.scale.y,h[l++]=t.rotation,h[l++]=e.x3,h[l++]=e.y3,h[l++]=t.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},e.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(this.currentBaseTexture._glTextures[t.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,t),t.bindTexture(t.TEXTURE_2D,this.currentBaseTexture._glTextures[t.id]),this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,e)}t.drawElements(t.TRIANGLES,6*this.currentBatchSize,t.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},e.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},e.WebGLFastSpriteBatch.prototype.start=function(){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;t.uniform2f(this.shader.projectionVector,e.x,e.y),t.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var i=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(this.shader.aPositionCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(this.shader.aScale,2,t.FLOAT,!1,i,16),t.vertexAttribPointer(this.shader.aRotation,1,t.FLOAT,!1,i,24),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,i,28),t.vertexAttribPointer(this.shader.colorAttribute,1,t.FLOAT,!1,i,36)},e.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},e.WebGLFilterManager.prototype.constructor=e.WebGLFilterManager,e.WebGLFilterManager.prototype.setContext=function(t){this.gl=t,this.texturePool=[],this.initShaderBuffers()},e.WebGLFilterManager.prototype.begin=function(t,e){this.renderSession=t,this.defaultShader=t.shaderManager.defaultShader;var i=this.renderSession.projection;this.width=2*i.x,this.height=2*-i.y,this.buffer=e},e.WebGLFilterManager.prototype.pushFilter=function(t){var i=this.gl,n=this.renderSession.projection,r=this.renderSession.offset;t._filterArea=t.target.filterArea||t.target.getBounds(),this.filterStack.push(t);var s=t.filterPasses[0];this.offsetX+=t._filterArea.x,this.offsetY+=t._filterArea.y;var o=this.texturePool.pop();o?o.resize(this.width,this.height):o=new e.FilterTexture(this.gl,this.width,this.height),i.bindTexture(i.TEXTURE_2D,o.texture);var a=t._filterArea,l=s.padding;a.x-=l,a.y-=l,a.width+=2*l,a.height+=2*l,a.x<0&&(a.x=0),a.width>this.width&&(a.width=this.width),a.y<0&&(a.y=0),a.height>this.height&&(a.height=this.height),i.bindFramebuffer(i.FRAMEBUFFER,o.frameBuffer),i.viewport(0,0,a.width,a.height),n.x=a.width/2,n.y=-a.height/2,r.x=-a.x,r.y=-a.y,i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),t._glFilterTexture=o},e.WebGLFilterManager.prototype.popFilter=function(){var t=this.gl,i=this.filterStack.pop(),n=i._filterArea,r=i._glFilterTexture,s=this.renderSession.projection,o=this.renderSession.offset;if(i.filterPasses.length>1){t.viewport(0,0,n.width,n.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=n.height,this.vertexArray[2]=n.width,this.vertexArray[3]=n.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=n.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=n.width/this.width,this.uvArray[5]=n.height/this.height,this.uvArray[6]=n.width/this.width,this.uvArray[7]=n.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var a=r,l=this.texturePool.pop();l||(l=new e.FilterTexture(this.gl,this.width,this.height)),l.resize(this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,l.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var h=0;h<i.filterPasses.length-1;h++){var c=i.filterPasses[h];t.bindFramebuffer(t.FRAMEBUFFER,l.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,a.texture),this.applyFilterPass(c,n,n.width,n.height);var u=a;a=l,l=u}t.enable(t.BLEND),r=a,this.texturePool.push(l)}var d=i.filterPasses[i.filterPasses.length-1];this.offsetX-=n.x,this.offsetY-=n.y;var p=this.width,f=this.height,g=0,m=0,v=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,!0);else{var b=this.filterStack[this.filterStack.length-1];n=b._filterArea,p=n.width,f=n.height,g=n.x,m=n.y,v=b._glFilterTexture.frameBuffer}s.x=p/2,s.y=-f/2,o.x=g,o.y=m,n=i._filterArea;var y=n.x-g,_=n.y-m;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=y,
this.vertexArray[1]=_+n.height,this.vertexArray[2]=y+n.width,this.vertexArray[3]=_+n.height,this.vertexArray[4]=y,this.vertexArray[5]=_,this.vertexArray[6]=y+n.width,this.vertexArray[7]=_,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=n.width/this.width,this.uvArray[5]=n.height/this.height,this.uvArray[6]=n.width/this.width,this.uvArray[7]=n.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,p*this.renderSession.resolution,f*this.renderSession.resolution),t.bindFramebuffer(t.FRAMEBUFFER,v),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r.texture),this.applyFilterPass(d,n,p,f),this.texturePool.push(r),i._glFilterTexture=null},e.WebGLFilterManager.prototype.applyFilterPass=function(t,i,n,r){var s=this.gl,o=t.shaders[s.id];o||(o=new e.PixiShader(s),o.fragmentSrc=t.fragmentSrc,o.uniforms=t.uniforms,o.init(),t.shaders[s.id]=o),this.renderSession.shaderManager.setShader(o),s.uniform2f(o.projectionVector,n/2,-r/2),s.uniform2f(o.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),o.syncUniforms(),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBuffer),s.vertexAttribPointer(o.aVertexPosition,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this.uvBuffer),s.vertexAttribPointer(o.aTextureCoord,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this.colorBuffer),s.vertexAttribPointer(o.colorAttribute,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this.indexBuffer),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0),this.renderSession.drawCount++},e.WebGLFilterManager.prototype.initShaderBuffers=function(){var t=this.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new e.Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new e.Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),this.colorArray=new e.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colorArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)},e.WebGLFilterManager.prototype.destroy=function(){var t=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var e=0;e<this.texturePool.length;e++)this.texturePool[e].destroy();this.texturePool=null,t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.uvBuffer),t.deleteBuffer(this.colorBuffer),t.deleteBuffer(this.indexBuffer)},e.FilterTexture=function(t,i,n,r){this.gl=t,this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),r=r||e.scaleModes.DEFAULT,t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r===e.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r===e.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),this.renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.renderBuffer),this.resize(i,n)},e.FilterTexture.prototype.constructor=e.FilterTexture,e.FilterTexture.prototype.clear=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},e.FilterTexture.prototype.resize=function(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e;var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindRenderbuffer(i.RENDERBUFFER,this.renderBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e)}},e.FilterTexture.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},e.CanvasBuffer=function(t,e){this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e},e.CanvasBuffer.prototype.constructor=e.CanvasBuffer,e.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},e.CanvasBuffer.prototype.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},e.CanvasMaskManager=function(){},e.CanvasMaskManager.prototype.constructor=e.CanvasMaskManager,e.CanvasMaskManager.prototype.pushMask=function(t,i){var n=i.context;n.save();var r=t.alpha,s=t.worldTransform,o=i.resolution;n.setTransform(s.a*o,s.b*o,s.c*o,s.d*o,s.tx*o,s.ty*o),e.CanvasGraphics.renderGraphicsMask(t,n),n.clip(),t.worldAlpha=r},e.CanvasMaskManager.prototype.popMask=function(t){t.context.restore()},e.CanvasTinter=function(){},e.CanvasTinter.getTintedTexture=function(t,i){var n=t.texture;i=e.CanvasTinter.roundColor(i);var r="#"+("00000"+(0|i).toString(16)).substr(-6);if(n.tintCache=n.tintCache||{},n.tintCache[r])return n.tintCache[r];var s=e.CanvasTinter.canvas||document.createElement("canvas");if(e.CanvasTinter.tintMethod(n,i,s),e.CanvasTinter.convertTintToImage){var o=new Image;o.src=s.toDataURL(),n.tintCache[r]=o}else n.tintCache[r]=s,e.CanvasTinter.canvas=null;return s},e.CanvasTinter.tintWithMultiply=function(t,e,i){var n=i.getContext("2d"),r=t.crop;i.width=r.width,i.height=r.height,n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},e.CanvasTinter.tintWithOverlay=function(t,e,i){var n=i.getContext("2d"),r=t.crop;i.width=r.width,i.height=r.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},e.CanvasTinter.tintWithPerPixel=function(t,i,n){var r=n.getContext("2d"),s=t.crop;n.width=s.width,n.height=s.height,r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height);for(var o=e.hex2rgb(i),a=o[0],l=o[1],h=o[2],c=r.getImageData(0,0,s.width,s.height),u=c.data,d=0;d<u.length;d+=4)u[d+0]*=a,u[d+1]*=l,u[d+2]*=h;r.putImageData(c,0,0)},e.CanvasTinter.roundColor=function(t){var i=e.CanvasTinter.cacheStepsPerColorChannel,n=e.hex2rgb(t);return n[0]=Math.min(255,n[0]/i*i),n[1]=Math.min(255,n[1]/i*i),n[2]=Math.min(255,n[2]/i*i),e.rgb2hex(n)},e.CanvasTinter.cacheStepsPerColorChannel=8,e.CanvasTinter.convertTintToImage=!1,e.CanvasTinter.canUseMultiply=e.canUseNewCanvasBlendModes(),e.CanvasTinter.tintMethod=e.CanvasTinter.canUseMultiply?e.CanvasTinter.tintWithMultiply:e.CanvasTinter.tintWithPerPixel,e.CanvasRenderer=function(t,i,n){if(n)for(var r in e.defaultRenderOptions)"undefined"==typeof n[r]&&(n[r]=e.defaultRenderOptions[r]);else n=e.defaultRenderOptions;e.defaultRenderer||(e.sayHello("Canvas"),e.defaultRenderer=this),this.type=e.CANVAS_RENDERER,this.resolution=n.resolution,this.clearBeforeRender=n.clearBeforeRender,this.transparent=n.transparent,this.autoResize=n.autoResize||!1,this.width=t||800,this.height=i||600,this.width*=this.resolution,this.height*=this.resolution,this.view=n.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new e.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(t,i),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},e.CanvasRenderer.prototype.constructor=e.CanvasRenderer,e.CanvasRenderer.prototype.render=function(t){t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=e.blendModes.NORMAL,this.context.globalCompositeOperation=e.blendModesCanvas[e.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=t.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)))},e.CanvasRenderer.prototype.destroy=function(t){"undefined"==typeof t&&(t=!0),t&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},e.CanvasRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},e.CanvasRenderer.prototype.renderDisplayObject=function(t,e){this.renderSession.context=e||this.context,this.renderSession.resolution=this.resolution,t._renderCanvas(this.renderSession)},e.CanvasRenderer.prototype.mapBlendModes=function(){e.blendModesCanvas||(e.blendModesCanvas=[],e.canUseNewCanvasBlendModes()?(e.blendModesCanvas[e.blendModes.NORMAL]="source-over",e.blendModesCanvas[e.blendModes.ADD]="lighter",e.blendModesCanvas[e.blendModes.MULTIPLY]="multiply",e.blendModesCanvas[e.blendModes.SCREEN]="screen",e.blendModesCanvas[e.blendModes.OVERLAY]="overlay",e.blendModesCanvas[e.blendModes.DARKEN]="darken",e.blendModesCanvas[e.blendModes.LIGHTEN]="lighten",e.blendModesCanvas[e.blendModes.COLOR_DODGE]="color-dodge",e.blendModesCanvas[e.blendModes.COLOR_BURN]="color-burn",e.blendModesCanvas[e.blendModes.HARD_LIGHT]="hard-light",e.blendModesCanvas[e.blendModes.SOFT_LIGHT]="soft-light",e.blendModesCanvas[e.blendModes.DIFFERENCE]="difference",e.blendModesCanvas[e.blendModes.EXCLUSION]="exclusion",e.blendModesCanvas[e.blendModes.HUE]="hue",e.blendModesCanvas[e.blendModes.SATURATION]="saturation",e.blendModesCanvas[e.blendModes.COLOR]="color",e.blendModesCanvas[e.blendModes.LUMINOSITY]="luminosity"):(e.blendModesCanvas[e.blendModes.NORMAL]="source-over",e.blendModesCanvas[e.blendModes.ADD]="lighter",e.blendModesCanvas[e.blendModes.MULTIPLY]="source-over",e.blendModesCanvas[e.blendModes.SCREEN]="source-over",e.blendModesCanvas[e.blendModes.OVERLAY]="source-over",e.blendModesCanvas[e.blendModes.DARKEN]="source-over",e.blendModesCanvas[e.blendModes.LIGHTEN]="source-over",e.blendModesCanvas[e.blendModes.COLOR_DODGE]="source-over",e.blendModesCanvas[e.blendModes.COLOR_BURN]="source-over",e.blendModesCanvas[e.blendModes.HARD_LIGHT]="source-over",e.blendModesCanvas[e.blendModes.SOFT_LIGHT]="source-over",e.blendModesCanvas[e.blendModes.DIFFERENCE]="source-over",e.blendModesCanvas[e.blendModes.EXCLUSION]="source-over",e.blendModesCanvas[e.blendModes.HUE]="source-over",e.blendModesCanvas[e.blendModes.SATURATION]="source-over",e.blendModesCanvas[e.blendModes.COLOR]="source-over",e.blendModesCanvas[e.blendModes.LUMINOSITY]="source-over"))},e.CanvasGraphics=function(){},e.CanvasGraphics.renderGraphics=function(t,i){var n=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var r=0;r<t.graphicsData.length;r++){var s=t.graphicsData[r],o=s.shape,a=s._fillTint,l=s._lineTint;if(i.lineWidth=s.lineWidth,s.type===e.Graphics.POLY){i.beginPath();var h=o.points;i.moveTo(h[0],h[1]);for(var c=1;c<h.length/2;c++)i.lineTo(h[2*c],h[2*c+1]);o.closed&&i.lineTo(h[0],h[1]),h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&i.closePath(),s.fill&&(i.globalAlpha=s.fillAlpha*n,i.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),i.fill()),s.lineWidth&&(i.globalAlpha=s.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.stroke())}else if(s.type===e.Graphics.RECT)(s.fillColor||0===s.fillColor)&&(i.globalAlpha=s.fillAlpha*n,i.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),i.fillRect(o.x,o.y,o.width,o.height)),s.lineWidth&&(i.globalAlpha=s.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.strokeRect(o.x,o.y,o.width,o.height));else if(s.type===e.Graphics.CIRC)i.beginPath(),i.arc(o.x,o.y,o.radius,0,2*Math.PI),i.closePath(),s.fill&&(i.globalAlpha=s.fillAlpha*n,i.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),i.fill()),s.lineWidth&&(i.globalAlpha=s.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.stroke());else if(s.type===e.Graphics.ELIP){var u=2*o.width,d=2*o.height,p=o.x-u/2,f=o.y-d/2;i.beginPath();var g=.5522848,m=u/2*g,v=d/2*g,b=p+u,y=f+d,_=p+u/2,x=f+d/2;i.moveTo(p,x),i.bezierCurveTo(p,x-v,_-m,f,_,f),i.bezierCurveTo(_+m,f,b,x-v,b,x),i.bezierCurveTo(b,x+v,_+m,y,_,y),i.bezierCurveTo(_-m,y,p,x+v,p,x),i.closePath(),s.fill&&(i.globalAlpha=s.fillAlpha*n,i.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),i.fill()),s.lineWidth&&(i.globalAlpha=s.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.stroke())}else if(s.type===e.Graphics.RREC){var w=o.x,T=o.y,C=o.width,S=o.height,E=o.radius,M=Math.min(C,S)/2|0;E=E>M?M:E,i.beginPath(),i.moveTo(w,T+E),i.lineTo(w,T+S-E),i.quadraticCurveTo(w,T+S,w+E,T+S),i.lineTo(w+C-E,T+S),i.quadraticCurveTo(w+C,T+S,w+C,T+S-E),i.lineTo(w+C,T+E),i.quadraticCurveTo(w+C,T,w+C-E,T),i.lineTo(w+E,T),i.quadraticCurveTo(w,T,w,T+E),i.closePath(),(s.fillColor||0===s.fillColor)&&(i.globalAlpha=s.fillAlpha*n,i.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),i.fill()),s.lineWidth&&(i.globalAlpha=s.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.stroke())}}},e.CanvasGraphics.renderGraphicsMask=function(t,i){var n=t.graphicsData.length;if(0!==n){n>1&&(n=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var r=0;1>r;r++){var s=t.graphicsData[r],o=s.shape;if(s.type===e.Graphics.POLY){i.beginPath();var a=o.points;i.moveTo(a[0],a[1]);for(var l=1;l<a.length/2;l++)i.lineTo(a[2*l],a[2*l+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&i.closePath()}else if(s.type===e.Graphics.RECT)i.beginPath(),i.rect(o.x,o.y,o.width,o.height),i.closePath();else if(s.type===e.Graphics.CIRC)i.beginPath(),i.arc(o.x,o.y,o.radius,0,2*Math.PI),i.closePath();else if(s.type===e.Graphics.ELIP){var h=2*o.width,c=2*o.height,u=o.x-h/2,d=o.y-c/2;i.beginPath();var p=.5522848,f=h/2*p,g=c/2*p,m=u+h,v=d+c,b=u+h/2,y=d+c/2;i.moveTo(u,y),i.bezierCurveTo(u,y-g,b-f,d,b,d),i.bezierCurveTo(b+f,d,m,y-g,m,y),i.bezierCurveTo(m,y+g,b+f,v,b,v),i.bezierCurveTo(b-f,v,u,y+g,u,y),i.closePath()}else if(s.type===e.Graphics.RREC){var _=o.points,x=_[0],w=_[1],T=_[2],C=_[3],S=_[4],E=Math.min(T,C)/2|0;S=S>E?E:S,i.beginPath(),i.moveTo(x,w+S),i.lineTo(x,w+C-S),i.quadraticCurveTo(x,w+C,x+S,w+C),i.lineTo(x+T-S,w+C),i.quadraticCurveTo(x+T,w+C,x+T,w+C-S),i.lineTo(x+T,w+S),i.quadraticCurveTo(x+T,w,x+T-S,w),i.lineTo(x+S,w),i.quadraticCurveTo(x,w,x,w+S),i.closePath()}}}},e.CanvasGraphics.updateGraphicsTint=function(t){if(16777215!==t.tint)for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,n=(255&t.tint)/255,r=0;r<t.graphicsData.length;r++){var s=t.graphicsData[r],o=0|s.fillColor,a=0|s.lineColor;s._fillTint=((o>>16&255)/255*e*255<<16)+((o>>8&255)/255*i*255<<8)+(255&o)/255*n*255,s._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255}},e.Graphics=function(){e.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=e.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new e.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},e.Graphics.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Graphics.prototype.constructor=e.Graphics,Object.defineProperty(e.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),e.Graphics.prototype.lineStyle=function(t,i,n){if(this.lineWidth=t||0,this.lineColor=i||0,this.lineAlpha=arguments.length<3?1:n,this.currentPath){if(this.currentPath.shape.points.length)return this.drawShape(new e.Polygon(this.currentPath.shape.points.slice(-2))),this;this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha}return this},e.Graphics.prototype.moveTo=function(t,i){return this.drawShape(new e.Polygon([t,i])),this},e.Graphics.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},e.Graphics.prototype.quadraticCurveTo=function(t,e,i,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r,s,o=20,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var l=a[a.length-2],h=a[a.length-1],c=0,u=1;o>=u;u++)c=u/o,r=l+(t-l)*c,s=h+(e-h)*c,a.push(r+(t+(i-t)*c-r)*c,s+(e+(n-e)*c-s)*c);return this.dirty=!0,this},e.Graphics.prototype.bezierCurveTo=function(t,e,i,n,r,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var o,a,l,h,c,u=20,d=this.currentPath.shape.points,p=d[d.length-2],f=d[d.length-1],g=0,m=1;u>=m;m++)g=m/u,o=1-g,a=o*o,l=a*o,h=g*g,c=h*g,d.push(l*p+3*a*g*t+3*o*h*i+c*r,l*f+3*a*g*e+3*o*h*n+c*s);return this.dirty=!0,this},e.Graphics.prototype.arcTo=function(t,e,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var s=this.currentPath.shape.points,o=s[s.length-2],a=s[s.length-1],l=a-e,h=o-t,c=n-e,u=i-t,d=Math.abs(l*u-h*c);if(1e-8>d||0===r)(s[s.length-2]!==t||s[s.length-1]!==e)&&s.push(t,e);else{var p=l*l+h*h,f=c*c+u*u,g=l*c+h*u,m=r*Math.sqrt(p)/d,v=r*Math.sqrt(f)/d,b=m*g/p,y=v*g/f,_=m*u+v*h,x=m*c+v*l,w=h*(v+b),T=l*(v+b),C=u*(m+y),S=c*(m+y),E=Math.atan2(T-x,w-_),M=Math.atan2(S-x,C-_);this.arc(_+t,x+e,r,E,M,h*c>u*l)}return this.dirty=!0,this},e.Graphics.prototype.arc=function(t,e,i,n,r,s){var o,a=t+Math.cos(n)*i,l=e+Math.sin(n)*i;if(this.currentPath?(o=this.currentPath.shape.points,0===o.length?o.push(a,l):(o[o.length-2]!==a||o[o.length-1]!==l)&&o.push(a,l)):(this.moveTo(a,l),o=this.currentPath.shape.points),n===r)return this;!s&&n>=r?r+=2*Math.PI:s&&r>=n&&(n+=2*Math.PI);var h=s?-1*(n-r):r-n,c=Math.abs(h)/(2*Math.PI)*40;if(0===h)return this;for(var u=h/(2*c),d=2*u,p=Math.cos(u),f=Math.sin(u),g=c-1,m=g%1/g,v=0;g>=v;v++){var b=v+m*v,y=u+n+d*b,_=Math.cos(y),x=-Math.sin(y);o.push((p*_+f*x)*i+t,(p*-x+f*_)*i+e)}return this.dirty=!0,this},e.Graphics.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.Graphics.prototype.drawRect=function(t,i,n,r){return this.drawShape(new e.Rectangle(t,i,n,r)),this},e.Graphics.prototype.drawRoundedRect=function(t,i,n,r,s){return this.drawShape(new e.RoundedRectangle(t,i,n,r,s)),this},e.Graphics.prototype.drawCircle=function(t,i,n){return this.drawShape(new e.Circle(t,i,n)),this},e.Graphics.prototype.drawEllipse=function(t,i,n,r){return this.drawShape(new e.Ellipse(t,i,n,r)),this},e.Graphics.prototype.drawPolygon=function(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments)),this.drawShape(new e.Polygon(t)),this},e.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},e.Graphics.prototype.generateTexture=function(t,i){t=t||1;var n=this.getBounds(),r=new e.CanvasBuffer(n.width*t,n.height*t),s=e.Texture.fromCanvas(r.canvas,i);return s.baseTexture.resolution=t,r.context.scale(t,t),r.context.translate(-n.x,-n.y),e.CanvasGraphics.renderGraphics(this,r.context),s},e.Graphics.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void e.Sprite.prototype._renderWebGL.call(this._cachedSprite,t);if(t.spriteBatch.stop(),t.blendModeManager.setBlendMode(this.blendMode),this._mask&&t.maskManager.pushMask(this._mask,t),this._filters&&t.filterManager.pushFilter(this._filterBlock),this.blendMode!==t.spriteBatch.currentBlendMode){t.spriteBatch.currentBlendMode=this.blendMode;var i=e.blendModesWebGL[t.spriteBatch.currentBlendMode];t.spriteBatch.gl.blendFunc(i[0],i[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),e.WebGLGraphics.renderGraphics(this,t),this.children.length){t.spriteBatch.start();for(var n=0,r=this.children.length;r>n;n++)this.children[n]._renderWebGL(t);t.spriteBatch.stop()}this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this.mask,t),t.drawCount++,t.spriteBatch.start()}},e.Graphics.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void e.Sprite.prototype._renderCanvas.call(this._cachedSprite,t);var i=t.context,n=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,i.globalCompositeOperation=e.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t);var r=t.resolution;i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),e.CanvasGraphics.renderGraphics(this,i);for(var s=0,o=this.children.length;o>s;s++)this.children[s]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.Graphics.prototype.getBounds=function(t){if(this.isMask)return e.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var i=this._localBounds,n=i.x,r=i.width+i.x,s=i.y,o=i.height+i.y,a=t||this.worldTransform,l=a.a,h=a.b,c=a.c,u=a.d,d=a.tx,p=a.ty,f=l*r+c*o+d,g=u*o+h*r+p,m=l*n+c*o+d,v=u*o+h*n+p,b=l*n+c*s+d,y=u*s+h*n+p,_=l*r+c*s+d,x=u*s+h*r+p,w=f,T=g,C=f,S=g;return C=C>m?m:C,C=C>b?b:C,C=C>_?_:C,S=S>v?v:S,S=S>y?y:S,S=S>x?x:S,w=m>w?m:w,w=b>w?b:w,w=_>w?_:w,T=v>T?v:T,T=y>T?y:T,T=x>T?x:T,this._bounds.x=C,this._bounds.width=w-C,this._bounds.y=S,this._bounds.height=T-S,this._bounds},e.Graphics.prototype.updateLocalBounds=function(){var t=1/0,i=-(1/0),n=1/0,r=-(1/0);if(this.graphicsData.length)for(var s,o,a,l,h,c,u=0;u<this.graphicsData.length;u++){var d=this.graphicsData[u],p=d.type,f=d.lineWidth;if(s=d.shape,p===e.Graphics.RECT||p===e.Graphics.RREC)a=s.x-f/2,l=s.y-f/2,h=s.width+f,c=s.height+f,t=t>a?a:t,i=a+h>i?a+h:i,n=n>l?l:n,r=l+c>r?l+c:r;else if(p===e.Graphics.CIRC)a=s.x,l=s.y,h=s.radius+f/2,c=s.radius+f/2,t=t>a-h?a-h:t,i=a+h>i?a+h:i,n=n>l-c?l-c:n,r=l+c>r?l+c:r;else if(p===e.Graphics.ELIP)a=s.x,l=s.y,h=s.width+f/2,c=s.height+f/2,t=t>a-h?a-h:t,i=a+h>i?a+h:i,n=n>l-c?l-c:n,r=l+c>r?l+c:r;else{o=s.points;for(var g=0;g<o.length;g+=2)a=o[g],l=o[g+1],t=t>a-f?a-f:t,i=a+f>i?a+f:i,n=n>l-f?l-f:n,r=l+f>r?l+f:r}}else t=0,i=0,n=0,r=0;var m=this.boundsPadding;this._localBounds.x=t-m,this._localBounds.width=i-t+2*m,this._localBounds.y=n-m,this._localBounds.height=r-n+2*m},e.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var i=new e.CanvasBuffer(t.width,t.height),n=e.Texture.fromCanvas(i.canvas);this._cachedSprite=new e.Sprite(n),this._cachedSprite.buffer=i,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._cachedSprite.buffer.context.translate(-t.x,-t.y),this.worldAlpha=1,e.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},e.Graphics.prototype.updateCachedSpriteTexture=function(){var t=this._cachedSprite,e=t.texture,i=t.buffer.canvas;e.baseTexture.width=i.width,e.baseTexture.height=i.height,e.crop.width=e.frame.width=i.width,e.crop.height=e.frame.height=i.height,t._width=i.width,t._height=i.height,e.baseTexture.dirty()},e.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},e.Graphics.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var i=new e.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(i),i.type===e.Graphics.POLY&&(i.shape.closed=this.filling,this.currentPath=i),this.dirty=!0,i},e.GraphicsData=function(t,e,i,n,r,s,o){this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this._lineTint=e,this.fillColor=n,this.fillAlpha=r,this._fillTint=n,this.fill=s,this.shape=o,this.type=o.type},e.Graphics.POLY=0,e.Graphics.RECT=1,e.Graphics.CIRC=2,e.Graphics.ELIP=3,e.Graphics.RREC=4,e.Polygon.prototype.type=e.Graphics.POLY,e.Rectangle.prototype.type=e.Graphics.RECT,e.Circle.prototype.type=e.Graphics.CIRC,e.Ellipse.prototype.type=e.Graphics.ELIP,e.RoundedRectangle.prototype.type=e.Graphics.RREC,e.Strip=function(t){e.DisplayObjectContainer.call(this),this.texture=t,this.uvs=new e.Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new e.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new e.Float32Array([1,1,1,1]),this.indices=new e.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=e.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=e.Strip.DrawModes.TRIANGLE_STRIP},e.Strip.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Strip.prototype.constructor=e.Strip,e.Strip.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||(t.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(t),t.shaderManager.setShader(t.shaderManager.stripShader),this._renderStrip(t),t.spriteBatch.start())},e.Strip.prototype._initWebGL=function(t){var e=t.gl;this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),this._uvBuffer=e.createBuffer(),this._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)},e.Strip.prototype._renderStrip=function(t){var i=t.gl,n=t.projection,r=t.offset,s=t.shaderManager.stripShader,o=this.drawMode===e.Strip.DrawModes.TRIANGLE_STRIP?i.TRIANGLE_STRIP:i.TRIANGLES;t.blendModeManager.setBlendMode(this.blendMode),i.uniformMatrix3fv(s.translationMatrix,!1,this.worldTransform.toArray(!0)),i.uniform2f(s.projectionVector,n.x,-n.y),i.uniform2f(s.offsetVector,-r.x,-r.y),i.uniform1f(s.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,i.bindBuffer(i.ARRAY_BUFFER,this._vertexBuffer),i.bufferData(i.ARRAY_BUFFER,this.vertices,i.STATIC_DRAW),i.vertexAttribPointer(s.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this._uvBuffer),i.bufferData(i.ARRAY_BUFFER,this.uvs,i.STATIC_DRAW),i.vertexAttribPointer(s.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),this.texture.baseTexture._dirty[i.id]?t.renderer.updateTexture(this.texture.baseTexture):i.bindTexture(i.TEXTURE_2D,this.texture.baseTexture._glTextures[i.id]),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this._indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.indices,i.STATIC_DRAW)):(i.bindBuffer(i.ARRAY_BUFFER,this._vertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,this.vertices),i.vertexAttribPointer(s.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this._uvBuffer),i.vertexAttribPointer(s.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),this.texture.baseTexture._dirty[i.id]?t.renderer.updateTexture(this.texture.baseTexture):i.bindTexture(i.TEXTURE_2D,this.texture.baseTexture._glTextures[i.id]),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),i.drawElements(o,this.indices.length,i.UNSIGNED_SHORT,0)},e.Strip.prototype._renderCanvas=function(t){var i=t.context,n=this.worldTransform;t.roundPixels?i.setTransform(n.a,n.b,n.c,n.d,0|n.tx,0|n.ty):i.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),this.drawMode===e.Strip.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(i):this._renderCanvasTriangles(i)},e.Strip.prototype._renderCanvasTriangleStrip=function(t){var e=this.vertices,i=this.uvs,n=e.length/2;this.count++;for(var r=0;n-2>r;r++){var s=2*r;this._renderCanvasDrawTriangle(t,e,i,s,s+2,s+4)}},e.Strip.prototype._renderCanvasTriangles=function(t){var e=this.vertices,i=this.uvs,n=this.indices,r=n.length;this.count++;for(var s=0;r>s;s+=3){var o=2*n[s],a=2*n[s+1],l=2*n[s+2];this._renderCanvasDrawTriangle(t,e,i,o,a,l)}},e.Strip.prototype._renderCanvasDrawTriangle=function(t,e,i,n,r,s){var o=this.texture.baseTexture.source,a=this.texture.width,l=this.texture.height,h=e[n],c=e[r],u=e[s],d=e[n+1],p=e[r+1],f=e[s+1],g=i[n]*a,m=i[r]*a,v=i[s]*a,b=i[n+1]*l,y=i[r+1]*l,_=i[s+1]*l;if(this.canvasPadding>0){var x=this.canvasPadding/this.worldTransform.a,w=this.canvasPadding/this.worldTransform.d,T=(h+c+u)/3,C=(d+p+f)/3,S=h-T,E=d-C,M=Math.sqrt(S*S+E*E);h=T+S/M*(M+x),d=C+E/M*(M+w),S=c-T,E=p-C,M=Math.sqrt(S*S+E*E),c=T+S/M*(M+x),p=C+E/M*(M+w),S=u-T,E=f-C,M=Math.sqrt(S*S+E*E),u=T+S/M*(M+x),f=C+E/M*(M+w)}t.save(),t.beginPath(),t.moveTo(h,d),t.lineTo(c,p),t.lineTo(u,f),t.closePath(),t.clip();var A=g*y+b*v+m*_-y*v-b*m-g*_,k=h*y+b*u+c*_-y*u-b*c-h*_,P=g*c+h*v+m*u-c*v-h*m-g*u,R=g*y*u+b*c*v+h*m*_-h*y*v-b*m*u-g*c*_,B=d*y+b*f+p*_-y*f-b*p-d*_,I=g*p+d*v+m*f-p*v-d*m-g*f,L=g*y*f+b*p*v+d*m*_-d*y*v-b*m*f-g*p*_;t.transform(k/A,B/A,P/A,I/A,R/A,L/A),t.drawImage(o,0,0),t.restore()},e.Strip.prototype.renderStripFlat=function(t){var e=this.context,i=t.vertices,n=i.length/2;this.count++,e.beginPath();for(var r=1;n-2>r;r++){var s=2*r,o=i[s],a=i[s+2],l=i[s+4],h=i[s+1],c=i[s+3],u=i[s+5];e.moveTo(o,h),e.lineTo(a,c),e.lineTo(l,u)}e.fillStyle="#FF0000",e.fill(),e.closePath()},e.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},e.Strip.prototype.getBounds=function(t){for(var i=t||this.worldTransform,n=i.a,r=i.b,s=i.c,o=i.d,a=i.tx,l=i.ty,h=-(1/0),c=-(1/0),u=1/0,d=1/0,p=this.vertices,f=0,g=p.length;g>f;f+=2){var m=p[f],v=p[f+1],b=n*m+s*v+a,y=o*v+r*m+l;
u=u>b?b:u,d=d>y?y:d,h=b>h?b:h,c=y>c?y:c}if(u===-(1/0)||c===1/0)return e.EmptyRectangle;var _=this._bounds;return _.x=u,_.width=h-u,_.y=d,_.height=c-d,this._currentBounds=_,_},e.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1},e.Rope=function(t,i){e.Strip.call(this,t),this.points=i,this.vertices=new e.Float32Array(4*i.length),this.uvs=new e.Float32Array(4*i.length),this.colors=new e.Float32Array(2*i.length),this.indices=new e.Uint16Array(2*i.length),this.refresh()},e.Rope.prototype=Object.create(e.Strip.prototype),e.Rope.prototype.constructor=e.Rope,e.Rope.prototype.refresh=function(){var t=this.points;if(!(t.length<1)){var e=this.uvs,i=t[0],n=this.indices,r=this.colors;this.count-=.2,e[0]=0,e[1]=0,e[2]=0,e[3]=1,r[0]=1,r[1]=1,n[0]=0,n[1]=1;for(var s,o,a,l=t.length,h=1;l>h;h++)s=t[h],o=4*h,a=h/(l-1),h%2?(e[o]=a,e[o+1]=0,e[o+2]=a,e[o+3]=1):(e[o]=a,e[o+1]=0,e[o+2]=a,e[o+3]=1),o=2*h,r[o]=1,r[o+1]=1,o=2*h,n[o]=o,n[o+1]=o+1,i=s}},e.Rope.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){var i,n=t[0],r={x:0,y:0};this.count-=.2;for(var s,o,a,l,h,c=this.vertices,u=t.length,d=0;u>d;d++)s=t[d],o=4*d,i=d<t.length-1?t[d+1]:s,r.y=-(i.x-n.x),r.x=i.y-n.y,a=10*(1-d/(u-1)),a>1&&(a=1),l=Math.sqrt(r.x*r.x+r.y*r.y),h=this.texture.height/2,r.x/=l,r.y/=l,r.x*=h,r.y*=h,c[o]=s.x+r.x,c[o+1]=s.y+r.y,c[o+2]=s.x-r.x,c[o+3]=s.y-r.y,n=s;e.DisplayObjectContainer.prototype.updateTransform.call(this)}},e.Rope.prototype.setTexture=function(t){this.texture=t},e.TilingSprite=function(t,i,n){e.Sprite.call(this,t),this._width=i||100,this._height=n||100,this.tileScale=new e.Point(1,1),this.tileScaleOffset=new e.Point(1,1),this.tilePosition=new e.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=e.blendModes.NORMAL},e.TilingSprite.prototype=Object.create(e.Sprite.prototype),e.TilingSprite.prototype.constructor=e.TilingSprite,Object.defineProperty(e.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(e.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),e.TilingSprite.prototype.setTexture=function(t){this.texture!==t&&(this.texture=t,this.refreshTexture=!0,this.cachedTint=16777215)},e.TilingSprite.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha){var e,i;for(this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(t.renderer.updateTexture(this.tilingTexture.baseTexture),this.tilingTexture.needsUpdate=!1)):t.spriteBatch.renderTilingSprite(this),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this._mask,t),t.spriteBatch.start()}},e.TilingSprite.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){var i=t.context;this._mask&&t.maskManager.pushMask(this._mask,t),i.globalAlpha=this.worldAlpha;var n,r,s=this.worldTransform,o=t.resolution;if(i.setTransform(s.a*o,s.b*o,s.c*o,s.d*o,s.tx*o,s.ty*o),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=i.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,i.globalCompositeOperation=e.blendModesCanvas[t.currentBlendMode]);var a=this.tilePosition,l=this.tileScale;for(a.x%=this.tilingTexture.baseTexture.width,a.y%=this.tilingTexture.baseTexture.height,i.scale(l.x,l.y),i.translate(a.x+this.anchor.x*-this._width,a.y+this.anchor.y*-this._height),i.fillStyle=this.__tilePattern,i.fillRect(-a.x,-a.y,this._width/l.x,this._height/l.y),i.scale(1/l.x,1/l.y),i.translate(-a.x+this.anchor.x*this._width,-a.y+this.anchor.y*this._height),this._mask&&t.maskManager.popMask(t),n=0,r=this.children.length;r>n;n++)this.children[n]._renderCanvas(t)}},e.TilingSprite.prototype.getBounds=function(){var t=this._width,e=this._height,i=t*(1-this.anchor.x),n=t*-this.anchor.x,r=e*(1-this.anchor.y),s=e*-this.anchor.y,o=this.worldTransform,a=o.a,l=o.b,h=o.c,c=o.d,u=o.tx,d=o.ty,p=a*n+h*s+u,f=c*s+l*n+d,g=a*i+h*s+u,m=c*s+l*i+d,v=a*i+h*r+u,b=c*r+l*i+d,y=a*n+h*r+u,_=c*r+l*n+d,x=-(1/0),w=-(1/0),T=1/0,C=1/0;T=T>p?p:T,T=T>g?g:T,T=T>v?v:T,T=T>y?y:T,C=C>f?f:C,C=C>m?m:C,C=C>b?b:C,C=C>_?_:C,x=p>x?p:x,x=g>x?g:x,x=v>x?v:x,x=y>x?y:x,w=f>w?f:w,w=m>w?m:w,w=b>w?b:w,w=_>w?_:w;var S=this._bounds;return S.x=T,S.width=x-T,S.y=C,S.height=w-C,this._currentBounds=S,S},e.TilingSprite.prototype.onTextureUpdate=function(){},e.TilingSprite.prototype.generateTilingTexture=function(t){if(this.texture.baseTexture.hasLoaded){var i,n,r=this.originalTexture||this.texture,s=r.frame,o=s.width!==r.baseTexture.width||s.height!==r.baseTexture.height,a=!1;if(t?(i=e.getNextPowerOfTwo(s.width),n=e.getNextPowerOfTwo(s.height),(s.width!==i||s.height!==n||r.baseTexture.width!==i||r.baseTexture.height||n)&&(a=!0)):o&&(r.trim?(i=r.trim.width,n=r.trim.height):(i=s.width,n=s.height),a=!0),a){var l;this.tilingTexture&&this.tilingTexture.isTiling?(l=this.tilingTexture.canvasBuffer,l.resize(i,n),this.tilingTexture.baseTexture.width=i,this.tilingTexture.baseTexture.height=n,this.tilingTexture.needsUpdate=!0):(l=new e.CanvasBuffer(i,n),this.tilingTexture=e.Texture.fromCanvas(l.canvas),this.tilingTexture.canvasBuffer=l,this.tilingTexture.isTiling=!0),l.context.drawImage(r.baseTexture.source,r.crop.x,r.crop.y,r.crop.width,r.crop.height,0,0,i,n),this.tileScaleOffset.x=s.width/i,this.tileScaleOffset.y=s.height/n}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=r;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}},e.TilingSprite.prototype.destroy=function(){e.Sprite.prototype.destroy.call(this),this.tileScale=null,this.tileScaleOffset=null,this.tilePosition=null,this.tilingTexture.destroy(!0),this.tilingTexture=null};var i={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};i.BoneData=function(t,e){this.name=t,this.parent=e},i.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0,flipX:!1,flipY:!1},i.SlotData=function(t,e){this.name=t,this.boneData=e},i.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},i.IkConstraintData=function(t){this.name=t,this.bones=[]},i.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},i.Bone=function(t,e,i){this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()},i.Bone.yDown=!1,i.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:!1,worldFlipY:!1,updateWorldTransform:function(){var t=this.parent;if(t)this.worldX=this.x*t.m00+this.y*t.m01+t.worldX,this.worldY=this.x*t.m10+this.y*t.m11+t.worldY,this.data.inheritScale?(this.worldScaleX=t.worldScaleX*this.scaleX,this.worldScaleY=t.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?t.worldRotation+this.rotationIK:this.rotationIK,this.worldFlipX=t.worldFlipX!=this.flipX,this.worldFlipY=t.worldFlipY!=this.flipY;else{var e=this.skeleton.flipX,n=this.skeleton.flipY;this.worldX=e?-this.x:this.x,this.worldY=n!=i.Bone.yDown?-this.y:this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotationIK,this.worldFlipX=e!=this.flipX,this.worldFlipY=n!=this.flipY}var r=this.worldRotation*i.degRad,s=Math.cos(r),o=Math.sin(r);this.worldFlipX?(this.m00=-s*this.worldScaleX,this.m01=o*this.worldScaleY):(this.m00=s*this.worldScaleX,this.m01=-o*this.worldScaleY),this.worldFlipY!=i.Bone.yDown?(this.m10=-o*this.worldScaleX,this.m11=-s*this.worldScaleY):(this.m10=o*this.worldScaleX,this.m11=s*this.worldScaleY)},setToSetupPose:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.rotationIK=this.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.flipX=t.flipX,this.flipY=t.flipY},worldToLocal:function(t){var e=t[0]-this.worldX,n=t[1]-this.worldY,r=this.m00,s=this.m10,o=this.m01,a=this.m11;this.worldFlipX!=(this.worldFlipY!=i.Bone.yDown)&&(r=-r,a=-a);var l=1/(r*a-o*s);t[0]=e*r*l-n*o*l,t[1]=n*a*l-e*s*l},localToWorld:function(t){var e=t[0],i=t[1];t[0]=e*this.m00+i*this.m01+this.worldX,t[1]=e*this.m10+i*this.m11+this.worldY}},i.Slot=function(t,e){this.data=t,this.bone=e,this.setToSetupPose()},i.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(t){this.attachment=t,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(t){this._attachmentTime=this.bone.skeleton.time-t},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a;for(var e=this.bone.skeleton.data.slots,i=0,n=e.length;n>i;i++)if(e[i]==t){this.setAttachment(t.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(i,t.attachmentName):null);break}}},i.IkConstraint=function(t,e){this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=[];for(var i=0,n=t.bones.length;n>i;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)},i.IkConstraint.prototype={apply:function(){var t=this.target,e=this.bones;switch(e.length){case 1:i.IkConstraint.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:i.IkConstraint.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}}},i.IkConstraint.apply1=function(t,e,n,r){var s=t.data.inheritRotation&&t.parent?t.parent.worldRotation:0,o=t.rotation,a=Math.atan2(n-t.worldY,e-t.worldX)*i.radDeg-s;t.rotationIK=o+(a-o)*r},i.IkConstraint.apply2=function(t,e,n,r,s,o){var a=e.rotation,l=t.rotation;if(!o)return e.rotationIK=a,void(t.rotationIK=l);var h,c,u=i.temp,d=t.parent;d?(u[0]=n,u[1]=r,d.worldToLocal(u),n=(u[0]-t.x)*d.worldScaleX,r=(u[1]-t.y)*d.worldScaleY):(n-=t.x,r-=t.y),e.parent==t?(h=e.x,c=e.y):(u[0]=e.x,u[1]=e.y,e.parent.localToWorld(u),t.worldToLocal(u),h=u[0],c=u[1]);var p=h*t.worldScaleX,f=c*t.worldScaleY,g=Math.atan2(f,p),m=Math.sqrt(p*p+f*f),v=e.data.length*e.worldScaleX,b=2*m*v;if(1e-4>b)return void(e.rotationIK=a+(Math.atan2(r,n)*i.radDeg-l-a)*o);var y=(n*n+r*r-m*m-v*v)/b;-1>y?y=-1:y>1&&(y=1);var _=Math.acos(y)*s,x=m+v*y,w=v*Math.sin(_),T=Math.atan2(r*x-n*w,n*x+r*w),C=(T-g)*i.radDeg-l;C>180?C-=360:-180>C&&(C+=360),t.rotationIK=l+C*o,C=(_+g)*i.radDeg-a,C>180?C-=360:-180>C&&(C+=360),e.rotationIK=a+(C+t.worldRotation-e.parent.worldRotation)*o},i.Skin=function(t){this.name=t,this.attachments={}},i.Skin.prototype={addAttachment:function(t,e,i){this.attachments[t+":"+e]=i},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var i in e.attachments){var n=i.indexOf(":"),r=parseInt(i.substring(0,n)),s=i.substring(n+1),o=t.slots[r];if(o.attachment&&o.attachment.name==s){var a=this.getAttachment(r,s);a&&o.setAttachment(a)}}}},i.Animation=function(t,e,i){this.name=t,this.timelines=e,this.duration=i},i.Animation.prototype={apply:function(t,e,i,n,r){n&&0!=this.duration&&(i%=this.duration,e%=this.duration);for(var s=this.timelines,o=0,a=s.length;a>o;o++)s[o].apply(t,e,i,r,1)},mix:function(t,e,i,n,r,s){n&&0!=this.duration&&(i%=this.duration,e%=this.duration);for(var o=this.timelines,a=0,l=o.length;l>a;a++)o[a].apply(t,e,i,r,s)}},i.Animation.binarySearch=function(t,e,i){var n=0,r=Math.floor(t.length/i)-2;if(!r)return i;for(var s=r>>>1;;){if(t[(s+1)*i]<=e?n=s+1:r=s,n==r)return(n+1)*i;s=n+r>>>1}},i.Animation.binarySearch1=function(t,e){var i=0,n=t.length-2;if(!n)return 1;for(var r=n>>>1;;){if(t[r+1]<=e?i=r+1:n=r,i==n)return i+1;r=i+n>>>1}},i.Animation.linearSearch=function(t,e,i){for(var n=0,r=t.length-i;r>=n;n+=i)if(t[n]>e)return n;return-1},i.Curves=function(t){this.curves=[]},i.Curves.prototype={setLinear:function(t){this.curves[19*t]=0},setStepped:function(t){this.curves[19*t]=1},setCurve:function(t,e,i,n,r){var s=.1,o=s*s,a=o*s,l=3*s,h=3*o,c=6*o,u=6*a,d=2*-e+n,p=2*-i+r,f=3*(e-n)+1,g=3*(i-r)+1,m=e*l+d*h+f*a,v=i*l+p*h+g*a,b=d*c+f*u,y=p*c+g*u,_=f*u,x=g*u,w=19*t,T=this.curves;T[w++]=2;for(var C=m,S=v,E=w+19-1;E>w;w+=2)T[w]=C,T[w+1]=S,m+=b,v+=y,b+=_,y+=x,C+=m,S+=v},getCurvePercent:function(t,e){e=0>e?0:e>1?1:e;var i=this.curves,n=19*t,r=i[n];if(0===r)return e;if(1==r)return 0;n++;for(var s=0,o=n,a=n+19-1;a>n;n+=2)if(s=i[n],s>=e){var l,h;return n==o?(l=0,h=0):(l=i[n-2],h=i[n-1]),h+(i[n+1]-h)*(e-l)/(s-l)}var c=i[n-1];return c+(1-c)*(e-s)/(1-s)}},i.RotateTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=2*t},i.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,i){t*=2,this.frames[t]=e,this.frames[t+1]=i},apply:function(t,e,n,r,s){var o=this.frames;if(!(n<o[0])){var a=t.bones[this.boneIndex];if(n>=o[o.length-2]){for(var l=a.data.rotation+o[o.length-1]-a.rotation;l>180;)l-=360;for(;-180>l;)l+=360;return void(a.rotation+=l*s)}var h=i.Animation.binarySearch(o,n,2),c=o[h-1],u=o[h],d=1-(n-u)/(o[h-2]-u);d=this.curves.getCurvePercent(h/2-1,d);for(var l=o[h+1]-c;l>180;)l-=360;for(;-180>l;)l+=360;for(l=a.data.rotation+(c+l*d)-a.rotation;l>180;)l-=360;for(;-180>l;)l+=360;a.rotation+=l*s}}},i.TranslateTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=3*t},i.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,n){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=n},apply:function(t,e,n,r,s){var o=this.frames;if(!(n<o[0])){var a=t.bones[this.boneIndex];if(n>=o[o.length-3])return a.x+=(a.data.x+o[o.length-2]-a.x)*s,void(a.y+=(a.data.y+o[o.length-1]-a.y)*s);var l=i.Animation.binarySearch(o,n,3),h=o[l-2],c=o[l-1],u=o[l],d=1-(n-u)/(o[l+-3]-u);d=this.curves.getCurvePercent(l/3-1,d),a.x+=(a.data.x+h+(o[l+1]-h)*d-a.x)*s,a.y+=(a.data.y+c+(o[l+2]-c)*d-a.y)*s}}},i.ScaleTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=3*t},i.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,n){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=n},apply:function(t,e,n,r,s){var o=this.frames;if(!(n<o[0])){var a=t.bones[this.boneIndex];if(n>=o[o.length-3])return a.scaleX+=(a.data.scaleX*o[o.length-2]-a.scaleX)*s,void(a.scaleY+=(a.data.scaleY*o[o.length-1]-a.scaleY)*s);var l=i.Animation.binarySearch(o,n,3),h=o[l-2],c=o[l-1],u=o[l],d=1-(n-u)/(o[l+-3]-u);d=this.curves.getCurvePercent(l/3-1,d),a.scaleX+=(a.data.scaleX*(h+(o[l+1]-h)*d)-a.scaleX)*s,a.scaleY+=(a.data.scaleY*(c+(o[l+2]-c)*d)-a.scaleY)*s}}},i.ColorTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=5*t},i.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,i,n,r,s){t*=5,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=n,this.frames[t+3]=r,this.frames[t+4]=s},apply:function(t,e,n,r,s){var o=this.frames;if(!(n<o[0])){var a,l,h,c;if(n>=o[o.length-5]){var u=o.length-1;a=o[u-3],l=o[u-2],h=o[u-1],c=o[u]}else{var d=i.Animation.binarySearch(o,n,5),p=o[d-4],f=o[d-3],g=o[d-2],m=o[d-1],v=o[d],b=1-(n-v)/(o[d-5]-v);b=this.curves.getCurvePercent(d/5-1,b),a=p+(o[d+1]-p)*b,l=f+(o[d+2]-f)*b,h=g+(o[d+3]-g)*b,c=m+(o[d+4]-m)*b}var y=t.slots[this.slotIndex];1>s?(y.r+=(a-y.r)*s,y.g+=(l-y.g)*s,y.b+=(h-y.b)*s,y.a+=(c-y.a)*s):(y.r=a,y.g=l,y.b=h,y.a=c)}}},i.AttachmentTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=t,this.attachmentNames=[],this.attachmentNames.length=t},i.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},apply:function(t,e,n,r,s){var o=this.frames;if(n<o[0])return void(e>n&&this.apply(t,e,Number.MAX_VALUE,null,0));e>n&&(e=-1);var a=n>=o[o.length-1]?o.length-1:i.Animation.binarySearch1(o,n)-1;if(!(o[a]<e)){var l=this.attachmentNames[a];t.slots[this.slotIndex].setAttachment(l?t.getAttachmentBySlotIndex(this.slotIndex,l):null)}}},i.EventTimeline=function(t){this.frames=[],this.frames.length=t,this.events=[],this.events.length=t},i.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,i){this.frames[t]=e,this.events[t]=i},apply:function(t,e,n,r,s){if(r){var o=this.frames,a=o.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,r,s),e=-1;else if(e>=o[a-1])return;if(!(n<o[0])){var l;if(e<o[0])l=0;else{l=i.Animation.binarySearch1(o,e);for(var h=o[l];l>0&&o[l-1]==h;)l--}for(var c=this.events;a>l&&n>=o[l];l++)r.push(c[l])}}}},i.DrawOrderTimeline=function(t){this.frames=[],this.frames.length=t,this.drawOrders=[],this.drawOrders.length=t},i.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},apply:function(t,e,n,r,s){var o=this.frames;if(!(n<o[0])){var a;a=n>=o[o.length-1]?o.length-1:i.Animation.binarySearch1(o,n)-1;var l=t.drawOrder,h=t.slots,c=this.drawOrders[a];if(c)for(var u=0,d=c.length;d>u;u++)l[u]=t.slots[c[u]];else for(var u=0,d=h.length;d>u;u++)l[u]=h[u]}}},i.FfdTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=t,this.frameVertices=[],this.frameVertices.length=t},i.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,i){this.frames[t]=e,this.frameVertices[t]=i},apply:function(t,e,n,r,s){var o=t.slots[this.slotIndex];if(o.attachment==this.attachment){var a=this.frames;if(!(n<a[0])){var l=this.frameVertices,h=l[0].length,c=o.attachmentVertices;if(c.length!=h&&(s=1),c.length=h,n>=a[a.length-1]){var u=l[a.length-1];if(1>s)for(var d=0;h>d;d++)c[d]+=(u[d]-c[d])*s;else for(var d=0;h>d;d++)c[d]=u[d]}else{var p=i.Animation.binarySearch1(a,n),f=a[p],g=1-(n-f)/(a[p-1]-f);g=this.curves.getCurvePercent(p-1,0>g?0:g>1?1:g);var m=l[p-1],v=l[p];if(1>s)for(var d=0;h>d;d++){var b=m[d];c[d]+=(b+(v[d]-b)*g-c[d])*s}else for(var d=0;h>d;d++){var b=m[d];c[d]=b+(v[d]-b)*g}}}}}},i.IkConstraintTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=3*t},i.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,n){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=n},apply:function(t,e,n,r,s){var o=this.frames;if(!(n<o[0])){var a=t.ikConstraints[this.ikConstraintIndex];if(n>=o[o.length-3])return a.mix+=(o[o.length-2]-a.mix)*s,void(a.bendDirection=o[o.length-1]);var l=i.Animation.binarySearch(o,n,3),h=o[l+-2],c=o[l],u=1-(n-c)/(o[l+-3]-c);u=this.curves.getCurvePercent(l/3-1,u);var d=h+(o[l+1]-h)*u;a.mix+=(d-a.mix)*s,a.bendDirection=o[l+-1]}}},i.FlipXTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=2*t},i.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,i){t*=2,this.frames[t]=e,this.frames[t+1]=i?1:0},apply:function(t,e,n,r,s){var o=this.frames;if(n<o[0])return void(e>n&&this.apply(t,e,Number.MAX_VALUE,null,0));e>n&&(e=-1);var a=(n>=o[o.length-2]?o.length:i.Animation.binarySearch(o,n,2))-2;o[a]<e||(t.bones[boneIndex].flipX=0!=o[a+1])}},i.FlipYTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=2*t},i.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,i){t*=2,this.frames[t]=e,this.frames[t+1]=i?1:0},apply:function(t,e,n,r,s){var o=this.frames;if(n<o[0])return void(e>n&&this.apply(t,e,Number.MAX_VALUE,null,0));e>n&&(e=-1);var a=(n>=o[o.length-2]?o.length:i.Animation.binarySearch(o,n,2))-2;o[a]<e||(t.bones[boneIndex].flipY=0!=o[a+1])}},i.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},i.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(t){for(var e=this.bones,i=0,n=e.length;n>i;i++)if(e[i].name==t)return e[i];return null},findBoneIndex:function(t){for(var e=this.bones,i=0,n=e.length;n>i;i++)if(e[i].name==t)return i;return-1},findSlot:function(t){for(var e=this.slots,i=0,n=e.length;n>i;i++)if(e[i].name==t)return slot[i];return null},findSlotIndex:function(t){for(var e=this.slots,i=0,n=e.length;n>i;i++)if(e[i].name==t)return i;return-1},findSkin:function(t){for(var e=this.skins,i=0,n=e.length;n>i;i++)if(e[i].name==t)return e[i];return null},findEvent:function(t){for(var e=this.events,i=0,n=e.length;n>i;i++)if(e[i].name==t)return e[i];return null},findAnimation:function(t){for(var e=this.animations,i=0,n=e.length;n>i;i++)if(e[i].name==t)return e[i];return null},findIkConstraint:function(t){for(var e=this.ikConstraints,i=0,n=e.length;n>i;i++)if(e[i].name==t)return e[i];return null}},i.Skeleton=function(t){this.data=t,this.bones=[];for(var e=0,n=t.bones.length;n>e;e++){var r=t.bones[e],s=r.parent?this.bones[t.bones.indexOf(r.parent)]:null;this.bones.push(new i.Bone(r,this,s))}this.slots=[],this.drawOrder=[];for(var e=0,n=t.slots.length;n>e;e++){var o=t.slots[e],a=this.bones[t.bones.indexOf(o.boneData)],l=new i.Slot(o,a);this.slots.push(l),this.drawOrder.push(l)}this.ikConstraints=[];for(var e=0,n=t.ikConstraints.length;n>e;e++)this.ikConstraints.push(new i.IkConstraint(t.ikConstraints[e],this));this.boneCache=[],this.updateCache()},i.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var t=this.ikConstraints,e=t.length,i=e+1,n=this.boneCache;n.length>i&&(n.length=i);for(var r=0,s=n.length;s>r;r++)n[r].length=0;for(;n.length<i;)n[n.length]=[];var o=n[0],a=this.bones;t:for(var r=0,s=a.length;s>r;r++){var l=a[r],h=l;do{for(var c=0;e>c;c++)for(var u=t[c],d=u.bones[0],p=u.bones[u.bones.length-1];;){if(h==p){n[c].push(l),n[c+1].push(l);continue t}if(p==d)break;p=p.parent}h=h.parent}while(h);o[o.length]=l}},updateWorldTransform:function(){for(var t=this.bones,e=0,i=t.length;i>e;e++){var n=t[e];n.rotationIK=n.rotation}for(var e=0,r=this.boneCache.length-1;;){for(var s=this.boneCache[e],o=0,a=s.length;a>o;o++)s[o].updateWorldTransform();if(e==r)break;this.ikConstraints[e].apply(),e++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var t=this.bones,e=0,i=t.length;i>e;e++)t[e].setToSetupPose();for(var n=this.ikConstraints,e=0,i=n.length;i>e;e++){var r=n[e];r.bendDirection=r.data.bendDirection,r.mix=r.data.mix}},setSlotsToSetupPose:function(){for(var t=this.slots,e=this.drawOrder,i=0,n=t.length;n>i;i++)e[i]=t[i],t[i].setToSetupPose(i)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){for(var e=this.bones,i=0,n=e.length;n>i;i++)if(e[i].data.name==t)return e[i];return null},findBoneIndex:function(t){for(var e=this.bones,i=0,n=e.length;n>i;i++)if(e[i].data.name==t)return i;return-1},findSlot:function(t){for(var e=this.slots,i=0,n=e.length;n>i;i++)if(e[i].data.name==t)return e[i];return null},findSlotIndex:function(t){for(var e=this.slots,i=0,n=e.length;n>i;i++)if(e[i].data.name==t)return i;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){if(t)if(this.skin)t._attachAll(this,this.skin);else for(var e=this.slots,i=0,n=e.length;n>i;i++){var r=e[i],s=r.data.attachmentName;if(s){var o=t.getAttachment(i,s);o&&r.setAttachment(o)}}this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},setAttachment:function(t,e){for(var i=this.slots,n=0,r=i.length;r>n;n++){var s=i[n];if(s.data.name==t){var o=null;if(e&&(o=this.getAttachmentBySlotIndex(n,e),!o))throw"Attachment not found: "+e+", for slot: "+t;return void s.setAttachment(o)}}throw"Slot not found: "+t},findIkConstraint:function(t){for(var e=this.ikConstraints,i=0,n=e.length;n>i;i++)if(e[i].data.name==t)return e[i];return null},update:function(t){this.time+=t}},i.EventData=function(t){this.name=t},i.EventData.prototype={intValue:0,floatValue:0,stringValue:null},i.Event=function(t){this.data=t},i.Event.prototype={intValue:0,floatValue:0,stringValue:null},i.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},i.RegionAttachment=function(t){this.name=t,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},i.RegionAttachment.prototype={type:i.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,i,n,r){var s=this.uvs;r?(s[2]=t,s[3]=n,s[4]=t,s[5]=e,s[6]=i,s[7]=e,s[0]=i,s[1]=n):(s[0]=t,s[1]=n,s[2]=t,s[3]=e,s[4]=i,s[5]=e,s[6]=i,s[7]=n)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.regionOffsetX*t,r=-this.height/2*this.scaleY+this.regionOffsetY*e,s=n+this.regionWidth*t,o=r+this.regionHeight*e,a=this.rotation*i.degRad,l=Math.cos(a),h=Math.sin(a),c=n*l+this.x,u=n*h,d=r*l+this.y,p=r*h,f=s*l+this.x,g=s*h,m=o*l+this.y,v=o*h,b=this.offset;b[0]=c-p,b[1]=d+u,b[2]=c-v,b[3]=m+u,b[4]=f-v,b[5]=m+g,b[6]=f-p,b[7]=d+g},computeVertices:function(t,e,i,n){t+=i.worldX,e+=i.worldY;var r=i.m00,s=i.m01,o=i.m10,a=i.m11,l=this.offset;n[0]=l[0]*r+l[1]*s+t,n[1]=l[0]*o+l[1]*a+e,n[2]=l[2]*r+l[3]*s+t,n[3]=l[2]*o+l[3]*a+e,n[4]=l[4]*r+l[5]*s+t,n[5]=l[4]*o+l[5]*a+e,n[6]=l[6]*r+l[7]*s+t,n[7]=l[6]*o+l[7]*a+e}},i.MeshAttachment=function(t){this.name=t},i.MeshAttachment.prototype={type:i.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,e=this.regionV2-this.regionV,n=this.regionUVs.length;if(this.uvs&&this.uvs.length==n||(this.uvs=new i.Float32Array(n)),this.regionRotate)for(var r=0;n>r;r+=2)this.uvs[r]=this.regionU+this.regionUVs[r+1]*t,this.uvs[r+1]=this.regionV+e-this.regionUVs[r]*e;else for(var r=0;n>r;r+=2)this.uvs[r]=this.regionU+this.regionUVs[r]*t,this.uvs[r+1]=this.regionV+this.regionUVs[r+1]*e},computeWorldVertices:function(t,e,i,n){var r=i.bone;t+=r.worldX,e+=r.worldY;var s=r.m00,o=r.m01,a=r.m10,l=r.m11,h=this.vertices,c=h.length;i.attachmentVertices.length==c&&(h=i.attachmentVertices);for(var u=0;c>u;u+=2){var d=h[u],p=h[u+1];n[u]=d*s+p*o+t,n[u+1]=d*a+p*l+e}}},i.SkinnedMeshAttachment=function(t){this.name=t},i.SkinnedMeshAttachment.prototype={type:i.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(t,e,n,r,s){var o=this.regionU2-this.regionU,a=this.regionV2-this.regionV,l=this.regionUVs.length;if(this.uvs&&this.uvs.length==l||(this.uvs=new i.Float32Array(l)),this.regionRotate)for(var h=0;l>h;h+=2)this.uvs[h]=this.regionU+this.regionUVs[h+1]*o,this.uvs[h+1]=this.regionV+a-this.regionUVs[h]*a;else for(var h=0;l>h;h+=2)this.uvs[h]=this.regionU+this.regionUVs[h]*o,this.uvs[h+1]=this.regionV+this.regionUVs[h+1]*a},computeWorldVertices:function(t,e,i,n){var r,s,o,a,l,h,c,u=i.bone.skeleton.bones,d=this.weights,p=this.bones,f=0,g=0,m=0,v=0,b=p.length;if(i.attachmentVertices.length)for(var y=i.attachmentVertices;b>g;f+=2){for(s=0,o=0,r=p[g++]+g;r>g;g++,m+=3,v+=2)a=u[p[g]],l=d[m]+y[v],h=d[m+1]+y[v+1],c=d[m+2],s+=(l*a.m00+h*a.m01+a.worldX)*c,o+=(l*a.m10+h*a.m11+a.worldY)*c;n[f]=s+t,n[f+1]=o+e}else for(;b>g;f+=2){for(s=0,o=0,r=p[g++]+g;r>g;g++,m+=3)a=u[p[g]],l=d[m],h=d[m+1],c=d[m+2],s+=(l*a.m00+h*a.m01+a.worldX)*c,o+=(l*a.m10+h*a.m11+a.worldY)*c;n[f]=s+t,n[f+1]=o+e}}},i.BoundingBoxAttachment=function(t){this.name=t,this.vertices=[]},i.BoundingBoxAttachment.prototype={type:i.AttachmentType.boundingbox,computeWorldVertices:function(t,e,i,n){t+=i.worldX,e+=i.worldY;for(var r=i.m00,s=i.m01,o=i.m10,a=i.m11,l=this.vertices,h=0,c=l.length;c>h;h+=2){var u=l[h],d=l[h+1];n[h]=u*r+d*s+t,n[h+1]=u*o+d*a+e}}},i.AnimationStateData=function(t){this.skeletonData=t,this.animationToMixTime={}},i.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,i){var n=this.skeletonData.findAnimation(t);if(!n)throw"Animation not found: "+t;var r=this.skeletonData.findAnimation(e);if(!r)throw"Animation not found: "+e;this.setMix(n,r,i)},setMix:function(t,e,i){this.animationToMixTime[t.name+":"+e.name]=i},getMix:function(t,e){var i=t.name+":"+e.name;return this.animationToMixTime.hasOwnProperty(i)?this.animationToMixTime[i]:this.defaultMix}},i.TrackEntry=function(){},i.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},i.AnimationState=function(t){this.data=t,this.tracks=[],this.events=[]},i.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(t){t*=this.timeScale;for(var e=0;e<this.tracks.length;e++){var i=this.tracks[e];if(i){if(i.time+=t*i.timeScale,i.previous){var n=t*i.previous.timeScale;i.previous.time+=n,i.mixTime+=n}var r=i.next;r?(r.time=i.lastTime-r.delay,r.time>=0&&this.setCurrent(e,r)):!i.loop&&i.lastTime>=i.endTime&&this.clearTrack(e)}}},apply:function(t){for(var e=0;e<this.tracks.length;e++){var i=this.tracks[e];if(i){this.events.length=0;var n=i.time,r=i.lastTime,s=i.endTime,o=i.loop;!o&&n>s&&(n=s);var a=i.previous;if(a){var l=a.time;!a.loop&&l>a.endTime&&(l=a.endTime),a.animation.apply(t,l,l,a.loop,null);var h=i.mixTime/i.mixDuration*i.mix;h>=1&&(h=1,i.previous=null),i.animation.mix(t,i.lastTime,n,o,this.events,h)}else 1==i.mix?i.animation.apply(t,i.lastTime,n,o,this.events):i.animation.mix(t,i.lastTime,n,o,this.events,i.mix);for(var c=0,u=this.events.length;u>c;c++){var d=this.events[c];i.onEvent&&i.onEvent(e,d),this.onEvent&&this.onEvent(e,d)}if(o?r%s>n%s:s>r&&n>=s){var p=Math.floor(n/s);i.onComplete&&i.onComplete(e,p),this.onComplete&&this.onComplete(e,p)}i.lastTime=i.time}}},clearTracks:function(){for(var t=0,e=this.tracks.length;e>t;t++)this.clearTrack(t);this.tracks.length=0},clearTrack:function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];e&&(e.onEnd&&e.onEnd(t),this.onEnd&&this.onEnd(t),this.tracks[t]=null)}},_expandToIndex:function(t){if(t<this.tracks.length)return this.tracks[t];for(;t>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(t,e){var i=this._expandToIndex(t);if(i){var n=i.previous;i.previous=null,i.onEnd&&i.onEnd(t),this.onEnd&&this.onEnd(t),e.mixDuration=this.data.getMix(i.animation,e.animation),e.mixDuration>0&&(e.mixTime=0,n&&i.mixTime/i.mixDuration<.5?e.previous=n:e.previous=i)}this.tracks[t]=e,e.onStart&&e.onStart(t),this.onStart&&this.onStart(t)},setAnimationByName:function(t,e,i){var n=this.data.skeletonData.findAnimation(e);if(!n)throw"Animation not found: "+e;
return this.setAnimation(t,n,i)},setAnimation:function(t,e,n){var r=new i.TrackEntry;return r.animation=e,r.loop=n,r.endTime=e.duration,this.setCurrent(t,r),r},addAnimationByName:function(t,e,i,n){var r=this.data.skeletonData.findAnimation(e);if(!r)throw"Animation not found: "+e;return this.addAnimation(t,r,i,n)},addAnimation:function(t,e,n,r){var s=new i.TrackEntry;s.animation=e,s.loop=n,s.endTime=e.duration;var o=this._expandToIndex(t);if(o){for(;o.next;)o=o.next;o.next=s}else this.tracks[t]=s;return 0>=r&&(o?r+=o.endTime-this.data.getMix(o.animation,e):r=0),s.delay=r,s},getCurrent:function(t){return t>=this.tracks.length?null:this.tracks[t]}},i.SkeletonJson=function(t){this.attachmentLoader=t},i.SkeletonJson.prototype={scale:1,readSkeletonData:function(t,e){var n=new i.SkeletonData;n.name=e;var r=t.skeleton;r&&(n.hash=r.hash,n.version=r.spine,n.width=r.width||0,n.height=r.height||0);for(var s=t.bones,o=0,a=s.length;a>o;o++){var l=s[o],h=null;if(l.parent&&(h=n.findBone(l.parent),!h))throw"Parent bone not found: "+l.parent;var c=new i.BoneData(l.name,h);c.length=(l.length||0)*this.scale,c.x=(l.x||0)*this.scale,c.y=(l.y||0)*this.scale,c.rotation=l.rotation||0,c.scaleX=l.hasOwnProperty("scaleX")?l.scaleX:1,c.scaleY=l.hasOwnProperty("scaleY")?l.scaleY:1,c.inheritScale=l.hasOwnProperty("inheritScale")?l.inheritScale:!0,c.inheritRotation=l.hasOwnProperty("inheritRotation")?l.inheritRotation:!0,n.bones.push(c)}var u=t.ik;if(u)for(var o=0,a=u.length;a>o;o++){for(var d=u[o],p=new i.IkConstraintData(d.name),s=d.bones,f=0,g=s.length;g>f;f++){var m=n.findBone(s[f]);if(!m)throw"IK bone not found: "+s[f];p.bones.push(m)}if(p.target=n.findBone(d.target),!p.target)throw"Target bone not found: "+d.target;p.bendDirection=!d.hasOwnProperty("bendPositive")||d.bendPositive?1:-1,p.mix=d.hasOwnProperty("mix")?d.mix:1,n.ikConstraints.push(p)}for(var v=t.slots,o=0,a=v.length;a>o;o++){var b=v[o],c=n.findBone(b.bone);if(!c)throw"Slot bone not found: "+b.bone;var y=new i.SlotData(b.name,c),_=b.color;_&&(y.r=this.toColor(_,0),y.g=this.toColor(_,1),y.b=this.toColor(_,2),y.a=this.toColor(_,3)),y.attachmentName=b.attachment,y.additiveBlending=b.additive&&"true"==b.additive,n.slots.push(y)}var x=t.skins;for(var w in x)if(x.hasOwnProperty(w)){var T=x[w],C=new i.Skin(w);for(var S in T)if(T.hasOwnProperty(S)){var E=n.findSlotIndex(S),M=T[S];for(var A in M)if(M.hasOwnProperty(A)){var k=this.readAttachment(C,A,M[A]);k&&C.addAttachment(E,A,k)}}n.skins.push(C),"default"==C.name&&(n.defaultSkin=C)}var P=t.events;for(var R in P)if(P.hasOwnProperty(R)){var B=P[R],I=new i.EventData(R);I.intValue=B["int"]||0,I.floatValue=B["float"]||0,I.stringValue=B.string||null,n.events.push(I)}var L=t.animations;for(var O in L)L.hasOwnProperty(O)&&this.readAnimation(O,L[O],n);return n},readAttachment:function(t,e,n){e=n.name||e;var r=i.AttachmentType[n.type||"region"],s=n.path||e,o=this.scale;if(r==i.AttachmentType.region){var a=this.attachmentLoader.newRegionAttachment(t,e,s);if(!a)return null;a.path=s,a.x=(n.x||0)*o,a.y=(n.y||0)*o,a.scaleX=n.hasOwnProperty("scaleX")?n.scaleX:1,a.scaleY=n.hasOwnProperty("scaleY")?n.scaleY:1,a.rotation=n.rotation||0,a.width=(n.width||0)*o,a.height=(n.height||0)*o;var l=n.color;return l&&(a.r=this.toColor(l,0),a.g=this.toColor(l,1),a.b=this.toColor(l,2),a.a=this.toColor(l,3)),a.updateOffset(),a}if(r==i.AttachmentType.mesh){var h=this.attachmentLoader.newMeshAttachment(t,e,s);return h?(h.path=s,h.vertices=this.getFloatArray(n,"vertices",o),h.triangles=this.getIntArray(n,"triangles"),h.regionUVs=this.getFloatArray(n,"uvs",1),h.updateUVs(),l=n.color,l&&(h.r=this.toColor(l,0),h.g=this.toColor(l,1),h.b=this.toColor(l,2),h.a=this.toColor(l,3)),h.hullLength=2*(n.hull||0),n.edges&&(h.edges=this.getIntArray(n,"edges")),h.width=(n.width||0)*o,h.height=(n.height||0)*o,h):null}if(r==i.AttachmentType.skinnedmesh){var h=this.attachmentLoader.newSkinnedMeshAttachment(t,e,s);if(!h)return null;h.path=s;for(var c=this.getFloatArray(n,"uvs",1),u=this.getFloatArray(n,"vertices",1),d=[],p=[],f=0,g=u.length;g>f;){var m=0|u[f++];p[p.length]=m;for(var v=f+4*m;v>f;)p[p.length]=u[f],d[d.length]=u[f+1]*o,d[d.length]=u[f+2]*o,d[d.length]=u[f+3],f+=4}return h.bones=p,h.weights=d,h.triangles=this.getIntArray(n,"triangles"),h.regionUVs=c,h.updateUVs(),l=n.color,l&&(h.r=this.toColor(l,0),h.g=this.toColor(l,1),h.b=this.toColor(l,2),h.a=this.toColor(l,3)),h.hullLength=2*(n.hull||0),n.edges&&(h.edges=this.getIntArray(n,"edges")),h.width=(n.width||0)*o,h.height=(n.height||0)*o,h}if(r==i.AttachmentType.boundingbox){for(var b=this.attachmentLoader.newBoundingBoxAttachment(t,e),u=n.vertices,f=0,g=u.length;g>f;f++)b.vertices.push(u[f]*o);return b}throw"Unknown attachment type: "+r},readAnimation:function(t,e,n){var r=[],s=0,o=e.slots;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a],h=n.findSlotIndex(a);for(var c in l)if(l.hasOwnProperty(c)){var u=l[c];if("color"==c){var d=new i.ColorTimeline(u.length);d.slotIndex=h;for(var p=0,f=0,g=u.length;g>f;f++){var m=u[f],v=m.color,b=this.toColor(v,0),y=this.toColor(v,1),_=this.toColor(v,2),x=this.toColor(v,3);d.setFrame(p,m.time,b,y,_,x),this.readCurve(d,p,m),p++}r.push(d),s=Math.max(s,d.frames[5*d.getFrameCount()-5])}else{if("attachment"!=c)throw"Invalid timeline type for a slot: "+c+" ("+a+")";var d=new i.AttachmentTimeline(u.length);d.slotIndex=h;for(var p=0,f=0,g=u.length;g>f;f++){var m=u[f];d.setFrame(p++,m.time,m.name)}r.push(d),s=Math.max(s,d.frames[d.getFrameCount()-1])}}}var w=e.bones;for(var T in w)if(w.hasOwnProperty(T)){var C=n.findBoneIndex(T);if(-1==C)throw"Bone not found: "+T;var S=w[T];for(var c in S)if(S.hasOwnProperty(c)){var u=S[c];if("rotate"==c){var d=new i.RotateTimeline(u.length);d.boneIndex=C;for(var p=0,f=0,g=u.length;g>f;f++){var m=u[f];d.setFrame(p,m.time,m.angle),this.readCurve(d,p,m),p++}r.push(d),s=Math.max(s,d.frames[2*d.getFrameCount()-2])}else if("translate"==c||"scale"==c){var d,E=1;"scale"==c?d=new i.ScaleTimeline(u.length):(d=new i.TranslateTimeline(u.length),E=this.scale),d.boneIndex=C;for(var p=0,f=0,g=u.length;g>f;f++){var m=u[f],M=(m.x||0)*E,A=(m.y||0)*E;d.setFrame(p,m.time,M,A),this.readCurve(d,p,m),p++}r.push(d),s=Math.max(s,d.frames[3*d.getFrameCount()-3])}else{if("flipX"!=c&&"flipY"!=c)throw"Invalid timeline type for a bone: "+c+" ("+T+")";var M="flipX"==c,d=M?new i.FlipXTimeline(u.length):new i.FlipYTimeline(u.length);d.boneIndex=C;for(var k=M?"x":"y",p=0,f=0,g=u.length;g>f;f++){var m=u[f];d.setFrame(p,m.time,m[k]||!1),p++}r.push(d),s=Math.max(s,d.frames[2*d.getFrameCount()-2])}}}var P=e.ik;for(var R in P)if(P.hasOwnProperty(R)){var B=n.findIkConstraint(R),u=P[R],d=new i.IkConstraintTimeline(u.length);d.ikConstraintIndex=n.ikConstraints.indexOf(B);for(var p=0,f=0,g=u.length;g>f;f++){var m=u[f],I=m.hasOwnProperty("mix")?m.mix:1,L=!m.hasOwnProperty("bendPositive")||m.bendPositive?1:-1;d.setFrame(p,m.time,I,L),this.readCurve(d,p,m),p++}r.push(d),s=Math.max(s,d.frames[3*d.frameCount-3])}var O=e.ffd;for(var D in O){var F=n.findSkin(D),l=O[D];for(a in l){var h=n.findSlotIndex(a),N=l[a];for(var $ in N){var u=N[$],d=new i.FfdTimeline(u.length),j=F.getAttachment(h,$);if(!j)throw"FFD attachment not found: "+$;d.slotIndex=h,d.attachment=j;var U,H=j.type==i.AttachmentType.mesh;U=H?j.vertices.length:j.weights.length/3*2;for(var p=0,f=0,g=u.length;g>f;f++){var G,m=u[f];if(m.vertices){var W=m.vertices,G=[];G.length=U;var V=m.offset||0,z=W.length;if(1==this.scale)for(var X=0;z>X;X++)G[X+V]=W[X];else for(var X=0;z>X;X++)G[X+V]=W[X]*this.scale;if(H)for(var Y=j.vertices,X=0,z=G.length;z>X;X++)G[X]+=Y[X]}else H?G=j.vertices:(G=[],G.length=U);d.setFrame(p,m.time,G),this.readCurve(d,p,m),p++}r[r.length]=d,s=Math.max(s,d.frames[d.frameCount-1])}}}var q=e.drawOrder;if(q||(q=e.draworder),q){for(var d=new i.DrawOrderTimeline(q.length),K=n.slots.length,p=0,f=0,g=q.length;g>f;f++){var Q=q[f],J=null;if(Q.offsets){J=[],J.length=K;for(var X=K-1;X>=0;X--)J[X]=-1;var Z=Q.offsets,tt=[];tt.length=K-Z.length;for(var et=0,it=0,X=0,z=Z.length;z>X;X++){var nt=Z[X],h=n.findSlotIndex(nt.slot);if(-1==h)throw"Slot not found: "+nt.slot;for(;et!=h;)tt[it++]=et++;J[et+nt.offset]=et++}for(;K>et;)tt[it++]=et++;for(var X=K-1;X>=0;X--)-1==J[X]&&(J[X]=tt[--it])}d.setFrame(p++,Q.time,J)}r.push(d),s=Math.max(s,d.frames[d.getFrameCount()-1])}var rt=e.events;if(rt){for(var d=new i.EventTimeline(rt.length),p=0,f=0,g=rt.length;g>f;f++){var st=rt[f],ot=n.findEvent(st.name);if(!ot)throw"Event not found: "+st.name;var at=new i.Event(ot);at.intValue=st.hasOwnProperty("int")?st["int"]:ot.intValue,at.floatValue=st.hasOwnProperty("float")?st["float"]:ot.floatValue,at.stringValue=st.hasOwnProperty("string")?st.string:ot.stringValue,d.setFrame(p++,st.time,at)}r.push(d),s=Math.max(s,d.frames[d.getFrameCount()-1])}n.animations.push(new i.Animation(t,r,s))},readCurve:function(t,e,i){var n=i.curve;n?"stepped"==n?t.curves.setStepped(e):n instanceof Array&&t.curves.setCurve(e,n[0],n[1],n[2],n[3]):t.curves.setLinear(e)},toColor:function(t,e){if(8!=t.length)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substring(2*e,2*e+2),16)/255},getFloatArray:function(t,e,n){var r=t[e],s=new i.Float32Array(r.length),o=0,a=r.length;if(1==n)for(;a>o;o++)s[o]=r[o];else for(;a>o;o++)s[o]=r[o]*n;return s},getIntArray:function(t,e){for(var n=t[e],r=new i.Uint16Array(n.length),s=0,o=n.length;o>s;s++)r[s]=0|n[s];return r}},i.Atlas=function(t,e){this.textureLoader=e,this.pages=[],this.regions=[];var n=new i.AtlasReader(t),r=[];r.length=4;for(var s=null;;){var o=n.readLine();if(null===o)break;if(o=n.trim(o),o.length)if(s){var a=new i.AtlasRegion;a.name=o,a.page=s,a.rotate="true"==n.readValue(),n.readTuple(r);var l=parseInt(r[0]),h=parseInt(r[1]);n.readTuple(r);var c=parseInt(r[0]),u=parseInt(r[1]);a.u=l/s.width,a.v=h/s.height,a.rotate?(a.u2=(l+u)/s.width,a.v2=(h+c)/s.height):(a.u2=(l+c)/s.width,a.v2=(h+u)/s.height),a.x=l,a.y=h,a.width=Math.abs(c),a.height=Math.abs(u),4==n.readTuple(r)&&(a.splits=[parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],4==n.readTuple(r)&&(a.pads=[parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],n.readTuple(r))),a.originalWidth=parseInt(r[0]),a.originalHeight=parseInt(r[1]),n.readTuple(r),a.offsetX=parseInt(r[0]),a.offsetY=parseInt(r[1]),a.index=parseInt(n.readValue()),this.regions.push(a)}else{s=new i.AtlasPage,s.name=o,2==n.readTuple(r)&&(s.width=parseInt(r[0]),s.height=parseInt(r[1]),n.readTuple(r)),s.format=i.Atlas.Format[r[0]],n.readTuple(r),s.minFilter=i.Atlas.TextureFilter[r[0]],s.magFilter=i.Atlas.TextureFilter[r[1]];var d=n.readValue();s.uWrap=i.Atlas.TextureWrap.clampToEdge,s.vWrap=i.Atlas.TextureWrap.clampToEdge,"x"==d?s.uWrap=i.Atlas.TextureWrap.repeat:"y"==d?s.vWrap=i.Atlas.TextureWrap.repeat:"xy"==d&&(s.uWrap=s.vWrap=i.Atlas.TextureWrap.repeat),e.load(s,o,this),this.pages.push(s)}else s=null}},i.Atlas.prototype={findRegion:function(t){for(var e=this.regions,i=0,n=e.length;n>i;i++)if(e[i].name==t)return e[i];return null},dispose:function(){for(var t=this.pages,e=0,i=t.length;i>e;e++)this.textureLoader.unload(t[e].rendererObject)},updateUVs:function(t){for(var e=this.regions,i=0,n=e.length;n>i;i++){var r=e[i];r.page==t&&(r.u=r.x/t.width,r.v=r.y/t.height,r.rotate?(r.u2=(r.x+r.height)/t.width,r.v2=(r.y+r.width)/t.height):(r.u2=(r.x+r.width)/t.width,r.v2=(r.y+r.height)/t.height))}}},i.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},i.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},i.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},i.AtlasPage=function(){},i.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},i.AtlasRegion=function(){},i.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},i.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)},i.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),i=e.indexOf(":");if(-1==i)throw"Invalid line: "+e;for(var n=0,r=i+1;3>n;n++){var s=e.indexOf(",",r);if(-1==s)break;t[n]=this.trim(e.substr(r,s-r)),r=s+1}return t[n]=this.trim(e.substring(r)),n+1}},i.AtlasAttachmentLoader=function(t){this.atlas=t},i.AtlasAttachmentLoader.prototype={newRegionAttachment:function(t,e,n){var r=this.atlas.findRegion(n);if(!r)throw"Region not found in atlas: "+n+" (region attachment: "+e+")";var s=new i.RegionAttachment(e);return s.rendererObject=r,s.setUVs(r.u,r.v,r.u2,r.v2,r.rotate),s.regionOffsetX=r.offsetX,s.regionOffsetY=r.offsetY,s.regionWidth=r.width,s.regionHeight=r.height,s.regionOriginalWidth=r.originalWidth,s.regionOriginalHeight=r.originalHeight,s},newMeshAttachment:function(t,e,n){var r=this.atlas.findRegion(n);if(!r)throw"Region not found in atlas: "+n+" (mesh attachment: "+e+")";var s=new i.MeshAttachment(e);return s.rendererObject=r,s.regionU=r.u,s.regionV=r.v,s.regionU2=r.u2,s.regionV2=r.v2,s.regionRotate=r.rotate,s.regionOffsetX=r.offsetX,s.regionOffsetY=r.offsetY,s.regionWidth=r.width,s.regionHeight=r.height,s.regionOriginalWidth=r.originalWidth,s.regionOriginalHeight=r.originalHeight,s},newSkinnedMeshAttachment:function(t,e,n){var r=this.atlas.findRegion(n);if(!r)throw"Region not found in atlas: "+n+" (skinned mesh attachment: "+e+")";var s=new i.SkinnedMeshAttachment(e);return s.rendererObject=r,s.regionU=r.u,s.regionV=r.v,s.regionU2=r.u2,s.regionV2=r.v2,s.regionRotate=r.rotate,s.regionOffsetX=r.offsetX,s.regionOffsetY=r.offsetY,s.regionWidth=r.width,s.regionHeight=r.height,s.regionOriginalWidth=r.originalWidth,s.regionOriginalHeight=r.originalHeight,s},newBoundingBoxAttachment:function(t,e){return new i.BoundingBoxAttachment(e)}},i.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},i.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(t,e){var n=t.slots,r=n.length,s=t.x,o=t.y,a=this.boundingBoxes,l=this.polygonPool,h=this.polygons;a.length=0;for(var c=0,u=h.length;u>c;c++)l.push(h[c]);h.length=0;for(var c=0;r>c;c++){var d=n[c],p=d.attachment;if(p.type==i.AttachmentType.boundingbox){a.push(p);var f,g=l.length;g>0?(f=l[g-1],l.splice(g-1,1)):f=[],h.push(f),f.length=p.vertices.length,p.computeWorldVertices(s,o,d.bone,f)}}e&&this.aabbCompute()},aabbCompute:function(){for(var t=this.polygons,e=Number.MAX_VALUE,i=Number.MAX_VALUE,n=Number.MIN_VALUE,r=Number.MIN_VALUE,s=0,o=t.length;o>s;s++)for(var a=t[s],l=0,h=a.length;h>l;l+=2){var c=a[l],u=a[l+1];e=Math.min(e,c),i=Math.min(i,u),n=Math.max(n,c),r=Math.max(r,u)}this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},aabbContainsPoint:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},aabbIntersectsSegment:function(t,e,i,n){var r=this.minX,s=this.minY,o=this.maxX,a=this.maxY;if(r>=t&&r>=i||s>=e&&s>=n||t>=o&&i>=o||e>=a&&n>=a)return!1;var l=(n-e)/(i-t),h=l*(r-t)+e;if(h>s&&a>h)return!0;if(h=l*(o-t)+e,h>s&&a>h)return!0;var c=(s-e)/l+t;return c>r&&o>c?!0:(c=(a-e)/l+t,c>r&&o>c?!0:!1)},aabbIntersectsSkeleton:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},containsPoint:function(t,e){for(var i=this.polygons,n=0,r=i.length;r>n;n++)if(this.polygonContainsPoint(i[n],t,e))return this.boundingBoxes[n];return null},intersectsSegment:function(t,e,i,n){for(var r=this.polygons,s=0,o=r.length;o>s;s++)if(r[s].intersectsSegment(t,e,i,n))return this.boundingBoxes[s];return null},polygonContainsPoint:function(t,e,i){for(var n=t.length,r=n-2,s=!1,o=0;n>o;o+=2){var a=t[o+1],l=t[r+1];if(i>a&&l>=i||i>l&&a>=i){var h=t[o];h+(i-a)/(l-a)*(t[r]-h)<e&&(s=!s)}r=o}return s},polygonIntersectsSegment:function(t,e,i,n,r){for(var s=t.length,o=e-n,a=i-r,l=e*r-i*n,h=t[s-2],c=t[s-1],u=0;s>u;u+=2){var d=t[u],p=t[u+1],f=h*p-c*d,g=h-d,m=c-p,v=o*m-a*g,b=(l*g-o*f)/v;if((b>=h&&d>=b||b>=d&&h>=b)&&(b>=e&&n>=b||b>=n&&e>=b)){var y=(l*m-a*f)/v;if((y>=c&&p>=y||y>=p&&c>=y)&&(y>=i&&r>=y||y>=r&&i>=y))return!0}h=d,c=p}return!1},getPolygon:function(t){var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},i.Bone.yDown=!0,e.AnimCache={},e.SpineTextureLoader=function(t,i){e.EventTarget.call(this),this.basePath=t,this.crossorigin=i,this.loadingCount=0},e.SpineTextureLoader.prototype=e.SpineTextureLoader,e.SpineTextureLoader.prototype.load=function(t,i){if(t.rendererObject=e.BaseTexture.fromImage(this.basePath+"/"+i,this.crossorigin),!t.rendererObject.hasLoaded){var n=this;++n.loadingCount,t.rendererObject.addEventListener("loaded",function(){--n.loadingCount,n.dispatchEvent({type:"loadedBaseTexture",content:n})})}},e.SpineTextureLoader.prototype.unload=function(t){t.destroy(!0)},e.Spine=function(t){if(e.DisplayObjectContainer.call(this),this.spineData=e.AnimCache[t],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+t);this.skeleton=new i.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new i.AnimationStateData(this.spineData),this.state=new i.AnimationState(this.stateData),this.slotContainers=[];for(var n=0,r=this.skeleton.drawOrder.length;r>n;n++){var s=this.skeleton.drawOrder[n],o=s.attachment,a=new e.DisplayObjectContainer;if(this.slotContainers.push(a),this.addChild(a),o instanceof i.RegionAttachment){var l=o.rendererObject.name,h=this.createSprite(s,o);s.currentSprite=h,s.currentSpriteName=l,a.addChild(h)}else{if(!(o instanceof i.MeshAttachment))continue;var c=this.createMesh(s,o);s.currentMesh=c,s.currentMeshName=o.name,a.addChild(c)}}this.autoUpdate=!0},e.Spine.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Spine.prototype.constructor=e.Spine,Object.defineProperty(e.Spine.prototype,"autoUpdate",{get:function(){return this.updateTransform===e.Spine.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?e.Spine.prototype.autoUpdateTransform:e.DisplayObjectContainer.prototype.updateTransform}}),e.Spine.prototype.update=function(t){this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var n=this.skeleton.drawOrder,r=0,s=n.length;s>r;r++){var o=n[r],a=o.attachment,l=this.slotContainers[r];if(a){var h=a.type;if(h===i.AttachmentType.region){if(a.rendererObject&&(!o.currentSpriteName||o.currentSpriteName!==a.name)){var c=a.rendererObject.name;if(void 0!==o.currentSprite&&(o.currentSprite.visible=!1),o.sprites=o.sprites||{},void 0!==o.sprites[c])o.sprites[c].visible=!0;else{var u=this.createSprite(o,a);l.addChild(u)}o.currentSprite=o.sprites[c],o.currentSpriteName=c}var d=o.bone;l.position.x=d.worldX+a.x*d.m00+a.y*d.m01,l.position.y=d.worldY+a.x*d.m10+a.y*d.m11,l.scale.x=d.worldScaleX,l.scale.y=d.worldScaleY,l.rotation=-(o.bone.worldRotation*i.degRad),o.currentSprite.tint=e.rgb2hex([o.r,o.g,o.b])}else{if(h!==i.AttachmentType.skinnedmesh){l.visible=!1;continue}if(!o.currentMeshName||o.currentMeshName!==a.name){var p=a.name;if(void 0!==o.currentMesh&&(o.currentMesh.visible=!1),o.meshes=o.meshes||{},void 0!==o.meshes[p])o.meshes[p].visible=!0;else{var f=this.createMesh(o,a);l.addChild(f)}o.currentMesh=o.meshes[p],o.currentMeshName=p}a.computeWorldVertices(o.bone.skeleton.x,o.bone.skeleton.y,o,o.currentMesh.vertices)}l.visible=!0,l.alpha=o.a}else l.visible=!1}},e.Spine.prototype.autoUpdateTransform=function(){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t),e.DisplayObjectContainer.prototype.updateTransform.call(this)},e.Spine.prototype.createSprite=function(t,n){var r=n.rendererObject,s=r.page.rendererObject,o=new e.Rectangle(r.x,r.y,r.rotate?r.height:r.width,r.rotate?r.width:r.height),a=new e.Texture(s,o),l=new e.Sprite(a),h=r.rotate?.5*Math.PI:0;return l.scale.set(r.width/r.originalWidth,r.height/r.originalHeight),l.rotation=h-n.rotation*i.degRad,l.anchor.x=l.anchor.y=.5,t.sprites=t.sprites||{},t.sprites[r.name]=l,l},e.Spine.prototype.createMesh=function(t,i){var n=i.rendererObject,r=n.page.rendererObject,s=new e.Texture(r),o=new e.Strip(s);return o.drawMode=e.Strip.DrawModes.TRIANGLES,o.canvasPadding=1.5,o.vertices=new e.Float32Array(i.uvs.length),o.uvs=i.uvs,o.indices=i.triangles,t.meshes=t.meshes||{},t.meshes[i.name]=o,o},e.BaseTextureCache={},e.BaseTextureCacheIdGenerator=0,e.BaseTexture=function(t,i){this.resolution=1,this.width=100,this.height=100,this.scaleMode=i||e.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=t,this._UID=e._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[];for(var n=0;300>n;n++)this._dirty.push(!0);if(t){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty();else{var r=this;this.source.onload=function(){r.hasLoaded=!0,r.width=r.source.naturalWidth||r.source.width,r.height=r.source.naturalHeight||r.source.height,r.dirty(),r.dispatchEvent({type:"loaded",content:r})},this.source.onerror=function(){r.dispatchEvent({type:"error",content:r})}}this.imageUrl=null,this._powerOf2=!1}},e.BaseTexture.prototype.constructor=e.BaseTexture,e.EventTarget.mixin(e.BaseTexture.prototype),e.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete e.BaseTextureCache[this.imageUrl],delete e.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete e.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},e.BaseTexture.prototype.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},e.BaseTexture.prototype.dirty=function(){for(var t=0;t<this._glTextures.length;t++)this._dirty[t]=!0},e.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var t=this._glTextures.length-1;t>=0;t--){var i=this._glTextures[t],n=e.glContexts[t];n&&i&&n.deleteTexture(i)}this._glTextures.length=0,this.dirty()},e.BaseTexture.fromImage=function(t,i,n){var r=e.BaseTextureCache[t];if(void 0===i&&-1===t.indexOf("data:")&&(i=!0),!r){var s=new Image;i&&(s.crossOrigin=""),s.src=t,r=new e.BaseTexture(s,n),r.imageUrl=t,e.BaseTextureCache[t]=r,-1!==t.indexOf(e.RETINA_PREFIX+".")&&(r.resolution=2)}return r},e.BaseTexture.fromCanvas=function(t,i){t._pixiId||(t._pixiId="canvas_"+e.TextureCacheIdGenerator++);var n=e.BaseTextureCache[t._pixiId];return n||(n=new e.BaseTexture(t,i),e.BaseTextureCache[t._pixiId]=n),n},e.TextureCache={},e.FrameCache={},e.TextureCacheIdGenerator=0,e.Texture=function(t,i,n,r){this.noFrame=!1,i||(this.noFrame=!0,i=new e.Rectangle(0,0,1,1)),t instanceof e.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=i,this.trim=r,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=n||new e.Rectangle(0,0,1,1),t.hasLoaded?(this.noFrame&&(i=new e.Rectangle(0,0,t.width,t.height)),this.setFrame(i)):t.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))},e.Texture.prototype.constructor=e.Texture,e.EventTarget.mixin(e.Texture.prototype),e.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new e.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame),this.dispatchEvent({type:"update",content:this})},e.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy(),this.valid=!1},e.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.width=t.width,this.height=t.height,this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,!this.trim&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},e.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new e.TextureUvs);var t=this.crop,i=this.baseTexture.width,n=this.baseTexture.height;this._uvs.x0=t.x/i,this._uvs.y0=t.y/n,this._uvs.x1=(t.x+t.width)/i,this._uvs.y1=t.y/n,this._uvs.x2=(t.x+t.width)/i,this._uvs.y2=(t.y+t.height)/n,this._uvs.x3=t.x/i,this._uvs.y3=(t.y+t.height)/n},e.Texture.fromImage=function(t,i,n){var r=e.TextureCache[t];return r||(r=new e.Texture(e.BaseTexture.fromImage(t,i,n)),e.TextureCache[t]=r),r},e.Texture.fromFrame=function(t){var i=e.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache ');return i},e.Texture.fromCanvas=function(t,i){var n=e.BaseTexture.fromCanvas(t,i);return new e.Texture(n)},e.Texture.addTextureToCache=function(t,i){e.TextureCache[i]=t},e.Texture.removeTextureFromCache=function(t){var i=e.TextureCache[t];return delete e.TextureCache[t],delete e.BaseTextureCache[t],i},e.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},e.Texture.emptyTexture=new e.Texture(new e.BaseTexture),e.RenderTexture=function(t,i,n,r,s){if(this.width=t||100,this.height=i||100,this.resolution=s||1,this.frame=new e.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new e.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new e.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=r||e.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,e.Texture.call(this,this.baseTexture,new e.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution)),this.renderer=n||e.defaultRenderer,this.renderer.type===e.WEBGL_RENDERER){var o=this.renderer.gl;this.baseTexture._dirty[o.id]=!1,this.textureBuffer=new e.FilterTexture(o,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[o.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new e.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new e.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()},e.RenderTexture.prototype=Object.create(e.Texture.prototype),e.RenderTexture.prototype.constructor=e.RenderTexture,e.RenderTexture.prototype.resize=function(t,i,n){(t!==this.width||i!==this.height)&&(this.valid=t>0&&i>0,this.width=t,this.height=i,this.frame.width=this.crop.width=t*this.resolution,this.frame.height=this.crop.height=i*this.resolution,n&&(this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution),this.renderer.type===e.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width,this.height))},e.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===e.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},e.RenderTexture.prototype.renderWebGL=function(t,e,i){if(this.valid){var n=t.worldTransform;n.identity(),n.translate(0,2*this.projection.y),e&&n.append(e),n.scale(1,-1),t.worldAlpha=1;for(var r=t.children,s=0,o=r.length;o>s;s++)r[s].updateTransform();var a=this.renderer.gl;a.viewport(0,0,this.width*this.resolution,this.height*this.resolution),a.bindFramebuffer(a.FRAMEBUFFER,this.textureBuffer.frameBuffer),i&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(t,this.projection,this.textureBuffer.frameBuffer),this.renderer.spriteBatch.dirty=!0}},e.RenderTexture.prototype.renderCanvas=function(t,e,i){if(this.valid){var n=t.worldTransform;n.identity(),e&&n.append(e),t.worldAlpha=1;for(var r=t.children,s=0,o=r.length;o>s;s++)r[s].updateTransform();i&&this.textureBuffer.clear();var a=this.textureBuffer.context,l=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,a),this.renderer.resolution=l}},e.RenderTexture.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},e.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},e.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===e.WEBGL_RENDERER){var t=this.renderer.gl,i=this.textureBuffer.width,n=this.textureBuffer.height,r=new Uint8Array(4*i*n);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,i,n,t.RGBA,t.UNSIGNED_BYTE,r),t.bindFramebuffer(t.FRAMEBUFFER,null);var s=new e.CanvasBuffer(i,n),o=s.context.getImageData(0,0,i,n);return o.data.set(r),s.context.putImageData(o,0,0),s.canvas}return this.textureBuffer.canvas},e.RenderTexture.tempMatrix=new e.Matrix,e.VideoTexture=function(t,i){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),e.BaseTexture.call(this,t,i),this.autoUpdate=!1,this.updateBound=this._onUpdate.bind(this),t.complete||(this._onCanPlay=this.onCanPlay.bind(this),t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this.onPlayStart.bind(this)),t.addEventListener("pause",this.onPlayStop.bind(this)))},e.VideoTexture.prototype=Object.create(e.BaseTexture.prototype),e.VideoTexture.constructor=e.VideoTexture,e.VideoTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this.updateBound),this.dirty())},e.VideoTexture.prototype.onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this.updateBound),this.autoUpdate=!0)},e.VideoTexture.prototype.onPlayStop=function(){this.autoUpdate=!1},e.VideoTexture.prototype.onCanPlay=function(t){"canplaythrough"===t.type&&(this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.dispatchEvent({type:"loaded",content:this}))))},e.VideoTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(e.BaseTextureCache[this.source._pixiId]=null,delete e.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),e.BaseTexture.prototype.destroy.call(this)},e.VideoTexture.baseTextureFromVideo=function(t,i){t._pixiId||(t._pixiId="video_"+e.TextureCacheIdGenerator++);var n=e.BaseTextureCache[t._pixiId];return n||(n=new e.VideoTexture(t,i),e.BaseTextureCache[t._pixiId]=n),n},e.VideoTexture.textureFromVideo=function(t,i){var n=e.VideoTexture.baseTextureFromVideo(t,i);return new e.Texture(n)},e.VideoTexture.fromUrl=function(t,i){var n=document.createElement("video");return n.src=t,n.autoPlay=!0,n.play(),e.VideoTexture.textureFromVideo(n,i)},e.AssetLoader=function(t,i){this.assetURLs=t,this.crossorigin=i,this.loadersByType={jpg:e.ImageLoader,jpeg:e.ImageLoader,png:e.ImageLoader,gif:e.ImageLoader,webp:e.ImageLoader,json:e.JsonLoader,atlas:e.AtlasLoader,anim:e.SpineLoader,xml:e.BitmapFontLoader,fnt:e.BitmapFontLoader}},e.EventTarget.mixin(e.AssetLoader.prototype),e.AssetLoader.prototype.constructor=e.AssetLoader,e.AssetLoader.prototype._getDataType=function(t){var e="data:",i=t.slice(0,e.length).toLowerCase();if(i===e){var n=t.slice(e.length),r=n.indexOf(",");
if(-1===r)return null;var s=n.slice(0,r).split(";")[0];return s&&"text/plain"!==s.toLowerCase()?s.split("/").pop().toLowerCase():"txt"}return null},e.AssetLoader.prototype.load=function(){function t(t){e.onAssetLoaded(t.data.content)}var e=this;this.loadCount=this.assetURLs.length;for(var i=0;i<this.assetURLs.length;i++){var n=this.assetURLs[i],r=this._getDataType(n);r||(r=n.split("?").shift().split(".").pop().toLowerCase());var s=this.loadersByType[r];if(!s)throw new Error(r+" is an unsupported file type");var o=new s(n,this.crossorigin);o.on("loaded",t),o.load()}},e.AssetLoader.prototype.onAssetLoaded=function(t){this.loadCount--,this.emit("onProgress",{content:this,loader:t,loaded:this.assetURLs.length-this.loadCount,total:this.assetURLs.length}),this.onProgress&&this.onProgress(t),this.loadCount||(this.emit("onComplete",{content:this}),this.onComplete&&this.onComplete())},e.JsonLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.loaded=!1},e.JsonLoader.prototype.constructor=e.JsonLoader,e.EventTarget.mixin(e.JsonLoader.prototype),e.JsonLoader.prototype.load=function(){window.XDomainRequest&&this.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=this.onError.bind(this),this.ajaxRequest.ontimeout=this.onError.bind(this),this.ajaxRequest.onprogress=function(){},this.ajaxRequest.onload=this.onJSONLoaded.bind(this)):(window.XMLHttpRequest?this.ajaxRequest=new window.XMLHttpRequest:this.ajaxRequest=new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onreadystatechange=this.onReadyStateChanged.bind(this)),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},e.JsonLoader.prototype.onReadyStateChanged=function(){4!==this.ajaxRequest.readyState||200!==this.ajaxRequest.status&&-1!==window.location.href.indexOf("http")||this.onJSONLoaded()},e.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames&&this.json.meta&&this.json.meta.image){var t=this.baseUrl+this.json.meta.image,n=new e.ImageLoader(t,this.crossorigin),r=this.json.frames;this.texture=n.texture.baseTexture,n.addEventListener("loaded",this.onLoaded.bind(this));for(var s in r){var o=r[s].frame;if(o){var a=new e.Rectangle(o.x,o.y,o.w,o.h),l=a.clone(),h=null;if(r[s].trimmed){var c=r[s].sourceSize,u=r[s].spriteSourceSize;h=new e.Rectangle(u.x,u.y,c.w,c.h)}e.TextureCache[s]=new e.Texture(this.texture,a,l,h)}}n.load()}else if(this.json.bones)if(e.AnimCache[this.url])this.onLoaded();else{var d=this.url.substr(0,this.url.lastIndexOf("."))+".atlas",p=new e.JsonLoader(d,this.crossorigin),f=this;p.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();var t=new e.SpineTextureLoader(this.url.substring(0,this.url.lastIndexOf("/"))),n=new i.Atlas(this.ajaxRequest.responseText,t),r=new i.AtlasAttachmentLoader(n),s=new i.SkeletonJson(r),o=s.readSkeletonData(f.json);e.AnimCache[f.url]=o,f.spine=o,f.spineAtlas=n,f.spineAtlasLoader=p,t.loadingCount>0?t.addEventListener("loadedBaseTexture",function(t){t.content.content.loadingCount<=0&&f.onLoaded()}):f.onLoaded()},p.load()}else this.onLoaded()},e.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},e.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},e.AtlasLoader=function(t,e){this.url=t,this.baseUrl=t.replace(/[^\/]*$/,""),this.crossorigin=e,this.loaded=!1},e.AtlasLoader.constructor=e.AtlasLoader,e.EventTarget.mixin(e.AtlasLoader.prototype),e.AtlasLoader.prototype.load=function(){this.ajaxRequest=new e.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},e.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var t=this.ajaxRequest.responseText.split(/\r?\n/),i=-3,n=0,r=null,s=!1,o=0,a=0,l=this.onLoaded.bind(this);for(o=0;o<t.length;o++)if(t[o]=t[o].replace(/^\s+|\s+$/g,""),""===t[o]&&(s=o+1),t[o].length>0){if(s===o)this.atlas.meta.image.push(t[o]),n=this.atlas.meta.image.length-1,this.atlas.frames.push({}),i=-3;else if(i>0)if(i%7===1)null!=r&&(this.atlas.frames[n][r.name]=r),r={name:t[o],frame:{}};else{var h=t[o].split(" ");if(i%7===3)r.frame.x=Number(h[1].replace(",","")),r.frame.y=Number(h[2]);else if(i%7===4)r.frame.w=Number(h[1].replace(",","")),r.frame.h=Number(h[2]);else if(i%7===5){var c={x:0,y:0,w:Number(h[1].replace(",","")),h:Number(h[2])};c.w>r.frame.w||c.h>r.frame.h?(r.trimmed=!0,r.realSize=c):r.trimmed=!1}}i++}if(null!=r&&(this.atlas.frames[n][r.name]=r),this.atlas.meta.image.length>0){for(this.images=[],a=0;a<this.atlas.meta.image.length;a++){var u=this.baseUrl+this.atlas.meta.image[a],d=this.atlas.frames[a];this.images.push(new e.ImageLoader(u,this.crossorigin));for(o in d){var p=d[o].frame;p&&(e.TextureCache[o]=new e.Texture(this.images[a].texture.baseTexture,{x:p.x,y:p.y,width:p.w,height:p.h}),d[o].trimmed&&(e.TextureCache[o].realSize=d[o].realSize,e.TextureCache[o].trim.x=0,e.TextureCache[o].trim.y=0))}}for(this.currentImageId=0,a=0;a<this.images.length;a++)this.images[a].on("loaded",l);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},e.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.emit("loaded",{content:this}))},e.AtlasLoader.prototype.onError=function(){this.emit("error",{content:this})},e.SpriteSheetLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},e.SpriteSheetLoader.prototype.constructor=e.SpriteSheetLoader,e.EventTarget.mixin(e.SpriteSheetLoader.prototype),e.SpriteSheetLoader.prototype.load=function(){var t=this,i=new e.JsonLoader(this.url,this.crossorigin);i.on("loaded",function(e){t.json=e.data.content.json,t.onLoaded()}),i.load()},e.SpriteSheetLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},e.ImageLoader=function(t,i){this.texture=e.Texture.fromImage(t,i),this.frames=[]},e.ImageLoader.prototype.constructor=e.ImageLoader,e.EventTarget.mixin(e.ImageLoader.prototype),e.ImageLoader.prototype.load=function(){this.texture.baseTexture.hasLoaded?this.onLoaded():this.texture.baseTexture.on("loaded",this.onLoaded.bind(this))},e.ImageLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},e.ImageLoader.prototype.loadFramedSpriteSheet=function(t,i,n){this.frames=[];for(var r=Math.floor(this.texture.width/t),s=Math.floor(this.texture.height/i),o=0,a=0;s>a;a++)for(var l=0;r>l;l++,o++){var h=new e.Texture(this.texture.baseTexture,{x:l*t,y:a*i,width:t,height:i});this.frames.push(h),n&&(e.TextureCache[n+"-"+o]=h)}this.load()},e.BitmapFontLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null},e.BitmapFontLoader.prototype.constructor=e.BitmapFontLoader,e.EventTarget.mixin(e.BitmapFontLoader.prototype),e.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new e.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onXMLLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},e.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var t=this.ajaxRequest.responseXML;if(!t||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var i=new DOMParser;t=i.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var n=document.createElement("div");n.innerHTML=this.ajaxRequest.responseText,t=n}var r=this.baseUrl+t.getElementsByTagName("page")[0].getAttribute("file"),s=new e.ImageLoader(r,this.crossorigin);this.texture=s.texture.baseTexture;var o={},a=t.getElementsByTagName("info")[0],l=t.getElementsByTagName("common")[0];o.font=a.getAttribute("face"),o.size=parseInt(a.getAttribute("size"),10),o.lineHeight=parseInt(l.getAttribute("lineHeight"),10),o.chars={};for(var h=t.getElementsByTagName("char"),c=0;c<h.length;c++){var u=parseInt(h[c].getAttribute("id"),10),d=new e.Rectangle(parseInt(h[c].getAttribute("x"),10),parseInt(h[c].getAttribute("y"),10),parseInt(h[c].getAttribute("width"),10),parseInt(h[c].getAttribute("height"),10));o.chars[u]={xOffset:parseInt(h[c].getAttribute("xoffset"),10),yOffset:parseInt(h[c].getAttribute("yoffset"),10),xAdvance:parseInt(h[c].getAttribute("xadvance"),10),kerning:{},texture:e.TextureCache[u]=new e.Texture(this.texture,d)}}var p=t.getElementsByTagName("kerning");for(c=0;c<p.length;c++){var f=parseInt(p[c].getAttribute("first"),10),g=parseInt(p[c].getAttribute("second"),10),m=parseInt(p[c].getAttribute("amount"),10);o.chars[g].kerning[f]=m}e.BitmapText.fonts[o.font]=o,s.addEventListener("loaded",this.onLoaded.bind(this)),s.load()}},e.BitmapFontLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},e.SpineLoader=function(t,e){this.url=t,this.crossorigin=e,this.loaded=!1},e.SpineLoader.prototype.constructor=e.SpineLoader,e.EventTarget.mixin(e.SpineLoader.prototype),e.SpineLoader.prototype.load=function(){var t=this,i=new e.JsonLoader(this.url,this.crossorigin);i.on("loaded",function(e){t.json=e.data.content.json,t.onLoaded()}),i.load()},e.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.emit("loaded",{content:this})},e.AbstractFilter=function(t,e){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=e||{},this.fragmentSrc=t||[]},e.AbstractFilter.prototype.constructor=e.AbstractFilter,e.AbstractFilter.prototype.syncUniforms=function(){for(var t=0,e=this.shaders.length;e>t;t++)this.shaders[t].dirty=!0},e.AlphaMaskFilter=function(t){e.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:t},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=t.width,this.uniforms.mapDimensions.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),psy.trace(this.uniforms),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","   void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords *= vec2( dimensions.x / mapDimensions.x, dimensions.y / mapDimensions.y );","   vec2 diffOffset = vec2(0, 0);","   if (dimensions.z - mapCords.x * 0.5 <= 0.0) {","       diffOffset.x = 1.0 - (dimensions.z - mapCords.x * 0.5) / mapCords.x;","   }","   mapCords += diffOffset;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},e.AlphaMaskFilter.prototype=Object.create(e.AbstractFilter.prototype),e.AlphaMaskFilter.prototype.constructor=e.AlphaMaskFilter,e.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(e.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}}),e.ColorMatrixFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},e.ColorMatrixFilter.prototype=Object.create(e.AbstractFilter.prototype),e.ColorMatrixFilter.prototype.constructor=e.ColorMatrixFilter,Object.defineProperty(e.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=t}}),e.GrayFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},e.GrayFilter.prototype=Object.create(e.AbstractFilter.prototype),e.GrayFilter.prototype.constructor=e.GrayFilter,Object.defineProperty(e.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}),e.DisplacementFilter=function(t){e.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:t},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=t.width,this.uniforms.mapDimensions.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},e.DisplacementFilter.prototype=Object.create(e.AbstractFilter.prototype),e.DisplacementFilter.prototype.constructor=e.DisplacementFilter,e.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(e.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}}),Object.defineProperty(e.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}}),Object.defineProperty(e.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}),e.PixelateFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new e.Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},e.PixelateFilter.prototype=Object.create(e.AbstractFilter.prototype),e.PixelateFilter.prototype.constructor=e.PixelateFilter,Object.defineProperty(e.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.dirty=!0,this.uniforms.pixelSize.value=t}}),e.BlurXFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},e.BlurXFilter.prototype=Object.create(e.AbstractFilter.prototype),e.BlurXFilter.prototype.constructor=e.BlurXFilter,Object.defineProperty(e.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.dirty=!0,this.uniforms.blur.value=1/7e3*t}}),e.BlurYFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},e.BlurYFilter.prototype=Object.create(e.AbstractFilter.prototype),e.BlurYFilter.prototype.constructor=e.BlurYFilter,Object.defineProperty(e.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),e.BlurFilter=function(){this.blurXFilter=new e.BlurXFilter,this.blurYFilter=new e.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},e.BlurFilter.prototype=Object.create(e.AbstractFilter.prototype),e.BlurFilter.prototype.constructor=e.BlurFilter,Object.defineProperty(e.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}}),Object.defineProperty(e.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}}),Object.defineProperty(e.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}),e.InvertFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},e.InvertFilter.prototype=Object.create(e.AbstractFilter.prototype),e.InvertFilter.prototype.constructor=e.InvertFilter,Object.defineProperty(e.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}),e.SepiaFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},e.SepiaFilter.prototype=Object.create(e.AbstractFilter.prototype),e.SepiaFilter.prototype.constructor=e.SepiaFilter,Object.defineProperty(e.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}),e.TwistFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},e.TwistFilter.prototype=Object.create(e.AbstractFilter.prototype),e.TwistFilter.prototype.constructor=e.TwistFilter,Object.defineProperty(e.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.dirty=!0,this.uniforms.offset.value=t}}),Object.defineProperty(e.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(t){this.dirty=!0,this.uniforms.radius.value=t}}),Object.defineProperty(e.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),e.ColorStepFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},e.ColorStepFilter.prototype=Object.create(e.AbstractFilter.prototype),e.ColorStepFilter.prototype.constructor=e.ColorStepFilter,Object.defineProperty(e.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}),e.DotScreenFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},e.DotScreenFilter.prototype=Object.create(e.AbstractFilter.prototype),e.DotScreenFilter.prototype.constructor=e.DotScreenFilter,Object.defineProperty(e.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.dirty=!0,this.uniforms.scale.value=t}}),Object.defineProperty(e.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),e.CrossHatchFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},e.CrossHatchFilter.prototype=Object.create(e.AbstractFilter.prototype),e.CrossHatchFilter.prototype.constructor=e.CrossHatchFilter,Object.defineProperty(e.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),e.RGBSplitFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},e.RGBSplitFilter.prototype=Object.create(e.AbstractFilter.prototype),e.RGBSplitFilter.prototype.constructor=e.RGBSplitFilter,Object.defineProperty(e.RGBSplitFilter.prototype,"red",{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}}),Object.defineProperty(e.RGBSplitFilter.prototype,"green",{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}}),Object.defineProperty(e.RGBSplitFilter.prototype,"blue",{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.PIXI=e):"undefined"!=typeof define&&define.amd?define("lib/pixi",e):t.PIXI=e}).call(this);var Stats=function(){var t=Date.now(),e=t,i=0,n=1/0,r=0,s=0,o=1/0,a=0,l=0,h=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(t){t.preventDefault(),b(++h%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var u=document.createElement("div");u.id="fps",u.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(u);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",u.appendChild(d);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",u.appendChild(p);p.children.length<74;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(f)}var g=document.createElement("div");g.id="ms",g.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(g);var m=document.createElement("div");m.id="msText",m.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",m.innerHTML="MS",g.appendChild(m);var v=document.createElement("div");for(v.id="msGraph",v.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",g.appendChild(v);v.children.length<74;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#131",v.appendChild(f)}var b=function(t){switch(h=t){case 0:u.style.display="block",g.style.display="none";break;case 1:u.style.display="none",g.style.display="block"}},y=function(t,e){var i=t.appendChild(t.firstChild);i.style.height=e+"px"};return{REVISION:12,domElement:c,setMode:b,begin:function(){t=Date.now()},end:function(){var h=Date.now();return i=h-t,n=Math.min(n,i),r=Math.max(r,i),m.textContent=i+" MS ("+n+"-"+r+")",y(v,Math.min(30,30-i/200*30)),l++,h>e+1e3&&(s=Math.round(1e3*l/(h-e)),o=Math.min(o,s),a=Math.max(a,s),d.textContent=s+" FPS ("+o+"-"+a+")",y(p,Math.min(30,30-s/100*30)),e=h,l=0),h},update:function(){t=this.end()}}};"object"==typeof module&&(module.exports=Stats),define("lib/stats",function(){}),!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=tt.type(t);return"function"===i||tt.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(tt.isFunction(e))return tt.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return tt.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(at.test(e))return tt.filter(e,t,i);e=tt.filter(e,t)}return tt.grep(t,function(t){return z.call(e,t)>=0!==i})}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function s(t){var e=ft[t]={};return tt.each(t.match(pt)||[],function(t,i){e[i]=!0}),e}function o(){J.removeEventListener("DOMContentLoaded",o,!1),t.removeEventListener("load",o,!1),tt.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=tt.expando+Math.random()}function l(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(_t,"-$1").toLowerCase(),i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:yt.test(i)?tt.parseJSON(i):i}catch(r){}bt.set(t,e,i)}else i=void 0;return i}function h(){return!0}function c(){return!1}function u(){try{return J.activeElement}catch(t){}}function d(t,e){return tt.nodeName(t,"table")&&tt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t;
}function p(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=Dt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var i=0,n=t.length;n>i;i++)vt.set(t[i],"globalEval",!e||vt.get(e[i],"globalEval"))}function m(t,e){var i,n,r,s,o,a,l,h;if(1===e.nodeType){if(vt.hasData(t)&&(s=vt.access(t),o=vt.set(e,s),h=s.events)){delete o.handle,o.events={};for(r in h)for(i=0,n=h[r].length;n>i;i++)tt.event.add(e,r,h[r][i])}bt.hasData(t)&&(a=bt.access(t),l=tt.extend({},a),bt.set(e,l))}}function v(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&tt.nodeName(t,e)?tt.merge([t],i):i}function b(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Ct.test(t.type)?e.checked=t.checked:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}function y(e,i){var n=tt(i.createElement(e)).appendTo(i.body),r=t.getDefaultComputedStyle?t.getDefaultComputedStyle(n[0]).display:tt.css(n[0],"display");return n.detach(),r}function _(t){var e=J,i=jt[t];return i||(i=y(t,e),"none"!==i&&i||($t=($t||tt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=$t[0].contentDocument,e.write(),e.close(),i=y(t,e),$t.detach()),jt[t]=i),i}function x(t,e,i){var n,r,s,o,a=t.style;return i=i||Gt(t),i&&(o=i.getPropertyValue(e)||i[e]),i&&(""!==o||tt.contains(t.ownerDocument,t)||(o=tt.style(t,e)),Ht.test(o)&&Ut.test(e)&&(n=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function w(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function T(t,e){if(e in t)return e;for(var i=e[0].toUpperCase()+e.slice(1),n=e,r=qt.length;r--;)if(e=qt[r]+i,e in t)return e;return n}function C(t,e,i){var n=Vt.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function S(t,e,i,n,r){for(var s=i===(n?"border":"content")?4:"width"===e?1:0,o=0;4>s;s+=2)"margin"===i&&(o+=tt.css(t,i+wt[s],!0,r)),n?("content"===i&&(o-=tt.css(t,"padding"+wt[s],!0,r)),"margin"!==i&&(o-=tt.css(t,"border"+wt[s]+"Width",!0,r))):(o+=tt.css(t,"padding"+wt[s],!0,r),"padding"!==i&&(o+=tt.css(t,"border"+wt[s]+"Width",!0,r)));return o}function E(t,e,i){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,s=Gt(t),o="border-box"===tt.css(t,"boxSizing",!1,s);if(0>=r||null==r){if(r=x(t,e,s),(0>r||null==r)&&(r=t.style[e]),Ht.test(r))return r;n=o&&(Q.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+S(t,e,i||(o?"border":"content"),n,s)+"px"}function M(t,e){for(var i,n,r,s=[],o=0,a=t.length;a>o;o++)n=t[o],n.style&&(s[o]=vt.get(n,"olddisplay"),i=n.style.display,e?(s[o]||"none"!==i||(n.style.display=""),""===n.style.display&&Tt(n)&&(s[o]=vt.access(n,"olddisplay",_(n.nodeName)))):s[o]||(r=Tt(n),(i&&"none"!==i||!r)&&vt.set(n,"olddisplay",r?i:tt.css(n,"display"))));for(o=0;a>o;o++)n=t[o],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?s[o]||"":"none"));return t}function A(t,e,i,n,r){return new A.prototype.init(t,e,i,n,r)}function k(){return setTimeout(function(){Kt=void 0}),Kt=tt.now()}function P(t,e){var i,n=0,r={height:t};for(e=e?1:0;4>n;n+=2-e)i=wt[n],r["margin"+i]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function R(t,e,i){for(var n,r=(ie[e]||[]).concat(ie["*"]),s=0,o=r.length;o>s;s++)if(n=r[s].call(i,e,t))return n}function B(t,e,i){var n,r,s,o,a,l,h,c=this,u={},d=t.style,p=t.nodeType&&Tt(t),f=vt.get(t,"fxshow");i.queue||(a=tt._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,tt.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],h=tt.css(t,"display"),"none"===h&&(h=_(t.nodeName)),"inline"===h&&"none"===tt.css(t,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",c.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in e)if(r=e[n],Jt.exec(r)){if(delete e[n],s=s||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!f||void 0===f[n])continue;p=!0}u[n]=f&&f[n]||tt.style(t,n)}if(!tt.isEmptyObject(u)){f?"hidden"in f&&(p=f.hidden):f=vt.access(t,"fxshow",{}),s&&(f.hidden=!p),p?tt(t).show():c.done(function(){tt(t).hide()}),c.done(function(){var e;vt.remove(t,"fxshow");for(e in u)tt.style(t,e,u[e])});for(n in u)o=R(p?f[n]:0,n,c),n in f||(f[n]=o.start,p&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function I(t,e){var i,n,r,s,o;for(i in t)if(n=tt.camelCase(i),r=e[n],s=t[i],tt.isArray(s)&&(r=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),o=tt.cssHooks[n],o&&"expand"in o){s=o.expand(s),delete t[n];for(i in s)i in t||(t[i]=s[i],e[i]=r)}else e[n]=r}function L(t,e,i){var n,r,s=0,o=ee.length,a=tt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=Kt||k(),i=Math.max(0,h.startTime+h.duration-e),n=i/h.duration||0,s=1-n,o=0,l=h.tweens.length;l>o;o++)h.tweens[o].run(s);return a.notifyWith(t,[h,s,i]),1>s&&l?i:(a.resolveWith(t,[h]),!1)},h=a.promise({elem:t,props:tt.extend({},e),opts:tt.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Kt||k(),duration:i.duration,tweens:[],createTween:function(e,i){var n=tt.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)h.tweens[i].run(1);return e?a.resolveWith(t,[h,e]):a.rejectWith(t,[h,e]),this}}),c=h.props;for(I(c,h.opts.specialEasing);o>s;s++)if(n=ee[s].call(h,t,c,h.opts))return n;return tt.map(c,R,h),tt.isFunction(h.opts.start)&&h.opts.start.call(t,h),tt.fx.timer(tt.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function O(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,s=e.toLowerCase().match(pt)||[];if(tt.isFunction(i))for(;n=s[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function D(t,e,i,n){function r(a){var l;return s[a]=!0,tt.each(t[a]||[],function(t,a){var h=a(e,i,n);return"string"!=typeof h||o||s[h]?o?!(l=h):void 0:(e.dataTypes.unshift(h),r(h),!1)}),l}var s={},o=t===xe;return r(e.dataTypes[0])||!s["*"]&&r("*")}function F(t,e){var i,n,r=tt.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&tt.extend(!0,t,n),t}function N(t,e,i){for(var n,r,s,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}return s?(s!==l[0]&&l.unshift(s),i[s]):void 0}function $(t,e,i,n){var r,s,o,a,l,h={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)h[o.toLowerCase()]=t.converters[o];for(s=c.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=h[l+" "+s]||h["* "+s],!o)for(r in h)if(a=r.split(" "),a[1]===s&&(o=h[l+" "+a[0]]||h["* "+a[0]])){o===!0?o=h[r]:h[r]!==!0&&(s=a[0],c.unshift(a[1]));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(u){return{state:"parsererror",error:o?u:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}function j(t,e,i,n){var r;if(tt.isArray(e))tt.each(e,function(e,r){i||Se.test(t)?n(t,r):j(t+"["+("object"==typeof r?e:"")+"]",r,i,n)});else if(i||"object"!==tt.type(e))n(t,e);else for(r in e)j(t+"["+r+"]",e[r],i,n)}function U(t){return tt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var H=[],G=H.slice,W=H.concat,V=H.push,z=H.indexOf,X={},Y=X.toString,q=X.hasOwnProperty,K="".trim,Q={},J=t.document,Z="2.1.0",tt=function(t,e){return new tt.fn.init(t,e)},et=/^-ms-/,it=/-([\da-z])/gi,nt=function(t,e){return e.toUpperCase()};tt.fn=tt.prototype={jquery:Z,constructor:tt,selector:"",length:0,toArray:function(){return G.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:G.call(this)},pushStack:function(t){var e=tt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return tt.each(this,t,e)},map:function(t){return this.pushStack(tt.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:H.sort,splice:H.splice},tt.extend=tt.fn.extend=function(){var t,e,i,n,r,s,o=arguments[0]||{},a=1,l=arguments.length,h=!1;for("boolean"==typeof o&&(h=o,o=arguments[a]||{},a++),"object"==typeof o||tt.isFunction(o)||(o={}),a===l&&(o=this,a--);l>a;a++)if(null!=(t=arguments[a]))for(e in t)i=o[e],n=t[e],o!==n&&(h&&n&&(tt.isPlainObject(n)||(r=tt.isArray(n)))?(r?(r=!1,s=i&&tt.isArray(i)?i:[]):s=i&&tt.isPlainObject(i)?i:{},o[e]=tt.extend(h,s,n)):void 0!==n&&(o[e]=n));return o},tt.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===tt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return t-parseFloat(t)>=0},isPlainObject:function(t){if("object"!==tt.type(t)||t.nodeType||tt.isWindow(t))return!1;try{if(t.constructor&&!q.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?X[Y.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=tt.trim(t),t&&(1===t.indexOf("use strict")?(e=J.createElement("script"),e.text=t,J.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(et,"ms-").replace(it,nt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var r,s=0,o=t.length,a=i(t);if(n){if(a)for(;o>s&&(r=e.apply(t[s],n),r!==!1);s++);else for(s in t)if(r=e.apply(t[s],n),r===!1)break}else if(a)for(;o>s&&(r=e.call(t[s],s,t[s]),r!==!1);s++);else for(s in t)if(r=e.call(t[s],s,t[s]),r===!1)break;return t},trim:function(t){return null==t?"":K.call(t)},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?tt.merge(n,"string"==typeof t?[t]:t):V.call(n,t)),n},inArray:function(t,e,i){return null==e?-1:z.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;i>n;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n,r=[],s=0,o=t.length,a=!i;o>s;s++)n=!e(t[s],s),n!==a&&r.push(t[s]);return r},map:function(t,e,n){var r,s=0,o=t.length,a=i(t),l=[];if(a)for(;o>s;s++)r=e(t[s],s,n),null!=r&&l.push(r);else for(s in t)r=e(t[s],s,n),null!=r&&l.push(r);return W.apply([],l)},guid:1,proxy:function(t,e){var i,n,r;return"string"==typeof e&&(i=t[e],e=t,t=i),tt.isFunction(t)?(n=G.call(arguments,2),r=function(){return t.apply(e||this,n.concat(G.call(arguments)))},r.guid=t.guid=t.guid||tt.guid++,r):void 0},now:Date.now,support:Q}),tt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){X["[object "+e+"]"]=e.toLowerCase()});var rt=function(t){function e(t,e,i,n){var r,s,o,a,l,h,u,f,g,m;if((e?e.ownerDocument||e:j)!==B&&R(e),e=e||B,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(L&&!n){if(r=bt.exec(t))if(o=r[1]){if(9===a){if(s=e.getElementById(o),!s||!s.parentNode)return i;if(s.id===o)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(o))&&N(e,s)&&s.id===o)return i.push(s),i}else{if(r[2])return Z.apply(i,e.getElementsByTagName(t)),i;if((o=r[3])&&T.getElementsByClassName&&e.getElementsByClassName)return Z.apply(i,e.getElementsByClassName(o)),i}if(T.qsa&&(!O||!O.test(t))){if(f=u=$,g=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(h=d(t),(u=e.getAttribute("id"))?f=u.replace(_t,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",l=h.length;l--;)h[l]=f+p(h[l]);g=yt.test(t)&&c(e.parentNode)||e,m=h.join(",")}if(m)try{return Z.apply(i,g.querySelectorAll(m)),i}catch(v){}finally{u||e.removeAttribute("id")}}}return x(t.replace(lt,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>C.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[$]=!0,t}function r(t){var e=B.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var i=t.split("|"),n=t.length;n--;)C.attrHandle[i[n]]=e}function o(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function h(t){return n(function(e){return e=+e,n(function(i,n){for(var r,s=t([],i.length,e),o=s.length;o--;)i[r=s[o]]&&(i[r]=!(n[r]=i[r]))})})}function c(t){return t&&typeof t.getElementsByTagName!==X&&t}function u(){}function d(t,i){var n,r,s,o,a,l,h,c=W[t+" "];if(c)return i?0:c.slice(0);for(a=t,l=[],h=C.preFilter;a;){(!n||(r=ht.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),n=!1,(r=ct.exec(a))&&(n=r.shift(),s.push({value:n,type:r[0].replace(lt," ")}),a=a.slice(n.length));for(o in C.filter)!(r=ft[o].exec(a))||h[o]&&!(r=h[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):W(t,l).slice(0)}function p(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function f(t,e,i){var n=e.dir,r=i&&"parentNode"===n,s=H++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,s)}:function(e,i,o){var a,l,h=[U,s];if(o){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,o))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if(l=e[$]||(e[$]={}),(a=l[n])&&a[0]===U&&a[1]===s)return h[2]=a[2];if(l[n]=h,h[2]=t(e,i,o))return!0}}}function g(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function m(t,e,i,n,r){for(var s,o=[],a=0,l=t.length,h=null!=e;l>a;a++)(s=t[a])&&(!i||i(s,n,r))&&(o.push(s),h&&e.push(a));return o}function v(t,e,i,r,s,o){return r&&!r[$]&&(r=v(r)),s&&!s[$]&&(s=v(s,o)),n(function(n,o,a,l){var h,c,u,d=[],p=[],f=o.length,g=n||_(e||"*",a.nodeType?[a]:a,[]),v=!t||!n&&e?g:m(g,d,t,a,l),b=i?s||(n?t:f||r)?[]:o:v;if(i&&i(v,b,a,l),r)for(h=m(b,p),r(h,[],a,l),c=h.length;c--;)(u=h[c])&&(b[p[c]]=!(v[p[c]]=u));if(n){if(s||t){if(s){for(h=[],c=b.length;c--;)(u=b[c])&&h.push(v[c]=u);s(null,b=[],h,l)}for(c=b.length;c--;)(u=b[c])&&(h=s?et.call(n,u):d[c])>-1&&(n[h]=!(o[h]=u))}}else b=m(b===o?b.splice(f,b.length):b),s?s(null,o,b,l):Z.apply(o,b)})}function b(t){for(var e,i,n,r=t.length,s=C.relative[t[0].type],o=s||C.relative[" "],a=s?1:0,l=f(function(t){return t===e},o,!0),h=f(function(t){return et.call(e,t)>-1},o,!0),c=[function(t,i,n){return!s&&(n||i!==A)||((e=i).nodeType?l(t,i,n):h(t,i,n))}];r>a;a++)if(i=C.relative[t[a].type])c=[f(g(c),i)];else{if(i=C.filter[t[a].type].apply(null,t[a].matches),i[$]){for(n=++a;r>n&&!C.relative[t[n].type];n++);return v(a>1&&g(c),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(lt,"$1"),i,n>a&&b(t.slice(a,n)),r>n&&b(t=t.slice(n)),r>n&&p(t))}c.push(i)}return g(c)}function y(t,i){var r=i.length>0,s=t.length>0,o=function(n,o,a,l,h){var c,u,d,p=0,f="0",g=n&&[],v=[],b=A,y=n||s&&C.find.TAG("*",h),_=U+=null==b?1:Math.random()||.1,x=y.length;for(h&&(A=o!==B&&o);f!==x&&null!=(c=y[f]);f++){if(s&&c){for(u=0;d=t[u++];)if(d(c,o,a)){l.push(c);break}h&&(U=_)}r&&((c=!d&&c)&&p--,n&&g.push(c))}if(p+=f,r&&f!==p){for(u=0;d=i[u++];)d(g,v,o,a);if(n){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=Q.call(l));v=m(v)}Z.apply(l,v),h&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(l)}return h&&(U=_,A=b),g};return r?n(o):o}function _(t,i,n){for(var r=0,s=i.length;s>r;r++)e(t,i[r],n);return n}function x(t,e,i,n){var r,s,o,a,l,h=d(t);if(!n&&1===h.length){if(s=h[0]=h[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&T.getById&&9===e.nodeType&&L&&C.relative[s[1].type]){if(e=(C.find.ID(o.matches[0].replace(xt,wt),e)||[])[0],!e)return i;t=t.slice(s.shift().value.length)}for(r=ft.needsContext.test(t)?0:s.length;r--&&(o=s[r],!C.relative[a=o.type]);)if((l=C.find[a])&&(n=l(o.matches[0].replace(xt,wt),yt.test(s[0].type)&&c(e.parentNode)||e))){if(s.splice(r,1),t=n.length&&p(s),!t)return Z.apply(i,n),i;break}}return M(t,h)(n,e,!L,i,yt.test(t)&&c(e.parentNode)||e),i}var w,T,C,S,E,M,A,k,P,R,B,I,L,O,D,F,N,$="sizzle"+-new Date,j=t.document,U=0,H=0,G=i(),W=i(),V=i(),z=function(t,e){return t===e&&(P=!0),0},X="undefined",Y=1<<31,q={}.hasOwnProperty,K=[],Q=K.pop,J=K.push,Z=K.push,tt=K.slice,et=K.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=rt.replace("w","w#"),ot="\\["+nt+"*("+rt+")"+nt+"*(?:([*^$|!~]?=)"+nt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+st+")|)|)"+nt+"*\\]",at=":("+rt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ot.replace(3,8)+")*)|.*)\\)|)",lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ht=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ut=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),dt=new RegExp(at),pt=new RegExp("^"+st+"$"),ft={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,_t=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(K=tt.call(j.childNodes),j.childNodes),K[j.childNodes.length].nodeType}catch(Tt){Z={apply:K.length?function(t,e){J.apply(t,tt.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}T=e.support={},E=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},R=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:j,n=i.defaultView;return i!==B&&9===i.nodeType&&i.documentElement?(B=i,I=i.documentElement,L=!E(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){R()},!1):n.attachEvent&&n.attachEvent("onunload",function(){R()})),T.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),T.getElementsByTagName=r(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),T.getElementsByClassName=vt.test(i.getElementsByClassName)&&r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),T.getById=r(function(t){return I.appendChild(t).id=$,!i.getElementsByName||!i.getElementsByName($).length}),T.getById?(C.find.ID=function(t,e){if(typeof e.getElementById!==X&&L){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},C.filter.ID=function(t){var e=t.replace(xt,wt);return function(t){return t.getAttribute("id")===e}}):(delete C.find.ID,C.filter.ID=function(t){var e=t.replace(xt,wt);return function(t){var i=typeof t.getAttributeNode!==X&&t.getAttributeNode("id");return i&&i.value===e}}),C.find.TAG=T.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==X?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[r++];)1===i.nodeType&&n.push(i);return n}return s},C.find.CLASS=T.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==X&&L?e.getElementsByClassName(t):void 0},D=[],O=[],(T.qsa=vt.test(i.querySelectorAll))&&(r(function(t){t.innerHTML="<select t=''><option selected=''></option></select>",t.querySelectorAll("[t^='']").length&&O.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||O.push("\\["+nt+"*(?:value|"+it+")"),t.querySelectorAll(":checked").length||O.push(":checked")}),r(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&O.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),O.push(",.*:")})),(T.matchesSelector=vt.test(F=I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&r(function(t){T.disconnectedMatch=F.call(t,"div"),F.call(t,"[s!='']:x"),D.push("!=",at)}),O=O.length&&new RegExp(O.join("|")),D=D.length&&new RegExp(D.join("|")),e=vt.test(I.compareDocumentPosition),N=e||vt.test(I.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},z=e?function(t,e){if(t===e)return P=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!T.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===j&&N(j,t)?-1:e===i||e.ownerDocument===j&&N(j,e)?1:k?et.call(k,t)-et.call(k,e):0:4&n?-1:1)}:function(t,e){if(t===e)return P=!0,0;var n,r=0,s=t.parentNode,a=e.parentNode,l=[t],h=[e];if(!s||!a)return t===i?-1:e===i?1:s?-1:a?1:k?et.call(k,t)-et.call(k,e):0;if(s===a)return o(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)h.unshift(n);for(;l[r]===h[r];)r++;return r?o(l[r],h[r]):l[r]===j?-1:h[r]===j?1:0},i):B},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==B&&R(t),i=i.replace(ut,"='$1']"),!(!T.matchesSelector||!L||D&&D.test(i)||O&&O.test(i)))try{var n=F.call(t,i);if(n||T.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(r){}return e(i,B,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==B&&R(t),N(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==B&&R(t);var i=C.attrHandle[e.toLowerCase()],n=i&&q.call(C.attrHandle,e.toLowerCase())?i(t,e,!L):void 0;return void 0!==n?n:T.attributes||!L?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,r=0;if(P=!T.detectDuplicates,k=!T.sortStable&&t.slice(0),t.sort(z),P){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return k=null,t},S=e.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=S(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=S(e);return i},C=e.selectors={cacheLength:50,createPseudo:n,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xt,wt),t[3]=(t[4]||t[5]||"").replace(xt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[5]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]&&void 0!==t[4]?t[2]=t[4]:i&&dt.test(i)&&(e=d(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=G[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&G(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==X&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(r){var s=e.attr(r,t);return null==s?"!="===i:i?(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s+" ").indexOf(n)>-1:"|="===i?s===n||s.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var h,c,u,d,p,f,g=s!==o?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),b=!l&&!a;if(m){if(s){for(;g;){for(u=e;u=u[g];)if(a?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&b){for(c=m[$]||(m[$]={}),h=c[t]||[],p=h[0]===U&&h[1],d=h[0]===U&&h[2],u=p&&m.childNodes[p];u=++p&&u&&u[g]||(d=p=0)||f.pop();)if(1===u.nodeType&&++d&&u===e){c[t]=[U,p,d];break}}else if(b&&(h=(e[$]||(e[$]={}))[t])&&h[0]===U)d=h[1];else for(;(u=++p&&u&&u[g]||(d=p=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++d||(b&&((u[$]||(u[$]={}))[t]=[U,d]),u!==e)););return d-=r,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(t,i){var r,s=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[$]?s(i):s.length>1?(r=[t,t,"",i],C.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=s(t,i),o=r.length;o--;)n=et.call(t,r[o]),t[n]=!(e[n]=r[o])}):function(t){return s(t,0,r)}):s}},pseudos:{not:n(function(t){var e=[],i=[],r=M(t.replace(lt,"$1"));return r[$]?n(function(t,e,i,n){for(var s,o=r(t,null,n,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))}):function(t,n,s){return e[0]=t,r(e,null,s,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:n(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xt,wt).toLowerCase(),function(e){var i;do if(i=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===B.activeElement&&(!B.hasFocus||B.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return gt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,i){return[0>i?i+e:i]}),even:h(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:h(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:h(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:h(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=l(w);return u.prototype=C.filters=C.pseudos,C.setFilters=new u,M=e.compile=function(t,e){var i,n=[],r=[],s=V[t+" "];if(!s){for(e||(e=d(t)),i=e.length;i--;)s=b(e[i]),s[$]?n.push(s):r.push(s);s=V(t,y(r,n))}return s},T.sortStable=$.split("").sort(z).join("")===$,T.detectDuplicates=!!P,R(),T.sortDetached=r(function(t){return 1&t.compareDocumentPosition(B.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),T.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||s(it,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);tt.find=rt,tt.expr=rt.selectors,tt.expr[":"]=tt.expr.pseudos,tt.unique=rt.uniqueSort,tt.text=rt.getText,tt.isXMLDoc=rt.isXML,tt.contains=rt.contains;var st=tt.expr.match.needsContext,ot=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;tt.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?tt.find.matchesSelector(n,t)?[n]:[]:tt.find.matches(t,tt.grep(e,function(t){return 1===t.nodeType}))},tt.fn.extend({find:function(t){var e,i=this.length,n=[],r=this;if("string"!=typeof t)return this.pushStack(tt(t).filter(function(){for(e=0;i>e;e++)if(tt.contains(r[e],this))return!0}));for(e=0;i>e;e++)tt.find(t,r[e],n);return n=this.pushStack(i>1?tt.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&st.test(t)?tt(t):t||[],!1).length}});var lt,ht=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ct=tt.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ht.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||lt).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof tt?e[0]:e,tt.merge(this,tt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:J,!0)),ot.test(i[1])&&tt.isPlainObject(e))for(i in e)tt.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return n=J.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=J,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):tt.isFunction(t)?"undefined"!=typeof lt.ready?lt.ready(t):t(tt):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),tt.makeArray(t,this))};ct.prototype=tt.fn,lt=tt(J);var ut=/^(?:parents|prev(?:Until|All))/,dt={children:!0,contents:!0,next:!0,prev:!0};tt.extend({dir:function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&tt(t).is(i))break;n.push(t)}return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),tt.fn.extend({has:function(t){var e=tt(t,this),i=e.length;return this.filter(function(){for(var t=0;i>t;t++)if(tt.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,r=this.length,s=[],o=st.test(t)||"string"!=typeof t?tt(t,e||this.context):0;r>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&tt.find.matchesSelector(i,t))){
s.push(i);break}return this.pushStack(s.length>1?tt.unique(s):s)},index:function(t){return t?"string"==typeof t?z.call(tt(t),this[0]):z.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(tt.unique(tt.merge(this.get(),tt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),tt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return tt.dir(t,"parentNode")},parentsUntil:function(t,e,i){return tt.dir(t,"parentNode",i)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return tt.dir(t,"nextSibling")},prevAll:function(t){return tt.dir(t,"previousSibling")},nextUntil:function(t,e,i){return tt.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return tt.dir(t,"previousSibling",i)},siblings:function(t){return tt.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return tt.sibling(t.firstChild)},contents:function(t){return t.contentDocument||tt.merge([],t.childNodes)}},function(t,e){tt.fn[t]=function(i,n){var r=tt.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=tt.filter(n,r)),this.length>1&&(dt[t]||tt.unique(r),ut.test(t)&&r.reverse()),this.pushStack(r)}});var pt=/\S+/g,ft={};tt.Callbacks=function(t){t="string"==typeof t?ft[t]||s(t):tt.extend({},t);var e,i,n,r,o,a,l=[],h=!t.once&&[],c=function(s){for(e=t.memory&&s,i=!0,a=r||0,r=0,o=l.length,n=!0;l&&o>a;a++)if(l[a].apply(s[0],s[1])===!1&&t.stopOnFalse){e=!1;break}n=!1,l&&(h?h.length&&c(h.shift()):e?l=[]:u.disable())},u={add:function(){if(l){var i=l.length;!function s(e){tt.each(e,function(e,i){var n=tt.type(i);"function"===n?t.unique&&u.has(i)||l.push(i):i&&i.length&&"string"!==n&&s(i)})}(arguments),n?o=l.length:e&&(r=i,c(e))}return this},remove:function(){return l&&tt.each(arguments,function(t,e){for(var i;(i=tt.inArray(e,l,i))>-1;)l.splice(i,1),n&&(o>=i&&o--,a>=i&&a--)}),this},has:function(t){return t?tt.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=h=e=void 0,this},disabled:function(){return!l},lock:function(){return h=void 0,e||u.disable(),this},locked:function(){return!h},fireWith:function(t,e){return!l||i&&!h||(e=e||[],e=[t,e.slice?e.slice():e],n?h.push(e):c(e)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},tt.extend({Deferred:function(t){var e=[["resolve","done",tt.Callbacks("once memory"),"resolved"],["reject","fail",tt.Callbacks("once memory"),"rejected"],["notify","progress",tt.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return tt.Deferred(function(i){tt.each(e,function(e,s){var o=tt.isFunction(t[e])&&t[e];r[s[1]](function(){var t=o&&o.apply(this,arguments);t&&tt.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===n?i.promise():this,o?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?tt.extend(t,n):n}},r={};return n.pipe=n.then,tt.each(e,function(t,s){var o=s[2],a=s[3];n[s[1]]=o.add,a&&o.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?n:this,arguments),this},r[s[0]+"With"]=o.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,i,n,r=0,s=G.call(arguments),o=s.length,a=1!==o||t&&tt.isFunction(t.promise)?o:0,l=1===a?t:tt.Deferred(),h=function(t,i,n){return function(r){i[t]=this,n[t]=arguments.length>1?G.call(arguments):r,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(o>1)for(e=new Array(o),i=new Array(o),n=new Array(o);o>r;r++)s[r]&&tt.isFunction(s[r].promise)?s[r].promise().done(h(r,n,s)).fail(l.reject).progress(h(r,i,e)):--a;return a||l.resolveWith(n,s),l.promise()}});var gt;tt.fn.ready=function(t){return tt.ready.promise().done(t),this},tt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?tt.readyWait++:tt.ready(!0)},ready:function(t){(t===!0?--tt.readyWait:tt.isReady)||(tt.isReady=!0,t!==!0&&--tt.readyWait>0||(gt.resolveWith(J,[tt]),tt.fn.trigger&&tt(J).trigger("ready").off("ready")))}}),tt.ready.promise=function(e){return gt||(gt=tt.Deferred(),"complete"===J.readyState?setTimeout(tt.ready):(J.addEventListener("DOMContentLoaded",o,!1),t.addEventListener("load",o,!1))),gt.promise(e)},tt.ready.promise();var mt=tt.access=function(t,e,i,n,r,s,o){var a=0,l=t.length,h=null==i;if("object"===tt.type(i)){r=!0;for(a in i)tt.access(t,e,a,i[a],!0,s,o)}else if(void 0!==n&&(r=!0,tt.isFunction(n)||(o=!0),h&&(o?(e.call(t,n),e=null):(h=e,e=function(t,e,i){return h.call(tt(t),i)})),e))for(;l>a;a++)e(t[a],i,o?n:n.call(t[a],a,e(t[a],i)));return r?t:h?e.call(t):l?e(t[0],i):s};tt.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},a.uid=1,a.accepts=tt.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var e={},i=t[this.expando];if(!i){i=a.uid++;try{e[this.expando]={value:i},Object.defineProperties(t,e)}catch(n){e[this.expando]=i,tt.extend(t,e)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,i){var n,r=this.key(t),s=this.cache[r];if("string"==typeof e)s[e]=i;else if(tt.isEmptyObject(s))tt.extend(this.cache[r],e);else for(n in e)s[n]=e[n];return s},get:function(t,e){var i=this.cache[this.key(t)];return void 0===e?i:i[e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?(n=this.get(t,e),void 0!==n?n:this.get(t,tt.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,r,s=this.key(t),o=this.cache[s];if(void 0===e)this.cache[s]={};else{tt.isArray(e)?n=e.concat(e.map(tt.camelCase)):(r=tt.camelCase(e),e in o?n=[e,r]:(n=r,n=n in o?[n]:n.match(pt)||[])),i=n.length;for(;i--;)delete o[n[i]]}},hasData:function(t){return!tt.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var vt=new a,bt=new a,yt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_t=/([A-Z])/g;tt.extend({hasData:function(t){return bt.hasData(t)||vt.hasData(t)},data:function(t,e,i){return bt.access(t,e,i)},removeData:function(t,e){bt.remove(t,e)},_data:function(t,e,i){return vt.access(t,e,i)},_removeData:function(t,e){vt.remove(t,e)}}),tt.fn.extend({data:function(t,e){var i,n,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=bt.get(s),1===s.nodeType&&!vt.get(s,"hasDataAttrs"))){for(i=o.length;i--;)n=o[i].name,0===n.indexOf("data-")&&(n=tt.camelCase(n.slice(5)),l(s,n,r[n]));vt.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){bt.set(this,t)}):mt(this,function(e){var i,n=tt.camelCase(t);if(s&&void 0===e){if(i=bt.get(s,t),void 0!==i)return i;if(i=bt.get(s,n),void 0!==i)return i;if(i=l(s,n,void 0),void 0!==i)return i}else this.each(function(){var i=bt.get(this,n);bt.set(this,n,e),-1!==t.indexOf("-")&&void 0!==i&&bt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){bt.remove(this,t)})}}),tt.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=vt.get(t,e),i&&(!n||tt.isArray(i)?n=vt.access(t,e,tt.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=tt.queue(t,e),n=i.length,r=i.shift(),s=tt._queueHooks(t,e),o=function(){tt.dequeue(t,e)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete s.stop,r.call(t,o,s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return vt.get(t,i)||vt.access(t,i,{empty:tt.Callbacks("once memory").add(function(){vt.remove(t,[e+"queue",i])})})}}),tt.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?tt.queue(this[0],t):void 0===e?this:this.each(function(){var i=tt.queue(this,t,e);tt._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&tt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){tt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=tt.Deferred(),s=this,o=this.length,a=function(){--n||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)i=vt.get(s[o],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wt=["Top","Right","Bottom","Left"],Tt=function(t,e){return t=e||t,"none"===tt.css(t,"display")||!tt.contains(t.ownerDocument,t)},Ct=/^(?:checkbox|radio)$/i;!function(){var t=J.createDocumentFragment(),e=t.appendChild(J.createElement("div"));e.innerHTML="<input type='radio' checked='checked' name='t'/>",Q.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var St="undefined";Q.focusinBubbles="onfocusin"in t;var Et=/^key/,Mt=/^(?:mouse|contextmenu)|click/,At=/^(?:focusinfocus|focusoutblur)$/,kt=/^([^.]*)(?:\.(.+)|)$/;tt.event={global:{},add:function(t,e,i,n,r){var s,o,a,l,h,c,u,d,p,f,g,m=vt.get(t);if(m)for(i.handler&&(s=i,i=s.handler,r=s.selector),i.guid||(i.guid=tt.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(e){return typeof tt!==St&&tt.event.triggered!==e.type?tt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(pt)||[""],h=e.length;h--;)a=kt.exec(e[h])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p&&(u=tt.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=tt.event.special[p]||{},c=tt.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&tt.expr.match.needsContext.test(r),namespace:f.join(".")},s),(d=l[p])||(d=l[p]=[],d.delegateCount=0,u.setup&&u.setup.call(t,n,f,o)!==!1||t.addEventListener&&t.addEventListener(p,o,!1)),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),tt.event.global[p]=!0)},remove:function(t,e,i,n,r){var s,o,a,l,h,c,u,d,p,f,g,m=vt.hasData(t)&&vt.get(t);if(m&&(l=m.events)){for(e=(e||"").match(pt)||[""],h=e.length;h--;)if(a=kt.exec(e[h])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(u=tt.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,d=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)c=d[s],!r&&g!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(s,1),c.selector&&d.delegateCount--,u.remove&&u.remove.call(t,c));o&&!d.length&&(u.teardown&&u.teardown.call(t,f,m.handle)!==!1||tt.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)tt.event.remove(t,p+e[h],i,n,!0);tt.isEmptyObject(l)&&(delete m.handle,vt.remove(t,"events"))}},trigger:function(e,i,n,r){var s,o,a,l,h,c,u,d=[n||J],p=q.call(e,"type")?e.type:e,f=q.call(e,"namespace")?e.namespace.split("."):[];if(o=a=n=n||J,3!==n.nodeType&&8!==n.nodeType&&!At.test(p+tt.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),h=p.indexOf(":")<0&&"on"+p,e=e[tt.expando]?e:new tt.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:tt.makeArray(i,[e]),u=tt.event.special[p]||{},r||!u.trigger||u.trigger.apply(n,i)!==!1)){if(!r&&!u.noBubble&&!tt.isWindow(n)){for(l=u.delegateType||p,At.test(l+p)||(o=o.parentNode);o;o=o.parentNode)d.push(o),a=o;a===(n.ownerDocument||J)&&d.push(a.defaultView||a.parentWindow||t)}for(s=0;(o=d[s++])&&!e.isPropagationStopped();)e.type=s>1?l:u.bindType||p,c=(vt.get(o,"events")||{})[e.type]&&vt.get(o,"handle"),c&&c.apply(o,i),c=h&&o[h],c&&c.apply&&tt.acceptData(o)&&(e.result=c.apply(o,i),e.result===!1&&e.preventDefault());return e.type=p,r||e.isDefaultPrevented()||u._default&&u._default.apply(d.pop(),i)!==!1||!tt.acceptData(n)||h&&tt.isFunction(n[p])&&!tt.isWindow(n)&&(a=n[h],a&&(n[h]=null),tt.event.triggered=p,n[p](),tt.event.triggered=void 0,a&&(n[h]=a)),e.result}},dispatch:function(t){t=tt.event.fix(t);var e,i,n,r,s,o=[],a=G.call(arguments),l=(vt.get(this,"events")||{})[t.type]||[],h=tt.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,t)!==!1){for(o=tt.event.handlers.call(this,t,l),e=0;(r=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,i=0;(s=r.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,n=((tt.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,s,o=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(n=[],i=0;a>i;i++)s=e[i],r=s.selector+" ",void 0===n[r]&&(n[r]=s.needsContext?tt(r,this).index(l)>=0:tt.find(r,this,null,[l]).length),n[r]&&n.push(s);n.length&&o.push({elem:l,handlers:n})}return a<e.length&&o.push({elem:this,handlers:e.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,s=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||J,n=i.documentElement,r=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[tt.expando])return t;var e,i,n,r=t.type,s=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=Mt.test(r)?this.mouseHooks:Et.test(r)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,t=new tt.Event(s),e=n.length;e--;)i=n[e],t[i]=s[i];return t.target||(t.target=J),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&tt.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return tt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var r=tt.extend(new tt.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?tt.event.trigger(r,null,e):tt.event.dispatch.call(e,r),r.isDefaultPrevented()&&i.preventDefault()}},tt.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},tt.Event=function(t,e){return this instanceof tt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.getPreventDefault&&t.getPreventDefault()?h:c):this.type=t,e&&tt.extend(this,e),this.timeStamp=t&&t.timeStamp||tt.now(),void(this[tt.expando]=!0)):new tt.Event(t,e)},tt.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=h,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=h,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h,this.stopPropagation()}},tt.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){tt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,s=t.handleObj;return(!r||r!==n&&!tt.contains(n,r))&&(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),Q.focusinBubbles||tt.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){tt.event.simulate(e,t.target,tt.event.fix(t),!0)};tt.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=vt.access(n,e);r||n.addEventListener(t,i,!0),vt.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=vt.access(n,e)-1;r?vt.access(n,e,r):(n.removeEventListener(t,i,!0),vt.remove(n,e))}}}),tt.fn.extend({on:function(t,e,i,n,r){var s,o;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(o in t)this.on(o,e,i,t[o],r);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=c;else if(!n)return this;return 1===r&&(s=n,n=function(t){return tt().off(t),s.apply(this,arguments)},n.guid=s.guid||(s.guid=tt.guid++)),this.each(function(){tt.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,tt(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=c),this.each(function(){tt.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){tt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?tt.event.trigger(t,e,i,!0):void 0}});var Pt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Rt=/<([\w:]+)/,Bt=/<|&#?\w+;/,It=/<(?:script|style|link)/i,Lt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ot=/^$|\/(?:java|ecma)script/i,Dt=/^true\/(.*)/,Ft=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,tt.extend({clone:function(t,e,i){var n,r,s,o,a=t.cloneNode(!0),l=tt.contains(t.ownerDocument,t);if(!(Q.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||tt.isXMLDoc(t)))for(o=v(a),s=v(t),n=0,r=s.length;r>n;n++)b(s[n],o[n]);if(e)if(i)for(s=s||v(t),o=o||v(a),n=0,r=s.length;r>n;n++)m(s[n],o[n]);else m(t,a);return o=v(a,"script"),o.length>0&&g(o,!l&&v(t,"script")),a},buildFragment:function(t,e,i,n){for(var r,s,o,a,l,h,c=e.createDocumentFragment(),u=[],d=0,p=t.length;p>d;d++)if(r=t[d],r||0===r)if("object"===tt.type(r))tt.merge(u,r.nodeType?[r]:r);else if(Bt.test(r)){for(s=s||c.appendChild(e.createElement("div")),o=(Rt.exec(r)||["",""])[1].toLowerCase(),a=Nt[o]||Nt._default,s.innerHTML=a[1]+r.replace(Pt,"<$1></$2>")+a[2],h=a[0];h--;)s=s.lastChild;tt.merge(u,s.childNodes),s=c.firstChild,s.textContent=""}else u.push(e.createTextNode(r));for(c.textContent="",d=0;r=u[d++];)if((!n||-1===tt.inArray(r,n))&&(l=tt.contains(r.ownerDocument,r),s=v(c.appendChild(r),"script"),l&&g(s),i))for(h=0;r=s[h++];)Ot.test(r.type||"")&&i.push(r);return c},cleanData:function(t){for(var e,i,n,r,s,o,a=tt.event.special,l=0;void 0!==(i=t[l]);l++){if(tt.acceptData(i)&&(s=i[vt.expando],s&&(e=vt.cache[s]))){if(n=Object.keys(e.events||{}),n.length)for(o=0;void 0!==(r=n[o]);o++)a[r]?tt.event.remove(i,r):tt.removeEvent(i,r,e.handle);vt.cache[s]&&delete vt.cache[s]}delete bt.cache[i[bt.expando]]}}}),tt.fn.extend({text:function(t){return mt(this,function(t){return void 0===t?tt.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?tt.filter(t,this):this,r=0;null!=(i=n[r]);r++)e||1!==i.nodeType||tt.cleanData(v(i)),i.parentNode&&(e&&tt.contains(i.ownerDocument,i)&&g(v(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(tt.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return tt.clone(this,t,e)})},html:function(t){return mt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!It.test(t)&&!Nt[(Rt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Pt,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(tt.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,tt.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=W.apply([],t);var i,n,r,s,o,a,l=0,h=this.length,c=this,u=h-1,d=t[0],g=tt.isFunction(d);if(g||h>1&&"string"==typeof d&&!Q.checkClone&&Lt.test(d))return this.each(function(i){var n=c.eq(i);g&&(t[0]=d.call(this,i,n.html())),n.domManip(t,e)});if(h&&(i=tt.buildFragment(t,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(r=tt.map(v(i,"script"),p),s=r.length;h>l;l++)o=i,l!==u&&(o=tt.clone(o,!0,!0),s&&tt.merge(r,v(o,"script"))),e.call(this[l],o,l);if(s)for(a=r[r.length-1].ownerDocument,tt.map(r,f),l=0;s>l;l++)o=r[l],Ot.test(o.type||"")&&!vt.access(o,"globalEval")&&tt.contains(a,o)&&(o.src?tt._evalUrl&&tt._evalUrl(o.src):tt.globalEval(o.textContent.replace(Ft,"")))}return this}}),tt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){tt.fn[t]=function(t){for(var i,n=[],r=tt(t),s=r.length-1,o=0;s>=o;o++)i=o===s?this:this.clone(!0),tt(r[o])[e](i),V.apply(n,i.get());return this.pushStack(n)}});var $t,jt={},Ut=/^margin/,Ht=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),Gt=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",s.appendChild(o);var e=t.getComputedStyle(a,null);i="1%"!==e.top,n="4px"===e.width,s.removeChild(o)}var i,n,r="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",s=J.documentElement,o=J.createElement("div"),a=J.createElement("div");a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",o.appendChild(a),t.getComputedStyle&&tt.extend(Q,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return null==n&&e(),n},reliableMarginRight:function(){var e,i=a.appendChild(J.createElement("div"));return i.style.cssText=a.style.cssText=r,i.style.marginRight=i.style.width="0",a.style.width="1px",s.appendChild(o),e=!parseFloat(t.getComputedStyle(i,null).marginRight),s.removeChild(o),a.innerHTML="",e}})}(),tt.swap=function(t,e,i,n){var r,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];r=i.apply(t,n||[]);for(s in e)t.style[s]=o[s];return r};var Wt=/^(none|table(?!-c[ea]).+)/,Vt=new RegExp("^("+xt+")(.*)$","i"),zt=new RegExp("^([+-])=("+xt+")","i"),Xt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},qt=["Webkit","O","Moz","ms"];tt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=x(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=tt.camelCase(e),l=t.style;return e=tt.cssProps[a]||(tt.cssProps[a]=T(l,a)),o=tt.cssHooks[e]||tt.cssHooks[a],void 0===i?o&&"get"in o&&void 0!==(r=o.get(t,!1,n))?r:l[e]:(s=typeof i,"string"===s&&(r=zt.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(tt.css(t,e)),s="number"),void(null!=i&&i===i&&("number"!==s||tt.cssNumber[a]||(i+="px"),Q.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(i=o.set(t,i,n))||(l[e]="",l[e]=i))))}},css:function(t,e,i,n){var r,s,o,a=tt.camelCase(e);return e=tt.cssProps[a]||(tt.cssProps[a]=T(t.style,a)),o=tt.cssHooks[e]||tt.cssHooks[a],o&&"get"in o&&(r=o.get(t,!0,i)),void 0===r&&(r=x(t,e,n)),"normal"===r&&e in Yt&&(r=Yt[e]),""===i||i?(s=parseFloat(r),i===!0||tt.isNumeric(s)?s||0:r):r}}),tt.each(["height","width"],function(t,e){tt.cssHooks[e]={get:function(t,i,n){return i?0===t.offsetWidth&&Wt.test(tt.css(t,"display"))?tt.swap(t,Xt,function(){return E(t,e,n)}):E(t,e,n):void 0},set:function(t,i,n){var r=n&&Gt(t);return C(t,i,n?S(t,e,n,"border-box"===tt.css(t,"boxSizing",!1,r),r):0)}}}),tt.cssHooks.marginRight=w(Q.reliableMarginRight,function(t,e){return e?tt.swap(t,{display:"inline-block"},x,[t,"marginRight"]):void 0}),tt.each({margin:"",padding:"",border:"Width"},function(t,e){tt.cssHooks[t+e]={expand:function(i){for(var n=0,r={},s="string"==typeof i?i.split(" "):[i];4>n;n++)r[t+wt[n]+e]=s[n]||s[n-2]||s[0];return r}},Ut.test(t)||(tt.cssHooks[t+e].set=C)}),tt.fn.extend({css:function(t,e){return mt(this,function(t,e,i){var n,r,s={},o=0;if(tt.isArray(e)){for(n=Gt(t),r=e.length;r>o;o++)s[e[o]]=tt.css(t,e[o],!1,n);return s}return void 0!==i?tt.style(t,e,i):tt.css(t,e)},t,e,arguments.length>1)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Tt(this)?tt(this).show():tt(this).hide()})}}),tt.Tween=A,A.prototype={constructor:A,init:function(t,e,i,n,r,s){this.elem=t,this.prop=i,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(tt.cssNumber[i]?"":"px")},cur:function(){var t=A.propHooks[this.prop];return t&&t.get?t.get(this):A.propHooks._default.get(this)},run:function(t){var e,i=A.propHooks[this.prop];return this.pos=e=this.options.duration?tt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=tt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){tt.fx.step[t.prop]?tt.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[tt.cssProps[t.prop]]||tt.cssHooks[t.prop])?tt.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},tt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},tt.fx=A.prototype.init,tt.fx.step={};var Kt,Qt,Jt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),te=/queueHooks$/,ee=[B],ie={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),r=Zt.exec(e),s=r&&r[3]||(tt.cssNumber[t]?"":"px"),o=(tt.cssNumber[t]||"px"!==s&&+n)&&Zt.exec(tt.css(i.elem,t)),a=1,l=20;if(o&&o[3]!==s){s=s||o[3],r=r||[],o=+n||1;do a=a||".5",o/=a,tt.style(i.elem,t,o+s);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return r&&(o=i.start=+o||+n||0,i.unit=s,i.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),i}]};tt.Animation=tt.extend(L,{tweener:function(t,e){tt.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,r=t.length;r>n;n++)i=t[n],ie[i]=ie[i]||[],ie[i].unshift(e)},prefilter:function(t,e){e?ee.unshift(t):ee.push(t)}}),tt.speed=function(t,e,i){var n=t&&"object"==typeof t?tt.extend({},t):{complete:i||!i&&e||tt.isFunction(t)&&t,duration:t,easing:i&&e||e&&!tt.isFunction(e)&&e};return n.duration=tt.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in tt.fx.speeds?tt.fx.speeds[n.duration]:tt.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){tt.isFunction(n.old)&&n.old.call(this),n.queue&&tt.dequeue(this,n.queue)},n},tt.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Tt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=tt.isEmptyObject(t),s=tt.speed(e,i,n),o=function(){var e=L(this,tt.extend({},t),s);(r||vt.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",s=tt.timers,o=vt.get(this);if(r)o[r]&&o[r].stop&&n(o[r]);else for(r in o)o[r]&&o[r].stop&&te.test(r)&&n(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(i),e=!1,s.splice(r,1));(e||!i)&&tt.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=vt.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],s=tt.timers,o=n?n.length:0;for(i.finish=!0,tt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;o>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),tt.each(["toggle","show","hide"],function(t,e){var i=tt.fn[e];tt.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(P(e,!0),t,n,r)}}),tt.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){tt.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),tt.timers=[],tt.fx.tick=function(){var t,e=0,i=tt.timers;for(Kt=tt.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||tt.fx.stop(),Kt=void 0},tt.fx.timer=function(t){tt.timers.push(t),t()?tt.fx.start():tt.timers.pop()},tt.fx.interval=13,tt.fx.start=function(){Qt||(Qt=setInterval(tt.fx.tick,tt.fx.interval))},tt.fx.stop=function(){clearInterval(Qt),Qt=null},tt.fx.speeds={slow:600,fast:200,_default:400},tt.fn.delay=function(t,e){return t=tt.fx?tt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t=J.createElement("input"),e=J.createElement("select"),i=e.appendChild(J.createElement("option"));t.type="checkbox",Q.checkOn=""!==t.value,Q.optSelected=i.selected,e.disabled=!0,Q.optDisabled=!i.disabled,t=J.createElement("input"),t.value="t",t.type="radio",Q.radioValue="t"===t.value}();var ne,re,se=tt.expr.attrHandle;tt.fn.extend({attr:function(t,e){return mt(this,tt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){tt.removeAttr(this,t)})}}),tt.extend({attr:function(t,e,i){var n,r,s=t.nodeType;return t&&3!==s&&8!==s&&2!==s?typeof t.getAttribute===St?tt.prop(t,e,i):(1===s&&tt.isXMLDoc(t)||(e=e.toLowerCase(),n=tt.attrHooks[e]||(tt.expr.match.bool.test(e)?re:ne)),void 0===i?n&&"get"in n&&null!==(r=n.get(t,e))?r:(r=tt.find.attr(t,e),null==r?void 0:r):null!==i?n&&"set"in n&&void 0!==(r=n.set(t,i,e))?r:(t.setAttribute(e,i+""),i):void tt.removeAttr(t,e)):void 0;
},removeAttr:function(t,e){var i,n,r=0,s=e&&e.match(pt);if(s&&1===t.nodeType)for(;i=s[r++];)n=tt.propFix[i]||i,tt.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!Q.radioValue&&"radio"===e&&tt.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),re={set:function(t,e,i){return e===!1?tt.removeAttr(t,i):t.setAttribute(i,i),i}},tt.each(tt.expr.match.bool.source.match(/\w+/g),function(t,e){var i=se[e]||tt.find.attr;se[e]=function(t,e,n){var r,s;return n||(s=se[e],se[e]=r,r=null!=i(t,e,n)?e.toLowerCase():null,se[e]=s),r}});var oe=/^(?:input|select|textarea|button)$/i;tt.fn.extend({prop:function(t,e){return mt(this,tt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[tt.propFix[t]||t]})}}),tt.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,r,s,o=t.nodeType;return t&&3!==o&&8!==o&&2!==o?(s=1!==o||!tt.isXMLDoc(t),s&&(e=tt.propFix[e]||e,r=tt.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||oe.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Q.optSelected||(tt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),tt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){tt.propFix[this.toLowerCase()]=this});var ae=/[\t\r\n\f]/g;tt.fn.extend({addClass:function(t){var e,i,n,r,s,o,a="string"==typeof t&&t,l=0,h=this.length;if(tt.isFunction(t))return this.each(function(e){tt(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(pt)||[];h>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ae," "):" ")){for(s=0;r=e[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o=tt.trim(n),i.className!==o&&(i.className=o)}return this},removeClass:function(t){var e,i,n,r,s,o,a=0===arguments.length||"string"==typeof t&&t,l=0,h=this.length;if(tt.isFunction(t))return this.each(function(e){tt(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(pt)||[];h>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ae," "):"")){for(s=0;r=e[s++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");o=t?tt.trim(n):"",i.className!==o&&(i.className=o)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(tt.isFunction(t)?function(i){tt(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,r=tt(this),s=t.match(pt)||[];e=s[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(i===St||"boolean"===i)&&(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ae," ").indexOf(e)>=0)return!0;return!1}});var le=/\r/g;tt.fn.extend({val:function(t){var e,i,n,r=this[0];return arguments.length?(n=tt.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=n?t.call(this,i,tt(this).val()):t,null==r?r="":"number"==typeof r?r+="":tt.isArray(r)&&(r=tt.map(r,function(t){return null==t?"":t+""})),e=tt.valHooks[this.type]||tt.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=tt.valHooks[r.type]||tt.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(le,""):null==i?"":i)):void 0}}),tt.extend({valHooks:{select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,s="select-one"===t.type||0>r,o=s?null:[],a=s?r+1:n.length,l=0>r?a:s?r:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==r||(Q.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&tt.nodeName(i.parentNode,"optgroup"))){if(e=tt(i).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var i,n,r=t.options,s=tt.makeArray(e),o=r.length;o--;)n=r[o],(n.selected=tt.inArray(tt(n).val(),s)>=0)&&(i=!0);return i||(t.selectedIndex=-1),s}}}}),tt.each(["radio","checkbox"],function(){tt.valHooks[this]={set:function(t,e){return tt.isArray(e)?t.checked=tt.inArray(tt(t).val(),e)>=0:void 0}},Q.checkOn||(tt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),tt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){tt.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),tt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var he=tt.now(),ce=/\?/;tt.parseJSON=function(t){return JSON.parse(t+"")},tt.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,e=i.parseFromString(t,"text/xml")}catch(n){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&tt.error("Invalid XML: "+t),e};var ue,de,pe=/#.*$/,fe=/([?&])_=[^&]*/,ge=/^(.*?):[ \t]*([^\r\n]*)$/gm,me=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ve=/^(?:GET|HEAD)$/,be=/^\/\//,ye=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,_e={},xe={},we="*/".concat("*");try{de=location.href}catch(Te){de=J.createElement("a"),de.href="",de=de.href}ue=ye.exec(de.toLowerCase())||[],tt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:de,type:"GET",isLocal:me.test(ue[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":we,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":tt.parseJSON,"text xml":tt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?F(F(t,tt.ajaxSettings),e):F(tt.ajaxSettings,t)},ajaxPrefilter:O(_e),ajaxTransport:O(xe),ajax:function(t,e){function i(t,e,i,o){var l,c,v,b,_,w=e;2!==y&&(y=2,a&&clearTimeout(a),n=void 0,s=o||"",x.readyState=t>0?4:0,l=t>=200&&300>t||304===t,i&&(b=N(u,x,i)),b=$(u,b,x,l),l?(u.ifModified&&(_=x.getResponseHeader("Last-Modified"),_&&(tt.lastModified[r]=_),_=x.getResponseHeader("etag"),_&&(tt.etag[r]=_)),204===t||"HEAD"===u.type?w="nocontent":304===t?w="notmodified":(w=b.state,c=b.data,v=b.error,l=!v)):(v=w,(t||!w)&&(w="error",0>t&&(t=0))),x.status=t,x.statusText=(e||w)+"",l?f.resolveWith(d,[c,w,x]):f.rejectWith(d,[x,w,v]),x.statusCode(m),m=void 0,h&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,u,l?c:v]),g.fireWith(d,[x,w]),h&&(p.trigger("ajaxComplete",[x,u]),--tt.active||tt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,s,o,a,l,h,c,u=tt.ajaxSetup({},e),d=u.context||u,p=u.context&&(d.nodeType||d.jquery)?tt(d):tt.event,f=tt.Deferred(),g=tt.Callbacks("once memory"),m=u.statusCode||{},v={},b={},y=0,_="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!o)for(o={};e=ge.exec(s);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return y||(t=b[i]=b[i]||t,v[t]=e),this},overrideMimeType:function(t){return y||(u.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)m[e]=[m[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||_;return n&&n.abort(e),i(0,e),this}};if(f.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,u.url=((t||u.url||de)+"").replace(pe,"").replace(be,ue[1]+"//"),u.type=e.method||e.type||u.method||u.type,u.dataTypes=tt.trim(u.dataType||"*").toLowerCase().match(pt)||[""],null==u.crossDomain&&(l=ye.exec(u.url.toLowerCase()),u.crossDomain=!(!l||l[1]===ue[1]&&l[2]===ue[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(ue[3]||("http:"===ue[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=tt.param(u.data,u.traditional)),D(_e,u,e,x),2===y)return x;h=u.global,h&&0===tt.active++&&tt.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!ve.test(u.type),r=u.url,u.hasContent||(u.data&&(r=u.url+=(ce.test(r)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=fe.test(r)?r.replace(fe,"$1_="+he++):r+(ce.test(r)?"&":"?")+"_="+he++)),u.ifModified&&(tt.lastModified[r]&&x.setRequestHeader("If-Modified-Since",tt.lastModified[r]),tt.etag[r]&&x.setRequestHeader("If-None-Match",tt.etag[r])),(u.data&&u.hasContent&&u.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",u.contentType),x.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+we+"; q=0.01":""):u.accepts["*"]);for(c in u.headers)x.setRequestHeader(c,u.headers[c]);if(u.beforeSend&&(u.beforeSend.call(d,x,u)===!1||2===y))return x.abort();_="abort";for(c in{success:1,error:1,complete:1})x[c](u[c]);if(n=D(xe,u,e,x)){x.readyState=1,h&&p.trigger("ajaxSend",[x,u]),u.async&&u.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},u.timeout));try{y=1,n.send(v,i)}catch(w){if(!(2>y))throw w;i(-1,w)}}else i(-1,"No Transport");return x},getJSON:function(t,e,i){return tt.get(t,e,i,"json")},getScript:function(t,e){return tt.get(t,void 0,e,"script")}}),tt.each(["get","post"],function(t,e){tt[e]=function(t,i,n,r){return tt.isFunction(i)&&(r=r||n,n=i,i=void 0),tt.ajax({url:t,type:e,dataType:r,data:i,success:n})}}),tt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){tt.fn[e]=function(t){return this.on(e,t)}}),tt._evalUrl=function(t){return tt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},tt.fn.extend({wrapAll:function(t){var e;return tt.isFunction(t)?this.each(function(e){tt(this).wrapAll(t.call(this,e))}):(this[0]&&(e=tt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(tt.isFunction(t)?function(e){tt(this).wrapInner(t.call(this,e))}:function(){var e=tt(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=tt.isFunction(t);return this.each(function(i){tt(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){tt.nodeName(this,"body")||tt(this).replaceWith(this.childNodes)}).end()}}),tt.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},tt.expr.filters.visible=function(t){return!tt.expr.filters.hidden(t)};var Ce=/%20/g,Se=/\[\]$/,Ee=/\r?\n/g,Me=/^(?:submit|button|image|reset|file)$/i,Ae=/^(?:input|select|textarea|keygen)/i;tt.param=function(t,e){var i,n=[],r=function(t,e){e=tt.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=tt.ajaxSettings&&tt.ajaxSettings.traditional),tt.isArray(t)||t.jquery&&!tt.isPlainObject(t))tt.each(t,function(){r(this.name,this.value)});else for(i in t)j(i,t[i],e,r);return n.join("&").replace(Ce,"+")},tt.fn.extend({serialize:function(){return tt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=tt.prop(this,"elements");return t?tt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!tt(this).is(":disabled")&&Ae.test(this.nodeName)&&!Me.test(t)&&(this.checked||!Ct.test(t))}).map(function(t,e){var i=tt(this).val();return null==i?null:tt.isArray(i)?tt.map(i,function(t){return{name:e.name,value:t.replace(Ee,"\r\n")}}):{name:e.name,value:i.replace(Ee,"\r\n")}}).get()}}),tt.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var ke=0,Pe={},Re={0:200,1223:204},Be=tt.ajaxSettings.xhr();t.ActiveXObject&&tt(t).on("unload",function(){for(var t in Pe)Pe[t]()}),Q.cors=!!Be&&"withCredentials"in Be,Q.ajax=Be=!!Be,tt.ajaxTransport(function(t){var e;return Q.cors||Be&&!t.crossDomain?{send:function(i,n){var r,s=t.xhr(),o=++ke;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)s[r]=t.xhrFields[r];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)s.setRequestHeader(r,i[r]);e=function(t){return function(){e&&(delete Pe[o],e=s.onload=s.onerror=null,"abort"===t?s.abort():"error"===t?n(s.status,s.statusText):n(Re[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=e(),s.onerror=e("error"),e=Pe[o]=e("abort"),s.send(t.hasContent&&t.data||null)},abort:function(){e&&e()}}:void 0}),tt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return tt.globalEval(t),t}}}),tt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),tt.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,r){e=tt("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),J.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Ie=[],Le=/(=)\?(?=&|$)|\?\?/;tt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ie.pop()||tt.expando+"_"+he++;return this[t]=!0,t}}),tt.ajaxPrefilter("json jsonp",function(e,i,n){var r,s,o,a=e.jsonp!==!1&&(Le.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Le.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=tt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Le,"$1"+r):e.jsonp!==!1&&(e.url+=(ce.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||tt.error(r+" was not called"),o[0]},e.dataTypes[0]="json",s=t[r],t[r]=function(){o=arguments},n.always(function(){t[r]=s,e[r]&&(e.jsonpCallback=i.jsonpCallback,Ie.push(r)),o&&tt.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),tt.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||J;var n=ot.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=tt.buildFragment([t],e,r),r&&r.length&&tt(r).remove(),tt.merge([],n.childNodes))};var Oe=tt.fn.load;tt.fn.load=function(t,e,i){if("string"!=typeof t&&Oe)return Oe.apply(this,arguments);var n,r,s,o=this,a=t.indexOf(" ");return a>=0&&(n=t.slice(a),t=t.slice(0,a)),tt.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&tt.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){s=arguments,o.html(n?tt("<div>").append(tt.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){o.each(i,s||[t.responseText,e,t])}),this},tt.expr.filters.animated=function(t){return tt.grep(tt.timers,function(e){return t===e.elem}).length};var De=t.document.documentElement;tt.offset={setOffset:function(t,e,i){var n,r,s,o,a,l,h,c=tt.css(t,"position"),u=tt(t),d={};"static"===c&&(t.style.position="relative"),a=u.offset(),s=tt.css(t,"top"),l=tt.css(t,"left"),h=("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1,h?(n=u.position(),o=n.top,r=n.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),tt.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(d.top=e.top-a.top+o),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):u.css(d)}},tt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){tt.offset.setOffset(this,t,e)});var e,i,n=this[0],r={top:0,left:0},s=n&&n.ownerDocument;return s?(e=s.documentElement,tt.contains(e,n)?(typeof n.getBoundingClientRect!==St&&(r=n.getBoundingClientRect()),i=U(s),{top:r.top+i.pageYOffset-e.clientTop,left:r.left+i.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===tt.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),tt.nodeName(t[0],"html")||(n=t.offset()),n.top+=tt.css(t[0],"borderTopWidth",!0),n.left+=tt.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-tt.css(i,"marginTop",!0),left:e.left-n.left-tt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||De;t&&!tt.nodeName(t,"html")&&"static"===tt.css(t,"position");)t=t.offsetParent;return t||De})}}),tt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n="pageYOffset"===i;tt.fn[e]=function(r){return mt(this,function(e,r,s){var o=U(e);return void 0===s?o?o[i]:e[r]:void(o?o.scrollTo(n?t.pageXOffset:s,n?s:t.pageYOffset):e[r]=s)},e,r,arguments.length,null)}}),tt.each(["top","left"],function(t,e){tt.cssHooks[e]=w(Q.pixelPosition,function(t,i){return i?(i=x(t,e),Ht.test(i)?tt(t).position()[e]+"px":i):void 0})}),tt.each({Height:"height",Width:"width"},function(t,e){tt.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){tt.fn[n]=function(n,r){var s=arguments.length&&(i||"boolean"!=typeof n),o=i||(n===!0||r===!0?"margin":"border");return mt(this,function(e,i,n){var r;return tt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?tt.css(e,i,o):tt.style(e,i,n,o)},e,s?n:void 0,s,null)}})}),tt.fn.size=function(){return this.length},tt.fn.andSelf=tt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return tt});var Fe=t.jQuery,Ne=t.$;return tt.noConflict=function(e){return t.$===tt&&(t.$=Ne),e&&t.jQuery===tt&&(t.jQuery=Fe),tt},typeof e===St&&(t.jQuery=t.$=tt),tt}),define("jquery/jquery",function(){}),function(){var t=this,e=t._,i=Array.prototype,n=Object.prototype,r=Function.prototype,s=i.push,o=i.slice,a=i.concat,l=n.toString,h=n.hasOwnProperty,c=Array.isArray,u=Object.keys,d=r.bind,p=function(t){return t instanceof p?t:this instanceof p?void(this._wrapped=t):new p(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=p),exports._=p):t._=p,p.VERSION="1.7.0";var f=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,s){return t.call(e,i,n,r,s)}}return function(){return t.apply(e,arguments)}};p.iteratee=function(t,e,i){return null==t?p.identity:p.isFunction(t)?f(t,e,i):p.isObject(t)?p.matches(t):p.property(t)},p.each=p.forEach=function(t,e,i){if(null==t)return t;e=f(e,i);var n,r=t.length;if(r===+r)for(n=0;r>n;n++)e(t[n],n,t);else{var s=p.keys(t);for(n=0,r=s.length;r>n;n++)e(t[s[n]],s[n],t)}return t},p.map=p.collect=function(t,e,i){if(null==t)return[];e=p.iteratee(e,i);for(var n,r=t.length!==+t.length&&p.keys(t),s=(r||t).length,o=Array(s),a=0;s>a;a++)n=r?r[a]:a,o[a]=e(t[n],n,t);return o};var g="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(t,e,i,n){null==t&&(t=[]),e=f(e,n,4);var r,s=t.length!==+t.length&&p.keys(t),o=(s||t).length,a=0;if(arguments.length<3){if(!o)throw new TypeError(g);i=t[s?s[a++]:a++]}for(;o>a;a++)r=s?s[a]:a,i=e(i,t[r],r,t);return i},p.reduceRight=p.foldr=function(t,e,i,n){null==t&&(t=[]),e=f(e,n,4);var r,s=t.length!==+t.length&&p.keys(t),o=(s||t).length;if(arguments.length<3){if(!o)throw new TypeError(g);i=t[s?s[--o]:--o]}for(;o--;)r=s?s[o]:o,i=e(i,t[r],r,t);return i},p.find=p.detect=function(t,e,i){var n;return e=p.iteratee(e,i),p.some(t,function(t,i,r){return e(t,i,r)?(n=t,!0):void 0}),n},p.filter=p.select=function(t,e,i){var n=[];return null==t?n:(e=p.iteratee(e,i),p.each(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n)},p.reject=function(t,e,i){return p.filter(t,p.negate(p.iteratee(e)),i)},p.every=p.all=function(t,e,i){if(null==t)return!0;e=p.iteratee(e,i);var n,r,s=t.length!==+t.length&&p.keys(t),o=(s||t).length;for(n=0;o>n;n++)if(r=s?s[n]:n,!e(t[r],r,t))return!1;return!0},p.some=p.any=function(t,e,i){if(null==t)return!1;e=p.iteratee(e,i);var n,r,s=t.length!==+t.length&&p.keys(t),o=(s||t).length;for(n=0;o>n;n++)if(r=s?s[n]:n,e(t[r],r,t))return!0;return!1},p.contains=p.include=function(t,e){return null==t?!1:(t.length!==+t.length&&(t=p.values(t)),p.indexOf(t,e)>=0)},p.invoke=function(t,e){var i=o.call(arguments,2),n=p.isFunction(e);return p.map(t,function(t){return(n?e:t[e]).apply(t,i)})},p.pluck=function(t,e){return p.map(t,p.property(e))},p.where=function(t,e){return p.filter(t,p.matches(e))},p.findWhere=function(t,e){return p.find(t,p.matches(e))},p.max=function(t,e,i){var n,r,s=-(1/0),o=-(1/0);if(null==e&&null!=t){t=t.length===+t.length?t:p.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],n>s&&(s=n)}else e=p.iteratee(e,i),p.each(t,function(t,i,n){r=e(t,i,n),(r>o||r===-(1/0)&&s===-(1/0))&&(s=t,o=r)});return s},p.min=function(t,e,i){var n,r,s=1/0,o=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:p.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],s>n&&(s=n)}else e=p.iteratee(e,i),p.each(t,function(t,i,n){r=e(t,i,n),(o>r||r===1/0&&s===1/0)&&(s=t,o=r)});return s},p.shuffle=function(t){for(var e,i=t&&t.length===+t.length?t:p.values(t),n=i.length,r=Array(n),s=0;n>s;s++)e=p.random(0,s),e!==s&&(r[s]=r[e]),r[e]=i[s];return r},p.sample=function(t,e,i){return null==e||i?(t.length!==+t.length&&(t=p.values(t)),t[p.random(t.length-1)]):p.shuffle(t).slice(0,Math.max(0,e))},p.sortBy=function(t,e,i){return e=p.iteratee(e,i),p.pluck(p.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var m=function(t){return function(e,i,n){var r={};return i=p.iteratee(i,n),p.each(e,function(n,s){var o=i(n,s,e);t(r,n,o)}),r}};p.groupBy=m(function(t,e,i){p.has(t,i)?t[i].push(e):t[i]=[e]}),p.indexBy=m(function(t,e,i){t[i]=e}),p.countBy=m(function(t,e,i){p.has(t,i)?t[i]++:t[i]=1}),p.sortedIndex=function(t,e,i,n){i=p.iteratee(i,n,1);for(var r=i(e),s=0,o=t.length;o>s;){var a=s+o>>>1;i(t[a])<r?s=a+1:o=a}return s},p.toArray=function(t){return t?p.isArray(t)?o.call(t):t.length===+t.length?p.map(t,p.identity):p.values(t):[]},p.size=function(t){return null==t?0:t.length===+t.length?t.length:p.keys(t).length},p.partition=function(t,e,i){e=p.iteratee(e,i);var n=[],r=[];return p.each(t,function(t,i,s){(e(t,i,s)?n:r).push(t)}),[n,r]},p.first=p.head=p.take=function(t,e,i){return null!=t?null==e||i?t[0]:0>e?[]:o.call(t,0,e):void 0},p.initial=function(t,e,i){return o.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},p.last=function(t,e,i){return null!=t?null==e||i?t[t.length-1]:o.call(t,Math.max(t.length-e,0)):void 0},p.rest=p.tail=p.drop=function(t,e,i){return o.call(t,null==e||i?1:e)},p.compact=function(t){return p.filter(t,p.identity)};var v=function(t,e,i,n){if(e&&p.every(t,p.isArray))return a.apply(n,t);for(var r=0,o=t.length;o>r;r++){var l=t[r];p.isArray(l)||p.isArguments(l)?e?s.apply(n,l):v(l,e,i,n):i||n.push(l)}return n};p.flatten=function(t,e){return v(t,e,!1,[])},p.without=function(t){return p.difference(t,o.call(arguments,1))},p.uniq=p.unique=function(t,e,i,n){if(null==t)return[];p.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=p.iteratee(i,n));for(var r=[],s=[],o=0,a=t.length;a>o;o++){var l=t[o];if(e)o&&s===l||r.push(l),s=l;else if(i){var h=i(l,o,t);p.indexOf(s,h)<0&&(s.push(h),r.push(l))}else p.indexOf(r,l)<0&&r.push(l)}return r},p.union=function(){return p.uniq(v(arguments,!0,!0,[]))},p.intersection=function(t){if(null==t)return[];for(var e=[],i=arguments.length,n=0,r=t.length;r>n;n++){var s=t[n];if(!p.contains(e,s)){for(var o=1;i>o&&p.contains(arguments[o],s);o++);o===i&&e.push(s)}}return e},p.difference=function(t){var e=v(o.call(arguments,1),!0,!0,[]);return p.filter(t,function(t){return!p.contains(e,t)})},p.zip=function(t){if(null==t)return[];for(var e=p.max(arguments,"length").length,i=Array(e),n=0;e>n;n++)i[n]=p.pluck(arguments,n);return i},p.object=function(t,e){if(null==t)return{};for(var i={},n=0,r=t.length;r>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},p.indexOf=function(t,e,i){if(null==t)return-1;var n=0,r=t.length;if(i){if("number"!=typeof i)return n=p.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,r+i):i}for(;r>n;n++)if(t[n]===e)return n;return-1},p.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=t.length;for("number"==typeof i&&(n=0>i?n+i+1:Math.min(n,i+1));--n>=0;)if(t[n]===e)return n;return-1},p.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),s=0;n>s;s++,t+=i)r[s]=t;return r};var b=function(){};p.bind=function(t,e){var i,n;if(d&&t.bind===d)return d.apply(t,o.call(arguments,1));if(!p.isFunction(t))throw new TypeError("Bind must be called on a function");return i=o.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(o.call(arguments)));b.prototype=t.prototype;var r=new b;b.prototype=null;var s=t.apply(r,i.concat(o.call(arguments)));return p.isObject(s)?s:r}},p.partial=function(t){var e=o.call(arguments,1);return function(){for(var i=0,n=e.slice(),r=0,s=n.length;s>r;r++)n[r]===p&&(n[r]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return t.apply(this,n)}},p.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=p.bind(t[i],t);return t},p.memoize=function(t,e){var i=function(n){var r=i.cache,s=e?e.apply(this,arguments):n;return p.has(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return i.cache={},i},p.delay=function(t,e){var i=o.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},p.defer=function(t){return p.delay.apply(p,[t,1].concat(o.call(arguments,1)))},p.throttle=function(t,e,i){var n,r,s,o=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:p.now(),o=null,s=t.apply(n,r),o||(n=r=null)};return function(){var h=p.now();a||i.leading!==!1||(a=h);var c=e-(h-a);return n=this,r=arguments,0>=c||c>e?(clearTimeout(o),o=null,a=h,s=t.apply(n,r),o||(n=r=null)):o||i.trailing===!1||(o=setTimeout(l,c)),s}},p.debounce=function(t,e,i){var n,r,s,o,a,l=function(){var h=p.now()-o;e>h&&h>0?n=setTimeout(l,e-h):(n=null,i||(a=t.apply(s,r),n||(s=r=null)))};return function(){s=this,r=arguments,o=p.now();var h=i&&!n;return n||(n=setTimeout(l,e)),h&&(a=t.apply(s,r),s=r=null),a}},p.wrap=function(t,e){return p.partial(e,t)},p.negate=function(t){return function(){return!t.apply(this,arguments)}},p.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},p.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},p.before=function(t,e){var i;return function(){return--t>0?i=e.apply(this,arguments):e=null,i}},p.once=p.partial(p.before,2),p.keys=function(t){if(!p.isObject(t))return[];if(u)return u(t);var e=[];for(var i in t)p.has(t,i)&&e.push(i);return e},p.values=function(t){for(var e=p.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=t[e[r]];return n},p.pairs=function(t){for(var e=p.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=[e[r],t[e[r]]];return n},p.invert=function(t){for(var e={},i=p.keys(t),n=0,r=i.length;r>n;n++)e[t[i[n]]]=i[n];return e},p.functions=p.methods=function(t){var e=[];for(var i in t)p.isFunction(t[i])&&e.push(i);return e.sort()},p.extend=function(t){if(!p.isObject(t))return t;for(var e,i,n=1,r=arguments.length;r>n;n++){e=arguments[n];for(i in e)h.call(e,i)&&(t[i]=e[i])}return t},p.pick=function(t,e,i){var n,r={};if(null==t)return r;if(p.isFunction(e)){e=f(e,i);for(n in t){var s=t[n];e(s,n,t)&&(r[n]=s)}}else{var l=a.apply([],o.call(arguments,1));t=new Object(t);for(var h=0,c=l.length;c>h;h++)n=l[h],n in t&&(r[n]=t[n])}return r},p.omit=function(t,e,i){if(p.isFunction(e))e=p.negate(e);else{var n=p.map(a.apply([],o.call(arguments,1)),String);e=function(t,e){return!p.contains(n,e)}}return p.pick(t,e,i)},p.defaults=function(t){if(!p.isObject(t))return t;for(var e=1,i=arguments.length;i>e;e++){var n=arguments[e];for(var r in n)void 0===t[r]&&(t[r]=n[r])}return t},p.clone=function(t){return p.isObject(t)?p.isArray(t)?t.slice():p.extend({},t):t},p.tap=function(t,e){return e(t),t};var y=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof p&&(t=t._wrapped),e instanceof p&&(e=e._wrapped);var r=l.call(t);if(r!==l.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=i.length;s--;)if(i[s]===t)return n[s]===e;var o=t.constructor,a=e.constructor;if(o!==a&&"constructor"in t&&"constructor"in e&&!(p.isFunction(o)&&o instanceof o&&p.isFunction(a)&&a instanceof a))return!1;i.push(t),n.push(e);var h,c;if("[object Array]"===r){if(h=t.length,c=h===e.length)for(;h--&&(c=y(t[h],e[h],i,n)););}else{var u,d=p.keys(t);if(h=d.length,c=p.keys(e).length===h)for(;h--&&(u=d[h],c=p.has(e,u)&&y(t[u],e[u],i,n)););}return i.pop(),n.pop(),c};p.isEqual=function(t,e){return y(t,e,[],[])},p.isEmpty=function(t){if(null==t)return!0;if(p.isArray(t)||p.isString(t)||p.isArguments(t))return 0===t.length;for(var e in t)if(p.has(t,e))return!1;return!0},p.isElement=function(t){return!(!t||1!==t.nodeType)},p.isArray=c||function(t){return"[object Array]"===l.call(t)},p.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){p["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),p.isArguments(arguments)||(p.isArguments=function(t){return p.has(t,"callee")}),"function"!=typeof/./&&(p.isFunction=function(t){return"function"==typeof t||!1}),p.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},p.isNaN=function(t){return p.isNumber(t)&&t!==+t},p.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===l.call(t)},p.isNull=function(t){return null===t},p.isUndefined=function(t){return void 0===t},p.has=function(t,e){return null!=t&&h.call(t,e)},p.noConflict=function(){return t._=e,this},p.identity=function(t){return t},p.constant=function(t){return function(){return t}},p.noop=function(){},p.property=function(t){return function(e){return e[t]}},p.matches=function(t){var e=p.pairs(t),i=e.length;return function(t){if(null==t)return!i;t=new Object(t);for(var n=0;i>n;n++){var r=e[n],s=r[0];if(r[1]!==t[s]||!(s in t))return!1}return!0}},p.times=function(t,e,i){var n=Array(Math.max(0,t));e=f(e,i,1);for(var r=0;t>r;r++)n[r]=e(r);return n},p.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},p.now=Date.now||function(){return(new Date).getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},x=p.invert(_),w=function(t){var e=function(e){return t[e]},i="(?:"+p.keys(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}};p.escape=w(_),p.unescape=w(x),p.result=function(t,e){if(null!=t){var i=t[e];return p.isFunction(i)?t[e]():i}};var T=0;p.uniqueId=function(t){var e=++T+"";return t?t+e:e},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,S={"'":"'","\\":"\\","\r":"r","\n":"n",
"\u2028":"u2028","\u2029":"u2029"},E=/\\|'|\r|\n|\u2028|\u2029/g,M=function(t){return"\\"+S[t]};p.template=function(t,e,i){!e&&i&&(e=i),e=p.defaults({},e,p.templateSettings);var n=RegExp([(e.escape||C).source,(e.interpolate||C).source,(e.evaluate||C).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(n,function(e,i,n,o,a){return s+=t.slice(r,a).replace(E,M),r=a+e.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(e.variable||"obj","_",s)}catch(a){throw a.source=s,a}var l=function(t){return o.call(this,t,p)},h=e.variable||"obj";return l.source="function("+h+"){\n"+s+"}",l},p.chain=function(t){var e=p(t);return e._chain=!0,e};var A=function(t){return this._chain?p(t).chain():t};p.mixin=function(t){p.each(p.functions(t),function(e){var i=p[e]=t[e];p.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),A.call(this,i.apply(p,t))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];p.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],A.call(this,i)}}),p.each(["concat","join","slice"],function(t){var e=i[t];p.prototype[t]=function(){return A.call(this,e.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}.call(this),function(t,e){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(i,n,r){t.Backbone=e(t,r,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){var r=t.Backbone,s=[],o=(s.push,s.slice);s.splice;e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,i){if(!h(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!h(this,"once",t,[e,n])||!e)return this;var r=this,s=i.once(function(){r.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,n)},off:function(t,e,n){var r,s,o,a,l,c,u,d;if(!this._events||!h(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(a=t?[t]:i.keys(this._events),l=0,c=a.length;c>l;l++)if(t=a[l],o=this._events[t]){if(this._events[t]=r=[],e||n)for(u=0,d=o.length;d>u;u++)s=o[u],(e&&e!==s.callback&&e!==s.callback._callback||n&&n!==s.context)&&r.push(s);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!h(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&c(i,e),n&&c(n,arguments),this},stopListening:function(t,e,n){var r=this._listeningTo;if(!r)return this;var s=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t._listenId]=t);for(var o in r)t=r[o],t.off(e,n,this),(s||i.isEmpty(t._events))&&delete this._listeningTo[o];return this}},l=/\s+/,h=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var r in i)t[e].apply(t,[r,i[r]].concat(n));return!1}if(l.test(i)){for(var s=i.split(l),o=0,a=s.length;a>o;o++)t[e].apply(t,[s[o]].concat(n));return!1}return!0},c=function(t,e){var i,n=-1,r=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++n<r;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s,o);return;case 3:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s,o,a);return;default:for(;++n<r;)(i=t[n]).callback.apply(i.ctx,e);return}},u={listenTo:"on",listenToOnce:"once"};i.each(u,function(t,e){a[e]=function(e,n,r){var s=this._listeningTo||(this._listeningTo={}),o=e._listenId||(e._listenId=i.uniqueId("l"));return s[o]=e,r||"object"!=typeof n||(r=this),e[t](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(e,a);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,s,o,a,l,h,c,u;if(null==t)return this;if("object"==typeof t?(s=t,n=e):(s={})[t]=e,n||(n={}),!this._validate(s,n))return!1;o=n.unset,l=n.silent,a=[],h=this._changing,this._changing=!0,h||(this._previousAttributes=i.clone(this.attributes),this.changed={}),u=this.attributes,c=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(r in s)e=s[r],i.isEqual(u[r],e)||a.push(r),i.isEqual(c[r],e)?delete this.changed[r]:this.changed[r]=e,o?delete u[r]:u[r]=e;if(!l){a.length&&(this._pending=n);for(var d=0,p=a.length;p>d;d++)this.trigger("change:"+a[d],this,u[a[d]],n)}if(h)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var s in t)i.isEqual(r[s],e=t[s])||((n||(n={}))[s]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},F(this,t),this.sync("read",this,t)},save:function(t,e,n){var r,s,o,a=this.attributes;if(null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,n=i.extend({validate:!0},n),r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=i.extend({},a,r)),void 0===n.parse&&(n.parse=!0);var l=this,h=n.success;return n.success=function(t){l.attributes=a;var e=l.parse(t,n);return n.wait&&(e=i.extend(r||{},e)),i.isObject(e)&&!l.set(e,n)?!1:(h&&h(l,t,n),void l.trigger("sync",l,t,n))},F(this,n),s=this.isNew()?"create":n.patch?"patch":"update","patch"===s&&(n.attrs=r),o=this.sync(s,this,n),r&&n.wait&&(this.attributes=a),o},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&r(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;F(this,t);var s=this.sync("delete",this,t);return t.wait||r(),s},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||D();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(t){d.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};i.extend(f.prototype,a,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,m))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var r,s,o,a;for(r=0,s=t.length;s>r;r++)a=t[r]=this.get(t[r]),a&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,e.silent||(e.index=o,a.trigger("remove",a,this,e)),this._removeReference(a,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var r,s,o,a,l,h,c,u=e.at,p=this.model,f=this.comparator&&null==u&&e.sort!==!1,m=i.isString(this.comparator)?this.comparator:null,v=[],b=[],y={},_=e.add,x=e.merge,w=e.remove,T=!f&&_&&w?[]:!1;for(r=0,s=t.length;s>r;r++){if(l=t[r]||{},o=l instanceof d?a=l:l[p.prototype.idAttribute||"id"],h=this.get(o))w&&(y[h.cid]=!0),x&&(l=l===a?a.attributes:l,e.parse&&(l=h.parse(l,e)),h.set(l,e),f&&!c&&h.hasChanged(m)&&(c=!0)),t[r]=h;else if(_){if(a=t[r]=this._prepareModel(l,e),!a)continue;v.push(a),this._addReference(a,e)}a=h||a,!T||!a.isNew()&&y[a.id]||T.push(a),y[a.id]=!0}if(w){for(r=0,s=this.length;s>r;++r)y[(a=this.models[r]).cid]||b.push(a);b.length&&this.remove(b,e)}if(v.length||T&&T.length)if(f&&(c=!0),this.length+=v.length,null!=u)for(r=0,s=v.length;s>r;r++)this.models.splice(u+r,0,v[r]);else{T&&(this.models.length=0);var C=T||v;for(r=0,s=C.length;s>r;r++)this.models.push(C[r])}if(c&&this.sort({silent:!0}),!e.silent){for(r=0,s=v.length;s>r;r++)(a=v[r]).trigger("add",a,this,e);(c||T&&T.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){return null!=t?this._byId[t]||this._byId[t.id]||this._byId[t.cid]:void 0},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},F(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),r&&r(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(t){f.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var b=["groupBy","countBy","sortBy","indexBy"];i.each(b,function(t){f.prototype[t]=function(e,n){var r=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,r,n)}});var y=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];i.extend(y.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var r=e.match(_),s=r[1],o=r[2];n=i.bind(n,this),s+=".delegateEvents"+this.cid,""===o?this.$el.on(s,n):this.$el.on(s,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,r){var s=T[t];i.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:s,dataType:"json"};if(r.url||(o.url=i.result(n,"url")||D()),null!=r.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",r.emulateJSON&&(o.data._method=s);var a=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",s),a?a.apply(this,arguments):void 0}}"GET"===o.type||r.emulateJSON||(o.processData=!1),"PATCH"===o.type&&w&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=e.ajax(i.extend(o,r));return n.trigger("request",n,l,r),l};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var C=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,M=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(C.prototype,a,{initialize:function(){},route:function(t,n,r){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var s=this;return e.history.route(t,function(i){var o=s._extractParameters(t,i);s.execute(r,o),s.trigger.apply(s,["route:"+n].concat(o)),s.trigger("route",n,o),e.history.trigger("route",s,n,o)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(A,"\\$&").replace(S,"(?:$1)?").replace(E,function(t,e){return e?t:"([^/?]+)"}).replace(M,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var k=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,R=/^\/+|\/+$/g,B=/msie [\w.]+/,I=/\/$/,L=/#.*$/;k.started=!1,i.extend(k.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(I,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(P,"")},start:function(t){if(k.started)throw new Error("Backbone.history has already been started");k.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,s=B.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);if(this.root=("/"+this.root+"/").replace(R,"/"),s&&this._wantsHashChange){var o=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),k.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!k.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(L,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new k;var O=function(t,e){var n,r=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,e);var s=function(){this.constructor=n};return s.prototype=r.prototype,n.prototype=new s,t&&i.extend(n.prototype,t),n.__super__=r.prototype,n};d.extend=f.extend=C.extend=y.extend=k.extend=O;var D=function(){throw new Error('A "url" property or function must be specified')},F=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e}),function(t,e){if("function"==typeof define&&define.amd)define("backbone_super",["underscore","backbone"],function(t,i){e(t,i)});else if("undefined"!=typeof exports){var i=require("underscore"),n=require("backbone");e(i,n)}else e(t._,t.Backbone)}(this,function(t,e){e.Model.extend=e.Collection.extend=e.Router.extend=e.View.extend=function(t,e){var i=r(this,t,e);return i.extend=this.extend,i};var i=function(t){throw"Super does not implement this method: "+t},n=function(){},r=function(e,r,s){var o,a=e.prototype,l=/\b_super\b/;if(o=r&&r.hasOwnProperty("constructor")?r.constructor:function(){return e.apply(this,arguments)},t.extend(o,e,s),n.prototype=e.prototype,o.prototype=new n,r){t.extend(o.prototype,r);for(var h in r)"function"==typeof r[h]&&l.test(r[h])&&(o.prototype[h]=function(t,e){var n=function(){var n=this._super;this._super=a[t]||i(t);var r;try{r=e.apply(this,arguments)}finally{this._super=n}return r};for(var r in e)n[r]=e[r],delete e[r];return n}(h,r[h]))}return s&&t.extend(o,s),o.prototype.constructor=o,o.__super__=e.prototype,o};return r});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},r=function(t,e,n){i.call(this,t,e,n),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=r.prototype.render},s=1e-10,o=i._internals,a=o.isSelector,l=o.isArray,h=r.prototype=i.to({},.1,{}),c=[];r.version="1.13.1",h.constructor=r,h.kill()._gc=!1,r.killTweensOf=r.killDelayedCallsTo=i.killTweensOf,r.getTweensOf=i.getTweensOf,r.lagSmoothing=i.lagSmoothing,r.ticker=i.ticker,r.render=i.render,h.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},h.updateTo=function(t,e){var n,r=this.ratio;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(n in t)this.vars[n]=t[n];if(this._initted)if(e)this._initted=!1;else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var s=this._time;this.render(0,!0,!1),this._initted=!1,this.render(s,!0,!1)}else if(this._time>0){this._initted=!1,this._init();for(var o,a=1/(1-r),l=this._firstPT;l;)o=l.s+l.c,l.c*=a,l.s=o-l.c,l=l._next}return this},h.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,r,a,l,h,u,d,p,f=this._dirty?this.totalDuration():this._totalDuration,g=this._time,m=this._totalTime,v=this._cycle,b=this._duration,y=this._rawPrevTime;if(t>=f?(this._totalTime=f,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=b,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(n=!0,r="onComplete"),0===b&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>y||y===s)&&y!==t&&(i=!0,y>s&&(r="onReverseComplete")),this._rawPrevTime=p=!e||t||y===t?t:s)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===b&&y>0&&y!==s)&&(r="onReverseComplete",n=this._reversed),0>t?(this._active=!1,0===b&&(this._initted||!this.vars.lazy||i)&&(y>=0&&(i=!0),this._rawPrevTime=p=!e||t||y===t?t:s)):this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(l=b+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!==(1&this._cycle)&&(this._time=b-this._time),this._time>b?this._time=b:0>this._time&&(this._time=0)),this._easeType?(h=this._time/b,u=this._easeType,d=this._easePower,(1===u||3===u&&h>=.5)&&(h=1-h),3===u&&(h*=2),1===d?h*=h:2===d?h*=h*h:3===d?h*=h*h*h:4===d&&(h*=h*h*h*h),this.ratio=1===u?1-h:2===u?h:.5>this._time/b?h/2:1-h/2):this.ratio=this._ease.getRatio(this._time/b)),g===this._time&&!i&&v===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||c)));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=g,this._totalTime=m,this._rawPrevTime=y,this._cycle=v,o.lazyTweens.push(this),void(this._lazy=t);this._time&&!n?this.ratio=this._ease.getRatio(this._time/b):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==g&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===b)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||c))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==m||n)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||c)),this._cycle!==v&&(e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||c)),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||c),0===b&&this._rawPrevTime===s&&p!==s&&(this._rawPrevTime=0))},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new r(t,e,i)},r.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new r(t,e,n)},r.staggerTo=r.allTo=function(t,e,s,o,h,u,d){o=o||0;var p,f,g,m,v=s.delay||0,b=[],y=function(){s.onComplete&&s.onComplete.apply(s.onCompleteScope||this,arguments),h.apply(d||this,u||c)};for(l(t)||("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=n(t))),p=t.length,g=0;p>g;g++){f={};for(m in s)f[m]=s[m];f.delay=v,g===p-1&&h&&(f.onComplete=y),b[g]=new r(t[g],e,f),v+=o}return b},r.staggerFrom=r.allFrom=function(t,e,i,n,s,o,a){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,r.staggerTo(t,e,i,n,s,o,a)},r.staggerFromTo=r.allFromTo=function(t,e,i,n,s,o,a,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,r.staggerTo(t,e,n,s,o,a,l)},r.delayedCall=function(t,e,i,n,s){return new r(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:n,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:n,immediateRender:!1,useFrames:s,overwrite:0})},r.set=function(t,e){return new r(t,0,e)},r.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var u=function(t,e){for(var n=[],r=0,s=t._first;s;)s instanceof i?n[r++]=s:(e&&(n[r++]=s),n=n.concat(u(s,e)),r=n.length),s=s._next;return n},d=r.getAllTweens=function(e){return u(t._rootTimeline,e).concat(u(t._rootFramesTimeline,e))};r.killAll=function(t,i,n,r){null==i&&(i=!0),null==n&&(n=!0);var s,o,a,l=d(0!=r),h=l.length,c=i&&n&&r;for(a=0;h>a;a++)o=l[a],(c||o instanceof e||(s=o.target===o.vars.onComplete)&&n||i&&!s)&&(t?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},r.killChildTweensOf=function(t,e){if(null!=t){var s,h,c,u,d,p=o.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=n(t)),l(t))for(u=t.length;--u>-1;)r.killChildTweensOf(t[u],e);else{s=[];for(c in p)for(h=p[c].target.parentNode;h;)h===t&&(s=s.concat(p[c].tweens)),h=h.parentNode;for(d=s.length,u=0;d>u;u++)e&&s[u].totalTime(s[u].totalDuration()),s[u]._enabled(!1,!1)}}};var p=function(t,i,n,r){i=i!==!1,n=n!==!1,r=r!==!1;for(var s,o,a=d(r),l=i&&n&&r,h=a.length;--h>-1;)o=a[h],(l||o instanceof e||(s=o.target===o.vars.onComplete)&&n||i&&!s)&&o.paused(t)};return r.pauseAll=function(t,e,i){p(!0,t,e,i)},r.resumeAll=function(t,e,i){p(!1,t,e,i)},r.globalTimeScale=function(e){var n=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||s,n._startTime=r-(r-n._startTime)*n._timeScale/e,n=t._rootFramesTimeline,r=i.ticker.frame,n._startTime=r-(r-n._startTime)*n._timeScale/e,n._timeScale=t._rootTimeline._timeScale=e,e):n._timeScale},h.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},h.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},h.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},h.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},h.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},h.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},h.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},h.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},r},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,n,r=this.vars;for(n in r)i=r[n],a(i)&&-1!==i.join("").indexOf("{self}")&&(r[n]=this._swapSelfInParams(i));a(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=1e-10,s=i._internals,o=s.isSelector,a=s.isArray,l=s.lazyTweens,h=s.lazyRender,c=[],u=_gsScope._gsDefine.globals,d=function(t){var e,i={};for(e in t)i[e]=t[e];return i},p=function(t,e,i,n){t._timeline.pause(t._startTime),e&&e.apply(n||t._timeline,i||c)},f=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},g=n.prototype=new e;return n.version="1.13.1",g.constructor=n,g.kill()._gc=!1,g.to=function(t,e,n,r){var s=n.repeat&&u.TweenMax||i;
return e?this.add(new s(t,e,n),r):this.set(t,n,r)},g.from=function(t,e,n,r){return this.add((n.repeat&&u.TweenMax||i).from(t,e,n),r)},g.fromTo=function(t,e,n,r,s){var o=r.repeat&&u.TweenMax||i;return e?this.add(o.fromTo(t,e,n,r),s):this.set(t,r,s)},g.staggerTo=function(t,e,r,s,a,l,h,c){var u,p=new n({onComplete:l,onCompleteParams:h,onCompleteScope:c,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=i.selector(t)||t),o(t)&&(t=f(t)),s=s||0,u=0;t.length>u;u++)r.startAt&&(r.startAt=d(r.startAt)),p.to(t[u],e,d(r),u*s);return this.add(p,a)},g.staggerFrom=function(t,e,i,n,r,s,o,a){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,n,r,s,o,a)},g.staggerFromTo=function(t,e,i,n,r,s,o,a,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,n,r,s,o,a,l)},g.call=function(t,e,n,r){return this.add(i.delayedCall(0,t,e,n),r)},g.set=function(t,e,n){return n=this._parseTimeOrLabel(n,0,!0),null==e.immediateRender&&(e.immediateRender=n===this._time&&!this._paused),this.add(new i(t,0,e),n)},n.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var r,s,o=new n(t),a=o._timeline;for(null==e&&(e=!0),a._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=a._time,r=a._first;r;)s=r._next,e&&r instanceof i&&r.target===r.vars.onComplete||o.add(r,r._startTime-r._delay),r=s;return a.add(o,0),o},g.add=function(r,s,o,l){var h,c,u,d,p,f;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&a(r)){for(o=o||"normal",l=l||0,h=s,c=r.length,u=0;c>u;u++)a(d=r[u])&&(d=new n({tweens:d})),this.add(d,h),"string"!=typeof d&&"function"!=typeof d&&("sequence"===o?h=d._startTime+d.totalDuration()/d._timeScale:"start"===o&&(d._startTime-=d.delay())),h+=l;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,s);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,s),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(p=this,f=p.rawTime()>r._startTime;p._timeline;)f&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},g.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&a(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},g._remove=function(t,i){e.prototype._remove.call(this,t,i);var n=this._last;return n?this._time>n._startTime+n._totalDuration/n._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},g.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},g.insert=g.insertMultiple=function(t,e,i,n){return this.add(t,e||0,i,n)},g.appendMultiple=function(t,e,i,n){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,n)},g.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},g.addPause=function(t,e,i,n){return this.call(p,["{self}",e,i,n],this,t)},g.removeLabel=function(t){return delete this._labels[t],this},g.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},g._parseTimeOrLabel=function(e,i,n,r){var s;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&a(r)))for(s=r.length;--s>-1;)r[s]instanceof t&&r[s].timeline===this&&this.remove(r[s]);if("string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,n);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(s=e.indexOf("="),-1===s)return null==this._labels[e]?n?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,n):this.duration()}return Number(e)+i},g.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},g.stop=function(){return this.paused(!0)},g.gotoAndPlay=function(t,e){return this.play(t,e)},g.gotoAndStop=function(t,e){return this.pause(t,e)},g.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,s,o,a,u,d=this._dirty?this.totalDuration():this._totalDuration,p=this._time,f=this._startTime,g=this._timeScale,m=this._paused;if(t>=d?(this._totalTime=this._time=d,this._reversed||this._hasPausedChild()||(s=!0,a="onComplete",0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===r)&&this._rawPrevTime!==t&&this._first&&(u=!0,this._rawPrevTime>r&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=d+1e-4):1e-7>t?(this._totalTime=this._time=0,(0!==p||0===this._duration&&this._rawPrevTime!==r&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(a="onReverseComplete",s=this._reversed),0>t?(this._active=!1,this._rawPrevTime>=0&&this._first&&(u=!0),this._rawPrevTime=t):(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=0,this._initted||(u=!0))):this._totalTime=this._time=this._rawPrevTime=t,this._time!==p&&this._first||i||u){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&t>0&&(this._active=!0),0===p&&this.vars.onStart&&0!==this._time&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||c)),this._time>=p)for(n=this._first;n&&(o=n._next,!this._paused||m);)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=o;else for(n=this._last;n&&(o=n._prev,!this._paused||m);)(n._active||p>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=o;this._onUpdate&&(e||(l.length&&h(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||c))),a&&(this._gc||(f===this._startTime||g!==this._timeScale)&&(0===this._time||d>=this.totalDuration())&&(s&&(l.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this.vars[a].apply(this.vars[a+"Scope"]||this,this.vars[a+"Params"]||c)))}},g._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof n&&t._hasPausedChild())return!0;t=t._next}return!1},g.getChildren=function(t,e,n,r){r=r||-9999999999;for(var s=[],o=this._first,a=0;o;)r>o._startTime||(o instanceof i?e!==!1&&(s[a++]=o):(n!==!1&&(s[a++]=o),t!==!1&&(s=s.concat(o.getChildren(!0,e,n)),a=s.length))),o=o._next;return s},g.getTweensOf=function(t,e){var n,r,s=this._gc,o=[],a=0;for(s&&this._enabled(!0,!0),n=i.getTweensOf(t),r=n.length;--r>-1;)(n[r].timeline===this||e&&this._contains(n[r]))&&(o[a++]=n[r]);return s&&this._enabled(!1,!0),o},g._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},g.shiftChildren=function(t,e,i){i=i||0;for(var n,r=this._first,s=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(n in s)s[n]>=i&&(s[n]+=t);return this._uncache(!0)},g._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),n=i.length,r=!1;--n>-1;)i[n]._kill(t,e)&&(r=!0);return r},g.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},g.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return this},g._enabled=function(t,i){if(t===this._gc)for(var n=this._first;n;)n._enabled(t,!0),n=n._next;return e.prototype._enabled.call(this,t,i)},g.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},g.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,n=0,r=this._last,s=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>s&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):s=r._startTime,0>r._startTime&&!r._paused&&(n-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),s=0),i=r._startTime+r._totalDuration/r._timeScale,i>n&&(n=i),r=e;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},g.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},g.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},n},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var n=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},r=1e-10,s=[],o=e._internals,a=o.lazyTweens,l=o.lazyRender,h=new i(null,null,1,0),c=n.prototype=new t;return c.constructor=n,c.kill()._gc=!1,n.version="1.13.1",c.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},c.addCallback=function(t,i,n,r){return this.add(e.delayedCall(0,t,n,r),i)},c.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),n=i.length,r=this._parseTimeOrLabel(e);--n>-1;)i[n]._startTime===r&&i[n]._enabled(!1,!1);return this},c.tweenTo=function(t,i){i=i||{};var n,r,o,a={ease:h,overwrite:i.delay?2:1,useFrames:this.usesFrames(),immediateRender:!1};for(r in i)a[r]=i[r];return a.time=this._parseTimeOrLabel(t),n=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,o=new e(this,n,a),a.onStart=function(){o.target.paused(!0),o.vars.time!==o.target.time()&&n===o.duration()&&o.duration(Math.abs(o.vars.time-o.target.time())/o.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||o,i.onStartParams||s)},o},c.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],onCompleteScope:this},i.immediateRender=i.immediateRender!==!1;var n=this.tweenTo(e,i);return n.duration(Math.abs(n.vars.time-t)/this._timeScale||.001)},c.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,o,h,c,u,d,p=this._dirty?this.totalDuration():this._totalDuration,f=this._duration,g=this._time,m=this._totalTime,v=this._startTime,b=this._timeScale,y=this._rawPrevTime,_=this._paused,x=this._cycle;if(t>=p?(this._locked||(this._totalTime=p,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(o=!0,c="onComplete",0===this._duration&&(0===t||0>y||y===r)&&y!==t&&this._first&&(u=!0,y>r&&(c="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=f,t=f+1e-4)):1e-7>t?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==g||0===f&&y!==r&&(y>0||0>t&&y>=0)&&!this._locked)&&(c="onReverseComplete",o=this._reversed),0>t?(this._active=!1,y>=0&&this._first&&(u=!0),this._rawPrevTime=t):(this._rawPrevTime=f||!e||t||this._rawPrevTime===t?t:r,t=0,this._initted||(u=!0))):(0===f&&0>y&&(u=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(d=f+this._repeatDelay,this._cycle=this._totalTime/d>>0,0!==this._cycle&&this._cycle===this._totalTime/d&&this._cycle--,this._time=this._totalTime-this._cycle*d,this._yoyo&&0!==(1&this._cycle)&&(this._time=f-this._time),this._time>f?(this._time=f,t=f+1e-4):0>this._time?this._time=t=0:t=this._time))),this._cycle!==x&&!this._locked){var w=this._yoyo&&0!==(1&x),T=w===(this._yoyo&&0!==(1&this._cycle)),C=this._totalTime,S=this._cycle,E=this._rawPrevTime,M=this._time;if(this._totalTime=x*f,x>this._cycle?w=!w:this._totalTime+=f,this._time=g,this._rawPrevTime=0===f?y-1e-4:y,this._cycle=x,this._locked=!0,g=w?0:f,this.render(g,e,0===f),e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||s),T&&(g=w?f+1e-4:-1e-4,this.render(g,!0,!1)),this._locked=!1,this._paused&&!_)return;this._time=M,this._totalTime=C,this._cycle=S,this._rawPrevTime=E}if(!(this._time!==g&&this._first||i||u))return void(m!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s)));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&t>0&&(this._active=!0),0===m&&this.vars.onStart&&0!==this._totalTime&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||s)),this._time>=g)for(n=this._first;n&&(h=n._next,!this._paused||_);)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=h;else for(n=this._last;n&&(h=n._prev,!this._paused||_);)(n._active||g>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=h;this._onUpdate&&(e||(a.length&&l(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s))),c&&(this._locked||this._gc||(v===this._startTime||b!==this._timeScale)&&(0===this._time||p>=this.totalDuration())&&(o&&(a.length&&l(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[c]&&this.vars[c].apply(this.vars[c+"Scope"]||this,this.vars[c+"Params"]||s)))},c.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var n,r,s=[],o=this.getChildren(t,e,i),a=0,l=o.length;for(n=0;l>n;n++)r=o[n],r.isActive()&&(s[a++]=r);return s},c.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),n=i.length;for(e=0;n>e;e++)if(i[e].time>t)return i[e].name;return null},c.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},c.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},c.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},c.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},c.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},c.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},c.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},c.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},c.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},c.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},n},!0),function(){var t=180/Math.PI,e=[],i=[],n=[],r={},s=function(t,e,i,n){this.a=t,this.b=e,this.c=i,this.d=n,this.da=n-t,this.ca=i-t,this.ba=e-t},o=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",a=function(t,e,i,n){var r={a:t},s={},o={},a={c:n},l=(t+e)/2,h=(e+i)/2,c=(i+n)/2,u=(l+h)/2,d=(h+c)/2,p=(d-u)/8;return r.b=l+(t-l)/4,s.b=u+p,r.c=s.a=(r.b+s.b)/2,s.c=o.a=(u+d)/2,o.b=d-p,a.b=c+(n-c)/4,o.c=a.a=(o.b+a.b)/2,[r,s,o,a]},l=function(t,r,s,o,l){var h,c,u,d,p,f,g,m,v,b,y,_,x,w=t.length-1,T=0,C=t[0].a;for(h=0;w>h;h++)p=t[T],c=p.a,u=p.d,d=t[T+1].d,l?(y=e[h],_=i[h],x=.25*(_+y)*r/(o?.5:n[h]||.5),f=u-(u-c)*(o?.5*r:0!==y?x/y:0),g=u+(d-u)*(o?.5*r:0!==_?x/_:0),m=u-(f+((g-f)*(3*y/(y+_)+.5)/4||0))):(f=u-.5*(u-c)*r,g=u+.5*(d-u)*r,m=u-(f+g)/2),f+=m,g+=m,p.c=v=f,p.b=0!==h?C:C=p.a+.6*(p.c-p.a),p.da=u-c,p.ca=v-c,p.ba=C-c,s?(b=a(c,C,v,u),t.splice(T,1,b[0],b[1],b[2],b[3]),T+=4):T++,C=g;p=t[T],p.b=C,p.c=C+.4*(p.d-C),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=C-p.a,s&&(b=a(p.a,C,p.c,p.d),t.splice(T,1,b[0],b[1],b[2],b[3]))},h=function(t,n,r,o){var a,l,h,c,u,d,p=[];if(o)for(t=[o].concat(t),l=t.length;--l>-1;)"string"==typeof(d=t[l][n])&&"="===d.charAt(1)&&(t[l][n]=o[n]+Number(d.charAt(0)+d.substr(2)));if(a=t.length-2,0>a)return p[0]=new s(t[0][n],0,0,t[-1>a?0:1][n]),p;for(l=0;a>l;l++)h=t[l][n],c=t[l+1][n],p[l]=new s(h,0,0,c),r&&(u=t[l+2][n],e[l]=(e[l]||0)+(c-h)*(c-h),i[l]=(i[l]||0)+(u-c)*(u-c));return p[l]=new s(t[l][n],0,0,t[l+1][n]),p},c=function(t,s,a,c,u,d){var p,f,g,m,v,b,y,_,x={},w=[],T=d||t[0];u="string"==typeof u?","+u+",":o,null==s&&(s=1);for(f in t[0])w.push(f);if(t.length>1){for(_=t[t.length-1],y=!0,p=w.length;--p>-1;)if(f=w[p],Math.abs(T[f]-_[f])>.05){y=!1;break}y&&(t=t.concat(),d&&t.unshift(d),t.push(t[1]),d=t[t.length-3])}for(e.length=i.length=n.length=0,p=w.length;--p>-1;)f=w[p],r[f]=-1!==u.indexOf(","+f+","),x[f]=h(t,f,r[f],d);for(p=e.length;--p>-1;)e[p]=Math.sqrt(e[p]),i[p]=Math.sqrt(i[p]);if(!c){for(p=w.length;--p>-1;)if(r[f])for(g=x[w[p]],b=g.length-1,m=0;b>m;m++)v=g[m+1].da/i[m]+g[m].da/e[m],n[m]=(n[m]||0)+v*v;for(p=n.length;--p>-1;)n[p]=Math.sqrt(n[p])}for(p=w.length,m=a?4:1;--p>-1;)f=w[p],g=x[f],l(g,s,a,c,r[f]),y&&(g.splice(0,m),g.splice(g.length-m,m));return x},u=function(t,e,i){e=e||"soft";var n,r,o,a,l,h,c,u,d,p,f,g={},m="cubic"===e?3:2,v="soft"===e,b=[];if(v&&i&&(t=[i].concat(t)),null==t||m+1>t.length)throw"invalid Bezier data";for(d in t[0])b.push(d);for(h=b.length;--h>-1;){for(d=b[h],g[d]=l=[],p=0,u=t.length,c=0;u>c;c++)n=null==i?t[c][d]:"string"==typeof(f=t[c][d])&&"="===f.charAt(1)?i[d]+Number(f.charAt(0)+f.substr(2)):Number(f),v&&c>1&&u-1>c&&(l[p++]=(n+l[p-2])/2),l[p++]=n;for(u=p-m+1,p=0,c=0;u>c;c+=m)n=l[c],r=l[c+1],o=l[c+2],a=2===m?0:l[c+3],l[p++]=f=3===m?new s(n,r,o,a):new s(n,(2*r+n)/3,(2*r+o)/3,o);l.length=p}return g},d=function(t,e,i){for(var n,r,s,o,a,l,h,c,u,d,p,f=1/i,g=t.length;--g>-1;)for(d=t[g],s=d.a,o=d.d-s,a=d.c-s,l=d.b-s,n=r=0,c=1;i>=c;c++)h=f*c,u=1-h,n=r-(r=(h*h*o+3*u*(h*a+u*l))*h),p=g*i+c-1,e[p]=(e[p]||0)+n*n},p=function(t,e){e=e>>0||6;var i,n,r,s,o=[],a=[],l=0,h=0,c=e-1,u=[],p=[];for(i in t)d(t[i],o,e);for(r=o.length,n=0;r>n;n++)l+=Math.sqrt(o[n]),s=n%e,p[s]=l,s===c&&(h+=l,s=n/e>>0,u[s]=p,a[s]=h,l=0,p=[]);return{length:h,lengths:a,segments:u}},f=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.3",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var n,r,s,o,a,l=e.values||[],h={},d=l[0],f=e.autoRotate||i.vars.orientToBezier;this._autoRotate=f?f instanceof Array?f:[["x","y","rotation",f===!0?0:Number(f)||0]]:null;for(n in d)this._props.push(n);for(s=this._props.length;--s>-1;)n=this._props[s],this._overwriteProps.push(n),r=this._func[n]="function"==typeof t[n],h[n]=r?t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(t[n]),a||h[n]!==l[0][n]&&(a=h);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?c(l,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):u(l,e.type,h),this._segCount=this._beziers[n].length,this._timeRes){var g=p(this._beziers,this._timeRes);this._length=g.length,this._lengths=g.lengths,this._segments=g.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),s=f.length;--s>-1;){for(o=0;3>o;o++)n=f[s][o],this._func[n]="function"==typeof t[n]?t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]:!1;n=f[s][2],this._initialRotations[s]=this._func[n]?this._func[n].call(this._target):this._target[n]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,n,r,s,o,a,l,h,c,u,d=this._segCount,p=this._func,f=this._target,g=e!==this._startRatio;if(this._timeRes){if(c=this._lengths,u=this._curSeg,e*=this._length,r=this._li,e>this._l2&&d-1>r){for(h=d-1;h>r&&e>=(this._l2=c[++r]););this._l1=c[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0]}else if(this._l1>e&&r>0){for(;r>0&&(this._l1=c[--r])>=e;);0===r&&this._l1>e?this._l1=0:r++,this._l2=c[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=r,e-=this._l1,r=this._si,e>this._s2&&u.length-1>r){for(h=u.length-1;h>r&&e>=(this._s2=u[++r]););this._s1=u[r-1],this._si=r}else if(this._s1>e&&r>0){for(;r>0&&(this._s1=u[--r])>=e;);0===r&&this._s1>e?this._s1=0:r++,this._s2=u[r],this._si=r}a=(r+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?d-1:d*e>>0,a=(e-i*(1/d))*d;for(n=1-a,r=this._props.length;--r>-1;)s=this._props[r],o=this._beziers[s][i],l=(a*a*o.da+3*n*(a*o.ca+n*o.ba))*a+o.a,this._round[s]&&(l=Math.round(l)),p[s]?f[s](l):f[s]=l;if(this._autoRotate){var m,v,b,y,_,x,w,T=this._autoRotate;for(r=T.length;--r>-1;)s=T[r][2],x=T[r][3]||0,w=T[r][4]===!0?1:t,o=this._beziers[T[r][0]],m=this._beziers[T[r][1]],o&&m&&(o=o[i],m=m[i],v=o.a+(o.b-o.a)*a,y=o.b+(o.c-o.b)*a,v+=(y-v)*a,y+=(o.c+(o.d-o.c)*a-y)*a,b=m.a+(m.b-m.a)*a,_=m.b+(m.c-m.b)*a,b+=(_-b)*a,_+=(m.c+(m.d-m.c)*a-_)*a,l=g?Math.atan2(_-b,y-v)*w+x:this._initialRotations[r],p[s]?f[s](l):f[s]=l)}}}),g=f.prototype;f.bezierThrough=c,f.cubicToQuadratic=a,f._autoCSS=!0,f.quadraticToCubic=function(t,e,i){return new s(t,(2*e+t)/3,(2*e+i)/3,i)},f._cssRegister=function(){var t=_gsScope._gsDefine.globals.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,n=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,s,o,a,l){e instanceof Array&&(e={values:e}),l=new f;var h,c,u,d=e.values,p=d.length-1,g=[],m={};if(0>p)return a;for(h=0;p>=h;h++)u=i(t,d[h],o,a,l,p!==h),g[h]=u.end;for(c in e)m[c]=e[c];return m.values=g,a=new r(t,"bezier",0,0,u.pt,2),a.data=u,a.plugin=l,a.setRatio=n,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(h=m.autoRotate===!0?0:Number(m.autoRotate),m.autoRotate=null!=u.end.left?[["left","top","rotation",h,!1]]:null!=u.end.x?[["x","y","rotation",h,!1]]:!1),m.autoRotate&&(o._transform||o._enableTransforms(!1),u.autoRotate=o._target._gsTransform),l._onInitTween(u.proxy,m,o._tween),a}})}},g._roundProps=function(t,e){for(var i=this._overwriteProps,n=i.length;--n>-1;)(t[i[n]]||t.bezier||t.bezierThrough)&&(this._round[i[n]]=e)},g._kill=function(t){var e,i,n=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=n.length;--i>-1;)n[i]===e&&n.splice(i,1);return this._super._kill.call(this,t)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,n,r,s,o=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=o.prototype.setRatio},a={},l=o.prototype=new t("css");l.constructor=o,o.version="1.13.1",o.API=2,o.defaultTransformPerspective=0,o.defaultSkewType="compensated",l="px",o.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var h,c,u,d,p,f,g=/(?:\d|\-\d|\.\d|\-\.\d)+/g,m=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,v=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,b=/[^\d\-\.]/g,y=/(?:\d|\-|\+|=|#|\.)*/g,_=/opacity *= *([^)]*)/i,x=/opacity:([^;]*)/i,w=/alpha\(opacity *=.+?\)/i,T=/^(rgb|hsl)/,C=/([A-Z])/g,S=/-([a-z])/gi,E=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,M=function(t,e){return e.toUpperCase()},A=/(?:Left|Right|Width)/i,k=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,P=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,R=/,(?=[^\)]*(?:\(|$))/gi,B=Math.PI/180,I=180/Math.PI,L={},O=document,D=O.createElement("div"),F=O.createElement("img"),N=o._internals={_specialProps:a},$=navigator.userAgent,j=function(){var t,e=$.indexOf("Android"),i=O.createElement("div");return u=-1!==$.indexOf("Safari")&&-1===$.indexOf("Chrome")&&(-1===e||Number($.substr(e+8,1))>3),p=u&&6>Number($.substr($.indexOf("Version/")+8,1)),d=-1!==$.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec($)&&(f=parseFloat(RegExp.$1)),i.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",t=i.getElementsByTagName("a")[0],t?/^0.55/.test(t.style.opacity):!1}(),U=function(t){return _.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},H=function(t){window.console&&console.log(t)},G="",W="",V=function(t,e){e=e||D;var i,n,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;--n>-1&&void 0===r[i[n]+t];);return n>=0?(W=3===n?"ms":i[n],G="-"+W.toLowerCase()+"-",W+t):null},z=O.defaultView?O.defaultView.getComputedStyle:function(){},X=o.getStyle=function(t,e,i,n,r){var s;return j||"opacity"!==e?(!n&&t.style[e]?s=t.style[e]:(i=i||z(t))?s=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(C,"-$1").toLowerCase()):t.currentStyle&&(s=t.currentStyle[e]),null==r||s&&"none"!==s&&"auto"!==s&&"auto auto"!==s?s:r):U(t)},Y=N.convertToPixels=function(t,i,n,r,s){if("px"===r||!r)return n;if("auto"===r||!n)return 0;var a,l,h,c=A.test(i),u=t,d=D.style,p=0>n;if(p&&(n=-n),"%"===r&&-1!==i.indexOf("border"))a=n/100*(c?t.clientWidth:t.clientHeight);else{if(d.cssText="border:0 solid red;position:"+X(t,"position")+";line-height:0;","%"!==r&&u.appendChild)d[c?"borderLeftWidth":"borderTopWidth"]=n+r;else{if(u=t.parentNode||O.body,l=u._gsCache,h=e.ticker.frame,l&&c&&l.time===h)return l.width*n/100;d[c?"width":"height"]=n+r}u.appendChild(D),a=parseFloat(D[c?"offsetWidth":"offsetHeight"]),u.removeChild(D),c&&"%"===r&&o.cacheWidths!==!1&&(l=u._gsCache=u._gsCache||{},l.time=h,l.width=100*(a/n)),0!==a||s||(a=Y(t,i,n,r,!0))}return p?-a:a},q=N.calculateOffset=function(t,e,i){if("absolute"!==X(t,"position",i))return 0;var n="left"===e?"Left":"Top",r=X(t,"margin"+n,i);return t["offset"+n]-(Y(t,e,parseFloat(r),r.replace(y,""))||0)},K=function(t,e){var i,n,r={};if(e=e||z(t,null))if(i=e.length)for(;--i>-1;)r[e[i].replace(S,M)]=e.getPropertyValue(e[i]);else for(i in e)r[i]=e[i];else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===r[i]&&(r[i.replace(S,M)]=e[i]);return j||(r.opacity=U(t)),n=Ct(t,e,!1),r.rotation=n.rotation,r.skewX=n.skewX,r.scaleX=n.scaleX,r.scaleY=n.scaleY,r.x=n.x,r.y=n.y,wt&&(r.z=n.z,r.rotationX=n.rotationX,r.rotationY=n.rotationY,r.scaleZ=n.scaleZ),r.filters&&delete r.filters,r},Q=function(t,e,i,n,r){var s,o,a,l={},h=t.style;for(o in i)"cssText"!==o&&"length"!==o&&isNaN(o)&&(e[o]!==(s=i[o])||r&&r[o])&&-1===o.indexOf("Origin")&&("number"==typeof s||"string"==typeof s)&&(l[o]="auto"!==s||"left"!==o&&"top"!==o?""!==s&&"auto"!==s&&"none"!==s||"string"!=typeof e[o]||""===e[o].replace(b,"")?s:0:q(t,o),void 0!==h[o]&&(a=new ut(h,o,h[o],a)));if(n)for(o in n)"className"!==o&&(l[o]=n[o]);return{difs:l,firstMPT:a}},J={width:["Left","Right"],height:["Top","Bottom"]},Z=["marginLeft","marginRight","marginTop","marginBottom"],tt=function(t,e,i){var n=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=J[e],s=r.length;for(i=i||z(t,null);--s>-1;)n-=parseFloat(X(t,"padding"+r[s],i,!0))||0,n-=parseFloat(X(t,"border"+r[s]+"Width",i,!0))||0;return n},et=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),n=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],r=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==r?r="0":"center"===r&&(r="50%"),("center"===n||isNaN(parseFloat(n))&&-1===(n+"").indexOf("="))&&(n="50%"),e&&(e.oxp=-1!==n.indexOf("%"),e.oyp=-1!==r.indexOf("%"),e.oxr="="===n.charAt(1),e.oyr="="===r.charAt(1),e.ox=parseFloat(n.replace(b,"")),e.oy=parseFloat(r.replace(b,""))),n+" "+r+(i.length>2?" "+i[2]:"")},it=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},nt=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*Number(t.substr(2))+e:parseFloat(t)},rt=function(t,e,i,n){var r,s,o,a,l=1e-6;return null==t?a=e:"number"==typeof t?a=t:(r=360,s=t.split("_"),o=Number(s[0].replace(b,""))*(-1===t.indexOf("rad")?1:I)-("="===t.charAt(1)?0:e),s.length&&(n&&(n[i]=e+o),-1!==t.indexOf("short")&&(o%=r,o!==o%(r/2)&&(o=0>o?o+r:o-r)),-1!==t.indexOf("_cw")&&0>o?o=(o+9999999999*r)%r-(0|o/r)*r:-1!==t.indexOf("ccw")&&o>0&&(o=(o-9999999999*r)%r-(0|o/r)*r)),a=e+o),l>a&&a>-l&&(a=0),a},st={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ot=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},at=function(t){var e,i,n,r,s,o;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),st[t]?st[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),n=t.charAt(3),t="#"+e+e+i+i+n+n),t=parseInt(t.substr(1),16),[t>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(g),r=Number(t[0])%360/360,s=Number(t[1])/100,o=Number(t[2])/100,i=.5>=o?o*(s+1):o+s-o*s,e=2*o-i,t.length>3&&(t[3]=Number(t[3])),t[0]=ot(r+1/3,e,i),t[1]=ot(r,e,i),t[2]=ot(r-1/3,e,i),t):(t=t.match(g)||st.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):st.black},lt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(l in st)lt+="|"+l+"\\b";lt=RegExp(lt+")","gi");var ht=function(t,e,i,n){if(null==t)return function(t){return t};var r,s=e?(t.match(lt)||[""])[0]:"",o=t.split(s).join("").match(v)||[],a=t.substr(0,t.indexOf(o[0])),l=")"===t.charAt(t.length-1)?")":"",h=-1!==t.indexOf(" ")?" ":",",c=o.length,u=c>0?o[0].replace(g,""):"";return c?r=e?function(t){var e,d,p,f;if("number"==typeof t)t+=u;else if(n&&R.test(t)){for(f=t.replace(R,"|").split("|"),p=0;f.length>p;p++)f[p]=r(f[p]);return f.join(",")}if(e=(t.match(lt)||[s])[0],d=t.split(e).join("").match(v)||[],p=d.length,c>p--)for(;c>++p;)d[p]=i?d[0|(p-1)/2]:o[p];return a+d.join(h)+h+e+l+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,s,d;if("number"==typeof t)t+=u;else if(n&&R.test(t)){for(s=t.replace(R,"|").split("|"),d=0;s.length>d;d++)s[d]=r(s[d]);return s.join(",")}if(e=t.match(v)||[],d=e.length,c>d--)for(;c>++d;)e[d]=i?e[0|(d-1)/2]:o[d];return a+e.join(h)+l}:function(t){return t}},ct=function(t){return t=t.split(","),function(e,i,n,r,s,o,a){var l,h=(i+"").split(" ");for(a={},l=0;4>l;l++)a[t[l]]=h[l]=h[l]||h[(l-1)/2>>0];return r.parse(e,a,s,o)}},ut=(N._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,n,r,s=this.data,o=s.proxy,a=s.firstMPT,l=1e-6;a;)e=o[a.v],a.r?e=Math.round(e):l>e&&e>-l&&(e=0),a.t[a.p]=e,a=a._next;if(s.autoRotate&&(s.autoRotate.rotation=o.rotation),
1===t)for(a=s.firstMPT;a;){if(i=a.t,i.type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,n=1;i.l>n;n++)r+=i["xn"+n]+i["xs"+(n+1)];i.e=r}}else i.e=i.s+i.xs0;a=a._next}},function(t,e,i,n,r){this.t=t,this.p=e,this.v=i,this.r=r,n&&(n._prev=this,this._next=n)}),dt=(N._parseToProxy=function(t,e,i,n,r,s){var o,a,l,h,c,u=n,d={},p={},f=i._transform,g=L;for(i._transform=null,L=e,n=c=i.parse(t,e,n,r),L=g,s&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));n&&n!==u;){if(1>=n.type&&(a=n.p,p[a]=n.s+n.c,d[a]=n.s,s||(h=new ut(n,"s",a,h,n.r),n.c=0),1===n.type))for(o=n.l;--o>0;)l="xn"+o,a=n.p+"_"+l,p[a]=n.data[l],d[a]=n[l],s||(h=new ut(n,l,a,h,n.rxp[l]));n=n._next}return{proxy:d,end:p,firstMPT:h,pt:c}},N.CSSPropTween=function(t,e,n,r,o,a,l,h,c,u,d){this.t=t,this.p=e,this.s=n,this.c=r,this.n=l||e,t instanceof dt||s.push(this.n),this.r=h,this.type=a||0,c&&(this.pr=c,i=!0),this.b=void 0===u?n:u,this.e=void 0===d?n+r:d,o&&(this._next=o,o._prev=this)}),pt=o.parseComplex=function(t,e,i,n,r,s,o,a,l,c){i=i||s||"",o=new dt(t,e,0,0,o,c?2:1,null,!1,a,i,n),n+="";var u,d,p,f,v,b,y,_,x,w,C,S,E=i.split(", ").join(",").split(" "),M=n.split(", ").join(",").split(" "),A=E.length,k=h!==!1;for((-1!==n.indexOf(",")||-1!==i.indexOf(","))&&(E=E.join(" ").replace(R,", ").split(" "),M=M.join(" ").replace(R,", ").split(" "),A=E.length),A!==M.length&&(E=(s||"").split(" "),A=E.length),o.plugin=l,o.setRatio=c,u=0;A>u;u++)if(f=E[u],v=M[u],_=parseFloat(f),_||0===_)o.appendXtra("",_,it(v,_),v.replace(m,""),k&&-1!==v.indexOf("px"),!0);else if(r&&("#"===f.charAt(0)||st[f]||T.test(f)))S=","===v.charAt(v.length-1)?"),":")",f=at(f),v=at(v),x=f.length+v.length>6,x&&!j&&0===v[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(M[u]).join("transparent")):(j||(x=!1),o.appendXtra(x?"rgba(":"rgb(",f[0],v[0]-f[0],",",!0,!0).appendXtra("",f[1],v[1]-f[1],",",!0).appendXtra("",f[2],v[2]-f[2],x?",":S,!0),x&&(f=4>f.length?1:f[3],o.appendXtra("",f,(4>v.length?1:v[3])-f,S,!1)));else if(b=f.match(g)){if(y=v.match(m),!y||y.length!==b.length)return o;for(p=0,d=0;b.length>d;d++)C=b[d],w=f.indexOf(C,p),o.appendXtra(f.substr(p,w-p),Number(C),it(y[d],C),"",k&&"px"===f.substr(w+C.length,2),0===d),p=w+C.length;o["xs"+o.l]+=f.substr(p)}else o["xs"+o.l]+=o.l?" "+f:f;if(-1!==n.indexOf("=")&&o.data){for(S=o.xs0+o.data.s,u=1;o.l>u;u++)S+=o["xs"+u]+o.data["xn"+u];o.e=S+o["xs"+u]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},ft=9;for(l=dt.prototype,l.l=l.pr=0;--ft>0;)l["xn"+ft]=0,l["xs"+ft]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(t,e,i,n,r,s){var o=this,a=o.l;return o["xs"+a]+=s&&a?" "+t:t||"",i||0===a||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=n||"",a>0?(o.data["xn"+a]=e+i,o.rxp["xn"+a]=r,o["xn"+a]=e,o.plugin||(o.xfirst=new dt(o,"xn"+a,e,i,o.xfirst||o,0,o.n,r,o.pr),o.xfirst.xs0=0),o):(o.data={s:e+i},o.rxp={},o.s=e,o.c=i,o.r=r,o)):(o["xs"+a]+=e+(n||""),o)};var gt=function(t,e){e=e||{},this.p=e.prefix?V(t)||t:t,a[t]=a[this.p]=this,this.format=e.formatter||ht(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},mt=N._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var n,r,s=t.split(","),o=e.defaultValue;for(i=i||[o],n=0;s.length>n;n++)e.prefix=0===n&&e.prefix,e.defaultValue=i[n]||o,r=new gt(s[n],e)},vt=function(t){if(!a[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";mt(t,{parser:function(t,i,n,r,s,o,l){var h=(_gsScope.GreenSockGlobals||_gsScope).com.greensock.plugins[e];return h?(h._cssRegister(),a[n].parse(t,i,n,r,s,o,l)):(H("Error: "+e+" js file not loaded."),s)}})}};l=gt.prototype,l.parseComplex=function(t,e,i,n,r,s){var o,a,l,h,c,u,d=this.keyword;if(this.multi&&(R.test(i)||R.test(e)?(a=e.replace(R,"|").split("|"),l=i.replace(R,"|").split("|")):d&&(a=[e],l=[i])),l){for(h=l.length>a.length?l.length:a.length,o=0;h>o;o++)e=a[o]=a[o]||this.dflt,i=l[o]=l[o]||this.dflt,d&&(c=e.indexOf(d),u=i.indexOf(d),c!==u&&(i=-1===u?l:a,i[o]+=" "+d));e=a.join(", "),i=l.join(", ")}return pt(t,this.p,e,i,this.clrs,this.dflt,n,this.pr,r,s)},l.parse=function(t,e,i,n,s,o){return this.parseComplex(t.style,this.format(X(t,this.p,r,!1,this.dflt)),this.format(e),s,o)},o.registerSpecialProp=function(t,e,i){mt(t,{parser:function(t,n,r,s,o,a){var l=new dt(t,r,0,0,o,2,r,!1,i);return l.plugin=a,l.setRatio=e(t,n,s._tween,r),l},priority:i})};var bt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),yt=V("transform"),_t=G+"transform",xt=V("transformOrigin"),wt=null!==V("perspective"),Tt=N.Transform=function(){this.skewY=0},Ct=N.getTransform=function(t,e,i,n){if(t._gsTransform&&i&&!n)return t._gsTransform;var r,s,a,l,h,c,u,d,p,f,g,m,v,b=i?t._gsTransform||new Tt:new Tt,y=0>b.scaleX,_=2e-5,x=1e5,w=179.99,T=w*B,C=wt?parseFloat(X(t,xt,e,!1,"0 0 0").split(" ")[2])||b.zOrigin||0:0;if(yt?r=X(t,_t,e,!0):t.currentStyle&&(r=t.currentStyle.filter.match(k),r=r&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),b.x||0,b.y||0].join(","):""),r&&"none"!==r&&"matrix(1, 0, 0, 1, 0, 0)"!==r){for(s=(r||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],a=s.length;--a>-1;)l=Number(s[a]),s[a]=(h=l-(l|=0))?(0|h*x+(0>h?-.5:.5))/x+l:l;if(16===s.length){var S=s[8],E=s[9],M=s[10],A=s[12],P=s[13],R=s[14];if(b.zOrigin&&(R=-b.zOrigin,A=S*R-s[12],P=E*R-s[13],R=M*R+b.zOrigin-s[14]),!i||n||null==b.rotationX){var L,O,D,F,N,$,j,U=s[0],H=s[1],G=s[2],W=s[3],V=s[4],z=s[5],Y=s[6],q=s[7],K=s[11],Q=Math.atan2(Y,M),J=-T>Q||Q>T;b.rotationX=Q*I,Q&&(F=Math.cos(-Q),N=Math.sin(-Q),L=V*F+S*N,O=z*F+E*N,D=Y*F+M*N,S=V*-N+S*F,E=z*-N+E*F,M=Y*-N+M*F,K=q*-N+K*F,V=L,z=O,Y=D),Q=Math.atan2(S,U),b.rotationY=Q*I,Q&&($=-T>Q||Q>T,F=Math.cos(-Q),N=Math.sin(-Q),L=U*F-S*N,O=H*F-E*N,D=G*F-M*N,E=H*N+E*F,M=G*N+M*F,K=W*N+K*F,U=L,H=O,G=D),Q=Math.atan2(H,z),b.rotation=Q*I,Q&&(j=-T>Q||Q>T,F=Math.cos(-Q),N=Math.sin(-Q),U=U*F+V*N,O=H*F+z*N,z=H*-N+z*F,Y=G*-N+Y*F,H=O),j&&J?b.rotation=b.rotationX=0:j&&$?b.rotation=b.rotationY=0:$&&J&&(b.rotationY=b.rotationX=0),b.scaleX=(0|Math.sqrt(U*U+H*H)*x+.5)/x,b.scaleY=(0|Math.sqrt(z*z+E*E)*x+.5)/x,b.scaleZ=(0|Math.sqrt(Y*Y+M*M)*x+.5)/x,b.skewX=0,b.perspective=K?1/(0>K?-K:K):0,b.x=A,b.y=P,b.z=R}}else if(!(wt&&!n&&s.length&&b.x===s[4]&&b.y===s[5]&&(b.rotationX||b.rotationY)||void 0!==b.x&&"none"===X(t,"display",e))){var Z=s.length>=6,tt=Z?s[0]:1,et=s[1]||0,it=s[2]||0,nt=Z?s[3]:1;b.x=s[4]||0,b.y=s[5]||0,c=Math.sqrt(tt*tt+et*et),u=Math.sqrt(nt*nt+it*it),d=tt||et?Math.atan2(et,tt)*I:b.rotation||0,p=it||nt?Math.atan2(it,nt)*I+d:b.skewX||0,f=c-Math.abs(b.scaleX||0),g=u-Math.abs(b.scaleY||0),Math.abs(p)>90&&270>Math.abs(p)&&(y?(c*=-1,p+=0>=d?180:-180,d+=0>=d?180:-180):(u*=-1,p+=0>=p?180:-180)),m=(d-b.rotation)%180,v=(p-b.skewX)%180,(void 0===b.skewX||f>_||-_>f||g>_||-_>g||m>-w&&w>m&&!1|m*x||v>-w&&w>v&&!1|v*x)&&(b.scaleX=c,b.scaleY=u,b.rotation=d,b.skewX=p),wt&&(b.rotationX=b.rotationY=b.z=0,b.perspective=parseFloat(o.defaultTransformPerspective)||0,b.scaleZ=1)}b.zOrigin=C;for(a in b)_>b[a]&&b[a]>-_&&(b[a]=0)}else b={x:0,y:0,z:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,perspective:0,rotation:0,rotationX:0,rotationY:0,zOrigin:0};return i&&(t._gsTransform=b),b.xPercent=b.yPercent=0,b},St=function(t){var e,i,n=this.data,r=-n.rotation*B,s=r+n.skewX*B,o=1e5,a=(0|Math.cos(r)*n.scaleX*o)/o,l=(0|Math.sin(r)*n.scaleX*o)/o,h=(0|Math.sin(s)*-n.scaleY*o)/o,c=(0|Math.cos(s)*n.scaleY*o)/o,u=this.t.style,d=this.t.currentStyle;if(d){i=l,l=-h,h=-i,e=d.filter,u.filter="";var p,g,m=this.t.offsetWidth,v=this.t.offsetHeight,b="absolute"!==d.position,x="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+l+", M21="+h+", M22="+c,w=n.x+m*n.xPercent/100,T=n.y+v*n.yPercent/100;if(null!=n.ox&&(p=(n.oxp?.01*m*n.ox:n.ox)-m/2,g=(n.oyp?.01*v*n.oy:n.oy)-v/2,w+=p-(p*a+g*l),T+=g-(p*h+g*c)),b?(p=m/2,g=v/2,x+=", Dx="+(p-(p*a+g*l)+w)+", Dy="+(g-(p*h+g*c)+T)+")"):x+=", sizingMethod='auto expand')",u.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(P,x):x+" "+e,(0===t||1===t)&&1===a&&0===l&&0===h&&1===c&&(b&&-1===x.indexOf("Dx=0, Dy=0")||_.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&u.removeAttribute("filter")),!b){var C,S,E,M=8>f?1:-1;for(p=n.ieOffsetX||0,g=n.ieOffsetY||0,n.ieOffsetX=Math.round((m-((0>a?-a:a)*m+(0>l?-l:l)*v))/2+w),n.ieOffsetY=Math.round((v-((0>c?-c:c)*v+(0>h?-h:h)*m))/2+T),ft=0;4>ft;ft++)S=Z[ft],C=d[S],i=-1!==C.indexOf("px")?parseFloat(C):Y(this.t,S,parseFloat(C),C.replace(y,""))||0,E=i!==n[S]?2>ft?-n.ieOffsetX:-n.ieOffsetY:2>ft?p-n.ieOffsetX:g-n.ieOffsetY,u[S]=(n[S]=Math.round(i-E*(0===ft||2===ft?1:M)))+"px"}}},Et=N.set3DTransformRatio=function(t){var e,i,n,r,s,o,a,l,h,c,u,p,f,g,m,v,b,y,_,x,w,T,C,S=this.data,E=this.t.style,M=S.rotation*B,A=S.scaleX,k=S.scaleY,P=S.scaleZ,R=S.x,I=S.y,L=S.z,O=S.perspective;if(!(1!==t&&0!==t||"auto"!==S.force3D||S.rotationY||S.rotationX||1!==P||O||L))return void Mt.call(this,t);if(d){var D=1e-4;D>A&&A>-D&&(A=P=2e-5),D>k&&k>-D&&(k=P=2e-5),!O||S.z||S.rotationX||S.rotationY||(O=0)}if(M||S.skewX)y=Math.cos(M),_=Math.sin(M),e=y,s=_,S.skewX&&(M-=S.skewX*B,y=Math.cos(M),_=Math.sin(M),"simple"===S.skewType&&(x=Math.tan(S.skewX*B),x=Math.sqrt(1+x*x),y*=x,_*=x)),i=-_,o=y;else{if(!(S.rotationY||S.rotationX||1!==P||O))return void(E[yt]=(S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) translate3d(":"translate3d(")+R+"px,"+I+"px,"+L+"px)"+(1!==A||1!==k?" scale("+A+","+k+")":""));e=o=1,i=s=0}u=1,n=r=a=l=h=c=p=f=g=0,m=O?-1/O:0,v=S.zOrigin,b=1e5,M=S.rotationY*B,M&&(y=Math.cos(M),_=Math.sin(M),h=u*-_,f=m*-_,n=e*_,a=s*_,u*=y,m*=y,e*=y,s*=y),M=S.rotationX*B,M&&(y=Math.cos(M),_=Math.sin(M),x=i*y+n*_,w=o*y+a*_,T=c*y+u*_,C=g*y+m*_,n=i*-_+n*y,a=o*-_+a*y,u=c*-_+u*y,m=g*-_+m*y,i=x,o=w,c=T,g=C),1!==P&&(n*=P,a*=P,u*=P,m*=P),1!==k&&(i*=k,o*=k,c*=k,g*=k),1!==A&&(e*=A,s*=A,h*=A,f*=A),v&&(p-=v,r=n*p,l=a*p,p=u*p+v),r=(x=(r+=R)-(r|=0))?(0|x*b+(0>x?-.5:.5))/b+r:r,l=(x=(l+=I)-(l|=0))?(0|x*b+(0>x?-.5:.5))/b+l:l,p=(x=(p+=L)-(p|=0))?(0|x*b+(0>x?-.5:.5))/b+p:p,E[yt]=(S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) matrix3d(":"matrix3d(")+[(0|e*b)/b,(0|s*b)/b,(0|h*b)/b,(0|f*b)/b,(0|i*b)/b,(0|o*b)/b,(0|c*b)/b,(0|g*b)/b,(0|n*b)/b,(0|a*b)/b,(0|u*b)/b,(0|m*b)/b,r,l,p,O?1+-p/O:1].join(",")+")"},Mt=N.set2DTransformRatio=function(t){var e,i,n,r,s,o=this.data,a=this.t,l=a.style,h=o.x,c=o.y;return o.rotationX||o.rotationY||o.z||o.force3D===!0||"auto"===o.force3D&&1!==t&&0!==t?(this.setRatio=Et,void Et.call(this,t)):void(o.rotation||o.skewX?(e=o.rotation*B,i=e-o.skewX*B,n=1e5,r=o.scaleX*n,s=o.scaleY*n,l[yt]=(o.xPercent||o.yPercent?"translate("+o.xPercent+"%,"+o.yPercent+"%) matrix(":"matrix(")+(0|Math.cos(e)*r)/n+","+(0|Math.sin(e)*r)/n+","+(0|Math.sin(i)*-s)/n+","+(0|Math.cos(i)*s)/n+","+h+","+c+")"):l[yt]=(o.xPercent||o.yPercent?"translate("+o.xPercent+"%,"+o.yPercent+"%) matrix(":"matrix(")+o.scaleX+",0,0,"+o.scaleY+","+h+","+c+")")};mt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(t,e,i,n,s,a,l){if(n._transform)return s;var h,c,u,d,p,f,g,m=n._transform=Ct(t,r,!0,l.parseTransform),v=t.style,b=1e-6,y=bt.length,_=l,x={};if("string"==typeof _.transform&&yt)u=D.style,u[yt]=_.transform,u.display="block",u.position="absolute",O.body.appendChild(D),h=Ct(D,null,!1),O.body.removeChild(D);else if("object"==typeof _){if(h={scaleX:nt(null!=_.scaleX?_.scaleX:_.scale,m.scaleX),scaleY:nt(null!=_.scaleY?_.scaleY:_.scale,m.scaleY),scaleZ:nt(_.scaleZ,m.scaleZ),x:nt(_.x,m.x),y:nt(_.y,m.y),z:nt(_.z,m.z),xPercent:nt(_.xPercent,m.xPercent),yPercent:nt(_.yPercent,m.yPercent),perspective:nt(_.transformPerspective,m.perspective)},g=_.directionalRotation,null!=g)if("object"==typeof g)for(u in g)_[u]=g[u];else _.rotation=g;"string"==typeof _.x&&-1!==_.x.indexOf("%")&&(h.x=0,h.xPercent=nt(_.x,m.xPercent)),"string"==typeof _.y&&-1!==_.y.indexOf("%")&&(h.y=0,h.yPercent=nt(_.y,m.yPercent)),h.rotation=rt("rotation"in _?_.rotation:"shortRotation"in _?_.shortRotation+"_short":"rotationZ"in _?_.rotationZ:m.rotation,m.rotation,"rotation",x),wt&&(h.rotationX=rt("rotationX"in _?_.rotationX:"shortRotationX"in _?_.shortRotationX+"_short":m.rotationX||0,m.rotationX,"rotationX",x),h.rotationY=rt("rotationY"in _?_.rotationY:"shortRotationY"in _?_.shortRotationY+"_short":m.rotationY||0,m.rotationY,"rotationY",x)),h.skewX=null==_.skewX?m.skewX:rt(_.skewX,m.skewX),h.skewY=null==_.skewY?m.skewY:rt(_.skewY,m.skewY),(c=h.skewY-m.skewY)&&(h.skewX+=c,h.rotation+=c)}for(wt&&null!=_.force3D&&(m.force3D=_.force3D,f=!0),m.skewType=_.skewType||m.skewType||o.defaultSkewType,p=m.force3D||m.z||m.rotationX||m.rotationY||h.z||h.rotationX||h.rotationY||h.perspective,p||null==_.scale||(h.scaleZ=1);--y>-1;)i=bt[y],d=h[i]-m[i],(d>b||-b>d||null!=L[i])&&(f=!0,s=new dt(m,i,m[i],d,s),i in x&&(s.e=x[i]),s.xs0=0,s.plugin=a,n._overwriteProps.push(s.n));return d=_.transformOrigin,(d||wt&&p&&m.zOrigin)&&(yt?(f=!0,i=xt,d=(d||X(t,i,r,!1,"50% 50%"))+"",s=new dt(v,i,0,0,s,-1,"transformOrigin"),s.b=v[i],s.plugin=a,wt?(u=m.zOrigin,d=d.split(" "),m.zOrigin=(d.length>2&&(0===u||"0px"!==d[2])?parseFloat(d[2]):u)||0,s.xs0=s.e=d[0]+" "+(d[1]||"50%")+" 0px",s=new dt(m,"zOrigin",0,0,s,-1,s.n),s.b=u,s.xs0=s.e=m.zOrigin):s.xs0=s.e=d):et(d+"",m)),f&&(n._transformType=p||3===this._transformType?3:2),s},prefix:!0}),mt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),mt("borderRadius",{defaultValue:"0px",parser:function(t,e,i,s,o){e=this.format(e);var a,l,h,c,u,d,p,f,g,m,v,b,y,_,x,w,T=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],C=t.style;for(g=parseFloat(t.offsetWidth),m=parseFloat(t.offsetHeight),a=e.split(" "),l=0;T.length>l;l++)this.p.indexOf("border")&&(T[l]=V(T[l])),u=c=X(t,T[l],r,!1,"0px"),-1!==u.indexOf(" ")&&(c=u.split(" "),u=c[0],c=c[1]),d=h=a[l],p=parseFloat(u),b=u.substr((p+"").length),y="="===d.charAt(1),y?(f=parseInt(d.charAt(0)+"1",10),d=d.substr(2),f*=parseFloat(d),v=d.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(d),v=d.substr((f+"").length)),""===v&&(v=n[i]||b),v!==b&&(_=Y(t,"borderLeft",p,b),x=Y(t,"borderTop",p,b),"%"===v?(u=100*(_/g)+"%",c=100*(x/m)+"%"):"em"===v?(w=Y(t,"borderLeft",1,"em"),u=_/w+"em",c=x/w+"em"):(u=_+"px",c=x+"px"),y&&(d=parseFloat(u)+f+v,h=parseFloat(c)+f+v)),o=pt(C,T[l],u+" "+c,d+" "+h,!1,"0px",o);return o},prefix:!0,formatter:ht("0px 0px 0px 0px",!1,!0)}),mt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,n,s,o){var a,l,h,c,u,d,p="background-position",g=r||z(t,null),m=this.format((g?f?g.getPropertyValue(p+"-x")+" "+g.getPropertyValue(p+"-y"):g.getPropertyValue(p):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(-1!==m.indexOf("%")!=(-1!==v.indexOf("%"))&&(d=X(t,"backgroundImage").replace(E,""),d&&"none"!==d)){for(a=m.split(" "),l=v.split(" "),F.setAttribute("src",d),h=2;--h>-1;)m=a[h],c=-1!==m.indexOf("%"),c!==(-1!==l[h].indexOf("%"))&&(u=0===h?t.offsetWidth-F.width:t.offsetHeight-F.height,a[h]=c?parseFloat(m)/100*u+"px":100*(parseFloat(m)/u)+"%");m=a.join(" ")}return this.parseComplex(t.style,m,v,s,o)},formatter:et}),mt("backgroundSize",{defaultValue:"0 0",formatter:et}),mt("perspective",{defaultValue:"0px",prefix:!0}),mt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),mt("transformStyle",{prefix:!0}),mt("backfaceVisibility",{prefix:!0}),mt("userSelect",{prefix:!0}),mt("margin",{parser:ct("marginTop,marginRight,marginBottom,marginLeft")}),mt("padding",{parser:ct("paddingTop,paddingRight,paddingBottom,paddingLeft")}),mt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,n,s,o){var a,l,h;return 9>f?(l=t.currentStyle,h=8>f?" ":",",a="rect("+l.clipTop+h+l.clipRight+h+l.clipBottom+h+l.clipLeft+")",e=this.format(e).split(",").join(h)):(a=this.format(X(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,s,o)}}),mt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),mt("autoRound,strictUnits",{parser:function(t,e,i,n,r){return r}}),mt("border",{defaultValue:"0px solid #000",parser:function(t,e,i,n,s,o){return this.parseComplex(t.style,this.format(X(t,"borderTopWidth",r,!1,"0px")+" "+X(t,"borderTopStyle",r,!1,"solid")+" "+X(t,"borderTopColor",r,!1,"#000")),this.format(e),s,o)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(lt)||["#000"])[0]}}),mt("borderWidth",{parser:ct("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),mt("float,cssFloat,styleFloat",{parser:function(t,e,i,n,r){var s=t.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new dt(s,o,0,0,r,-1,i,!1,0,s[o],e)}});var At=function(t){var e,i=this.t,n=i.filter||X(this.data,"filter"),r=0|this.s+this.c*t;100===r&&(-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")&&-1===n.indexOf("oader(")?(i.removeAttribute("filter"),e=!X(this.data,"filter")):(i.filter=n.replace(w,""),e=!0)),e||(this.xn1&&(i.filter=n=n||"alpha(opacity="+r+")"),-1===n.indexOf("pacity")?0===r&&this.xn1||(i.filter=n+" alpha(opacity="+r+")"):i.filter=n.replace(_,"opacity="+r))};mt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,n,s,o){var a=parseFloat(X(t,"opacity",r,!1,"1")),l=t.style,h="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),h&&1===a&&"hidden"===X(t,"visibility",r)&&0!==e&&(a=0),j?s=new dt(l,"opacity",a,e-a,s):(s=new dt(l,"opacity",100*a,100*(e-a),s),s.xn1=h?1:0,l.zoom=1,s.type=2,s.b="alpha(opacity="+s.s+")",s.e="alpha(opacity="+(s.s+s.c)+")",s.data=t,s.plugin=o,s.setRatio=At),h&&(s=new dt(l,"visibility",0,0,s,-1,null,!1,0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit"),s.xs0="inherit",n._overwriteProps.push(s.n),n._overwriteProps.push(i)),s}});var kt=function(t,e){e&&(t.removeProperty?("ms"===e.substr(0,2)&&(e="M"+e.substr(1)),t.removeProperty(e.replace(C,"-$1").toLowerCase())):t.removeAttribute(e))},Pt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:kt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};mt("className",{parser:function(t,e,n,s,o,a,l){var h,c,u,d,p,f=t.getAttribute("class")||"",g=t.style.cssText;if(o=s._classNamePT=new dt(t,n,0,0,o,2),o.setRatio=Pt,o.pr=-11,i=!0,o.b=f,c=K(t,r),u=t._gsClassPT){for(d={},p=u.data;p;)d[p.p]=1,p=p._next;u.setRatio(1)}return t._gsClassPT=o,o.e="="!==e.charAt(1)?e:f.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),s._tween._duration&&(t.setAttribute("class",o.e),h=Q(t,c,K(t),l,d),t.setAttribute("class",f),o.data=h.firstMPT,t.style.cssText=g,o=o.xfirst=s.parse(t,h.difs,o,a)),o}});var Rt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,n,r,s=this.t.style,o=a.transform.parse;if("all"===this.e)s.cssText="",r=!0;else for(e=this.e.split(","),n=e.length;--n>-1;)i=e[n],a[i]&&(a[i].parse===o?r=!0:i="transformOrigin"===i?xt:a[i].p),kt(s,i);r&&(kt(s,yt),this.t._gsTransform&&delete this.t._gsTransform)}};for(mt("clearProps",{parser:function(t,e,n,r,s){return s=new dt(t,n,0,0,s,2),s.setRatio=Rt,s.e=e,s.pr=-10,s.data=r._tween,i=!0,s}}),l="bezier,throwProps,physicsProps,physics2D".split(","),ft=l.length;ft--;)vt(l[ft]);l=o.prototype,l._firstPT=null,l._onInitTween=function(t,e,a){if(!t.nodeType)return!1;this._target=t,this._tween=a,this._vars=e,h=e.autoRound,i=!1,n=e.suffixMap||o.suffixMap,r=z(t,""),s=this._overwriteProps;var l,d,f,g,m,v,b,y,_,w=t.style;if(c&&""===w.zIndex&&(l=X(t,"zIndex",r),("auto"===l||""===l)&&this._addLazySet(w,"zIndex",0)),"string"==typeof e&&(g=w.cssText,l=K(t,r),w.cssText=g+";"+e,l=Q(t,l,K(t)).difs,!j&&x.test(e)&&(l.opacity=parseFloat(RegExp.$1)),e=l,w.cssText=g),this._firstPT=d=this.parse(t,e,null),this._transformType){for(_=3===this._transformType,yt?u&&(c=!0,""===w.zIndex&&(b=X(t,"zIndex",r),("auto"===b||""===b)&&this._addLazySet(w,"zIndex",0)),p&&this._addLazySet(w,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(_?"visible":"hidden"))):w.zoom=1,f=d;f&&f._next;)f=f._next;y=new dt(t,"transform",0,0,null,2),this._linkCSSP(y,null,f),y.setRatio=_&&wt?Et:yt?Mt:St,y.data=this._transform||Ct(t,r,!0),s.pop()}if(i){for(;d;){for(v=d._next,f=g;f&&f.pr>d.pr;)f=f._next;(d._prev=f?f._prev:m)?d._prev._next=d:g=d,(d._next=f)?f._prev=d:m=d,d=v}this._firstPT=g}return!0},l.parse=function(t,e,i,s){var o,l,c,u,d,p,f,g,m,v,b=t.style;for(o in e)p=e[o],l=a[o],l?i=l.parse(t,p,o,this,i,s,e):(d=X(t,o,r)+"",m="string"==typeof p,"color"===o||"fill"===o||"stroke"===o||-1!==o.indexOf("Color")||m&&T.test(p)?(m||(p=at(p),p=(p.length>3?"rgba(":"rgb(")+p.join(",")+")"),i=pt(b,o,d,p,!0,"transparent",i,0,s)):!m||-1===p.indexOf(" ")&&-1===p.indexOf(",")?(c=parseFloat(d),f=c||0===c?d.substr((c+"").length):"",(""===d||"auto"===d)&&("width"===o||"height"===o?(c=tt(t,o,r),f="px"):"left"===o||"top"===o?(c=q(t,o,r),f="px"):(c="opacity"!==o?0:1,f="")),v=m&&"="===p.charAt(1),v?(u=parseInt(p.charAt(0)+"1",10),p=p.substr(2),u*=parseFloat(p),g=p.replace(y,"")):(u=parseFloat(p),g=m?p.substr((u+"").length)||"":""),""===g&&(g=o in n?n[o]:f),p=u||0===u?(v?u+c:u)+g:e[o],f!==g&&""!==g&&(u||0===u)&&c&&(c=Y(t,o,c,f),"%"===g?(c/=Y(t,o,100,"%")/100,e.strictUnits!==!0&&(d=c+"%")):"em"===g?c/=Y(t,o,1,"em"):"px"!==g&&(u=Y(t,o,u,g),g="px"),v&&(u||0===u)&&(p=u+c+g)),v&&(u+=c),!c&&0!==c||!u&&0!==u?void 0!==b[o]&&(p||"NaN"!=p+""&&null!=p)?(i=new dt(b,o,u||c||0,0,i,-1,o,!1,0,d,p),i.xs0="none"!==p||"display"!==o&&-1===o.indexOf("Style")?p:d):H("invalid "+o+" tween value: "+e[o]):(i=new dt(b,o,c,u-c,i,0,o,h!==!1&&("px"===g||"zIndex"===o),0,d,p),i.xs0=g)):i=pt(b,o,d,p,!0,null,i,0,s)),s&&i&&!i.plugin&&(i.plugin=s);return i},l.setRatio=function(t){var e,i,n,r=this._firstPT,s=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):s>e&&e>-s&&(e=0),r.type)if(1===r.type)if(n=r.l,2===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,n=1;r.l>n;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;)2!==r.type?r.t[r.p]=r.e:r.setRatio(t),r=r._next},l._enableTransforms=function(t){this._transformType=t||3===this._transformType?3:2,this._transform=this._transform||Ct(this._target,r,!0)};var Bt=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};l._addLazySet=function(t,e,i){var n=this._firstPT=new dt(t,e,0,0,this._firstPT,2);n.e=i,n.setRatio=Bt,n.data=this},l._linkCSSP=function(t,e,i,n){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,n=!0),i?i._next=t:n||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},l._kill=function(e){var i,n,r,s=e;if(e.autoAlpha||e.alpha){s={};for(n in e)s[n]=e[n];s.opacity=1,s.autoAlpha&&(s.visibility=1)}return e.className&&(i=this._classNamePT)&&(r=i.xfirst,r&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),t.prototype._kill.call(this,s)};var It=function(t,e,i){var n,r,s,o;if(t.slice)for(r=t.length;--r>-1;)It(t[r],e,i);else for(n=t.childNodes,r=n.length;--r>-1;)s=n[r],o=s.type,s.style&&(e.push(K(s)),i&&i.push(s)),1!==o&&9!==o&&11!==o||!s.childNodes.length||It(s,e,i)};return o.cascadeTo=function(t,i,n){var r,s,o,a=e.to(t,i,n),l=[a],h=[],c=[],u=[],d=e._internals.reservedProps;for(t=a._targets||a.target,It(t,h,u),a.render(i,!0),It(t,c),a.render(0,!0),a._enabled(!0),r=u.length;--r>-1;)if(s=Q(u[r],h[r],c[r]),s.firstMPT){s=s.difs;for(o in n)d[o]&&(s[o]=n[o]);l.push(e.to(u[r],i,s))}return l},t.activate([o]),o},!0),function(){var t=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=t.prototype;e._onInitAllProps=function(){for(var t,e,i,n=this._tween,r=n.vars.roundProps instanceof Array?n.vars.roundProps:n.vars.roundProps.split(","),s=r.length,o={},a=n._propLookup.roundProps;--s>-1;)o[r[s]]=1;for(s=r.length;--s>-1;)for(t=r[s],e=n._firstPT;e;)i=e._next,e.pg?e.t._roundProps(o,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:n._firstPT===e&&(n._firstPT=i),e._next=e._prev=null,n._propLookup[t]=a),e=i;return!1},e._add=function(t,e,i,n){this._addTween(t,e,i,i+n,e,!0),this._overwriteProps.push(e)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(t,e){var i,n,r;if("function"!=typeof t.setAttribute)return!1;this._target=t,this._proxy={},this._start={},this._end={};for(i in e)this._start[i]=this._proxy[i]=n=t.getAttribute(i),r=this._addTween(this._proxy,i,parseFloat(n),e[i],i),this._end[i]=r?r.s+r.c:e[i],this._overwriteProps.push(i);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,n=i.length,r=1===t?this._end:t?this._proxy:this._start;--n>-1;)e=i[n],this._target.setAttribute(e,r[e]+"")}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,n,r,s,o,a,l=e.useRadians===!0?2*Math.PI:360,h=1e-6;for(i in e)"useRadians"!==i&&(a=(e[i]+"").split("_"),n=a[0],r=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),s=this.finals[i]="string"==typeof n&&"="===n.charAt(1)?r+parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)):Number(n)||0,o=s-r,a.length&&(n=a.join("_"),-1!==n.indexOf("short")&&(o%=l,o!==o%(l/2)&&(o=0>o?o+l:o-l)),-1!==n.indexOf("_cw")&&0>o?o=(o+9999999999*l)%l-(0|o/l)*l:-1!==n.indexOf("ccw")&&o>0&&(o=(o-9999999999*l)%l-(0|o/l)*l)),(o>h||-h>o)&&(this._addTween(t,i,r,r+o,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,n,r=_gsScope.GreenSockGlobals||_gsScope,s=r.com.greensock,o=2*Math.PI,a=Math.PI/2,l=s._class,h=function(e,i){var n=l("easing."+e,function(){},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,n},c=t.register||function(){},u=function(t,e,i,n){var r=l("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new n},!0);return c(r,t),r},d=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},p=function(e,i){var n=l("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,r.config=function(t){return new n(t)},n},f=u("Back",p("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),p("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),p("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),g=l("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),m=g.prototype=new t;return m.constructor=g,m.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},g.ease=new g(.7,.7),m.config=g.config=function(t,e,i){return new g(t,e,i)},e=l("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),m=e.prototype=new t,m.constructor=e,m.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},m.config=e.config=function(t){return new e(t)},i=l("easing.RoughEase",function(e){e=e||{};for(var i,n,r,s,o,a,l=e.taper||"none",h=[],c=0,u=0|(e.points||20),p=u,f=e.randomize!==!1,g=e.clamp===!0,m=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=f?Math.random():1/u*p,n=m?m.getRatio(i):i,"none"===l?r=v:"out"===l?(s=1-i,r=s*s*v):"in"===l?r=i*i*v:.5>i?(s=2*i,r=.5*s*s*v):(s=2*(1-i),r=.5*s*s*v),f?n+=Math.random()*r-.5*r:p%2?n+=.5*r:n-=.5*r,g&&(n>1?n=1:0>n&&(n=0)),h[c++]={x:i,y:n};for(h.sort(function(t,e){return t.x-e.x}),a=new d(1,1,null),p=u;--p>-1;)o=h[p],a=new d(o.x,o.y,a);this._prev=new d(0,0,0!==a.t?a:a.next)},!0),m=i.prototype=new t,m.constructor=i,m.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},m.config=function(t){return new i(t)},i.ease=new i,u("Bounce",h("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),h("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),h("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),u("Circ",h("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),h("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),h("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),n=function(e,i,n){var r=l("easing."+e,function(t,e){this._p1=t||1,this._p2=e||n,this._p3=this._p2/o*(Math.asin(1/this._p1)||0)},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=i,s.config=function(t,e){return new r(t,e)},r},u("Elastic",n("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*o/this._p2)+1},.3),n("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*o/this._p2))},.3),n("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*o/this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*o/this._p2)+1},.45)),u("Expo",h("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),h("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),h("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),u("Sine",h("SineOut",function(t){return Math.sin(t*a)}),h("SineIn",function(t){return-Math.cos(t*a)+1}),h("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),l("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),c(r.SlowMo,"SlowMo","ease,"),c(i,"RoughEase","ease,"),c(e,"SteppedEase","ease,"),f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t,e){"use strict";var i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!i.TweenLite){var n,r,s,o,a,l=function(t){var e,n=t.split("."),r=i;for(e=0;n.length>e;e++)r[n[e]]=r=r[n[e]]||{};return r},h=l("com.greensock"),c=1e-10,u=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},d=function(){},p=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),f={},g=function(n,r,s,o){this.sc=f[n]?f[n].sc:[],f[n]=this,this.gsClass=null,this.func=s;var a=[];this.check=function(h){
for(var c,u,d,p,m=r.length,v=m;--m>-1;)(c=f[r[m]]||new g(r[m],[])).gsClass?(a[m]=c.gsClass,v--):h&&c.sc.push(this);if(0===v&&s)for(u=("com.greensock."+n).split("."),d=u.pop(),p=l(u.join("."))[d]=this.gsClass=s.apply(s,a),o&&(i[d]=p,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+n.split(".").pop(),[],function(){return p}):n===e&&"undefined"!=typeof module&&module.exports&&(module.exports=p)),m=0;this.sc.length>m;m++)this.sc[m].check()},this.check(!0)},m=t._gsDefine=function(t,e,i,n){return new g(t,e,i,n)},v=h._class=function(t,e,i){return e=e||function(){},m(t,[],function(){return e},i),e};m.globals=i;var b=[0,0,1,1],y=[],_=v("easing.Ease",function(t,e,i,n){this._func=t,this._type=i||0,this._power=n||0,this._params=e?b.concat(e):b},!0),x=_.map={},w=_.register=function(t,e,i,n){for(var r,s,o,a,l=e.split(","),c=l.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--c>-1;)for(s=l[c],r=n?v("easing."+s,null,!0):h.easing[s]||{},o=u.length;--o>-1;)a=u[o],x[s+"."+a]=x[a+s]=r[a]=t.getRatio?t:t[a]||new t};for(s=_.prototype,s._calcEnd=!1,s.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,n=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===e?1-n:2===e?n:.5>t?n/2:1-n/2},n=["Linear","Quad","Cubic","Quart","Quint,Strong"],r=n.length;--r>-1;)s=n[r]+",Power"+r,w(new _(null,null,1,r),s,"easeOut",!0),w(new _(null,null,2,r),s,"easeIn"+(0===r?",easeNone":"")),w(new _(null,null,3,r),s,"easeInOut");x.linear=h.easing.Linear.easeIn,x.swing=h.easing.Quad.easeInOut;var T=v("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});s=T.prototype,s.addEventListener=function(t,e,i,n,r){r=r||0;var s,l,h=this._listeners[t],c=0;for(null==h&&(this._listeners[t]=h=[]),l=h.length;--l>-1;)s=h[l],s.c===e&&s.s===i?h.splice(l,1):0===c&&r>s.pr&&(c=l+1);h.splice(c,0,{c:e,s:i,up:n,pr:r}),this!==o||a||o.wake()},s.removeEventListener=function(t,e){var i,n=this._listeners[t];if(n)for(i=n.length;--i>-1;)if(n[i].c===e)return void n.splice(i,1)},s.dispatchEvent=function(t){var e,i,n,r=this._listeners[t];if(r)for(e=r.length,i=this._eventTarget;--e>-1;)n=r[e],n.up?n.c.call(n.s||i,{type:t,target:i}):n.c.call(n.s||i)};var C=t.requestAnimationFrame,S=t.cancelAnimationFrame,E=Date.now||function(){return(new Date).getTime()},M=E();for(n=["ms","moz","webkit","o"],r=n.length;--r>-1&&!C;)C=t[n[r]+"RequestAnimationFrame"],S=t[n[r]+"CancelAnimationFrame"]||t[n[r]+"CancelRequestAnimationFrame"];v("Ticker",function(t,e){var i,n,r,s,l,h=this,u=E(),p=e!==!1&&C,f=500,g=33,m=function(t){var e,o,a=E()-M;a>f&&(u+=a-g),M+=a,h.time=(M-u)/1e3,e=h.time-l,(!i||e>0||t===!0)&&(h.frame++,l+=e+(e>=s?.004:s-e),o=!0),t!==!0&&(r=n(m)),o&&h.dispatchEvent("tick")};T.call(h),h.time=h.frame=0,h.tick=function(){m(!0)},h.lagSmoothing=function(t,e){f=t||1/c,g=Math.min(e,f,0)},h.sleep=function(){null!=r&&(p&&S?S(r):clearTimeout(r),n=d,r=null,h===o&&(a=!1))},h.wake=function(){null!==r?h.sleep():h.frame>10&&(M=E()-f+5),n=0===i?d:p&&C?C:function(t){return setTimeout(t,0|1e3*(l-h.time)+1)},h===o&&(a=!0),m(2)},h.fps=function(t){return arguments.length?(i=t,s=1/(i||60),l=this.time+s,void h.wake()):i},h.useRAF=function(t){return arguments.length?(h.sleep(),p=t,void h.fps(i)):p},h.fps(t),setTimeout(function(){p&&(!r||5>h.frame)&&h.useRAF(!1)},1500)}),s=h.Ticker.prototype=new h.events.EventDispatcher,s.constructor=h.Ticker;var A=v("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,G){a||o.wake();var i=this.vars.useFrames?H:G;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});o=A.ticker=new h.Ticker,s=A.prototype,s._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;var k=function(){a&&E()-M>2e3&&o.wake(),setTimeout(k,2e3)};k(),s.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},s.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},s.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},s.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},s.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},s.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},s.render=function(){},s.invalidate=function(){return this},s.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},s._enabled=function(t,e){return a||o.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(){return this._enabled(!1,!1)},s.kill=function(t,e){return this._kill(t,e),this},s._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},s._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},s.eventCallback=function(t,e,i,n){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=p(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=n),"onUpdate"===t&&(this._onUpdate=e)}return this},s.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},s.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},s.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},s.totalTime=function(t,e,i){if(a||o.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(t>n&&!i&&(t=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(this.render(t,e,!1),L.length&&W())}return this},s.progress=s.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},s.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},s.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||c,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},s.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},s.paused=function(t){if(!arguments.length)return this._paused;if(t!=this._paused&&this._timeline){a||t||o.wake();var e=this._timeline,i=e.rawTime(),n=i-this._pauseTime;!t&&e.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=t?i:null,this._paused=t,this._active=this.isActive(),!t&&0!==n&&this._initted&&this.duration()&&this.render(e.smoothChildTiming?this._totalTime:(i-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!t&&this._enabled(!0,!1),this};var P=v("core.SimpleTimeline",function(t){A.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});s=P.prototype=new A,s.constructor=P,s.kill()._gc=!1,s._first=s._last=null,s._sortChildren=!1,s.add=s.insert=function(t,e){var i,n;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(n=t._startTime;i&&i._startTime>n;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._timeline&&this._uncache(!0),this},s._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,this._timeline&&this._uncache(!0)),this},s.render=function(t,e,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)n=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=n},s.rawTime=function(){return a||o.wake(),this._totalTime};var R=v("TweenLite",function(e,i,n){if(A.call(this,i,n),this.render=R.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:R.selector(e)||e;var r,s,o,a=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?U[R.defaultOverwrite]:"number"==typeof l?l>>0:U[l],(a||e instanceof Array||e.push&&p(e))&&"number"!=typeof e[0])for(this._targets=o=u(e),this._propLookup=[],this._siblings=[],r=0;o.length>r;r++)s=o[r],s?"string"!=typeof s?s.length&&s!==t&&s[0]&&(s[0]===t||s[0].nodeType&&s[0].style&&!s.nodeType)?(o.splice(r--,1),this._targets=o=o.concat(u(s))):(this._siblings[r]=V(s,this,!1),1===l&&this._siblings[r].length>1&&z(s,this,null,1,this._siblings[r])):(s=o[r--]=R.selector(s),"string"==typeof s&&o.splice(r+1,1)):o.splice(r--,1);else this._propLookup={},this._siblings=V(e,this,!1),1===l&&this._siblings.length>1&&z(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-c,this.render(-this._delay))},!0),B=function(e){return e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},I=function(t,e){var i,n={};for(i in t)j[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!F[i]||F[i]&&F[i]._autoCSS)||(n[i]=t[i],delete t[i]);t.css=n};s=R.prototype=new A,s.constructor=R,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=s._lazy=!1,R.version="1.13.1",R.defaultEase=s._ease=new _(null,null,1,1),R.defaultOverwrite="auto",R.ticker=o,R.autoSleep=!0,R.lagSmoothing=function(t,e){o.lagSmoothing(t,e)},R.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(R.selector=i,i(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var L=[],O={},D=R._internals={isArray:p,isSelector:B,lazyTweens:L},F=R._plugins={},N=D.tweenLookup={},$=0,j=D.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1},U={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},H=A._rootFramesTimeline=new P,G=A._rootTimeline=new P,W=D.lazyRender=function(){var t=L.length;for(O={};--t>-1;)n=L[t],n&&n._lazy!==!1&&(n.render(n._lazy,!1,!0),n._lazy=!1);L.length=0};G._startTime=o.time,H._startTime=o.frame,G._active=H._active=!0,setTimeout(W,1),A._updateRoot=R.render=function(){var t,e,i;if(L.length&&W(),G.render((o.time-G._startTime)*G._timeScale,!1,!1),H.render((o.frame-H._startTime)*H._timeScale,!1,!1),L.length&&W(),!(o.frame%120)){for(i in N){for(e=N[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete N[i]}if(i=G._first,(!i||i._paused)&&R.autoSleep&&!H._first&&1===o._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||o.sleep()}}},o.addEventListener("tick",A._updateRoot);var V=function(t,e,i){var n,r,s=t._gsTweenID;if(N[s||(t._gsTweenID=s="t"+$++)]||(N[s]={target:t,tweens:[]}),e&&(n=N[s].tweens,n[r=n.length]=e,i))for(;--r>-1;)n[r]===e&&n.splice(r,1);return N[s].tweens},z=function(t,e,i,n,r){var s,o,a,l;if(1===n||n>=4){for(l=r.length,s=0;l>s;s++)if((a=r[s])!==e)a._gc||a._enabled(!1,!1)&&(o=!0);else if(5===n)break;return o}var h,u=e._startTime+c,d=[],p=0,f=0===e._duration;for(s=r.length;--s>-1;)(a=r[s])===e||a._gc||a._paused||(a._timeline!==e._timeline?(h=h||X(e,0,f),0===X(a,h,f)&&(d[p++]=a)):u>=a._startTime&&a._startTime+a.totalDuration()/a._timeScale>u&&((f||!a._initted)&&2e-10>=u-a._startTime||(d[p++]=a)));for(s=p;--s>-1;)a=d[s],2===n&&a._kill(i,t)&&(o=!0),(2!==n||!a._firstPT&&a._initted)&&a._enabled(!1,!1)&&(o=!0);return o},X=function(t,e,i){for(var n=t._timeline,r=n._timeScale,s=t._startTime;n._timeline;){if(s+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return s/=r,s>e?s-e:i&&s===e||!t._initted&&2*c>s-e?c:(s+=t.totalDuration()/t._timeScale/r)>e+c?0:s-e-c};s._init=function(){var t,e,i,n,r,s=this.vars,o=this._overwrittenProps,a=this._duration,l=!!s.immediateRender,h=s.ease;if(s.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(n in s.startAt)r[n]=s.startAt[n];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=l&&s.lazy!==!1,r.startAt=r.delay=null,this._startAt=R.to(this.target,0,r),l)if(this._time>0)this._startAt=null;else if(0!==a)return}else if(s.runBackwards&&0!==a)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{i={};for(n in s)j[n]&&"autoCSS"!==n||(i[n]=s[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=l&&s.lazy!==!1,i.immediateRender=l,this._startAt=R.to(this.target,0,i),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1)}if(this._ease=h=h?h instanceof _?h:"function"==typeof h?new _(h,s.easeParams):x[h]||R.defaultEase:R.defaultEase,s.easeParams instanceof Array&&h.config&&(this._ease=h.Configly(h,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],o?o[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,o);if(e&&R._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},s._initProps=function(e,i,n,r){var s,o,a,l,h,c;if(null==e)return!1;O[e._gsTweenID]&&W(),this.vars.css||e.style&&e!==t&&e.nodeType&&F.css&&this.vars.autoCSS!==!1&&I(this.vars,e);for(s in this.vars){if(c=this.vars[s],j[s])c&&(c instanceof Array||c.push&&p(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[s]=c=this._swapSelfInParams(c,this));else if(F[s]&&(l=new F[s])._onInitTween(e,this.vars[s],this)){for(this._firstPT=h={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:!0,n:s,pg:!0,pr:l._priority},o=l._overwriteProps.length;--o>-1;)i[l._overwriteProps[o]]=this._firstPT;(l._priority||l._onInitAllProps)&&(a=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[s]=h={_next:this._firstPT,t:e,p:s,f:"function"==typeof e[s],n:s,pg:!1,pr:0},h.s=h.f?e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(e[s]),h.c="string"==typeof c&&"="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*Number(c.substr(2)):Number(c)-h.s||0;h&&h._next&&(h._next._prev=h)}return r&&this._kill(r,e)?this._initProps(e,i,n,r):this._overwrite>1&&this._firstPT&&n.length>1&&z(e,this,i,this._overwrite,n)?(this._kill(i,e),this._initProps(e,i,n,r)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(O[e._gsTweenID]=!0),a)},s.render=function(t,e,i){var n,r,s,o,a=this._time,l=this._duration,h=this._rawPrevTime;if(t>=l)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,r="onComplete"),0===l&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>h||h===c)&&h!==t&&(i=!0,h>c&&(r="onReverseComplete")),this._rawPrevTime=o=!e||t||h===t?t:c);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===l&&h>0&&h!==c)&&(r="onReverseComplete",n=this._reversed),0>t?(this._active=!1,0===l&&(this._initted||!this.vars.lazy||i)&&(h>=0&&(i=!0),this._rawPrevTime=o=!e||t||h===t?t:c)):this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/l,d=this._easeType,p=this._easePower;(1===d||3===d&&u>=.5)&&(u=1-u),3===d&&(u*=2),1===p?u*=u:2===p?u*=u*u:3===p?u*=u*u*u:4===p&&(u*=u*u*u*u),this.ratio=1===d?1-u:2===d?u:.5>t/l?u/2:1-u/2}else this.ratio=this._ease.getRatio(t/l);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=h,L.push(this),void(this._lazy=t);this._time&&!n?this.ratio=this._ease.getRatio(this._time/l):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._time||0===l)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||y))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._time!==a||n)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||y)),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||y),0===l&&this._rawPrevTime===c&&o!==c&&(this._rawPrevTime=0))}},s._kill=function(t,e){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:R.selector(e)||e;var i,n,r,s,o,a,l,h;if((p(e)||B(e))&&"number"!=typeof e[0])for(i=e.length;--i>-1;)this._kill(t,e[i])&&(a=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(e===this._targets[i]){o=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[i]=t?this._overwrittenProps[i]||{}:"all";break}}else{if(e!==this.target)return!1;o=this._propLookup,n=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(o){l=t||o,h=t!==n&&"all"!==n&&t!==o&&("object"!=typeof t||!t._tempKill);for(r in l)(s=o[r])&&(s.pg&&s.t._kill(l)&&(a=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete o[r]),h&&(n[r]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return a},s.invalidate=function(){return this._notifyPluginsOfEnabled&&R._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=this._lazy=!1,this._propLookup=this._targets?{}:[],this},s._enabled=function(t,e){if(a||o.wake(),t&&this._gc){var i,n=this._targets;if(n)for(i=n.length;--i>-1;)this._siblings[i]=V(n[i],this,!0);else this._siblings=V(this.target,this,!0)}return A.prototype._enabled.call(this,t,e),this._notifyPluginsOfEnabled&&this._firstPT?R._onPluginEvent(t?"_onEnable":"_onDisable",this):!1},R.to=function(t,e,i){return new R(t,e,i)},R.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new R(t,e,i)},R.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new R(t,e,n)},R.delayedCall=function(t,e,i,n,r){return new R(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:n,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:n,immediateRender:!1,useFrames:r,overwrite:0})},R.set=function(t,e){return new R(t,0,e)},R.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:R.selector(t)||t;var i,n,r,s;if((p(t)||B(t))&&"number"!=typeof t[0]){for(i=t.length,n=[];--i>-1;)n=n.concat(R.getTweensOf(t[i],e));for(i=n.length;--i>-1;)for(s=n[i],r=i;--r>-1;)s===n[r]&&n.splice(i,1)}else for(n=V(t).concat(),i=n.length;--i>-1;)(n[i]._gc||e&&!n[i].isActive())&&n.splice(i,1);return n},R.killTweensOf=R.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var n=R.getTweensOf(t,e),r=n.length;--r>-1;)n[r]._kill(i,t)};var Y=v("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=Y.prototype},!0);if(s=Y.prototype,Y.version="1.10.1",Y.API=2,s._firstPT=null,s._addTween=function(t,e,i,n,r,s){var o,a;return null!=n&&(o="number"==typeof n||"="!==n.charAt(1)?Number(n)-i:parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)))?(this._firstPT=a={_next:this._firstPT,t:t,p:e,s:i,c:o,f:"function"==typeof t[e],n:r||e,r:s},a._next&&(a._next._prev=a),a):void 0},s.setRatio=function(t){for(var e,i=this._firstPT,n=1e-6;i;)e=i.c*t+i.s,i.r?e=Math.round(e):n>e&&e>-n&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},s._kill=function(t){var e,i=this._overwriteProps,n=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;n;)null!=t[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},s._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},R._onPluginEvent=function(t,e){var i,n,r,s,o,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(o=a._next,n=r;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:s)?a._prev._next=a:r=a,(a._next=n)?n._prev=a:s=a,a=o}a=e._firstPT=r}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(i=!0),a=a._next;return i},Y.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===Y.API&&(F[(new t[e])._propName]=t[e]);return!0},m.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,n=t.priority||0,r=t.overwriteProps,s={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},o=v("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){Y.call(this,i,n),this._overwriteProps=r||[]},t.global===!0),a=o.prototype=new Y(i);a.constructor=o,o.API=t.API;for(e in s)"function"==typeof t[e]&&(a[s[e]]=t[e]);return o.version=t.version,Y.activate([o]),o},n=t._gsQueue){for(r=0;n.length>r;r++)n[r]();for(s in f)f[s].func||t.console.log("GSAP encountered missing dependency: com.greensock."+s)}a=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax"),define("TweenMax",function(){}),function(t){"use strict";t.fn.replaceTag=function(e){var i,n=t(),r=t("<"+e+">"),s=this.length;for(i=0;s>i;i++){var o=this[i],a=r.clone(),l=a[0];l.className=o.className,t.extend(l.classList,o.classList),t.extend(l.attributes,o.attributes),a.html(this[i].innerHTML).replaceAll(this[i]),n.push(a)}return n},t.fn.removeCss=function(e){return this.each(function(){var i=t(this);return jQuery.grep(e.split(","),function(t){i.css(t,"")}),i})}}(jQuery),define("jquery/jquery.extension",function(){}),function(t,e,i){function n(t){var e={},n=/^jQuery\d+$/;return i.each(t.attributes,function(t,i){i.specified&&!n.test(i.name)&&(e[i.name]=i.value)}),e}function r(t,e){var n=this,r=i(n);if(n.value==r.attr("placeholder")&&r.hasClass("placeholder"))if(r.data("placeholder-password")){if(r=r.hide().next().show().attr("id",r.removeAttr("id").data("placeholder-id")),t===!0)return r[0].value=e;r.focus()}else n.value="",r.removeClass("placeholder"),n==o()&&n.select()}function s(){var t,e=this,s=i(e),o=this.id;if(""==e.value){if("password"==e.type){if(!s.data("placeholder-textinput")){try{t=s.clone().attr({type:"text"})}catch(a){t=i("<input>").attr(i.extend(n(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":s,"placeholder-id":o}).bind("focus.placeholder",r),s.data({"placeholder-textinput":t,"placeholder-id":o}).before(t)}s=s.removeAttr("id").hide().prev().attr("id",o).show()}s.addClass("placeholder"),s[0].value=s.attr("placeholder")}else s.removeClass("placeholder")}function o(){try{return e.activeElement}catch(t){}}var a,l,h="[object OperaMini]"==Object.prototype.toString.call(t.operamini),c="placeholder"in e.createElement("input")&&!h,u="placeholder"in e.createElement("textarea")&&!h,d=i.fn,p=i.valHooks,f=i.propHooks;c&&u?(l=d.placeholder=function(){return this},l.input=l.textarea=!0):(l=d.placeholder=function(){var t=this;return t.filter((c?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":r,"blur.placeholder":s}).data("placeholder-enabled",!0).trigger("blur.placeholder"),t},l.input=c,l.textarea=u,a={get:function(t){var e=i(t),n=e.data("placeholder-password");return n?n[0].value:e.data("placeholder-enabled")&&e.hasClass("placeholder")?"":t.value},set:function(t,e){var n=i(t),a=n.data("placeholder-password");return a?a[0].value=e:n.data("placeholder-enabled")?(""==e?(t.value=e,t!=o()&&s.call(t)):n.hasClass("placeholder")?r.call(t,!0,e)||(t.value=e):t.value=e,n):t.value=e}},c||(p.input=a,f.value=a),u||(p.textarea=a,f.value=a),i(function(){i(e).delegate("form","submit.placeholder",function(){var t=i(".placeholder",this).each(r);setTimeout(function(){t.each(s)},10)})}),i(t).bind("beforeunload.placeholder",function(){i(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),define("jquery/jquery.placeholder",function(){});var Hogan={};!function(t,e){function i(t){return String(null===t||void 0===t?"":t)}function n(t){return t=i(t),h.test(t)?t.replace(r,"&amp;").replace(s,"&lt;").replace(o,"&gt;").replace(a,"&#39;").replace(l,"&quot;"):t}t.Template=function(t,i,n,r){this.r=t||this.r,this.c=n,this.options=r,this.text=i||"",this.buf=e?[]:""},t.Template.prototype={r:function(t,e,i){return""},v:n,t:i,render:function(t,e,i){return this.ri([t],e||{},i)},ri:function(t,e,i){return this.r(t,e,i)},rp:function(t,e,i,n){var r=i[t];return r?(this.c&&"string"==typeof r&&(r=this.c.compile(r,this.options)),r.ri(e,i,n)):""},rs:function(t,e,i){var n=t[t.length-1];if(!c(n))return void i(t,e,this);for(var r=0;r<n.length;r++)t.push(n[r]),i(t,e,this),t.pop()},s:function(t,e,i,n,r,s,o){var a;return c(t)&&0===t.length?!1:("function"==typeof t&&(t=this.ls(t,e,i,n,r,s,o)),a=""===t||!!t,!n&&a&&e&&e.push("object"==typeof t?t:e[e.length-1]),a)},d:function(t,e,i,n){var r=t.split("."),s=this.f(r[0],e,i,n),o=null;if("."===t&&c(e[e.length-2]))return e[e.length-1];for(var a=1;a<r.length;a++)s&&"object"==typeof s&&r[a]in s?(o=s,s=s[r[a]]):s="";return n&&!s?!1:(n||"function"!=typeof s||(e.push(o),s=this.lv(s,e,i),e.pop()),s)},f:function(t,e,i,n){for(var r=!1,s=null,o=!1,a=e.length-1;a>=0;a--)if(s=e[a],s&&"object"==typeof s&&t in s){r=s[t],o=!0;break}return o?(n||"function"!=typeof r||(r=this.lv(r,e,i)),r):n?!1:""},ho:function(t,e,i,n,r){var s=this.c,o=this.options;o.delimiters=r;var n=t.call(e,n);return n=null==n?String(n):n.toString(),this.b(s.compile(n,o).render(e,i)),!1},b:e?function(t){this.buf.push(t)}:function(t){this.buf+=t},fl:e?function(){var t=this.buf.join("");return this.buf=[],t}:function(){var t=this.buf;return this.buf="",t},ls:function(t,e,i,n,r,s,o){var a=e[e.length-1],l=null;if(!n&&this.c&&t.length>0)return this.ho(t,a,i,this.text.substring(r,s),o);if(l=t.call(a),"function"==typeof l){if(n)return!0;if(this.c)return this.ho(l,a,i,this.text.substring(r,s),o)}return l},lv:function(t,e,n){var r=e[e.length-1],s=t.call(r);return"function"==typeof s&&(s=i(s.call(r)),this.c&&~s.indexOf("{{"))?this.c.compile(s,this.options).render(r,n):i(s)}};var r=/&/g,s=/</g,o=/>/g,a=/\'/g,l=/\"/g,h=/[&<>\"\']/,c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}("undefined"!=typeof exports?exports:Hogan),function(t){function e(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function i(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function n(t,e,i){if(e.charAt(i)!=t.charAt(0))return!1;for(var n=1,r=t.length;r>n;n++)if(e.charAt(i+n)!=t.charAt(n))return!1;return!0}function r(t,e,i,n){for(var a=[],l=null,h=null;t.length>0;)if(h=t.shift(),"#"==h.tag||"^"==h.tag||s(h,n))i.push(h),h.nodes=r(t,h.tag,i,n),a.push(h);else{if("/"==h.tag){if(0===i.length)throw new Error("Closing tag without opener: /"+h.n);if(l=i.pop(),h.n!=l.n&&!o(h.n,l.n,n))throw new Error("Nesting error: "+l.n+" vs. "+h.n);return l.end=h.i,a}a.push(h)}if(i.length>0)throw new Error("missing closing tag: "+i.pop().n);return a}function s(t,e){for(var i=0,n=e.length;n>i;i++)if(e[i].o==t.n)return t.tag="#",!0}function o(t,e,i){for(var n=0,r=i.length;r>n;n++)if(i[n].c==t&&i[n].o==e)return!0}function a(t){return t.replace(_,"\\\\").replace(v,'\\"').replace(b,"\\n").replace(y,"\\r")}function l(t){return~t.indexOf(".")?"d":"f"}function h(t){for(var e="",i=0,n=t.length;n>i;i++){var r=t[i].tag;"#"==r?e+=c(t[i].nodes,t[i].n,l(t[i].n),t[i].i,t[i].end,t[i].otag+" "+t[i].ctag):"^"==r?e+=u(t[i].nodes,t[i].n,l(t[i].n)):"<"==r||">"==r?e+=d(t[i]):"{"==r||"&"==r?e+=p(t[i].n,l(t[i].n)):"\n"==r?e+=g('"\\n"'+(t.length-1==i?"":" + i")):"_v"==r?e+=f(t[i].n,l(t[i].n)):void 0===r&&(e+=g('"'+a(t[i])+'"'))}return e}function c(t,e,i,n,r,s){return"if(_.s(_."+i+'("'+a(e)+'",c,p,1),c,p,0,'+n+","+r+',"'+s+'")){_.rs(c,p,function(c,p,_){'+h(t)+"});c.pop();}"}function u(t,e,i){return"if(!_.s(_."+i+'("'+a(e)+'",c,p,1),c,p,1,0,0,"")){'+h(t)+"};"}function d(t){return'_.b(_.rp("'+a(t.n)+'",c,p,"'+(t.indent||"")+'"));'}function p(t,e){return"_.b(_.t(_."+e+'("'+a(t)+'",c,p,0)));'}function f(t,e){return"_.b(_.v(_."+e+'("'+a(t)+'",c,p,0)));'}function g(t){return"_.b("+t+");"}var m=/\S/,v=/\"/g,b=/\n/g,y=/\r/g,_=/\\/g,x={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};t.scan=function(t,r){function s(){v.length>0&&(b.push(new String(v)),v="")}function o(){for(var t=!0,e=w;e<b.length;e++)if(t=b[e].tag&&x[b[e].tag]<x._v||!b[e].tag&&null===b[e].match(m),!t)return!1;return t}function a(t,e){if(s(),t&&o())for(var i,n=w;n<b.length;n++)b[n].tag||((i=b[n+1])&&">"==i.tag&&(i.indent=b[n].toString()),b.splice(n,1));else e||b.push({tag:"\n"});y=!1,w=b.length}function l(t,e){var n="="+C,r=t.indexOf(n,e),s=i(t.substring(t.indexOf("=",e)+1,r)).split(" ");return T=s[0],C=s[1],r+n.length-1}var h=t.length,c=0,u=1,d=2,p=c,f=null,g=null,v="",b=[],y=!1,_=0,w=0,T="{{",C="}}";for(r&&(r=r.split(" "),T=r[0],C=r[1]),_=0;h>_;_++)p==c?n(T,t,_)?(--_,s(),p=u):"\n"==t.charAt(_)?a(y):v+=t.charAt(_):p==u?(_+=T.length-1,
g=x[t.charAt(_+1)],f=g?t.charAt(_+1):"_v","="==f?(_=l(t,_),p=c):(g&&_++,p=d),y=_):n(C,t,_)?(b.push({tag:f,n:i(v),otag:T,ctag:C,i:"/"==f?y-C.length:_+T.length}),v="",_+=C.length-1,p=c,"{"==f&&("}}"==C?_++:e(b[b.length-1]))):v+=t.charAt(_);return a(y,!0),b},t.generate=function(e,i,n){var r='var _=this;_.b(i=i||"");'+h(e)+"return _.fl();";return n.asString?"function(c,p,i){"+r+";}":new t.Template(new Function("c","p","i",r),i,t,n)},t.parse=function(t,e,i){return i=i||{},r(t,"",[],i.sectionTags||[])},t.cache={},t.compile=function(t,e){e=e||{};var i=t+"||"+!!e.asString,n=this.cache[i];return n?n:(n=this.generate(this.parse(this.scan(t,e.delimiters),t,e),t,e),this.cache[i]=n)}}("undefined"!=typeof exports?exports:Hogan),"function"==typeof define&&define.amd&&define("hogan",Hogan),define("text",["module"],function(t){"use strict";var e,i,n=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o="undefined"!=typeof location&&location.href,a=o&&location.protocol&&location.protocol.replace(/\:/,""),l=o&&location.hostname,h=o&&(location.port||void 0),c=[],u=t.config();return e={version:"2.0.0",strip:function(t){if(t){t=t.replace(r,"");var e=t.match(s);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,e,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e++){i=n[e];try{t=new ActiveXObject(i)}catch(r){}if(t){n=[i];break}}return t},parseName:function(t){var e=!1,i=t.indexOf("."),n=t.substring(0,i),r=t.substring(i+1,t.length);return i=r.indexOf("!"),-1!==i&&(e=r.substring(i+1,r.length),e="strip"===e,r=r.substring(0,i)),{moduleName:n,ext:r,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,i,n,r){var s,o,a,l=e.xdRegExp.exec(t);return l?(s=l[2],o=l[3],o=o.split(":"),a=o[1],o=o[0],!(s&&s!==i||o&&o!==n||(a||o)&&a!==r)):!0},finishLoad:function(t,i,n,r){n=i?e.strip(n):n,u.isBuild&&(c[t]=n),r(n)},load:function(t,i,n,r){if(r.isBuild&&!r.inlineText)return void n();u.isBuild=r.isBuild;var s=e.parseName(t),c=s.moduleName+"."+s.ext,d=i.toUrl(c),p=u.useXhr||e.useXhr;!o||p(d,a,l,h)?e.get(d,function(i){e.finishLoad(t,s.strip,i,n)},function(t){n.error&&n.error(t)}):i([c],function(t){e.finishLoad(s.moduleName+"."+s.ext,s.strip,t,n)})},write:function(t,i,n,r){if(c.hasOwnProperty(i)){var s=e.jsEscape(c[i]);n.asModule(t+"!"+i,"define(function () { return '"+s+"';});\n")}},writeFile:function(t,i,n,r,s){var o=e.parseName(i),a=o.moduleName+"."+o.ext,l=n.toUrl(o.moduleName+"."+o.ext)+".js";e.load(a,n,function(i){var n=function(t){return r(l,t)};n.asModule=function(t,e){return r.asModule(t,l,e)},e.write(t,a,n,s)},s)}},"undefined"!=typeof process&&process.versions&&process.versions.node?(i=require.nodeRequire("fs"),e.get=function(t,e){var n=i.readFileSync(t,"utf8");0===n.indexOf("\ufeff")&&(n=n.substring(1)),e(n)}):e.createXhr()?e.get=function(t,i,n){var r=e.createXhr();r.open("GET",t,!0),u.onXhr&&u.onXhr(r,t),r.onreadystatechange=function(e){var s,o;4===r.readyState&&(s=r.status,s>399&&600>s?(o=new Error(t+" HTTP status: "+s),o.xhr=r,n(o)):i(r.responseText))},r.send(null)}:"undefined"!=typeof Packages&&(e.get=function(t,e){var i,n,r="utf-8",s=new java.io.File(t),o=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),r)),l="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),i.append(n);null!==(n=a.readLine());)i.append(o),i.append(n);l=String(i.toString())}finally{a.close()}e(l)}),e}),define("hgn",["hogan","text"],function(t,e){function i(i,s,o,h){var c=h.hgn||{},u=i;u+=c&&null!=c.templateExtension?c.templateExtension:a,e.get(s.toUrl(u),function(e){var s=c.compilationOptions?r({},c.compilationOptions):{};h.isBuild&&(s.asString=!0,l[i]=t.compile(e,s));var a=t.compile(e,s),u=n(a.render,a);u.text=a.text,u.template=a,o(u)})}function n(t,e){return function(){return t.apply(e,arguments)}}function r(t,e){var i;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}function s(e,i,n){if(i in l){o||(o=t.compile(h));var r=l[i];n(o.render({pluginName:e,moduleName:i,fn:r}))}}var o,a=".mustache",l={},h='define("{{pluginName}}!{{moduleName}}", ["hogan"], function(hogan){  var tmpl = new hogan.Template({{{fn}}}, "", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n';return{load:i,write:s}}),define("async",[],function(){function t(t){var e,i;e=document.createElement("script"),e.type="text/javascript",e.async=!0,e.src=t,i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(e,i)}function e(t,e){var i=/!(.+)/,r=t.replace(i,""),s=i.test(t)?t.replace(/.+!/,""):n;return r+=r.indexOf("?")<0?"?":"&",r+s+"="+e}function i(){return r+=1,"__async_req_"+r+"__"}var n="callback",r=0;return{load:function(n,r,s,o){if(o.isBuild)s(null);else{var a=i();window[a]=s,t(e(n,a))}}}}),window.grunticon=function(t){if(t&&3===t.length){var e=window,i=!(!e.document.createElementNS||!e.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||window.opera&&-1===navigator.userAgent.indexOf("Chrome")),n=function(n){var r=e.document.createElement("link"),s=e.document.getElementsByTagName("script")[0];r.rel="stylesheet",r.href=t[n&&i?0:n?1:2],r.media="only x",s.parentNode.insertBefore(r,s),setTimeout(function(){r.media="all"})},r=new e.Image;r.onerror=function(){n(!1)},r.onload=function(){n(1===r.width&&1===r.height)},r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}},define("lib/grunt/icon.loader",function(){});var dat=dat||{};dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css=function(){return{load:function(t,e){e=e||document;var i=e.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t,e.getElementsByTagName("head")[0].appendChild(i)},inject:function(t,e){e=e||document;var i=document.createElement("style");i.type="text/css",i.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(i)}}}(),dat.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var i in e)this.isUndefined(e[i])||(t[i]=e[i])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var i in e)this.isUndefined(t[i])&&(t[i]=e[i])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var i=e.call(arguments),n=t.length-1;n>=0;n--)i=[t[n].apply(this,i)];return i[0]}},each:function(e,i,n){if(e)if(t&&e.forEach&&e.forEach===t)e.forEach(i,n);else if(e.length===e.length+0){for(var r=0,s=e.length;s>r;r++)if(r in e&&i.call(n,e[r],r)===this.BREAK)return}else for(var r in e)if(i.call(n,e[r],r)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),dat.controllers.Controller=function(t){var e=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0};return t.extend(e.prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),e}(dat.utils.common),dat.dom.dom=function(t){function e(e){if("0"===e||t.isUndefined(e))return 0;var i=e.match(r);return t.isNull(i)?0:parseFloat(i[1])}var i={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},n={};t.each(i,function(e,i){t.each(e,function(t){n[t]=i})});var r=/(\d+(\.\d+)?)px/,s={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(e,i,n){t.isUndefined(i)&&(i=!0),t.isUndefined(n)&&(n=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),n&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,i,r,s){r=r||{};var o=n[i];if(!o)throw new Error("Event type "+i+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var l=r.x||r.clientX||0,h=r.y||r.clientY||0;a.initMouseEvent(i,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,l,h,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;t.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(i,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:a.initEvent(i,r.bubbles||!1,r.cancelable||!0)}t.defaults(a,s),e.dispatchEvent(a)},bind:function(t,e,i,n){return n=n||!1,t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&t.attachEvent("on"+e,i),s},unbind:function(t,e,i,n){return n=n||!1,t.removeEventListener?t.removeEventListener(e,i,n):t.detachEvent&&t.detachEvent("on"+e,i),s},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var i=t.className.split(/ +/);-1==i.indexOf(e)&&(i.push(e),t.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return s},removeClass:function(t,e){if(e)if(void 0===t.className);else if(t.className===e)t.removeAttribute("class");else{var i=t.className.split(/ +/),n=i.indexOf(e);-1!=n&&(i.splice(n,1),t.className=i.join(" "))}else t.className=void 0;return s},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var i=getComputedStyle(t);return e(i["border-left-width"])+e(i["border-right-width"])+e(i["padding-left"])+e(i["padding-right"])+e(i.width)},getHeight:function(t){var i=getComputedStyle(t);return e(i["border-top-width"])+e(i["border-bottom-width"])+e(i["padding-top"])+e(i["padding-bottom"])+e(i.height)},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)do e.left+=t.offsetLeft,e.top+=t.offsetTop;while(t=t.offsetParent);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return s}(dat.utils.common),dat.controllers.OptionController=function(t,e,i){var n=function(t,r,s){n.superclass.call(this,t,r);var o=this;if(this.__select=document.createElement("select"),i.isArray(s)){var a={};i.each(s,function(t){a[t]=t}),s=a}i.each(s,function(t,e){var i=document.createElement("option");i.innerHTML=e,i.setAttribute("value",t),o.__select.appendChild(i)}),this.updateDisplay(),e.bind(this.__select,"change",function(){var t=this.options[this.selectedIndex].value;o.setValue(t)}),this.domElement.appendChild(this.__select)};return n.superclass=t,i.extend(n.prototype,t.prototype,{setValue:function(t){var e=n.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),n.superclass.prototype.updateDisplay.call(this)}}),n}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(t,e){function i(t){return t=t.toString(),t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var n=function(t,r,s){n.superclass.call(this,t,r),s=s||{},this.__min=s.min,this.__max=s.max,this.__step=s.step,e.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=i(this.__impliedStep)};return n.superclass=t,e.extend(n.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),n.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=i(t),this}}),n}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(t,e,i){function n(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}var r=function(t,n,s){function o(){var t=parseFloat(d.__input.value);i.isNaN(t)||d.setValue(t)}function a(){o(),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}function l(t){e.bind(window,"mousemove",h),e.bind(window,"mouseup",c),u=t.clientY}function h(t){var e=u-t.clientY;d.setValue(d.getValue()+e*d.__impliedStep),u=t.clientY}function c(){e.unbind(window,"mousemove",h),e.unbind(window,"mouseup",c)}this.__truncationSuspended=!1,r.superclass.call(this,t,n,s);var u,d=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"change",o),e.bind(this.__input,"blur",a),e.bind(this.__input,"mousedown",l),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&(d.__truncationSuspended=!0,this.blur(),d.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=t,i.extend(r.prototype,t.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():n(this.getValue(),this.__precision),r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(t,e,i,n,r){function s(t,e,i,n,r){return n+(r-n)*((t-e)/(i-e))}var o=function(t,i,n,r,a){function l(t){e.bind(window,"mousemove",h),e.bind(window,"mouseup",c),h(t)}function h(t){t.preventDefault();var i=e.getOffset(u.__background),n=e.getWidth(u.__background);return u.setValue(s(t.clientX,i.left,i.left+n,u.__min,u.__max)),!1}function c(){e.unbind(window,"mousemove",h),e.unbind(window,"mouseup",c),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}o.superclass.call(this,t,i,{min:n,max:r,step:a});var u=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),e.bind(this.__background,"mousedown",l),e.addClass(this.__background,"slider"),e.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return o.superclass=t,o.useDefaultStyles=function(){i.inject(r)},n.extend(o.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",o.superclass.prototype.updateDisplay.call(this)}}),o}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,"/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),dat.controllers.FunctionController=function(t,e,i){var n=function(t,i,r){n.superclass.call(this,t,i);var s=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===r?"Fire":r,e.bind(this.__button,"click",function(t){return t.preventDefault(),s.fire(),!1}),e.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return n.superclass=t,i.extend(n.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),n}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(t,e,i){var n=function(t,i){function r(){s.setValue(!s.__prev)}n.superclass.call(this,t,i);var s=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),e.bind(this.__checkbox,"change",r,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return n.superclass=t,i.extend(n.prototype,t.prototype,{setValue:function(t){var e=n.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,n.superclass.prototype.updateDisplay.call(this)}}),n}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var i=e.hex.toString(16);i.length<6;)i="0"+i;return"#"+i}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(dat.utils.common),dat.color.interpret=function(t,e){var i,n,r=function(){n=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(s,function(r){return r.litmus(t)?(e.each(r.conversions,function(r,s){return i=r.read(t),n===!1&&i!==!1?(n=i,i.conversionName=s,i.conversion=r,e.BREAK):void 0}),e.BREAK):void 0}),n},s=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===e?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null===e?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===e?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===e?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3!=t.length?!1:{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4!=t.length?!1:{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a)?{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)?{space:"RGB",r:t.r,g:t.g,b:t.b}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a)?{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)?{space:"HSV",h:t.h,s:t.s,v:t.v}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return r}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(t,e,i,n,r,s,o,a,l,h,c,u,d,p,f){function g(t,e,i,s){if(void 0===e[i])throw new Error("Object "+e+' has no property "'+i+'"');var o;if(s.color)o=new c(e,i);else{var a=[e,i].concat(s.factoryArgs);o=n.apply(t,a)}s.before instanceof r&&(s.before=s.before.__li),b(t,o),p.addClass(o.domElement,"c");var l=document.createElement("span");p.addClass(l,"property-name"),l.innerHTML=o.property;var h=document.createElement("div");h.appendChild(l),h.appendChild(o.domElement);var u=m(t,h,s.before);return p.addClass(u,N.CLASS_CONTROLLER_ROW),p.addClass(u,typeof o.getValue()),v(t,u,o),t.__controllers.push(o),o}function m(t,e,i){var n=document.createElement("li");return e&&n.appendChild(e),i?t.__ul.insertBefore(n,params.before):t.__ul.appendChild(n),t.onResize(),n}function v(t,e,i){if(i.__li=e,i.__gui=t,f.extend(i,{options:function(e){return arguments.length>1?(i.remove(),g(t,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[f.toArray(arguments)]})):f.isArray(e)||f.isObject(e)?(i.remove(),g(t,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return i.__li.firstElementChild.firstElementChild.innerHTML=t,i},listen:function(){return i.__gui.listen(i),i},remove:function(){return i.__gui.remove(i),i}}),i instanceof l){var n=new a(i.object,i.property,{min:i.__min,max:i.__max,step:i.__step});f.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=i[t],r=n[t];i[t]=n[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(i,t),r.apply(n,t)}}),p.addClass(e,"has-slider"),i.domElement.insertBefore(n.domElement,i.domElement.firstElementChild)}else if(i instanceof a){var r=function(e){return f.isNumber(i.__min)&&f.isNumber(i.__max)?(i.remove(),g(t,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[i.__min,i.__max,i.__step]})):e};i.min=f.compose(r,i.min),i.max=f.compose(r,i.max)}else i instanceof s?(p.bind(e,"click",function(){p.fakeEvent(i.__checkbox,"click")}),p.bind(i.__checkbox,"click",function(t){t.stopPropagation()})):i instanceof o?(p.bind(e,"click",function(){p.fakeEvent(i.__button,"click")}),p.bind(e,"mouseover",function(){p.addClass(i.__button,"hover")}),p.bind(e,"mouseout",function(){p.removeClass(i.__button,"hover")})):i instanceof c&&(p.addClass(e,"color"),i.updateDisplay=f.compose(function(t){return e.style.borderLeftColor=i.__color.toString(),t},i.updateDisplay),i.updateDisplay());i.setValue=f.compose(function(e){return t.getRoot().__preset_select&&i.isModified()&&E(t.getRoot(),!0),e},i.setValue)}function b(t,e){var i=t.getRoot(),n=i.__rememberedObjects.indexOf(e.object);if(-1!=n){var r=i.__rememberedObjectIndecesToControllers[n];if(void 0===r&&(r={},i.__rememberedObjectIndecesToControllers[n]=r),r[e.property]=e,i.load&&i.load.remembered){var s,o=i.load.remembered;if(o[t.preset])s=o[t.preset];else{if(!o[I])return;s=o[I]}if(s[n]&&void 0!==s[n][e.property]){var a=s[n][e.property];e.initialValue=a,e.setValue(a)}}}}function y(t,e){return document.location.href+"."+e}function _(t){function e(){h.style.display=t.useLocalStorage?"block":"none"}var i=t.__save_row=document.createElement("li");p.addClass(t.domElement,"has-save"),t.__ul.insertBefore(i,t.__ul.firstChild),p.addClass(i,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",p.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",p.addClass(r,"button"),p.addClass(r,"save");var s=document.createElement("span");s.innerHTML="New",p.addClass(s,"button"),p.addClass(s,"save-as");var o=document.createElement("span");o.innerHTML="Revert",p.addClass(o,"button"),p.addClass(o,"revert");var a=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?f.each(t.load.remembered,function(e,i){C(t,i,i==t.preset)}):C(t,I,!1),p.bind(a,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),i.appendChild(a),i.appendChild(n),i.appendChild(r),i.appendChild(s),i.appendChild(o),L){var l=document.getElementById("dg-save-locally"),h=document.getElementById("dg-local-explain");l.style.display="block";var c=document.getElementById("dg-local-storage");"true"===localStorage.getItem(y(t,"isLocal"))&&c.setAttribute("checked","checked"),e(),p.bind(c,"change",function(){t.useLocalStorage=!t.useLocalStorage,e()})}var u=document.getElementById("dg-new-constructor");p.bind(u,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||A.hide()}),p.bind(n,"click",function(){u.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),A.show(),u.focus(),u.select()}),p.bind(r,"click",function(){t.save()}),p.bind(s,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),p.bind(o,"click",function(){t.revert()})}function x(t){function e(e){return e.preventDefault(),r=e.clientX,p.addClass(t.__closeButton,N.CLASS_DRAG),p.bind(window,"mousemove",i),p.bind(window,"mouseup",n),!1}function i(e){return e.preventDefault(),t.width+=r-e.clientX,t.onResize(),r=e.clientX,!1}function n(){p.removeClass(t.__closeButton,N.CLASS_DRAG),p.unbind(window,"mousemove",i),p.unbind(window,"mouseup",n)}t.__resize_handle=document.createElement("div"),f.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var r;p.bind(t.__resize_handle,"mousedown",e),p.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function w(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function T(t,e){var i={};return f.each(t.__rememberedObjects,function(n,r){var s={},o=t.__rememberedObjectIndecesToControllers[r];f.each(o,function(t,i){s[i]=e?t.initialValue:t.getValue()}),i[r]=s}),i}function C(t,e,i){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.__preset_select.appendChild(n),i&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function S(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value==t.preset&&(t.__preset_select.selectedIndex=e)}function E(t,e){var i=t.__preset_select[t.__preset_select.selectedIndex];e?i.innerHTML=i.value+"*":i.innerHTML=i.value}function M(t){0!=t.length&&u(function(){M(t)}),f.each(t,function(t){t.updateDisplay()})}t.inject(i);var A,k,P="dg",R=72,B=20,I="Default",L=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),O=!0,D=!1,F=[],N=function(t){function e(){var t=i.getRoot();t.width+=1,f.defer(function(){t.width-=1})}var i=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),p.addClass(this.domElement,P),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=f.defaults(t,{autoPlace:!0,width:N.DEFAULT_WIDTH}),t=f.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),f.isUndefined(t.load)?t.load={preset:I}:t.preset&&(t.load.preset=t.preset),f.isUndefined(t.parent)&&t.hideable&&F.push(this),t.resizable=f.isUndefined(t.parent)&&t.resizable,t.autoPlace&&f.isUndefined(t.scrollable)&&(t.scrollable=!0);var n,r=L&&"true"===localStorage.getItem(y(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return i.parent?i.getRoot().preset:t.load.preset},set:function(e){i.parent?i.getRoot().preset=e:t.load.preset=e,S(this),i.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,w(i,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,o&&(o.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(e){t.closed=e,t.closed?p.addClass(i.__ul,N.CLASS_CLOSED):p.removeClass(i.__ul,N.CLASS_CLOSED),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=e?N.TEXT_OPEN:N.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return r},set:function(t){L&&(r=t,t?p.bind(window,"unload",n):p.unbind(window,"unload",n),localStorage.setItem(y(i,"isLocal"),t))}}}),f.isUndefined(t.parent)){if(t.closed=!1,p.addClass(this.domElement,N.CLASS_MAIN),p.makeSelectable(this.domElement,!1),L&&r){i.useLocalStorage=!0;var s=localStorage.getItem(y(this,"gui"));s&&(t.load=JSON.parse(s))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=N.TEXT_CLOSED,p.addClass(this.__closeButton,N.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),p.bind(this.__closeButton,"click",function(){i.closed=!i.closed})}else{void 0===t.closed&&(t.closed=!0);var o=document.createTextNode(t.name);p.addClass(o,"controller-name");var a=m(i,o),l=function(t){return t.preventDefault(),i.closed=!i.closed,!1};p.addClass(this.__ul,N.CLASS_CLOSED),p.addClass(a,"title"),p.bind(a,"click",l),t.closed||(this.closed=!1)}t.autoPlace&&(f.isUndefined(t.parent)&&(O&&(k=document.createElement("div"),p.addClass(k,P),p.addClass(k,N.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(k),O=!1),k.appendChild(this.domElement),p.addClass(this.domElement,N.CLASS_AUTO_PLACE)),this.parent||w(i,t.width)),p.bind(window,"resize",function(){i.onResize()}),p.bind(this.__ul,"webkitTransitionEnd",function(){i.onResize()}),p.bind(this.__ul,"transitionend",function(){i.onResize()}),p.bind(this.__ul,"oTransitionEnd",function(){i.onResize()}),this.onResize(),t.resizable&&x(this),n=function(){L&&"true"===localStorage.getItem(y(i,"isLocal"))&&localStorage.setItem(y(i,"gui"),JSON.stringify(i.getSaveObject()))},this.saveToLocalStorageIfPossible=n;i.getRoot();t.parent||e()};return N.toggleHide=function(){D=!D,f.each(F,function(t){t.domElement.style.zIndex=D?-999:999,t.domElement.style.opacity=D?0:1})},N.CLASS_AUTO_PLACE="a",N.CLASS_AUTO_PLACE_CONTAINER="ac",N.CLASS_MAIN="main",N.CLASS_CONTROLLER_ROW="cr",N.CLASS_TOO_TALL="taller-than-window",N.CLASS_CLOSED="closed",N.CLASS_CLOSE_BUTTON="close-button",N.CLASS_DRAG="drag",N.DEFAULT_WIDTH=245,N.TEXT_CLOSED="Close Controls",N.TEXT_OPEN="Open Controls",p.bind(window,"keydown",function(t){"text"===document.activeElement.type||t.which!==R&&t.keyCode!=R||N.toggleHide()},!1),f.extend(N.prototype,{add:function(t,e){return g(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return g(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;f.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&k.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var i=new N(e);this.__folders[t]=i;var n=m(this,i.domElement);return p.addClass(n,"folder"),i},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=p.getOffset(t.__ul).top,i=0;
f.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(i+=p.getHeight(e))}),window.innerHeight-e-B<i?(p.addClass(t.domElement,N.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-B+"px"):(p.removeClass(t.domElement,N.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&f.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(f.isUndefined(A)&&(A=new d,A.domElement.innerHTML=e),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;f.each(Array.prototype.slice.call(arguments),function(e){0==t.__rememberedObjects.length&&_(t),-1==t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&w(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=T(this)),t.folders={},f.each(this.__folders,function(e,i){t.folders[i]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=T(this),E(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[I]=T(this,!0)),this.load.remembered[t]=T(this),this.preset=t,C(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){f.each(this.__controllers,function(e){this.getRoot().load.remembered?b(t||this.getRoot(),e):e.setValue(e.initialValue)},this),f.each(this.__folders,function(t){t.revert(t)}),t||E(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&M(this.__listening)}}),N}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n",dat.controllers.factory=function(t,e,i,n,r,s,o){return function(a,l){var h=a[l];return o.isArray(arguments[2])||o.isObject(arguments[2])?new t(a,l,arguments[2]):o.isNumber(h)?o.isNumber(arguments[2])&&o.isNumber(arguments[3])?new i(a,l,arguments[2],arguments[3]):new e(a,l,{min:arguments[2],max:arguments[3]}):o.isString(h)?new n(a,l):o.isFunction(h)?new r(a,l,""):o.isBoolean(h)?new s(a,l):void 0}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(t,e,i){var n=function(t,i){function r(){o.setValue(o.__input.value)}function s(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}n.superclass.call(this,t,i);var o=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"keyup",r),e.bind(this.__input,"change",r),e.bind(this.__input,"blur",s),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return n.superclass=t,i.extend(n.prototype,t.prototype,{updateDisplay:function(){return e.isActive(this.__input)||(this.__input.value=this.getValue()),n.superclass.prototype.updateDisplay.call(this)}}),n}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(t,e,i,n,r){function s(t,e,i,n){t.style.background="",r.each(l,function(r){t.style.cssText+="background: "+r+"linear-gradient("+e+", "+i+" 0%, "+n+" 100%); "})}function o(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var a=function(t,l){function h(t){p(t),e.bind(window,"mousemove",p),e.bind(window,"mouseup",c)}function c(){e.unbind(window,"mousemove",p),e.unbind(window,"mouseup",c)}function u(){var t=n(this.value);t!==!1?(g.__color.__state=t,g.setValue(g.__color.toOriginal())):this.value=g.__color.toString()}function d(){e.unbind(window,"mousemove",f),e.unbind(window,"mouseup",d)}function p(t){t.preventDefault();var i=e.getWidth(g.__saturation_field),n=e.getOffset(g.__saturation_field),r=(t.clientX-n.left+document.body.scrollLeft)/i,s=1-(t.clientY-n.top+document.body.scrollTop)/i;return s>1?s=1:0>s&&(s=0),r>1?r=1:0>r&&(r=0),g.__color.v=s,g.__color.s=r,g.setValue(g.__color.toOriginal()),!1}function f(t){t.preventDefault();var i=e.getHeight(g.__hue_field),n=e.getOffset(g.__hue_field),r=1-(t.clientY-n.top+document.body.scrollTop)/i;return r>1?r=1:0>r&&(r=0),g.__color.h=360*r,g.setValue(g.__color.toOriginal()),!1}a.superclass.call(this,t,l),this.__color=new i(this.getValue()),this.__temp=new i(0);var g=this;this.domElement=document.createElement("div"),e.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",e.bind(this.__input,"keydown",function(t){13===t.keyCode&&u.call(this)}),e.bind(this.__input,"blur",u),e.bind(this.__selector,"mousedown",function(t){e.addClass(this,"drag").bind(window,"mouseup",function(t){e.removeClass(g.__selector,"drag")})});var m=document.createElement("div");r.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),r.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),r.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),r.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),r.extend(m.style,{width:"100%",height:"100%",background:"none"}),s(m,"top","rgba(0,0,0,0)","#000"),r.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),o(this.__hue_field),r.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),e.bind(this.__saturation_field,"mousedown",h),e.bind(this.__field_knob,"mousedown",h),e.bind(this.__hue_field,"mousedown",function(t){f(t),e.bind(window,"mousemove",f),e.bind(window,"mouseup",d)}),this.__saturation_field.appendChild(m),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=t,r.extend(a.prototype,t.prototype,{updateDisplay:function(){var t=n(this.getValue());if(t!==!1){var e=!1;r.each(i.COMPONENTS,function(i){return r.isUndefined(t[i])||r.isUndefined(this.__color.__state[i])||t[i]===this.__color.__state[i]?void 0:(e=!0,{})},this),e&&r.extend(this.__color.__state,t)}r.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var o=this.__color.v<.5||this.__color.s>.5?255:0,a=255-o;r.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+o+","+o+","+o+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,s(this.__saturation_field,"left","#fff",this.__temp.toString()),r.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+o+","+o+","+o+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];return a}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(t,e,i,n){function r(t,e,i){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(o(this,e,i),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(o(this,e,i),this.__state.space="RGB"),this.__state[e]=t}})}function s(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function o(t,i,r){if("HEX"===t.__state.space)t.__state[i]=e.component_from_hex(t.__state.hex,r);else{if("HSV"!==t.__state.space)throw"Corrupted color state";n.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var i=e.rgb_to_hsv(t.r,t.g,t.b);n.extend(t.__state,{s:i.s,v:i.v}),n.isNaN(i.h)?n.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=i.h}var l=function(){if(this.__state=t.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return l.COMPONENTS=["r","g","b","h","s","v","hex","a"],n.extend(l.prototype,{toString:function(){return i(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),r(l.prototype,"r",2),r(l.prototype,"g",1),r(l.prototype,"b",0),s(l.prototype,"h"),s(l.prototype,"s"),s(l.prototype,"v"),Object.defineProperty(l.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(l.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),l}(dat.color.interpret,dat.color.math=function(){var t;return{hsv_to_rgb:function(t,e,i){var n=Math.floor(t/60)%6,r=t/60-Math.floor(t/60),s=i*(1-e),o=i*(1-r*e),a=i*(1-(1-r)*e),l=[[i,a,s],[o,i,s],[s,i,a],[s,o,i],[a,s,i],[i,s,o]][n];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(t,e,i){var n,r,s=Math.min(t,e,i),o=Math.max(t,e,i),a=o-s;return 0==o?{h:NaN,s:0,v:0}:(r=a/o,n=t==o?(e-i)/a:e==o?2+(i-t)/a:4+(t-e)/a,n/=6,0>n&&(n+=1),{h:360*n,s:r,v:o/255})},rgb_to_hex:function(t,e,i){var n=this.hex_with_component(0,2,t);return n=this.hex_with_component(n,1,e),n=this.hex_with_component(n,0,i)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,i,n){return n<<(t=8*i)|e&~(255<<t)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}(),dat.dom.CenteredDiv=function(t,e){var i=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),t.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var i=this;t.bind(this.backgroundElement,"click",function(){i.hide()})};return i.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},i.prototype.hide=function(){var e=this,i=function(){e.domElement.style.display="none",e.backgroundElement.style.display="none",t.unbind(e.domElement,"webkitTransitionEnd",i),t.unbind(e.domElement,"transitionend",i),t.unbind(e.domElement,"oTransitionEnd",i)};t.bind(this.domElement,"webkitTransitionEnd",i),t.bind(this.domElement,"transitionend",i),t.bind(this.domElement,"oTransitionEnd",i),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},i.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-t.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-t.getHeight(this.domElement)/2+"px"},i}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common),define("lib/dat/dat.gui",function(){}),psy.track={},psy.track.TYPE_EVENT="event",psy.track.TYPE_VIEW="pageview",psy.track._clickGAHandler=function(t){var e=$(t.currentTarget).data().ga.split("/");this.trackGAEvent(e[0],e[1],e[2])},psy.track._callClickGAHandler=$.proxy(psy.track._clickGAHandler,psy.track),psy.track.bindGAEvent=function(t){var e=this;t.find("*[data-ga]").each(function(){$(this).off("click",e._callClickGAHandler),$(this).on("click",e._callClickGAHandler)})},psy.track.GAView=function(t,e){var i={hitType:this.TYPE_VIEW,page:t,title:e};Config.PACKAGE_MODE&&ga("send",i)},psy.track.GAEvent=function(t,e,i){var n={hitType:this.TYPE_EVENT,eventCategory:e||"button",eventAction:i||"click",eventLabel:t||""};Config.PACKAGE_MODE&&ga("send",n)},define("psy/psy.track",function(){}),psy.pixi={},psy.pixi.PATH_TYPE_BEZIER="bezier",psy.pixi.PATH_TYPE_LINE="line",psy.pixi.colorToHex=function(t){return void 0===t?0:(t=t.replace(/^#/,""),t=t.slice(t.length-6,t.length),parseInt(t,16))},psy.pixi.colorToRGBA=function(t,e){var i="rgb";if(void 0===t)return 0;t=t.replace(/^#/,"");for(var n=[],r=0;r<t.length/2;r++)n.push(parseInt(t.substring(2*r,2*(r+1)),16));if(n.length>3&&!e){var s=parseFloat(n.shift()/255).toFixed(2);1!=s&&(n.push(s),i+="a")}return i+"("+n.join(", ")+")"},psy.pixi.formatJsonData=function(t,e){for(var i=10,n={keyframes:[]},r=["bezier","line"],s=0;s<t.length;s++){for(var o=t[s],a={frameLength:e||i,paths:[]},l=0;l<o.length;l++){var h=o[l];for(var c in h)-1!=r.indexOf(c)?a.paths.push({type:c,points:h[c]}):a[c]=h[c]}n.keyframes.push(a)}psy.traceObj(n)},psy.pixi.getFramesByKeyFrames=function(t){for(var e=[],i=0;i<t.length-1;i++){for(var n=t[i],r=n.frameLength,s=n.paths,o=t[i+1].paths,a=[],l=0;l<s.length;l++){var h=s[l].points,c=o[l].points,u=_.clone(s[l]);u.points=[];for(var d=0;d<h.length;d++)u.points[d]=(c[d]-h[d])/r;a.push(u)}for(var p=0;r>p;p++){for(var f=_.clone(n),g=f.paths=[],l=0;l<s.length;l++){var h=s[l].points,m=a[l].points,v=_.clone(s[l]);v.points=[];for(var d=0;d<h.length;d++)v.points[d]=h[d]+m[d]*p;g.push(v)}e.push(f)}}return e},psy.pixi.getTexturesByGraphics=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].generateTexture());return e},psy.pixi.getGraphicByFrame=function(t,e){var i=new PIXI.Graphics;i.beginFill(e);for(var n=0;n<t.paths.length;n++){var r=t.paths[n],s=r.points;if(r.type==this.PATH_TYPE_BEZIER){var o=s.slice(0,2),a=s.slice(2,8);n||i.moveTo(o[0],o[1]),i.bezierCurveTo.apply(i,a)}}return i.endFill(),i},psy.pixi.drawPath=function(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=n.points;if(n.type==this.PATH_TYPE_BEZIER){var s=r.slice(0,2),o=r.slice(2,8);i||t.moveTo(s[0],s[1]),t.bezierCurveTo.apply(t,o)}}},psy.pixi.getGraphicsByFrames=function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.getGraphicByFrame(t[i]));return e},define("psy/psy.pixi",function(){}),psy.ease={InQuad:function(t,e,i,n){return i*(t/=n)*t+e},OutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},InOutQuad:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},InCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},OutCubic:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},InOutCubic:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},InQuart:function(t,e,i,n){return i*(t/=n)*t*t*t+e},OutQuart:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},InOutQuart:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},InQuint:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},OutQuint:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},InOutQuint:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},InSine:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},OutSine:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},InOutSine:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},InExpo:function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e},OutExpo:function(t,e,i,n){return t==n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e},InOutExpo:function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},InCirc:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},OutCirc:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},InOutCirc:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},InElastic:function(t,e,i,n){var r=1.70158,s=0,o=i;if(0==t)return e;if(1==(t/=n))return e+i;if(s||(s=.3*n),o<Math.abs(i)){o=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/o);return-(o*Math.pow(2,10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/s))+e},OutElastic:function(t,e,i,n){var r=1.70158,s=0,o=i;if(0==t)return e;if(1==(t/=n))return e+i;if(s||(s=.3*n),o<Math.abs(i)){o=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/o);return o*Math.pow(2,-10*t)*Math.sin((t*n-r)*(2*Math.PI)/s)+i+e},InOutElastic:function(t,e,i,n){var r=1.70158,s=0,o=i;if(0==t)return e;if(2==(t/=n/2))return e+i;if(s||(s=n*(.3*1.5)),o<Math.abs(i)){o=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/o);return 1>t?-.5*(o*Math.pow(2,10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/s))+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/s)*.5+i+e},InBack:function(t,e,i,n,r){return void 0==r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e},OutBack:function(t,e,i,n,r){return void 0==r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},InOutBack:function(t,e,i,n,r){return void 0==r&&(r=1.70158),(t/=n/2)<1?i/2*(t*t*(((r*=1.525)+1)*t-r))+e:i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},InBounce:function(t,e,i,n){return i-jQuery.easing.OutBounce(n-t,0,i,n)+e},OutBounce:function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},InOutBounce:function(t,e,i,n){return n/2>t?.5*jQuery.easing.InBounce(2*t,0,i,n)+e:.5*jQuery.easing.OutBounce(2*t-n,0,i,n)+.5*i+e}},define("psy/psy.ease",function(){}),psy.Sequence=function(t){this.option={$el:$("<div></div>"),path:"",id:"",className:"",sequence:"PepsiDotCom_Demo_v3_#####.jpg",width:0,height:0,start:0,end:0,isLoop:!1,isAutoPlay:!0,fps:24,callbackLoading:$.noop,callbackFinished:$.noop,callbackPlaying:$.noop};for(var e in this.option)this.option[e]=t[e]||this.option[e]},psy.Sequence.prototype={init:function(){for(var t in this.option)this[t]=this.option[t];this.ratio=this.width/this.height,this.frame=new psy.Frame,this.images=[],this.currentFrame=this.start,this.imageUrls=this.getSequnceNames(this.path+"/"+this.sequence,this.start,this.end),this.isRunning=!1,this.initCanvas()},initCanvas:function(){this.$canvas=$("<canvas></canvas>"),this.$canvas.attr({id:this.id,className:this.className,width:this.width,height:this.height}),this.context=this.$canvas[0].getContext("2d"),this.$el.append(this.$canvas)},startPlay:function(){this.isRunning||(this.isRunning=!0,this.frame.bind({id:"psy.sequence",isOverwrite:!1,handler:$.proxy(this.update,this),fps:30}))},stopPlay:function(){this.isRunning=!1,this.frame.unbind()},drawFrame:function(t){this.context.drawImage(t,0,0,this.width,this.width/this.ratio)},update:function(){var t=this.images[this.currentFrame];this.drawFrame(t),this.end==this.currentFrame+this.start?this.isLoop?this.currentFrame=0:this.stopPlay():this.currentFrame++},load:function(t){var e=this;psy.loader.loadByURLs(this.imageUrls,function(){t()},function(t,i){var n=new Image;n.src=e.imageUrls[t-1],e.images.push(n),e.callbackLoading(t,i)})},getSequnceNames:function(t,e,i){for(var n=t.search("#"),r=t.length-t.replace(/#/g,"").length,s=[],o=e;i+1>o;o++)s.push(t.slice(0,n)+psy.string.numberToDigit(o,r)+t.slice(n+r));return s},adjust:function(t,e){this.width=t,this.height=e,this.$canvas.attr({width:t,height:e})}},define("psy/psy.sequence",function(){}),psy.animation={},psy.animation.flex=function(t,e,i,n,r,s){var o={dx:(e-t)/n*r+i*s,current:t+i};return o},define("psy/psy.animation",function(){}),psy.scroll={},psy.scroll._mouseDownPos={x:0,y:0},psy.scroll._mouseDelta={x:0,y:0},psy.scroll._callMouseMove=0,psy.scroll._callTouchStart=0,psy.scroll._callTouchEnd=0,psy.scroll.bindNativeScroll=function(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",this._unbindNativeScrollHandler,!1),window.onmousewheel=document.onmousewheel=document.onkeydown=null},psy.scroll.unbindNativeScroll=function(){window.addEventListener&&window.addEventListener("DOMMouseScroll",this._unbindNativeScrollHandler,!1),window.onmousewheel=document.onmousewheel=this._unbindNativeScrollHandler,document.onkeydown=this._unbindNativeScrollHandler},psy.scroll.bindScroll=function(t){$(window).on("DOMMouseScroll wheel mousewheel scroll",{handler:t},this._scrollHandler),this._callTouchStart=$.proxy(this._touchDownHandler,this),this._callTouchEnd=$.proxy(this._touchUpHandler,this),(psy.browser.IS_MOBILE||psy.browser.IS_PAD)&&($(window).on("touchstart",{handler:t},this._callTouchStart),$(window).on("touchend",this._callTouchEnd))},psy.scroll.bindKeyDown=function(t){$(document).on("keydown",{handler:t},this._keyHandler)},psy.scroll.unbindKeyDown=function(){$(document).off("keydown",this._keyHandler)},psy.scroll.unbindScroll=function(){$(window).off("DOMMouseScroll wheel mousewheel scroll",this._scrollHandler),(psy.browser.IS_MOBILE||psy.browser.IS_PAD)&&($(window).off("touchstart",this._callTouchStart),$(window).off("touchend",this._callTouchEnd),$(window).off("touchmove",this._callMouseMove))},psy.scroll._scrollHandler=function(t){var e=t.data.handler;t=t.originalEvent,t.preventDefault();var i=t.deltaY||-t.wheelDeltaY||5*t.detail;0!=i&&e(3*i)},psy.scroll._unbindNativeScrollHandler=function(t){psy.event.preventDefault(t)},psy.scroll._unbindNativeScrollKeyHandler=function(t){for(var e=[37,38,39,40],i=e.length;i--;)if(t.keyCode===e[i])return void psy.event.preventDefault(t);
},psy.scroll._keyHandler=function(t){var e=t.data.handler;switch(t=t.originalEvent,t.keyCode){case 40:e(1);break;case 38:e(-1);break;case 37:e(-1);break;case 39:e(1)}},psy.scroll._touchMoveHandler=function(t){var e=t.data.handler;psy.event.preventDefault(t),t=t.originalEvent,t=t.touches[0],this._mouseDelta.x=t.pageX-this._mouseDownPos.x,this._mouseDelta.y=t.pageY-this._mouseDownPos.y,this._mouseDownPos.x=t.pageX,this._mouseDownPos.y=t.pageY;var i=Math.abs(this._mouseDelta.x)>Math.abs(this._mouseDelta.y)?this._mouseDelta.x:this._mouseDelta.y;i=-i,e(10*i)},psy.scroll._touchUpHandler=function(t){$(window).off("touchmove",this._callMouseMove)},psy.scroll._touchDownHandler=function(t){var e=t.data.handler;t=t.originalEvent,t=t.touches[0],this._mouseDownPos.x=t.pageX,this._mouseDownPos.y=t.pageY,this._callMouseMove=$.proxy(this._touchMoveHandler,this),$(window).on("touchmove",{handler:e},this._callMouseMove)},define("psy/psy.scroll",function(){}),psy.layout={},psy.layout.CENTER="CENTER",psy.layout.TOP="TOP",psy.layout.BOTTOM="BOTTOM",psy.layout.LEFT="LEFT",psy.layout.RIGHT="RIGHT",psy.layout.getIsHeightFit=function(t,e,i,n){var r=t/e,s=i/n;return r>1?0>s?1:r>s?1:0:s>=0?s>=r?0:1:s>=r?1:0},psy.layout.centering=function(t,e,i,n,r,s,o){s=s||e,o=o||i,n=n||this.CENTER,r=r||this.CENTER;var a=t.width()||t[0].clientWidth,l=t.height()||t[0].clientHeight,h=0,c=0;switch(n){case this.CENTER:h=(e-a)/2;break;case this.LEFT:h=(e-s)/2;break;case this.RIGHT:h=e-(e-s)/2-a/2}switch(r){case this.CENTER:c=(i-l)/2;break;case this.TOP:c=(i-o)/2;break;case this.BOTTOM:c=l>i?i-(l-i)/2:i-(i-o)/2-l}e||i?t.css({left:Math.floor(h),top:Math.floor(c),marginLeft:0,marginTop:0}):t.css({top:"50%",left:"50%",marginTop:Math.floor(-l/2),marginLeft:Math.floor(-a/2)})},psy.layout.noBorderCentering=function(t,e,i,n,r,s){var o=t.parent();o.hasClass("js-noBorderCenteringWrap")?o.css({width:e,height:i}):(o=$("<div></div>"),o.addClass("js-noBorderCenteringWrap "+t.attr("class")),o.css({overflow:s?"hidden":"visible",width:e,height:i}),t.wrap(o),t.removeClass().addClass("js-noBorderCenteringTarget"));var a=n/r;this.getIsHeightFit(e,i,n,r)?(n=i*a,t.css({position:"relative",width:Math.ceil(n),height:Math.ceil(i),marginLeft:Math.ceil((e-n)/2),marginTop:0}),o.addClass("heightFit")):(r=e*a,t.css({position:"relative",width:Math.ceil(e),height:Math.ceil(r),marginTop:Math.ceil((i-r)/2),marginLeft:0}),o.removeClass("heightFit"))},define("psy/psy.layout",function(){}),psy.event={},psy.event.preventDefault=function(t){t=t||window.event,t.preventDefault?t.preventDefault():t.returnValue=!1},define("psy/psy.event",function(){}),psy.social={},psy.social.getFacebookShareLink=function(t,e,i,n,r){var s=Config.ASSET_URL+"/share/close.html";return i=i||"",e=e||"",n=n||"",r=r||n,n=encodeURIComponent(n),r=encodeURIComponent(r),e=encodeURIComponent(e),t=encodeURIComponent(t),i=encodeURIComponent(i),"https://www.facebook.com/dialog/feed?app_id="+Config.FACEBOOK_ID+"&display=popup&caption="+r+"&link="+t+"&picture="+t+"/build/asset/image/share/share-generic.png"+"&name="+n+"&description="+e+"&redirect_uri="+s},psy.social.getPintrestShareLink=function(t,e,i){return t=encodeURIComponent(t),i=encodeURIComponent(i)||" ",e=encodeURIComponent(e)||" ",i=i||" ","http://www.pinterest.com/pin/create/button?url="+t+"&description="+e+"&media="+i},psy.social.getTumblrShareLink=function(t,e,i){return e=encodeURIComponent(e+" "+t),i=encodeURIComponent(i),"https://www.tumblr.com/share/photo?caption="+e+"&source="+i},psy.social.getGooglePlusShareLink=function(t,e,i){return t=encodeURIComponent(t),e=encodeURIComponent(i)||" ",e=encodeURIComponent(e)||" ",i=i||" ",link="https://plus.google.com/share?url="+t+"&msg="+e+"&img="+i},psy.social.getTwitterShareLink=function(t,e,i,n){return e=e||"",i=i||"",n=n||"",e=encodeURIComponent(e),t=encodeURIComponent(t),"https://twitter.com/intent/tweet?text="+e+"&url="+t+"&related="+n},psy.social.getLinkedinShareLink=function(t,e,i){return t=encodeURIComponent(t)||"",e=encodeURIComponent(e)||"",i=encodeURIComponent(i)||"","http://www.linkedin.com/shareArticle?mini=true&url="+t+"&title="+i+"&summary="+e},psy.social.getEmailShareLink=function(t,e){return link="mailto:?subject="+encodeURIComponent(e)+"&body="+encodeURIComponent(t)},psy.social.openWindowCenter=function(t,e,i){var n=(screen.width-e)/2,r=(screen.height-i)/2-200;window.open(t,"","width="+e+",height="+i+",left="+n+",top="+r)},psy.social.openFacebookShare=function(){var t=this.getFacebookShareLink.apply(this,arguments);this.openWindowCenter(t,550,290)},psy.social.openPintrestShare=function(){var t=this.getPintrestShareLink.apply(this,arguments);this.openWindowCenter(t,530,280)},psy.social.openTumblrShare=function(){var t=this.getTumblrShareLink.apply(this,arguments);this.openWindowCenter(t,530,280)},psy.social.openTwitterShare=function(){var t=this.getTwitterShareLink.apply(this,arguments);this.openWindowCenter(t,530,280)},psy.social.openGooglePlusShare=function(){var t=this.getGooglePlusShareLink.apply(this,arguments);this.openWindowCenter(t,530,280)},define("psy/psy.social",function(){}),psy.css={},psy.css._vendors=["-moz-","-webkit-","ms-",""],psy.css._getProps=function(t,e){var i=t+e;return i.toLowerCase().replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})},psy.css._formatNum=function(t){return isNaN(t)?t:t+"px"},psy.css.transform=function(t,e){for(var i=0;i<this._vendors.length;i++)t.style[this._getProps(this._vendors[i],"transform")]=e},psy.css.translate3d=function(t,e,i,n){psy.browser.BROWSER_NAME==psy.browser.IE?this.transform(t,"translate("+e+"px, "+i+"px)"):this.transform(t,"translate3d("+e+"px, "+i+"px, "+n+"px)")},psy.css.scale3d=function(t,e,i,n){this.transform(t,"scale3d("+e+", "+i+", "+n+")")},psy.css.translateAndScale3d=function(t,e,i,n,r,s,o){this.transform(t,"translate3d("+e+"px, "+i+"px, "+n+"px) scale3d("+r+", "+s+", "+o+")")},psy.css.transition=function(t,e,i,n){function r(t){for(var r=e+" "+i+"s "+n,o=0;o<s._vendors.length;o++)t.style[s._getProps(s._vendors[o],"transition")]=r}"transform"==e&&(e="all");var s=this;if(t.length)for(var o=0;o<t.length;o++)r(t.eq?t[o]:t[o][0]);else r(t.eq?t[o]:t)},define("psy/psy.css",function(){}),psy.Scrollbar=function(){this.init=function(t,e,i,n){this.TYPE_WHEEL="wheel",this.TYPE_DRAG="drag",this.TYPE_DRAG_END="drag_end",this.handlers={},this.frame=new psy.Frame,this.mouse={isDragging:!1,start:0},this.flex=new psy.Flex,this.min=2,this.constant=40,this.velocity=.9,this.friction=.7,this.scroll={type:"",page:0,pageRatio:0,ratio:0,current:0,target:0,track:0},this.tween={current:0,dx:0},this.enabled=!1,this._init.apply(this,arguments)},this._init=function(t,e,i,n){this.$scrollTrack=i||this.$scrollTrack,this.$scrollBar=n||this.$scrollBar,"number"==typeof t?(this.pageH=t,this.viewH=e):(this.$page=t,this.$view=e,this.$view.css("overflow","hidden"),this.pageH=this.$page[0].clientHeight,this.viewH=this.$view[0].clientHeight,this.bind("update",$.proxy(this._updateHandler,this))),this.scroll.total=this.pageScrollH=this.pageH-this.viewH,this.pageRatio=this.viewH/this.pageH,this.trackH=this.$scrollTrack[0].clientHeight,this.thumbH=this.trackH*this.pageRatio,this.trackScrollH=this.trackH-this.thumbH,this.trackRatio=this.trackH/this.pageH,this.callMouseDown=$.proxy(this._mousedownHandler,this),this.callMouseMove=$.proxy(this._mousemoveHandler,this),this.callMouseUp=$.proxy(this._mouseupHandler,this),this.callUpdateScroll=$.proxy(this._updateScroll,this),this.$scrollBar.height(this.thumbH)},this._updateHandler=function(t){psy.css.translate3d(this.$page[0],0,-t.current,0)},this.bind=function(t,e){this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)},this.unbind=function(t,e){var i=this.handlers[t].filter(function(t){return t!==e});this.handlers[t]=i},this.start=function(){this.enabled||(this.enabled=!0,this._updateScroll(),this.show(),this.$scrollBar.on("mousedown",this.callMouseDown),psy.scroll.bindScroll($.proxy(this._wheelHandler,this)),psy.scroll.bindKeyDown($.proxy(this._keyHandler,this)))},this.pause=function(){this.enabled&&(this.enabled=!1,psy.scroll.unbindScroll(),this.$scrollBar.off("mousedown",this.callMouseDown),$(document).off("mouseup",this.callMouseUp),$(document).off("mousemove",this.callMouseMove))},this.stop=function(){this.hide(),this.pause(),this.frame.unbind(this.callUpdateScroll)},this.show=function(){this.$scrollTrack.removeClass("hide")},this.hide=function(){this.$scrollTrack.addClass("hide")},this.scrollTo=function(t){this._updateTargetHandler(t)},this.forceScrollTo=function(t){this.frame.unbind(),this.tween.current=t,this.tween.dx=0,this.scroll.target=t,this._updateScroll(!0)},this.adjust=function(t,e,i,n){this.scroll.isDragging=!1,this._init.apply(this,arguments),this.tween.current=this.scroll.ratio*this.pageScrollH,this.tween.dx=0,this._updateTargetHandler(this.tween.current)},this._mousedownHandler=function(t){this.scroll.isDragging=!0,this.mouse.start=t.pageY,$(document).on("mouseup",this.callMouseUp),$(document).on("mousemove",this.callMouseMove)},this._mousemoveHandler=function(t){var e=t.pageY,i=e-this.mouse.start;this.mouse.start=e,i&&(this.scroll.type=this.TYPE_DRAG,this.scroll.track=psy.math.crop(0,this.trackScrollH,this.scroll.track+i),this._updateScrollbar(this.scroll.track),this._updateDeltaHandler(i/this.trackRatio),this._callHandlers("mousemove"))},this._mouseupHandler=function(t){this.scroll.target=parseInt(this.scroll.target,10),this.scroll.isDragging=!1,$(document).off("mouseup",this.callMouseUp),$(document).off("mousemove",this.callMouseMove),this._callHandlers("mouseup")},this._wheelHandler=function(t){this.scroll.type=this.TYPE_WHEEL,this._updateDeltaHandler(t/5)},this._keyHandler=function(t){this.scroll.type=this.TYPE_WHEEL,this._updateDeltaHandler(500*t)},this._updateDeltaHandler=function(t){t&&(this.scroll.delta=1.7*t,this.scroll.target=psy.math.crop(0,this.pageScrollH,this.scroll.target+t),this.frame.bind({id:"psy.scrollbar",handler:this.callUpdateScroll}))},this._updateTargetHandler=function(t){this.scroll.target!=t&&(this.scroll.delta=t-this.scroll.current,this.scroll.target=psy.math.crop(0,this.pageScrollH,t),this.frame.bind({id:"psy.scrollbar",handler:this.callUpdateScroll}))},this._callHandlers=function(t,e){var i=this.handlers[t];if(i)for(var n=0;n<i.length;n++)i[n](e)},this._updateScrollbar=function(t){psy.css.translate3d(this.$scrollBar[0],0,t,0)},this._updateScroll=function(t){this.enabled&&this.pageRatio<1?this.show():this.hide(),Math.abs(this.tween.current-this.scroll.target)<1&&t!==!0?(this.tween.current=this.scroll.target,this.frame.unbind()):this.tween=this.flex._flex(this.tween.current,this.scroll.target,this.tween.dx),this.scroll.current=this.tween.current,this.scroll.pageRatio=this.scroll.current/this.viewH,this.scroll.page=Math.floor(this.scroll.pageRatio),this.scroll.ratio=this.scroll.current/this.pageScrollH||0,this.scroll.ratio=psy.math.crop(0,1,this.scroll.ratio),this.scroll.type!=this.TYPE_DRAG&&(this.scroll.track=this.scroll.current*this.trackRatio,this._updateScrollbar(this.scroll.track)),this._callHandlers("update",this.scroll),this.scroll.current==this.scroll.target&&(this.scroll.type==this.TYPE_DRAG&&(this.scroll.type=this.TYPE_DRAG_END,this._callHandlers("update",this.scroll)),this._callHandlers("done"),this.scroll.type=0)}},define("psy/psy.scrollbar",function(){}),psy.Flex=function(){this.tween={target:0,current:0,dx:0,isTweening:!1},this.frame=new psy.Frame,this.callback=$.noop,this.min=1,this.constant=40,this.velocity=.85,this.friction=.7,this._callRun=$.proxy(this._run,this),this.bind=function(t){this.callback=t},this.update=function(t,e){this.tween.current=t,this.tween.target=e},this.forceUpdate=function(t){this.tween.current=t,this.tween.target=t,this.tween.dx=0},this.reset=function(){this.tween={target:0,current:0,dx:0,isTweening:!1}},this.start=function(){this.tween.isTweening||(this.frame.bind({id:"flex",handler:this._callRun}),this.tween.isTweening=!0)},this.stop=function(){this.tween.isTweening&&(this.frame.unbind(),this.tween.isTweening=!1)},this.unbind=function(){this.stop()},this._run=function(){if(Math.abs(this.tween.current-this.tween.target)<this.min){if(!this.tween.isTweening)return;this.frame.unbind(),this.tween.current=this.tween.target,this.tween.isTweening=!1}else this._flex(this.tween.current,this.tween.target,this.tween.dx,this.constant,this.velocity,this.friction),this.tween.isTweening=!0;this.callback(this.tween)},this._flex=function(t,e,i,n,r,s){return n=n||this.constant,r=r||this.velocity,s=s||this.friction,this.tween.current=t+i,this.tween.dx=(e-t)/n*r+i*s,this.tween}},define("psy/psy.flex",function(){}),define("library",["lib/pixi","lib/stats","backbone","backbone_super","TweenMax","jquery/jquery.extension","jquery/jquery.placeholder","hgn","async","lib/grunt/icon.loader","lib/dat/dat.gui","psy/psy.track","psy/psy.pixi","psy/psy.ease","psy/psy.sequence","psy/psy.animation","psy/psy.scroll","psy/psy.layout","psy/psy.event","psy/psy.social","psy/psy.css","psy/psy.scrollbar","psy/psy.flex"],function(t){window.PIXI=t,t.dontSayHello=!0}),define("app/router",[],function(){var t=function(){};return t.prototype={init:function(){this.currentRoute=this.prevRoute={page:0,param:0},this.routes=Model.getRoutesForRouter(),this.router=new Backbone.Router({routes:_.extend(_.clone(this.routes),{"*actions":"default"})});for(var t in this.routes){var e=this.routes[t];this.router.on("route:"+e,$.proxy(this.routeHandler,this,e))}this.router.on("route:default",function(){this.navigate(Model.getUrlByClazz(Model.ROUTE_DEFAULT),{trigger:!0,replace:!1})}),Backbone.history.start()},navigate:function(t){var e=Model.getUrlByClazz(t);this.router.navigate(e,{trigger:!0,replace:!0})},navigateByURL:function(t){this.router.navigate(t,{trigger:!0,replace:!0})},routeHandler:function(){var t=Array.prototype.slice.call(arguments),e={state:t[0],query:t[1]};_.isEqual(this.currentRoute,e)||(this.prevRoute=this.currentRoute,this.currentRoute=e,Events.trigger(Events.ROUTE_EVENT.UPDATE,e.state,e.query),psy.track.GAView(this.currentRoute.state,Model.getRouteByClazz(e.state).trackingName),psy.trace("[router] PREV",JSON.stringify(this.prevRoute),"=>","CURRENT",JSON.stringify(this.currentRoute)))}},new t}),define("app/model/modelBeverage",[],function(){var t=function(){this.PATH_LOGO="beverage/logo/",this.PATH_GRADIENT="beverage/gradient/"};return t.prototype={init:function(t){var e=this;this.data=_.map(t,function(t,i){var n={name:t.name?t.name.__cdata||t.name:0,id:t._id,logoUrl:t.design.imageLogo,brandLogoUrl:t.design.imageLogoBrand,gradientBgUrl:t.design.imageGradient,colorStroke:t.design.colorStroke,colorDark:t.design.colorAnimationDark,colorLight:t.design.colorAnimationLight,colorButtonText:t.design.particlesBrand?t.design.particlesBrand.particle[0].color:t.design.colorStroke,colorText:t.design.colorMessageTitle};if(n.brandLogoUrl=e.replacePath(n.brandLogoUrl,e.PATH_LOGO),n.logoUrl=e.replacePath(n.logoUrl,e.PATH_LOGO),n.gradientBgUrl=e.replacePath(n.gradientBgUrl,e.PATH_GRADIENT),t.design.animationId){var r=t.design.animationId[0].__text;n.animationId=r}return n.colorStroke&&(n.colorText=psy.pixi.colorToRGBA(n.colorText),n.colorButtonText=psy.pixi.colorToRGBA(n.colorButtonText)),-1==n.id.search(/^water/i)&&n.name?n:!1}),this.data=_.compact(this.data)},replacePath:function(t,e){return t?t.replace("assets/beverages/",Config.DATA_IMAGE_URL+"/"+e):""},getDataById:function(t){return _.clone(this.data[t])}},new t}),define("app/model/modelFlavor",[],function(){var t=function(){};return t.prototype={init:function(t){this.data=_.map(t,function(t){var e={name:t.name,id:t._id,logoUrl:Config.DATA_IMAGE_URL+"/flavor/"+t._id+".png",colorBackground:t.design.colorBackground,colorText:t.design.colorText,colorTextSelected:t.design.colorTextSelected};return e})},getDataById:function(t){return _.clone(this.data[t])},getFlavors:function(){return _.clone(this.data)},getFlavorIds:function(){return _.pluck(this.data,"id")},getFlavorsByMixology:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.getDataById(t[i].flavorId));return e}},new t}),define("app/model/modelMix",["app/model/modelBeverage","app/model/modelFlavor"],function(t,e){var i=function(){};return i.prototype={init:function(i){this.data=_.map(i,function(i){var n={title:i.title,copy:i.copy,beverageId:i.beverageId,flavorId:i.flavorId,beverage:t.getDataById(i.beverageId),flavor:e.getDataById(i.flavorId),sharePhotoUrl:Model.formatDataImageUrl(i.photoUrl),hasGradient:!0,elementId:i.elementId,elementAngle:i.elementAngle,flavorAngle:i.flavorAngle,buttonTextColor:i.buttonTextColor,borderColor:i.strokeColor};return n.gradientBgUrl=n.beverage.gradientBgUrl,n.backgroundColorDark=n.beverage.colorDark,n.backgroundColorLight=n.beverage.colorLight,n.textColor=n.beverage.colorText,n.buttonTextColor=psy.pixi.colorToRGBA(n.buttonTextColor)||n.borderColor,n}),this.data=_.compact(this.data)},getDataById:function(t){return _.clone(this.data[t])}},new i}),define("app/model/modelMixology",["app/model/modelBeverage","app/model/modelFlavor"],function(t,e){var i=function(){};return i.prototype={init:function(i){this.data=_.map(i,function(i){var n={title:i.title,copy:i.copy,beverageId:i.beverageId,mixology:i.mixology,photoUrl:Model.formatDataImageUrl(i.photoUrl),photoHighUrl:Model.formatDataImageUrl(i.photoHighUrl),mixLogoUrl:Model.formatDataImageUrl(i.mixLogoUrl),beverage:t.getDataById(i.beverageId),flavors:e.getFlavorsByMixology(i.mixology),borderColor:i.strokeColor,iconColor:i.iconColor,hasLogo:!0};return n.backgroundImage=n.photoUrl,n}),this.data=_.compact(this.data)},getDataById:function(t){return _.clone(this.data[t])}},new i}),define("app/model/modelTwitter",[],function(){var t=function(){};return t.prototype={init:function(t){this.data=_.map(t,function(t){for(var e=t.copy,i=!1,n="<em>",r="</em>",s=0;s<e.length;s++)!i&&"@"==e[s]||"#"==e[s]?(e=e.slice(0,s)+n+e.slice(s),s+=n.length,i=!0):i&&" "==e[s]&&(e=e.slice(0,s)+r+e.slice(s),s+=r.length,i=!1);var o={copy:e,userName:t.userName,userId:t.userId};return o}),this.data=_.compact(this.data)},getDataById:function(t){return _.clone(this.data[t])}},new t}),define("app/model/modelInstagram",[],function(){var t=function(){};return t.prototype={init:function(t){this.data=_.map(t,function(t){var e={photoUrl:Model.formatDataImageUrl(t.photoUrl),userName:t.userName,userId:t.userId};return e.backgroundImage=e.photoUrl,e}),this.data=_.compact(this.data)},getDataById:function(t){return _.clone(this.data[t])}},new t}),define("app/model/modelFavorite",["app/model/modelBeverage","app/model/modelFlavor"],function(t,e){var i=function(){};return i.prototype={init:function(i){this.data=_.map(i,function(i){var n=t.getDataById(i.beverageId),r=e.getFlavorsByMixology(i.mixology);r.unshift(n);var s=i.imageLogo?t.replacePath(i.imageLogo,t.PATH_LOGO):!1,o={title:i.title,beverageId:i.beverageId,mixology:i.mixology,beverage:n,flavors:e.getFlavorsByMixology(i.mixology),hasGradient:!0,elementId:i.elementId,elementAngle:i.elementAngle,imageLogo:s||n.logoUrl};return o.gradientBgUrl=o.beverage.gradientBgUrl,o.textColor=o.beverage.colorText,o.buttonTextColor=o.beverage.colorButtonText,o.backgroundColorDark=o.beverage.colorDark,o.backgroundColorLight=o.beverage.colorLight,o.borderColor=o.beverage.colorStroke,o}),this.data=_.compact(this.data)},getDataById:function(t){return _.clone(this.data[t])}},new i}),!function(){function t(t){if(!t.date)return t;var e=t.date.split("/");return _.extend({dateMonth:r[e[0]-1],dateDay:e[1]},t)}function e(t){var e="";return t.address_secondary&&(e+=t.address_secondary+", "),t.address_tertiary&&(e+=t.address_tertiary+", "),t.city&&(e+=t.city+", "),t.state&&t.state["short"]&&(e+=t.state["short"]+" "),t.zipcode&&(e+=t.zipcode+" "),e}function i(t){var e;return e=t.geo_url?t.geo_url:t.lat&&t.lng?"https://www.google.com/maps/@"+t.lat+","+t.lng+",15z":"javascript:void(0);",_.extend({google_link:e},t)}function n(t){return t.display}define("app/model/modelEvents",[],function(){var r=[],s=[];return{pushEvents:function(n){r=r.concat(n.map(t).map(i)),r=r.map(function(t,i){return _.extend({displayType:i>6?"none":"block",combinedAddress:e(t)},t)})},getEvents:function(){return r.slice(0)},pushAssets:function(t){s=s.concat(t.filter(n))},getAssets:function(){return s.slice(0)}}});var r=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]}(),define("app/proxy/proxyApi",["app/model/modelBeverage","app/model/modelFlavor","app/model/modelMix","app/model/modelMixology","app/model/modelTwitter","app/model/modelInstagram","app/model/modelFavorite","app/model/modelEvents"],function(t,e,i,n,r,s,o,a){var l=function(){};return l.prototype={getBeverageData:function(e){$.ajax({dataType:"json",url:Config.PACKAGE_PATH+"/data/dataBeverage.json",success:function(i){t.init(i),TweenMax.delayedCall(.1,e)}})},getFlavorData:function(t){$.ajax({dataType:"json",url:Config.PACKAGE_PATH+"/data/dataFlavor.json",success:function(i){e.init(i),TweenMax.delayedCall(.1,t)}})},getMixData:function(t){$.ajax({dataType:"json",url:Config.PACKAGE_PATH+"/data/dataMix.json",success:function(e){i.init(e),TweenMax.delayedCall(.1,t)}})},getMixologyData:function(t){$.ajax({dataType:"json",url:Config.PACKAGE_PATH+"/data/dataMixology.json",success:function(e){n.init(e),TweenMax.delayedCall(.1,t)}})},getTwitterData:function(t){$.ajax({dataType:"json",url:Config.PACKAGE_PATH+"/data/dataTwitter.json",success:function(e){r.init(e),TweenMax.delayedCall(.1,t)}})},getInstagramData:function(t){$.ajax({dataType:"json",url:Config.PACKAGE_PATH+"/data/dataInstagram.json",success:function(e){s.init(e),TweenMax.delayedCall(.1,t)}})},getFavoriteData:function(t){$.ajax({dataType:"json",url:Config.PACKAGE_PATH+"/data/dataFavorite.json",success:function(e){o.init(e),TweenMax.delayedCall(.1,t)}})},getEvents:function(t){$.when($.ajax({dataType:"json",url:"/cms/events"})).then(function(e){a.pushEvents(e.events),a.pushAssets(e.assets),t()})}},new l}),define("app/view/scene/sceneMovieClip",[],function(){var t=function(){},e="image",i="graphics";return t.prototype={init:function(t){this.urls=[],this.textures=[],this.totalFrames=0,this.loadedCallback=$.noop,this.mc={},this.option={isBuffer:t.isBuffer,startId:0,endId:0,seqName:!1,jsonName:!1,fps:60},_.extend(this.option,t),_.extend(this,this.option),this.isBuffer&&(this.bufferRenderer=PIXI.autoDetectRenderer(1,1,{preserveDrawingBuffer:!0}),this.bufferStage=new PIXI.Stage(16776960)),this.totalFrames=this.endId-this.startId||1,this.type=this.seqName?e:i,this.type==e&&(this.urls=psy.string.formatSequences(this.seqName,this.startId,this.endId))},updateBuffer:function(){this.bufferRenderer.render(this.bufferStage),this.mc.playing?psy.trace("[pre-buffering] ",Math.round(this.mc.currentFrame/this.totalFrames*100)+"%",this.mc.currentFrame,"/",this.totalFrames,this.seqName):(this.frame.unbind(),this.loadedCallback())},load:function(t){if(this.loadedCallback=t||this.loadedCallback,this.type==e){var i=this.jsonName?[this.jsonName]:this.urls,n=new PIXI.AssetLoader(i);n.on("onComplete",$.proxy(this.loadedHandler,this)),n.load()}else{var r=new PIXI.JsonLoader(this.jsonName),s=this;r.on("loaded",function(t){var e=t.target.json,i=psy.pixi.getFramesByKeyFrames(e.keyframes);s.graphics=psy.pixi.getGraphicsByFrames(i),s.textures=psy.pixi.getTexturesByGraphics(s.graphics),s.loadedHandler()}),r.load()}},skew:function(t,e){this.mc.displayObjectContainerUpdateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var i=this.parent.worldTransform,n=this.worldTransform,r=this.pivot.x,s=this.pivot.y,o=this._cr*this.scale.x,a=Math.tan(t)*this.scale.y;a10=Math.tan(e),a11=this._cr*this.scale.y,a02=this.position.x-o*r-s*a,a12=this.position.y-a11*s-r*a10,b00=i.a,b01=i.b,b10=i.c,b11=i.d,n.a=b00*o+b01*a10,n.b=b00*a+b01*a11,n.tx=b00*a02+b01*a12+i.tx,n.c=b10*o+b11*a10,n.d=b10*a+b11*a11,n.ty=b10*a02+b11*a12+i.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha}},loadedHandler:function(){if(this.type==e)for(var t=0;t<this.totalFrames;t++)this.textures.push(PIXI.Texture.fromFrame(this.urls[t]));this.clone(),this.loadedCallback()},clone:function(t){var i=new PIXI.MovieClip(this.textures);i.animationSpeed=this.fps/psy.frame.FPS||1,this.type==e&&(i.anchor.x=this.anchor?this.anchor.x:.5,i.anchor.y=this.anchor?this.anchor.y:.5),this.color&&(i.tint=this.color),t?t.mc=i:this.mc=i}},t}),define("app/view/scene/sceneGraphic",[],function(){var t=function(){};return t.prototype={init:function(t){this.urls=[],this.frames=[],this.g=new PIXI.Graphics,this.currentFrame=0,this.totalFrames=0,this.loadedCallback=$.noop,this.color=13421772,this.anchor=new PIXI.Point(0,0),this.fillStyle={},this.lineStyle={lineWidth:0,color:0,alpha:1},this.option={startId:0,endId:0,seqName:!1,jsonName:!1,fps:60};for(var e in this.option)this[e]=t[e]||this.option[e];this.animationSpeed=.25,this.totalFrames=this.endId-this.startId},gotoAndPlay:function(t){this.currentFrame=psy.math.loop(t,this.totalFrames)},setAnimationSpeed:function(t){this.animationSpeed=.25},load:function(t){this.loadedCallback=t;var e=new PIXI.JsonLoader(this.jsonName),i=this;e.on("loaded",function(t){var e=t.target.json;i.frames=psy.pixi.getFramesByKeyFrames(e.keyframes),i.totalFrames=i.frames.length,i.loadedHandler()}),e.load()},update:function(){this.g.clear(),this.lineStyle.lineWidth?this.g.lineStyle(this.lineStyle.lineWidth,this.lineStyle.color,this.lineStyle.alpha):this.g.beginFill(this.color,1),psy.pixi.drawPath(this.g,this.frames[parseInt(this.currentFrame)].paths),this.lineStyle.lineWidth||this.g.endFill(),this.currentFrame=psy.math.loop(this.currentFrame+this.animationSpeed,this.totalFrames)},loadedHandler:function(){this.loadedCallback()},clone:function(t){t.frames=_.clone(this.frames),t.totalFrames=this.totalFrames}},t}),define("app/model/modelSceneAsset",["app/view/scene/sceneMovieClip","app/view/scene/sceneGraphic"],function(t,e){var i=function(){};return i.prototype={init:function(){this.imageManager={bubbleVignette:{path:Config.IMAGE_URL+"/sequence/bubble/bubbleBg/bubbleVignette.png"},bubbleMask:{path:Config.IMAGE_URL+"/bubble/bubble-mask.jpg"},bubbleLine:{path:Config.IMAGE_URL+"/bubble/bubble-line.png"},homeIntroMachine:{path:Config.IMAGE_URL+"/home/intro-machine.png"},aboutIntroMachine5:{path:Config.IMAGE_URL+"/about/intro-machine-5.png"},aboutIntroMachine2:{path:Config.IMAGE_URL+"/about/intro-machine-2.png"},aboutADAMachine:{path:Config.IMAGE_URL+"/about/intro-machine-ada.png"},homeIntroMachineScreen:{path:Config.IMAGE_URL+"/home/intro-machine-screen.jpg"},aboutIntroMachine5Screen:{path:Config.IMAGE_URL+"/about/intro-machine-5-screen.jpg"},aboutIntroMachine2Screen:{path:Config.IMAGE_URL+"/about/intro-machine-2-screen.jpg"},aboutADAMachineScreen:{path:Config.IMAGE_URL+"/about/ada-machine-screen.jpg"},homeIntroMachineVideoCover:{path:Config.IMAGE_URL+"/home/intro-machine-video-cover.jpg"},aboutIntroMachine5VideoCover:{path:Config.IMAGE_URL+"/about/intro-machine-5-video-cover.jpg"},aboutIntroMachine2VideoCover:{path:Config.IMAGE_URL+"/about/intro-machine-2-video-cover.jpg"},aboutADAMachineVideoCover:{path:Config.IMAGE_URL+"/about/ada-machine-video-cover.jpg"},bubbleIceTop:{path:Config.IMAGE_URL+"/sequence/bubble-element/ice-top.png"},bubbleIceBottom:{path:Config.IMAGE_URL+"/sequence/bubble-element/ice-bottom.png"},bubbleBubbleup:{path:Config.IMAGE_URL+"/sequence/bubble-element/bubbleup.png"},bubbleSun:{path:Config.IMAGE_URL+"/sequence/bubble-element/sun.png"},bubbleLizard:{path:Config.IMAGE_URL+"/sequence/bubble-element/lizard.png",anchor:{x:41,y:70}},bubbleCircles:{path:Config.IMAGE_URL+"/sequence/bubble-element/circles.png"},bubbleSkateboard:{path:Config.IMAGE_URL+"/sequence/bubble-element/skateboard.png"},bubbleHeadset:{path:Config.IMAGE_URL+"/sequence/bubble-element/headset.png"},bubbleMug:{path:Config.IMAGE_URL+"/sequence/bubble-element/mug.png"},bubbleHeart:{path:Config.IMAGE_URL+"/sequence/bubble-element/heart.png",anchor:{x:95,y:52}}},this.imageLoader=new PIXI.AssetLoader(_.pluck(this.imageManager,"path"));var t={startId:10,endId:47,fps:20};this.movieClipManager={mcFruitsCherry:{option:_.extend({seqName:"Cherry_select_#####.png",jsonName:Config.IMAGE_URL+"/sequence/fruits/cherry-click.json"},t)},mcFruitsGrape:{option:_.extend({seqName:"Grape_click_#####.png",jsonName:Config.IMAGE_URL+"/sequence/fruits/grape-click.json"},t)},mcFruitsLemon:{option:_.extend({seqName:"Lemon_select_#####.png",jsonName:Config.IMAGE_URL+"/sequence/fruits/lemon-click.json"},t)},mcFruitsLime:{option:_.extend({seqName:"Lime_select_#####.png",jsonName:Config.IMAGE_URL+"/sequence/fruits/lime-click.json"},t)},mcFruitsPeach:{option:_.extend({seqName:"Peach_Click_#####.png",jsonName:Config.IMAGE_URL+"/sequence/fruits/peach-click.json"},t)},mcFruitsRaspberry:{option:_.extend({seqName:"Raspberry_select_#####.png",jsonName:Config.IMAGE_URL+"/sequence/fruits/rspbry-click.json"},t)},mcFruitsStrawberry:{option:_.extend({seqName:"Strawberry_select_#####.png",jsonName:Config.IMAGE_URL+"/sequence/fruits/strwbry-click.json"},t)},mcFruitsVanilla:{option:_.extend({seqName:"Vanilla_select_#####.png",jsonName:Config.IMAGE_URL+"/sequence/fruits/vanilla-click.json"},t)},mcBubbles:{option:{startId:1,endId:111,seqName:"bubble-###.png",fps:10,jsonName:Config.IMAGE_URL+"/sequence/bubble/bubbles/bubbles.json"}},mcIntroStrawberry:{option:{startId:0,endId:299,seqName:"PepsiDotCom_Strawberry_V2_#####.png",fps:25,jsonName:Config.IMAGE_URL+"/sequence/intro-element/intro-strawberry.json"}},mcIntroLemon:{option:{startId:0,endId:299,seqName:"PepsiDotCom_Lemon_V2__#####.png",fps:25,jsonName:Config.IMAGE_URL+"/sequence/intro-element/intro-lemon.json"}},mcIntroLime:{option:{startId:0,endId:299,seqName:"PepsiDotCom_Lime__#####.png",fps:25,jsonName:Config.IMAGE_URL+"/sequence/intro-element/intro-lime.json"}},mcIntroCherry:{option:{startId:0,endId:299,seqName:"PepsiDotCom_Cherry__#####.png",fps:25,jsonName:Config.IMAGE_URL+"/sequence/intro-element/intro-cherry.json"}},mcIntroHeadspin:{option:{startId:0,endId:77,seqName:"HeadSpinDude_####.png",fps:25,jsonName:Config.IMAGE_URL+"/sequence/intro-element/intro-headspin.json"}},mcIntroJump:{option:{startId:0,endId:56,seqName:"DudeDewJump_####.png",fps:25,jsonName:Config.IMAGE_URL+"/sequence/intro-element/intro-jump.json"}},mcIntroBike:{option:{startId:0,endId:300,seqName:"PepsiDotCom_Bike_v2_#####.png",fps:25,jsonName:Config.IMAGE_URL+"/sequence/intro-element/intro-bike.json"}},mcIntroOrb:{option:{startId:0,endId:299,seqName:"PepsiDotCom_Orb_#####.png",fps:25,jsonName:Config.IMAGE_URL+"/sequence/intro-element/intro-orb.json"}}},this.graphicManager={gBubbleStroke:{option:{fps:20,jsonName:Config.IMAGE_URL+"/sequence/bubble/bubbleMask/bubbleMaskKuz.json"}},gBubbleMask:{option:{fps:20,jsonName:Config.IMAGE_URL+"/sequence/bubble/bubbleMask/bubbleMaskKuz.json"}}};var e=_.filter(this.movieClipManager,function(t){return t.option.isPreload!==!1}).length,i=_.filter(this.graphicManager,function(t){return t.option.isPreload!==!1}).length;this.totalAssets=1+e+i},load:function(t){var e=psy.async.start(this.totalAssets,t);this.imageLoader.on("onComplete",function(){psy.async.count(e)}),this.imageLoader.load();for(var i in this.movieClipManager)if(this.movieClipManager[i].option.isPreload!==!1){var n=this.getMovieClip(this.movieClipManager[i],function(){psy.async.count(e)});this.movieClipManager[i].sample=n}for(var i in this.graphicManager)if(this.graphicManager[i].option.isPreload!==!1){var n=this.getGraphic(this.graphicManager[i],function(){psy.async.count(e)});this.graphicManager[i].sample=n}},getData:function(t){return _.clone(t)},getImageSprite:function(t){var e=PIXI.Sprite.fromImage(t.path);return t.color&&(e.tint=t.color),t.anchor&&(e.anchor.x=t.anchor.x/e.width,e.anchor.y=t.anchor.y/e.height),e},getMovieClip:function(e,i){var n=new t;return n.init(e.option),e.sample?e.sample.clone(n):n.load(i),n},getGraphic:function(t,i){var n=new e;return n.init(t.option),t.sample?t.sample.clone(n):n.load(i),n}},new i}),define("app/view/sceneBase",["backbone_super"],function(t){
return Backbone.View.extend({init:function(t){_.extend(this,t),this.render(),this.bind()},show:function(){TweenMax.set(this.$el,{opacity:1})},hide:function(){TweenMax.set(this.$el,{opacity:0}),this.clean()},render:function(){return this.$el=this.$el||$(this.el),TweenMax.set(this.$el,{opacity:0}),this},update:function(){},bind:function(){this.listenTo(Events,Events.APP_EVENT.RESIZE,this.adjust)},unbind:function(){this.undelegateEvents()},destroy:function(){this.unbind(),this.hide()},adjust:function(t,e){this._width=void 0===t?this._width:t,this._height=void 0===e?this._height:e},clean:function(){if(this.renderer){for(var t=this.stage.children.length-1;t>=0;t--){var e=this.stage.children[t];this.stage.removeChild(e)}this.renderer.destroy()}this.frame&&this.frame.unbind(),this.$el.removeData().unbind().remove(),this.remove(),Backbone.View.prototype.remove.call(this),this.$el=null}})}),define("app/view/scene/bubble/sceneBubbleBase",["app/view/sceneBase","app/model/modelSceneAsset"],function(t,e){return t.extend({events:{UPDATE_VIEW:"update_bubble_view",SHOW_VIEW:"show_bubble_view",HIDE_VIEW:"hide_bubble_view"},init:function(t){this.type=t.type,this.id=t.id,this.size=ModelBubbles.getBubbleSize(t.type),this.width=this.height=this.size,this.radius=this.width/2,this.x=this.targetX=t.x,this.y=this.targetY=t.y,this.speed=.1,this.spinSize=psy.math.rand(6,8),this.currentFrame=0,this.isRunning=!1,this.isShow=!1,this.isVisibleChecked=!1,this.particles=[],this.elements=[],this.elementPower=.8+psy.math.rand(0,.3),this.totalParticles=psy.math.randInt(3,7),this.option={colorDark:psy.pixi.colorToHex(t.data.backgroundColorDark),colorLight:psy.pixi.colorToHex(t.data.backgroundColorLight),colorStroke:psy.pixi.colorToHex(t.data.borderColor),bgImageUrl:t.data.photoUrl||t.data.gradientBgUrl},_.extend(this.option,t),this.flexX=new psy.Flex,this.flexY=new psy.Flex,this.flexYConstant=psy.browser.IS_LOW_PERFORMANCE?25:this.flexY.constant+psy.math.rand(-20,0),this.flexY.friction+=psy.math.rand(-.15,.05),this.render()},render:function(){this.container=new PIXI.DisplayObjectContainer,this.container.pivot.x=this.radius,this.container.pivot.y=this.radius,this.container.visible=!1,this.elementsContainer=new PIXI.DisplayObjectContainer,this.elementsContainer.pivot.x=this.radius,this.elementsContainer.pivot.y=this.radius,this.elementsContainer.x=this.radius,this.elementsContainer.y=this.radius,this.overlayContainer=new PIXI.DisplayObjectContainer,this.overlayContainer.pivot.x=this.radius,this.overlayContainer.pivot.y=this.radius,this.overlayContainer.x=this.radius,this.overlayContainer.y=this.radius,this.container.addChild(this.elementsContainer),this.drawBg(),this.drawStroke(),this.drawParticles(),this.drawElement(),this.container.addChild(this.overlayContainer),TweenMax.set(this.container.scale,{x:.4,y:.4}),TweenMax.set(this.elementsContainer,{alpha:0}),TweenMax.set(this.overlayContainer,{alpha:0}),this.adjust()},drawElement:function(){if(this.option.data.elementId){var t="bubble"+psy.string.capitalize(this.option.data.elementId),i=e.imageManager[t],n=e.getImageSprite(e.imageManager[t]);i.anchor||(n.anchor.x=n.anchor.y=.5),n.alpha=.3,n.tint=i.color?i:this.option.colorDark||this.option.colorStroke,n.scale.x=n.scale.y=this.elementPower+.1,n.power=psy.math.rand(1,5);var r=psy.math.polar(this.radius+n.width/2.7,this.option.data.elementAngle);n.x=n.originX=this.radius+r.x,n.y=n.originY=this.radius+r.y,this.elements.push(n),this.elementsContainer.addChildAt(n,0)}},drawParticles:function(){for(var t=360*Math.random(),e=50,i=0;i<this.totalParticles;i++){var n=this.radius+psy.math.rand(-30,60),r=this.getParticle(),s=psy.math.polar(n,t+psy.math.rand(e));r.x=r.originX=s.x+this.radius,r.y=r.originY=s.y+this.radius,this.particles.push(r),this.elementsContainer.addChild(r)}},getParticle:function(){var t=10,e=psy.math.randByPower(2,t,3),i=new PIXI.Graphics;return i.beginFill(this.option.colorStroke),i.drawCircle(0,0,1.5*e),i.endFill(),i.power=e,i.alpha=i.originAlpha=psy.math.crop(.15,1,(t-1.5*e)/t),i},drawStroke:function(){this.gBubbleStroke=e.getGraphic(e.graphicManager.gBubbleStroke),this.gBubbleStroke.lineStyle.lineWidth=2,this.gBubbleStroke.lineStyle.color=this.option.colorStroke,this.gBubbleStroke.g.rotation=psy.math.degToRad(180+psy.math.rand(30,60)*psy.math.randSign()),this.container.addChild(this.gBubbleStroke.g)},drawBg:function(){(this.option.bgImageUrl||this.option.colorDark)&&(this.containerMaskTarget=new PIXI.DisplayObjectContainer,TweenMax.set(this.containerMaskTarget,{alpha:0}),this.option.bgImageUrl?this.loadImageBg():this.option.colorDark&&this.fillColorBg(),this.gBubbleMask=e.getGraphic(e.graphicManager.gBubbleMask),this.gBubbleMask.g.rotation=psy.math.degToRad(psy.math.rand(0,30)*psy.math.randSign()),this.containerMaskTarget.addChild(this.gBubbleMask.g),this.containerMaskTarget.mask=this.gBubbleMask.g,this.container.addChild(this.containerMaskTarget))},fillColorBg:function(){this.gBgLight=new PIXI.Graphics,this.gBgLight.beginFill(this.option.colorLight),this.gBgLight.drawRect(0,0,this.width,this.height),this.gBgLight.endFill(),this.spBgVinette=e.getImageSprite(e.imageManager.bubbleVignette),this.spBgVinette.tint=this.option.colorDark,this.containerMaskTarget.addChild(this.gBgLight),this.containerMaskTarget.addChild(this.spBgVinette)},loadImageBg:function(){this.imageLoader=new PIXI.AssetLoader([this.option.bgImageUrl]),this.imageLoader.on("onComplete",$.proxy(this.bgImageLoadedHandler,this,this.option.bgImageUrl)),this.imageLoader.load()},bgImageLoadedHandler:function(t){this.spBgImage=PIXI.Sprite.fromImage(t),this.spBgImage.anchor.x=this.spBgImage.anchor.y=.5,this.spBgImage.width=this.spBgImage.height=Config.BUBBLE_DEFAULT_SIZE,(this.type==ModelBubbles.BUBBLE_MIX||this.type==ModelBubbles.BUBBLE_FAVORITE)&&(this.mcBubbles=e.getMovieClip(e.movieClipManager.mcBubbles),this.mcBubbles.mc.alpha=.5,this.mcBubbles.mc.anchor.x=this.mcBubbles.mc.anchor.y=0,this.containerMaskTarget.addChild(this.mcBubbles.mc),psy.browser.IS_LOW_PERFORMANCE||this.mcBubbles.mc.gotoAndPlay(0)),this.containerMaskTarget.addChildAt(this.spBgImage,0),this.adjust()},load:function(){this.loadHandler()},loadHandler:function(){this.show()},show:function(){var t=.3,e=this;if(this.gBubbleMask)var i=this.gBubbleMask.g.scale,n=this.gBubbleMask.g.originScale;var r=this.gBubbleStroke.g.scale,s=this.elementsContainer.scale,o=this.overlayContainer.scale,a=this.gBubbleStroke.g.originScale,l=.5,h=.1;this.containerMaskTarget&&TweenMax.to(this.containerMaskTarget,l,{delay:t,alpha:1}),this.gBubbleMask&&TweenMax.to(i,.01,{delay:t,x:n*h,y:n*h}),TweenMax.to(r,.01,{delay:t,x:a*h,y:a*h}),TweenMax.to(s,.01,{delay:t,x:h+.05,y:h+.05}),TweenMax.to(o,.01,{delay:t,x:h+.05,y:h+.05}),TweenMax.to(o,.01,{delay:t,x:h+.05,y:h+.05}),t+=.1,this.gBubbleMask&&TweenMax.to(i,l,{delay:t+.08,x:n,y:n,ease:Back.easeOut}),TweenMax.to(r,l,{delay:t,x:a,y:a,ease:Back.easeOut}),TweenMax.to(this.elementsContainer,l,{delay:1.3*t,alpha:1}),TweenMax.to(s,1.3*l,{delay:1.3*t,x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.overlayContainer,l,{delay:1.5*t,alpha:1}),TweenMax.to(o,1.5*l,{delay:1.5*t,x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.container.scale,l,{delay:t,x:1,y:1,ease:Back.easeOut}),TweenMax.delayedCall(t+l/2,function(){e.isShow=!0})},hide:function(){var t=.1;TweenMax.killTweensOf(this.container.scale),TweenMax.killTweensOf(this.container),TweenMax.to(this.container.scale,t,{x:1.1,y:1.1,ease:Expo.easeOut,onUpdate:$.proxy(this.updateAlphaMask,this)}),TweenMax.to(this.container,t,{alpha:0,ease:Sine.easeOut,onComplete:$.proxy(this.stop,this)}),this.trigger(this.events.HIDE_VIEW,{speed:t})},overHandler:function(){var t=this.gBubbleMask.g.scale,e=this.gBubbleStroke.g.scale,i=this.elementsContainer.scale,n=this.overlayContainer.scale,r=this.gBubbleMask.g.originScale,s=this.gBubbleStroke.g.originScale,o=.15,a=.9,l=.9;TweenMax.killTweensOf(t),TweenMax.killTweensOf(e),TweenMax.to(e,o,{x:s*a,y:s*a,ease:Sine.easeOut}),TweenMax.to(t,o,{delay:.08,x:r*a,y:r*a,ease:Sine.easeOut}),TweenMax.to(i,2*o,{x:a+.05,y:a+.05,ease:Sine.easeOut}),TweenMax.to(n,1.5*o,{delay:.08,x:a+.05,y:a+.05,ease:Sine.easeOut}),TweenMax.to(e,l,{delay:o,x:s,y:s,ease:Back.easeOut}),TweenMax.to(t,l,{delay:o+.08,x:r,y:r,ease:Back.easeOut}),TweenMax.to(i,2*l,{delay:2*o,x:1,y:1,ease:Back.easeOut}),TweenMax.to(n,1.5*l,{delay:1.5*o,x:1,y:1,ease:Back.easeOut})},stop:function(){this.isRunning=!1},start:function(){this.isRunning=!0,this.gBubbleMask&&this.gBubbleMask.gotoAndPlay(psy.math.randInt(0,this.gBubbleMask.totalFrames)),psy.browser.IS_LOW_PERFORMANCE&&(this.gBubbleMask&&this.gBubbleMask.update(),this.gBubbleStroke&&this.gBubbleStroke.update())},checkVisible:function(t,e,i){if(this.isVisibleChecked){for(var n=t+this.y+i,r=n-this.radius,s=n+this.radius,o=0;o<this.elements.length;o++){var a=this.elements[o],l=a.height*a.anchor.y,h=a.height-l;r=Math.min(r,r+a.y-l),s=Math.max(s,r+a.y+h)}return e>r&&s>=0}return this.isVisibleChecked=!0,!0},update:function(t,e,i,n,r){if(this.isRunning){psy.browser.IS_LOW_PERFORMANCE||(this.gBubbleMask&&this.gBubbleMask.update(),this.gBubbleStroke&&this.gBubbleStroke.update()),r=r||0;var s=(t+this.y+i+r-e/2)/100||0,o=this.currentFrame/1.5/(10*this.spinSize);this.flexY.constant=this.flexYConstant-Math.abs(s)/10,this.flexX.update(this.x,this.targetX),this.flexY.update(this.y,this.targetY),this.flexY._run(),this.flexX._run();var a=Math.sin(o)*this.spinSize/8,l=Math.cos(o)*this.spinSize/8;if(psy.browser.IS_LOW_PERFORMANCE)var a=0,l=0;this.setPosition(this.flexX.tween.current+a,this.flexY.tween.current+l+s),void 0==t||this.checkVisible(t,e,i+r)||this.isOpen||n?(this.container.visible=!0,this.setVisualPosition(this.x,this.y,s),this.trigger(this.events.UPDATE_VIEW,{isShow:this.isShow,isTweening:TweenMax.isTweening(this)||TweenMax.isTweening(this.container.scale),x:this.container.parent.x+this.x,y:this.container.parent.y+this.y+r,radius:this.radius,width:this.container.width,height:this.container.height,bubbleScale:this.container.scale.x,bubbleWidth:Config.BUBBLE_DEFAULT_SIZE*this.scale,bubbleHeight:Config.BUBBLE_DEFAULT_SIZE*this.scale})):(this.container.visible=!1,this.trigger(this.events.UPDATE_VIEW,!1)),this.currentFrame++}},setTargetPosition:function(t,e,i){this.targetX=this.isOpen?this.targetX:t,this.targetY=e,i&&(this.setPosition(t,e),this.update(0,0,0,!0),this.flexY.forceUpdate(e))},setPosition:function(t,e){this.x=t,this.y=e},setVisualPosition:function(t,e,i){i=i||0,this.container.position.x=t,this.container.position.y=e,this.mcFruit&&(this.mcFruit.mc.y=this.mcFruit.mc.origin.y+20*i);for(var n=0;n<this.particles.length;n++){var r=this.particles[n],s=this.currentFrame/2/(this.spinSize*r.power*2);r.x=r.originX+Math.sin(s)*this.spinSize,r.y=r.originY+5*i*r.power+Math.cos(s)*this.spinSize,r.alpha=psy.math.crop(0,1,r.originAlpha-Math.abs(i/6))}for(var n=0;n<this.elements.length;n++){var o=this.elements[n],s=this.currentFrame/2/(this.spinSize*o.power*5);o.x=o.originX+Math.sin(s)*this.spinSize,o.y=o.originY-10*i+Math.cos(s)*this.spinSize}},respond:function(){this.adjust()},adjust:function(){this._super.apply(this,arguments);var t=3,e=this.size/Config.BUBBLE_DEFAULT_SIZE,i=this.size/2;if(App.isRespondFrom(Config.MOBILE_MODE)){var n=ModelBubbles.getBubbleMobileScale(this.type);e*=n,i*=n}this.scale=e,this.radius=i,this.origin&&(this.origin.radius=i),this.gBubbleStroke&&(this.gBubbleStroke.g.scale.x=this.gBubbleStroke.g.scale.y=this.gBubbleStroke.g.originScale=e,this.gBubbleStroke.g.position.x=this.width/2+psy.math.randInt(-t,t),this.gBubbleStroke.g.position.y=this.height/2+psy.math.randInt(-t,t)),this.gBubbleMask&&(this.gBubbleMask.g.scale.x=this.gBubbleMask.g.scale.y=this.gBubbleMask.g.originScale=e,this.gBubbleMask.g.position.x=this.width/2,this.gBubbleMask.g.position.y=this.height/2),this.spBgImage&&(this.spBgImage.width=this.spBgImage.height=Config.BUBBLE_DEFAULT_SIZE*e*1.1,this.spBgImage.x=this.width/2,this.spBgImage.y=this.height/2),this.mcBubbles&&(this.mcBubbles.mc.width=this.width,this.mcBubbles.mc.height=this.height),this.spBgVinette&&(this.spBgVinette.width=this.width,this.spBgVinette.height=this.height)}})}),define("app/event/eventsBubble",[],function(){var t=_.extend({OPEN_MIXOLOGY:"app:open-mixology",OPENED_MIXOLOGY:"app:opened-mixology",CLOSE_MIXOLOGY:"app:close-mixology",INIT_MIXOLOGY_VIEW:"app:init-mixology-view",UPDATE_MIXOLOGY_VIEW:"app:update-mixology-view"},Backbone.Events);return t}),define("app/view/scene/bubble/sceneBubbleMix",["app/view/scene/bubble/sceneBubbleBase","app/model/modelSceneAsset","app/event/eventsBubble"],function(t,e,i){return t.extend({init:function(t){this._super(t)},render:function(){this._super();var t=psy.string.capitalize(this.option.data.flavor.id),i=psy.math.polar(this.radius,34-psy.math.rand(10));if(this.mcFruit=e.getMovieClip(e.movieClipManager["mcFruits"+t]),this.mcFruit.mc.loop=!1,this.mcFruit.mc.scale.x=this.mcFruit.mc.scale.y=1,this.option.data.flavorAngle){var i=psy.math.polar(this.radius,this.option.data.flavorAngle);this.mcFruit.mc.x=i.x,this.mcFruit.mc.y=i.y}else this.mcFruit.mc.x=this.radius+i.x,this.mcFruit.mc.y=this.radius+i.y;this.mcFruit.mc.rotation=psy.math.degToRad(2*psy.math.rand(0,10)),this.mcFruit.mc.animationSpeed=10/psy.frame.FPS,this.mcFruit.mc.origin={},this.mcFruit.mc.origin.x=this.mcFruit.mc.x,this.mcFruit.mc.origin.y=this.mcFruit.mc.y,this.delayFruitSpin=psy.math.randInt(0,100),this.overlayContainer.addChild(this.mcFruit.mc)},bind:function(){this._super.apply(this,arguments),this.listenTo(i,i.OPEN_MIX,$.proxy(this.openHandler,this))},openHandler:function(){this.container.scale.x=this.container.scale.y=10},start:function(){this._super(),this.mcFruit.mc.gotoAndPlay(0)},update:function(){this._super.apply(this,arguments),(this.delayFruitSpin+this.currentFrame)%210||this.mcFruit.mc.gotoAndPlay(0)}})}),define("app/view/scene/bubble/sceneBubbleFanFavorite",["app/view/scene/bubble/sceneBubbleBase"],function(t){return t.extend({})}),define("app/view/scene/bubble/sceneBubbleMixology",["app/view/scene/bubble/sceneBubbleBase","app/model/modelSceneAsset","app/event/eventsBubble"],function(t,e,i){return t.extend({init:function(t){this._super(t),this.origin={},this.origin.radius=this.radius,this.origin.scale=this.container.scale.x,this.isOpen=!1,this.isTweening=!0,this.bind()},bind:function(){this._super.apply(this,arguments)},load:function(){psy.loader.loadByURLs([this.option.data.photoUrl,this.option.data.photoHighUrl],$.proxy(this.loadHandler,this))},open:function(){var t=0,e=this.getOpenTargetScale(),i=this.getOpenTargetX();this.origin.x=this.x,this.origin.scale=this.container.scale.x,this.isOpen=!0,TweenMax.to(this.container.scale,.7,{x:.2,y:.2,ease:Quint.easeOut}),TweenMax.to(this.container,.7,{alpha:0}),TweenMax.to(this,.7,{delay:t,targetX:i,ease:Quart.easeIn}),t+=.4,TweenMax.to(this.container.scale,1.5,{delay:t,x:e,y:e,ease:Quint.easeInOut}),TweenMax.to(this,1.5,{delay:t,radius:this.origin.radius*e,ease:Quint.easeInOut})},close:function(){var t=0;this.isOpen=!1,TweenMax.set(this,{radius:.2*this.origin.radius}),TweenMax.to(this.container.scale,.7,{x:.2,y:.2,ease:Quint.easeOut}),TweenMax.to(this.container,.7,{delay:t,alpha:1}),t+=.7,TweenMax.to(this.container.scale,.7,{delay:t,x:this.origin.scale,y:this.origin.scale,ease:Quint.easeInOut}),TweenMax.to(this,.7,{delay:t,radius:this.origin.radius,ease:Quint.easeInOut})},getOpenTargetScale:function(){if(App.isRespondFrom(Config.MOBILE_MODE))return 1;var t=App.isRespondFrom(Config.PAD_MODE)?.7:1,e=Config.BUBBLE_EXPEND_RADIUS/this.radius*t;return e},getOpenTargetX:function(){if(App.isRespondFrom(Config.MOBILE_MODE))return(Config.BUBBLES_W-Config.MOBILE_MIN_W+this.size*this.scale)/2;var t=App.isRespondFrom(Config.PAD_MODE)?Config.PAD_W:Config.WIDE_W,e=(t-Config.BUBBLES_W)/2;return this.id%2?-e:Config.BUBBLES_W+e},respondHandler:function(t){this.response=t},adjust:function(){this._super.apply(this,arguments),this.isOpen&&(TweenMax.set(this,{targetX:this.getOpenTargetX()}),TweenMax.set(this.container.scale,{x:this.getOpenTargetScale(),y:this.getOpenTargetScale()}))}})}),define("app/view/scene/bubble/sceneBubbleTwitter",["app/view/scene/bubble/sceneBubbleBase","app/model/modelSceneAsset"],function(t,e){return t.extend({init:function(t){t.data.borderColor="#0f79fb",this._super(t)},render:function(){this._super();var t=e.getImageSprite(e.imageManager.bubbleIceTop),i=e.getImageSprite(e.imageManager.bubbleIceBottom),n=_.shuffle([0,1,2,3]);this.initElement(t,n.pop()),this.initElement(i,n.pop())},initElement:function(t,e){t.anchor.x=t.anchor.y=.5;var i=psy.math.polar(this.radius,45+90*e);t.x=t.originX=this.radius+i.x,t.y=t.originY=this.radius+i.y,t.scale.x=t.scale.y=t.power=this.elementPower+.3,this.elementsContainer.addChildAt(t,0),this.elements.push(t)}})}),define("app/view/scene/bubble/sceneBubbleInstagram",["app/view/scene/bubble/sceneBubbleBase"],function(t){return t.extend({init:function(t){t.data.borderColor="#ffb1b6",this._super(t)},load:function(){psy.loader.loadByURLs([this.option.bgImageUrl],$.proxy(this.loadHandler,this))}})}),define("app/view/scene/bubble/sceneBubbleFinder",["app/view/scene/bubble/sceneBubbleBase"],function(t){return t.extend({init:function(t){t.data.borderColor="#209be2",t.data.backgroundColorLight="#ffffff",t.data.backgroundColorDark="#e1e8f0",this._super(t)}})}),define("hgn!partial/bubble/bubbleBase",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="'),n.b(n.v(n.f("className",t,e,0))),n.b('">'),n.b("\n"+i),n.b('    <div class="bubble_contents js-contents">'),n.b("\n"+i),n.b("        "),n.b(n.t(n.f("contents",t,e,0))),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <!--<div class="bubble_border js-border" style="border-color:'),n.b(n.v(n.f("borderColor",t,e,0))),n.b('"></div>-->'),n.b("\n"+i),n.b("    <!--"),n.s(n.f("hasGradient",t,e,1),t,e,0,225,767,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("-->"),n.b("\n"+i),n.b('    <!--<svg height="100%" width="100%">-->'),n.b("\n"+i),n.b("    <!--<defs>-->"),n.b("\n"+i),n.b('    <!--<radialGradient id="grad" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">-->'),n.b("\n"+i),n.b('    <!--<stop offset="0%" style="stop-color:'),n.b(n.v(n.f("backgroundColorLight",t,e,0))),n.b(';stop-opacity:0" />-->'),n.b("\n"+i),n.b('    <!--<stop offset="100%" style="stop-color:'),n.b(n.v(n.f("backgroundColorDark",t,e,0))),n.b(';stop-opacity:1" />-->'),n.b("\n"+i),n.b("    <!--</radialGradient>-->"),n.b("\n"+i),n.b("    <!--</defs>-->"),n.b("\n"+i),n.b('    <!--<ellipse cx="50%" cy="50%" rx="50%" ry="50%" fill="url(#grad)" />-->'),n.b("\n"+i),n.b("    <!--Sorry, your browser does not support inline SVG.-->"),n.b("\n"+i),n.b("    <!--</svg>-->"),n.b("\n"+i),n.b("    <!--")}),t.pop()),n.b("-->"),n.b("\n"+i),n.b("    <!--"),n.s(n.f("hasLogo",t,e,1),t,e,0,809,909,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("-->"),n.b("\n"+i),n.b('    <!--<div class="logo" style="background-image: url('),n.b(n.v(n.d("beverage.logoUrl",t,e,0))),n.b(')"></div>-->'),n.b("\n"+i),n.b("    <!--")}),t.pop()),n.b("-->"),n.b("\n"+i),n.b("</div>"),n.fl()},"",t);return e.template=i,e}),define("app/view/bubble/viewBubbleBase",["hgn!partial/bubble/bubbleBase"],function(t){var e="left";return Backbone.View.extend({init:function(t){this.id=void 0!==t.id?t.id:"",this.bubbleId=t.bubbleId,this.classType=t.classType,this.className=this.classType?"bubble bubble-"+this.classType:"bubble",this.template=t.template,this.templateData=t.data||{},this.scene=t.scene,_.extend(this.templateData,{id:this.id,className:this.className,menus:Model.getRoutes(),imagePath:Config.IMAGE_URL,routes:Model.getRoutesByClazz()}),this.render(),this.bind()},render:function(){var i=this.template(this.templateData),n=_.extend(this.templateData,{contents:i});return this.el=t(n),this.$el=$(this.el),this.$el.hide(),this.id%2&&this.$el.addClass(e),this},bind:function(){this.listenTo(Events,Events.APP_EVENT.RESIZE,$.proxy(this.adjust,this)),this.listenTo(this.scene,this.scene.events.UPDATE_VIEW,this.update),this.listenTo(this.scene,this.scene.events.SHOW_VIEW,this.show),this.listenTo(this.scene,this.scene.events.HIDE_VIEW,this.hide)},overHandler:function(){this.scene.overHandler()},update:function(t){if(t&&t.isShow&&(t.x||t.y)){var e,i,n=t.radius-20,r=t.x-n,s=t.y-n;e=i=2*n,psy.css.translate3d(this.$el[0],r,s,0),this.$el.width(e),this.$el.height(i),this.x=r,this.y=s,this.$el.show()}else this.$el.hide()},load:function(){psy.loader.loadByContainer(this.$el,function(){Events.trigger(Events.ROUTE_EVENT.LOADED)},function(t,e){Events.trigger(Events.ROUTE_EVENT.LOADING,t,e)})},show:function(){var t=.3,e=.3;this.x&&(this.$el.show(),TweenMax.set(this.$el,{autoAlpha:0}),TweenMax.to(this.$el,t,{delay:e,autoAlpha:1,ease:Sine.easeOut}))},hide:function(){TweenMax.killTweensOf(this.$el),this.clean()},unbind:function(){this.$el.off(),this.stopListening(Events,Events.APP_EVENT.RESIZE)},adjust:function(t,e){t=t||window.innerWidth,e=e||window.innerHeight,this._width=t,this._height=e},destroy:function(){this.unbind(),this.hide()},clean:function(){this.$el.remove(),this.remove()}})}),define("hgn!partial/bubble/bubbleMix",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<img class="bubble_icon" src="'),n.b(n.v(n.d("beverage.logoUrl",t,e,0))),n.b('">'),n.b("\n"+i),n.b('<h4 class="title" style="color:'),n.b(n.v(n.f("textColor",t,e,0))),n.b('">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h4>"),n.b("\n"+i),n.b('<p class="copy" style="color:'),n.b(n.v(n.f("textColor",t,e,0))),n.b('">'),n.b(n.v(n.f("copy",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b('<a class="cta-btn-text js-cta-share" style="color:'),n.b(n.v(n.f("buttonTextColor",t,e,0))),n.b('">share this mix</a>'),n.fl()},"",t);return e.template=i,e}),define("app/view/bubble/viewBubbleMix",["app/view/bubble/viewBubbleBase","hgn!partial/bubble/bubbleMix"],function(t,e){return t.extend({init:function(t){this._super(_.extend(t,{bubbleId:t.id,classType:ModelBubbles.BUBBLE_MIX,template:e}))},bind:function(){this._super.apply(this,arguments),this.$el.on("click",$.proxy(this.clickHandler,this)),this.$el.on("mouseenter",$.proxy(this.overHandler,this))},clickHandler:function(){Events.trigger(Events.POPUP_EVENT.OPEN,Model.POPUP_SHARE,{data:this.templateData})}})}),define("hgn!partial/bubble/bubbleMixology",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<img class="bubble_icon" src="'),n.b(n.v(n.f("mixLogoUrl",t,e,0))),n.b('">'),n.b("\n"+i),n.b('<h4 class="title">Check Out This Mix<i class="icon-more"></i></h4>'),n.fl()},"",t);return e.template=i,e}),define("app/view/bubble/viewBubbleMixology",["app/view/bubble/viewBubbleBase","hgn!partial/bubble/bubbleMixology","app/event/eventsBubble"],function(t,e,i){return t.extend({init:function(t){this.isOpen=!1,this.openView=!1,this._super(_.extend(t,{bubbleId:t.id,classType:ModelBubbles.BUBBLE_MIXOLOGY,template:e}))},bind:function(){this._super.apply(this,arguments),this.$el.on("click",$.proxy(this.clickHandler,this)),this.$el.on("mouseenter",$.proxy(this.overHandler,this))},open:function(){this.isOpen=!0,this.$el.addClass("open")},close:function(){this.isOpen=!1;var t=this;TweenMax.delayedCall(.5,function(){t.$el.removeClass("open")})},update:function(t){this._super.apply(this,arguments),(this.isOpen||this.openView.$el)&&this.openView.update.apply(this.openView,arguments)},clickHandler:function(){this.isOpen||i.trigger(i.OPEN_MIXOLOGY,this.id,this.templateData)},overHandler:function(){this.isOpen||this._super.apply(this,arguments)},adjust:function(t,e){this._super.apply(this,arguments),this.openView.$el&&this.openView.adjust(this._width,this._height)}})}),define("hgn!partial/bubble/bubbleTwitter",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<i class="icon-social-twitter"></i>'),n.b("\n"+i),n.b('<p class="copy">'),n.b(n.t(n.f("copy",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b('<span class="user-name">'),n.b(n.v(n.f("userName",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('<span class="user-id">'),n.b(n.v(n.f("userId",t,e,0))),n.b("</span>"),n.fl()},"",t);return e.template=i,e}),define("app/view/bubble/viewBubbleTwitter",["app/view/bubble/viewBubbleBase","hgn!partial/bubble/bubbleTwitter"],function(t,e){return t.extend({init:function(t){this._super(_.extend(t,{bubbleId:t.id,classType:ModelBubbles.BUBBLE_TWITTER,template:e}))}})}),define("hgn!partial/bubble/bubbleInstagram",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<i class="icon-social-facebook"></i>'),n.b("\n"+i),n.b('<span class="user-name">'),n.b(n.v(n.f("userName",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('<span class="user-id">'),n.b(n.v(n.f("userId",t,e,0))),n.b("</span>"),n.fl()},"",t);return e.template=i,e}),define("app/view/bubble/viewBubbleInstagram",["app/view/bubble/viewBubbleBase","hgn!partial/bubble/bubbleInstagram"],function(t,e){return t.extend({init:function(t){this._super(_.extend(t,{bubbleId:t.id,classType:ModelBubbles.BUBBLE_INSTAGRAM,template:e}))}})}),define("hgn!partial/bubble/bubbleFinder",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<img class="bubble_icon" src="'),n.b(n.v(n.f("imagePath",t,e,0))),n.b('/bubble/bubble-finder-icon.png">'),n.b("\n"+i),n.b('<p class="title">Find a Pepsi Spire<sup>&#174;</sup><br>Near You<i class="icon-more"></i></p>'),n.fl()},"",t);return e.template=i,e}),define("app/view/bubble/viewBubbleFinder",["app/view/bubble/viewBubbleBase","hgn!partial/bubble/bubbleFinder"],function(t,e){return t.extend({init:function(t){this._super(_.extend(t,{bubbleId:t.id,classType:ModelBubbles.BUBBLE_FINDER,template:e}))},bind:function(){this._super.apply(this,arguments),this.$el.on("click",$.proxy(this.clickHandler,this)),this.$el.on("mouseenter",$.proxy(this.overHandler,this))},clickHandler:function(){Router.navigate(Model.ROUTE_FINDER)}})}),define("hgn!partial/bubble/bubbleFavorite",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<img class="logo" src="'),n.b(n.v(n.f("beverageImage",t,e,0))),n.b('">'),n.b("\n"+i),n.b('<ul class="mixList '),n.b(n.v(n.f("mixLength",t,e,0))),n.b('">'),n.b("\n"+i),n.s(n.f("mix",t,e,1),t,e,0,90,261,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("    <li>"),n.b("\n"+i),n.b('        <i class="icon-plus" style="color:'),n.b(n.v(n.f("textColor",t,e,0))),n.b('"></i>'),n.b("\n"+i),n.b('        <img src="'),n.b(n.v(n.f("imagePath",t,e,0))),n.b('/alpha.png" style="background-image: url('),n.b(n.v(n.f("image",t,e,0))),n.b(')">'),n.b("\n"+i),n.b("    </li>"),n.b("\n")}),t.pop()),n.b("</ul>"),n.fl()},"",t);return e.template=i,e}),define("app/view/bubble/viewBubbleFavorite",["app/view/bubble/viewBubbleBase","hgn!partial/bubble/bubbleFavorite"],function(t,e){return t.extend({init:function(t){this._super(_.extend(t,{bubbleId:t.id,classType:ModelBubbles.BUBBLE_FAVORITE,template:e}))},render:function(){this.templateData.mix=[],this.templateData.beverageImage=this.templateData.imageLogo,this.templateData.mixLength="mixLength"+this.templateData.flavors.length;for(var t=0;t<this.templateData.flavors.length;t++){var e=this.templateData.flavors[t];this.templateData.mix.push({image:e.logoUrl})}this._super.apply(this,arguments)}})}),define("app/model/modelBubbles",["underscore","app/model/modelMix","app/model/modelMixology","app/model/modelTwitter","app/model/modelInstagram","app/model/modelFavorite","app/view/scene/bubble/sceneBubbleMix","app/view/scene/bubble/sceneBubbleFanFavorite","app/view/scene/bubble/sceneBubbleMixology","app/view/scene/bubble/sceneBubbleTwitter","app/view/scene/bubble/sceneBubbleInstagram","app/view/scene/bubble/sceneBubbleFinder","app/view/bubble/viewBubbleMix","app/view/bubble/viewBubbleMixology","app/view/bubble/viewBubbleTwitter","app/view/bubble/viewBubbleInstagram","app/view/bubble/viewBubbleFinder","app/view/bubble/viewBubbleFavorite"],function(t,e,i,n,r,s,o,a,l,h,c,u,d,p,f,g,m,v){var b=function(){};return b.prototype={init:function(){this.BUBBLE_MIX="mix",this.BUBBLE_MIXOLOGY="mixology",this.BUBBLE_TWITTER="twitter",this.BUBBLE_INSTAGRAM="instagram",this.BUBBLE_FAVORITE="favorite",this.BUBBLE_FINDER="finder",this.bubbles=[{type:this.BUBBLE_MIX,model:e,scene:o,view:d,baseSize:420,mobileScale:.9},{type:this.BUBBLE_MIXOLOGY,model:i,scene:l,view:p,baseSize:550,mobileScale:.63},{type:this.BUBBLE_TWITTER,model:n,scene:h,view:f,baseSize:420,mobileScale:.9},{type:this.BUBBLE_INSTAGRAM,model:r,scene:c,view:g,baseSize:330,mobileScale:.8},{type:this.BUBBLE_FAVORITE,model:s,scene:a,view:v,baseSize:400,mobileScale:.9},{type:this.BUBBLE_FINDER,scene:u,view:m,baseSize:340,mobileScale:.9}]},getBubbleSize:function(e){return t.findWhere(this.bubbles,{type:e}).baseSize},getBubbleMobileScale:function(e){return t.findWhere(this.bubbles,{type:e}).mobileScale},getBubbleModel:function(e){return t.findWhere(this.bubbles,{type:e}).model},getBubbleView:function(e){return t.findWhere(this.bubbles,{type:e}).view},getBubbleScene:function(e){return t.findWhere(this.bubbles,{type:e}).scene}},new b}),define("app/view/viewBase",["backbone_super"],function(t){return Backbone.View.extend({init:function(t){this.response=!1,this.id=t.id||"",this.classType=t.classType,this.className=this.classType&&this.id?this.classType+" "+this.classType+"-"+this.id:this.id?this.id:this.classType,this.template=t.template,this.templateData=t.templateData||{},this.$el=t.$el,_.extend(this.templateData,{id:this.id,className:this.className,menus:Model.getRoutesForMenu(),imagePath:Config.IMAGE_URL,dataPath:Config.DATA_URL,routes:Model.getRoutesByClazz()}),this.render(),this.bind()},show:function(){this.$el.show()},hide:function(){this.$el.hide()},render:function(){return this.$el?this.el=this.$el[0]:(this.el=this.template(this.templateData),this.$el=$(this.el)),this.$elM=this.$el.find(".js-m"),this},bind:function(){},respondHandler:function(t){t.prev&&this["unbind"+psy.string.capitalize(Config.RESPONSE_NANES[t.prev])](),this.response=t.current,this["bind"+psy.string.capitalize(Config.RESPONSE_NANES[t.current])]()},bindDesk:function(){},bindPad:function(){},bindMobile:function(){},unbindDesk:function(){},unbindPad:function(){},unbindMobile:function(){},unbind:function(){this.unbindDesk(),this.unbindPad(),this.unbindMobile()},destroy:function(){this.unbind(),this.hide(),this.clean()},clean:function(){this.$el.removeData().unbind().remove(),this.undelegateEvents(),this.remove(),Backbone.View.prototype.remove.call(this),this.$el=null}})}),define("app/view/component/dropDown",[],function(){return function(t){var e=t.find(".js-dropdown-arrows i"),i=new TimelineMax({align:"sequence",onStart:function(){t[0].style.display="block",t[0].style.opacity=0},onReverseComplete:function(){t[0].style.display="none",t[0].style.opacity=0}});return console.log(e.length),i.add(TweenLite.to(t,.5,{opacity:1,ease:Power2.easeOut})),i.add(TweenLite.from(t,.35,{y:"-15%",ease:Power3.easeInOut}),"-=.5"),i.add(TweenMax.to(e.first(),.25,{rotation:"-=45",opacity:1}),"-=.35"),i.add(TweenMax.to(e.last(),.25,{rotation:"+=45",opacity:1}),"-=.35"),i.add(TweenMax.staggerFrom(t.find(".nav_item"),.5,{y:"-35%",opacity:0,ease:Power2.easeOut},".15"),"-=.5"),i.pause(),{show:function(){i.play(0)},hide:function(){i.reverse(.5)}}}}),define("app/view/component/dropDownMobile",[],function(){return function(t){var e=t.find(".js-dropdown-arrows i"),i=new TimelineMax({align:"sequence",onStart:function(){t[0].style.display="block",t[0].style.opacity=0},onReverseComplete:function(){t[0].style.display="none",t[0].style.opacity=0}});return i.add(TweenLite.to(t,.5,{opacity:1,ease:Power2.easeOut})),i.add(TweenLite.from(t,.35,{y:"-15%",ease:Power3.easeInOut
}),"-=.5"),i.add(TweenMax.to(e.first(),.25,{rotation:"-=45",opacity:1}),"-=.35"),i.add(TweenMax.to(e.last(),.25,{rotation:"+=45",opacity:1}),"-=.35"),i.add(TweenMax.staggerFrom(t.find(".nav_item"),.5,{y:"-35%",opacity:0,ease:Power2.easeOut},".15"),"-=.5"),i.pause(),{show:function(){i.play(0)},hide:function(){i.reverse(.5)}}}}),define("hgn!partial/module/header",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" class="'),n.b(n.v(n.f("className",t,e,0))),n.b('">'),n.b("\n"+i),n.b('    <div class="bg"></div>'),n.b("\n"+i),n.b('    <div class="wrapper desk no-m">'),n.b("\n"+i),n.b('        <div class="cta-btn-logo">'),n.b("\n"+i),n.b('            <img class="js-logo-white" src="'),n.b(n.v(n.f("imagePath",t,e,0))),n.b('/header/logo-spire.png">'),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b('        <ul id="nav" class="header_nav js-nav">'),n.b("\n"+i),n.s(n.f("menus",t,e,1),t,e,0,306,509,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <li class="nav_item">'),n.b("\n"+i),n.b('                <a class="cta-btn-text js-nav-item '),n.b(n.t(n.f("children",t,e,0))),n.b('" href="'),n.b(n.t(n.f("url",t,e,0))),n.b('">'),n.b("\n"+i),n.b("                    "),n.b(n.t(n.f("name",t,e,0))),n.b("\n"+i),n.b("                </a>"),n.b("\n"+i),n.b("            </li>"),n.b("\n")}),t.pop()),n.b("        </ul>"),n.b("\n"+i),n.b('        <div class="header_nav__dropdown js-dropdown '),n.b(n.t(n.f("parent",t,e,0))),n.b('">'),n.b("\n"+i),n.b('            <span class="header_nav__dropdown-arrow js-dropdown-arrows">'),n.b("\n"+i),n.b("                <i />"),n.b("\n"+i),n.b("                <i />"),n.b("\n"+i),n.b("            </span>"),n.b("\n"+i),n.b("            <ul>"),n.b("\n"+i),n.s(n.f("dropdown",t,e,1),t,e,0,787,998,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                <li class="nav_item">'),n.b("\n"+i),n.b('                    <a class="cta-btn-text js-nav-item" href="'),n.b(n.t(n.f("url",t,e,0))),n.b('">'),n.b("\n"+i),n.b("                        "),n.b(n.t(n.f("name",t,e,0))),n.b("\n"+i),n.b("                    </a>"),n.b("\n"+i),n.b("                </li>"),n.b("\n")}),t.pop()),n.b("            </ul>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b('        <ul class="header_social">'),n.b("\n"+i),n.b("            <li>"),n.b("\n"+i),n.b('                <a class="cta-btn-text" href="'),n.b(n.v(n.f("facebookLinkUrl",t,e,0))),n.b('" target="_blank">'),n.b("\n"+i),n.b('                    <i class="icon-nav-facebook"></i>'),n.b("\n"+i),n.b("                </a>"),n.b("\n"+i),n.b("            </li>"),n.b("\n"+i),n.b("            <li>"),n.b("\n"+i),n.b('                <a class="cta-btn-text" href="'),n.b(n.v(n.f("twitterLinkUrl",t,e,0))),n.b('" target="_blank">'),n.b("\n"+i),n.b('                    <i class="icon-nav-twitter"></i>'),n.b("\n"+i),n.b("                </a>"),n.b("\n"+i),n.b("            </li>"),n.b("\n"+i),n.b("        </ul>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="wrapper m js-m">'),n.b("\n"+i),n.b('        <div class="header_section header_section-nav js-slide-m">'),n.b("\n"+i),n.b('            <div class="inner">'),n.b("\n"+i),n.b('                <div class="bg"></div>'),n.b("\n"+i),n.b('                <ul class="header_nav js-nav-m">'),n.b("\n"+i),n.s(n.f("menus",t,e,1),t,e,0,1743,2101,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                    <li class="nav_item js-nav-item" data-slide-target="'),n.b(n.t(n.f("children",t,e,0))),n.b('">'),n.b("\n"+i),n.b('                        <a class="cta-btn-text" href="'),n.b(n.t(n.f("url",t,e,0))),n.b('">'),n.b("\n"+i),n.b('                            <span class="cta-btn_text">'),n.b(n.t(n.f("name",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('                            <i class="icon-prev"></i>'),n.b("\n"+i),n.b("                        </a>"),n.b("\n"+i),n.b("                    </li>"),n.b("\n")}),t.pop()),n.b("                </ul>"),n.b("\n"+i),n.b('                <div class="header_nav header__nav-m js-dropdown-m '),n.b(n.t(n.f("parent",t,e,0))),n.b('">'),n.b("\n"+i),n.b('                    <div class="nav_item nav_item-back-button">'),n.b("\n"+i),n.b('                        <a class="cta-btn-text js-slide-close" href="#">'),n.b("\n"+i),n.b('                            <i class="icon-prev"></i>'),n.b("\n"+i),n.b('                            <span class="cta-btn_text">Back</span>'),n.b("\n"+i),n.b("                        </a>"),n.b("\n"+i),n.b("                    </div>"),n.b("\n"+i),n.b("                    <ul>"),n.b("\n"+i),n.s(n.f("dropdown",t,e,1),t,e,0,2594,2945,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('                        <li class="nav_item js-nav-item">'),n.b("\n"+i),n.b('                            <a class="cta-btn-text" href="'),n.b(n.t(n.f("url",t,e,0))),n.b('">'),n.b("\n"+i),n.b('                                <span class="cta-btn_text">'),n.b(n.t(n.f("name",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('                                <i class="icon-prev"></i>'),n.b("\n"+i),n.b("                            </a>"),n.b("\n"+i),n.b("                        </li>"),n.b("\n")}),t.pop()),n.b("                    </ul>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b('                <div class="header_footer js-footer-m"></div>'),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b('            <div class="header_top">'),n.b("\n"+i),n.b('                <a class="cta-btn cta-btn-logo">'),n.b("\n"+i),n.b('                    <img class="js-logo-white" src="'),n.b(n.v(n.f("imagePath",t,e,0))),n.b('/header/logo-spire.png">'),n.b("\n"+i),n.b("                </a>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b('        <div class="header_section header_section-bar">'),n.b("\n"+i),n.b('            <div class="header_top">'),n.b("\n"+i),n.b('                <div class="cta-btn-logo">'),n.b("\n"+i),n.b('                    <img class="js-logo-white" src="'),n.b(n.v(n.f("imagePath",t,e,0))),n.b('/header/logo-spire.png">'),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b('        <a class="cta-btn cta-btn-nav js-cta-nav-m">'),n.b("\n"+i),n.b('            <span class="inner">'),n.b("\n"+i),n.b('                <i class="top"></i>'),n.b("\n"+i),n.b('                <i class="middle"></i>'),n.b("\n"+i),n.b('                <i class="bottom"></i>'),n.b("\n"+i),n.b("            </span>"),n.b("\n"+i),n.b("        </a>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},"",t);return e.template=i,e}),define("hgn!partial/module/footer",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" class="'),n.b(n.v(n.f("className",t,e,0))),n.b(' no-m">'),n.b("\n"+i),n.b('    <div class="wrapper">'),n.b("\n"+i),n.b('        <p class="footer_copyright">'),n.b("\n"+i),n.b("            &#169; 2015 PepsiCo, Inc. PEPSI SPIRE, SPIRE and all beverage-related trademarks are owned by PepsiCo, Inc.,"),n.b("\n"+i),n.b("            its subsidiaries or affiliates."),n.b("\n"+i),n.b("        </p>"),n.b("\n"+i),n.b('        <ul class="footer_links footer_links-first">'),n.b("\n"+i),n.b("            <li>"),n.b("\n"+i),n.b('                <a class="cta-btn-text" href="http://policy.pepsi.com/privacy" target="_blank">Privacy Policy</a>'),n.b("\n"+i),n.b("            </li>"),n.b("\n"+i),n.b("            <li>"),n.b("\n"+i),n.b('                <a class="cta-btn-text" href="http://www.pepsi.com/terms" target="_blank">Terms & Conditions</a><br>'),n.b("\n"+i),n.b("            </li>"),n.b("\n"+i),n.b("        </ul>"),n.b("\n"+i),n.b('        <ul class="footer_links">'),n.b("\n"+i),n.b("            <li>"),n.b("\n"+i),n.b('                <a class="cta-btn-text" href="http://www.pepsicobeveragefacts.com" target="_blank">Nutritional'),n.b("\n"+i),n.b("                    Information</a>"),n.b("\n"+i),n.b("            </li>"),n.b("\n"+i),n.b("            <li>"),n.b("\n"+i),n.b('                <a class="cta-btn-text" href="http://policy.pepsi.com/aboutads" target="_blank">About Our Ads</a>'),n.b("\n"+i),n.b("            </li>"),n.b("\n"+i),n.b("        </ul>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},"",t);return e.template=i,e}),define("app/view/module/viewModuleHeader",["app/view/viewBase","app/view/component/dropDown","app/view/component/dropDownMobile","hgn!partial/module/header","hgn!partial/module/footer"],function(t,e,i,n,r){var s="show",o="select",a="opening",l="open",h=.5;return t.extend({init:function(){this.isMobileNavOpen=!1,this.callOpenMobile=this.openMobileNavHandler.bind(this),this.callCloseMobile=this.closeMobileNavHandler.bind(this),this._super({id:"header",classType:"module",template:n,templateData:{facebookLinkUrl:Config.FACEBOOK_HUB_URL,twitterLinkUrl:Config.TWITTER_HUB_URL,dropdown:Model.getDropDown(Model.FIND_PEPSI)}})},render:function(){this._super.apply(this,arguments),this.$menus=this.$el.find(".js-nav .js-nav-item"),this.$menusMobile=this.$el.find(".js-nav-m .js-nav-item"),this.$footerMobile=this.$el.find(".js-footer-m"),this.$dropDown=this.$el.find(".js-dropdown"),this.$dropDownNavItem=this.$el.find(".js-nav-item."+Model.FIND_PEPSI),this.$slideWrapper=this.$el.find(".js-slide-m"),this.$slideNavItem=this.$el.find("[data-slide-target]"),this.$ctaFacebook=this.$el.find(".js-cta-facebook"),this.$ctaTwitter=this.$el.find(".js-cta-twitter"),this.$ctaMobileNav=this.$elM.find(".js-cta-nav-m"),this.dropDown=e(this.$dropDown),this.dropDownMobile=i(this.$dropDown);var t=$(r());this.$footerMobile.append(t.html())},bind:function(){this._super(),this.$ctaFacebook.on("click",this.clickFacebookHandler.bind(this)),this.$ctaTwitter.on("click",this.clickTwitterHandler.bind(this)),this.$el.on("mouseover","."+Model.FIND_PEPSI,this.showDropdown.bind(this)),this.$dropDown.on("mouseleave",this.hideDropdown.bind(this)),this.$slideNavItem.on("click",function(t){if(""!==t.currentTarget.getAttribute("data-slide-target")){t.preventDefault();var e=$(".js-dropdown-m");e[0]&&this.$slideWrapper.addClass("is-open")}}.bind(this)),this.$el.find(".js-slide-close").on("click",function(t){t.preventDefault(),this.$slideWrapper.removeClass("is-open")}.bind(this)),this.listenTo(Events,Events.APP_EVENT.OPENING,$.proxy(this.openingHandler,this)),this.listenTo(Events,Events.APP_EVENT.RESPOND,$.proxy(this.respondHandler,this)),this.listenTo(Events,Events.SCROLL_EVENT.SCROLL,$.proxy(this.scrollHandler,this)),this.listenTo(Events,Events.ROUTE_EVENT.LOADED,$.proxy(this.routeHandler,this))},bindMobile:function(){this._super.apply(this,arguments),this.$ctaMobileNav.on("click",$.proxy(this.clickMobileNavHandler,this))},unbindMobile:function(){this._super.apply(this,arguments),this.closeMobileNav(),this.$ctaMobileNav.off("click")},closeMobileNav:function(){TweenMax.killDelayedCallsTo(this.callCloseMobile),this.isMobileNavOpen=!1,this.$el.removeClass(a),TweenMax.delayedCall(h,this.callCloseMobile),Events.trigger(Events.SCROLL_EVENT.START)},openMobileNav:function(){TweenMax.killDelayedCallsTo(this.callCloseMobile),this.isMobileNavOpen=!0,this.$el.addClass(a),TweenMax.delayedCall(h,this.callOpenMobile),Events.trigger(Events.SCROLL_EVENT.STOP)},openMobileNavHandler:function(){this.$el.addClass(l)},showDropdown:function(t){this.$dropDownNavItem.addClass("hover"),this.dropDown.show(!0)},hideDropdown:function(t){this.$dropDownNavItem.removeClass("hover"),this.dropDown.hide()},closeMobileNavHandler:function(){this.$el.removeClass(l)},clickMobileNavHandler:function(){this.isMobileNavOpen?this.closeMobileNav():this.openMobileNav()},routeHandler:function(){var t=_.findWhere(this.templateData.menus,{clazz:Router.currentRoute.state}),e=this.templateData.menus.indexOf(t);this.$menus.removeClass(o),this.$menus.eq(e).addClass(o),this.$menusMobile.removeClass(o),this.$menusMobile.eq(e).addClass(o),this.response!=Config.MOBILE_MODE||Router.currentRoute.state==Model.ROUTE_DEFAULT&&!Router.prevRoute.state||this.closeMobileNav()},scrollHandler:function(t){t.current>50?this.$el.addClass("scroll"):this.$el.removeClass("scroll")},clickFacebookHandler:function(){psy.social.openFacebookShare(Config.SITE_URL,"Check out this custom creation that can you mix up at just the touch of a button. Pick your drink, add in a few flavor shots and you've got a mix thats all your own.",Config.DATA_IMAGE_URL+"/mix/mix-share-mdew.jpg","Pepsi Spire<sup>&#174;</sup>: It's Your Drink, Your Way","Pepsi Spire&#8482")},clickTwitterHandler:function(){psy.social.openTwitterShare(Config.SITE_URL,"Check out this custom creation that can you mix up at the touch of a button. Pepsi Spire: It's your drink, your way.")},openingHandler:function(){this.$el.addClass(s)}})}),define("app/view/module/viewModuleFooter",["app/view/viewBase","hgn!partial/module/footer"],function(t,e){return t.extend({init:function(){this._super({id:"footer",classType:"module",template:e}),this.hide()},render:function(){this._super.apply(this,arguments),this.$ctaPolicy=this.$el.find(".js-cta-policy"),this.$ctaTerms=this.$el.find(".js-cta-terms")},bind:function(){this._super(),this.listenTo(Events,Events.APP_EVENT.RESPOND,$.proxy(this.respondHandler,this)),this.listenTo(Events,Events.APP_EVENT.OPENING,$.proxy(this.openingHandler,this)),this.$ctaPolicy.on("click",$.proxy(this.clickPolicyHandler,this)),this.$ctaTerms.on("click",$.proxy(this.clickTermsHandler,this))},bindMobile:function(){this.hide()},unbindMobile:function(){this.show()},clickPolicyHandler:function(){Events.trigger(Events.POPUP_EVENT.OPEN,Model.POPUP_LEGAL,{type:Model.POPUP_LEGAL_POLICY})},clickTermsHandler:function(){Events.trigger(Events.POPUP_EVENT.OPEN,Model.POPUP_LEGAL,{type:Model.POPUP_LEGAL_TERMS})},openingHandler:function(){this.response!=Config.MOBILE_MODE&&this.show()}})}),define("hgn!partial/module/popup",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div id="'),n.b(n.v(n.f("id",t,e,0))),n.b('" class="'),n.b(n.v(n.f("className",t,e,0))),n.b('">'),n.b("\n"+i),n.b('    <div class="bg js-bg"></div>'),n.b("\n"+i),n.b('    <div class="popup_contents js-contents"></div>'),n.b("\n"+i),n.b("</div>"),n.fl()},"",t);return e.template=i,e}),define("app/view/popup/viewPopupBase",[],function(){return Backbone.View.extend({EVENT:{LOADED:"EVENT:LOADED",CLOSE:"EVENT:CLOSE",HIDDEN:"EVENT:HIDDEN"},init:function(t){_.extend(this,t),this.id=this.id||"",this.className=this.className||this.id||"",this.templateData=this.templateData||"",this.params=this.params||{},this.width=window.innerWidth,this.height=window.innerHeight,this.render(),this.bind()},render:function(){this.el=$('<div class="popup-'+this.className+'"></div>'),this.$el=$(this.el),TweenMax.set(this.$el,{autoAlpha:0}),this.$el.append(this.template(this.templateData))},bind:function(){this.$ctaClose.on("click",$.proxy(this.clickCloseHandler,this))},unbind:function(){this.$ctaClose.off("click")},load:function(){psy.loader.loadByContainer(this.$el,$.proxy(this.loadHandler,this))},show:function(){TweenMax.to(this.$el,.3,{autoAlpha:1})},loadHandler:function(){this.trigger(this.EVENT.LOADED)},clickCloseHandler:function(){this.params.closeTo?Events.trigger(Events.POPUP_EVENT.CLOSE_TO,this.params.closeTo):this.trigger(this.EVENT.CLOSE)},clean:function(){this.$el.removeData().unbind().remove(),this.undelegateEvents(),this.remove(),Backbone.View.prototype.remove.call(this),this.$el=null},adjust:function(t,e){this._width=t||this._width,this._height=e||this._height}})}),define("hgn!partial/popup/popupShare",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="bg bg-fill js-bg"></div>'),n.b("\n"+i),n.b('<div class="bg bg-stroke js-stroke"></div>'),n.b("\n"+i),n.b('<div class="inner">'),n.b("\n"+i),n.b('    <h1 class="title">'),n.b("\n"+i),n.b("        Share This Mix"),n.b("\n"+i),n.b("    </h1>"),n.b("\n"+i),n.b("\n"+i),n.b('    <p class="copy">'),n.b("\n"+i),n.b("        Post or tweet this mix on Facebook and Twitter"),n.b("\n"+i),n.b("    </p>"),n.b("\n"+i),n.b('    <ul class="socials">'),n.b("\n"+i),n.b("        <li>"),n.b("\n"+i),n.b('            <a class="cta-btn-social js-cta-facebook">'),n.b("\n"+i),n.b('                <i class="icon-social-facebook"></i>'),n.b("\n"+i),n.b('                <span class="cta-btn_text">Facebook</span>'),n.b("\n"+i),n.b("            </a>"),n.b("\n"+i),n.b("        </li>"),n.b("\n"+i),n.b("        <li>"),n.b("\n"+i),n.b('            <a class="cta-btn-social js-cta-twitter">'),n.b("\n"+i),n.b('                <i class="icon-social-twitter"></i>'),n.b("\n"+i),n.b('                <span class="cta-btn_text">Twitter</span>'),n.b("\n"+i),n.b("            </a>"),n.b("\n"+i),n.b("        </li>"),n.b("\n"+i),n.b("    </ul>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i),n.b('<a class="cta-btn-close js-cta-close">'),n.b("\n"+i),n.b('    <div class="bg-fill"></div>'),n.b("\n"+i),n.b('    <i class="icon-close"></i>'),n.b("\n"+i),n.b("</a>"),n.fl()},"",t);return e.template=i,e}),define("app/view/popup/viewPopupShare",["app/view/popup/viewPopupBase","hgn!partial/popup/popupShare"],function(t,e){return t.extend({init:function(t){this._super({className:"share",id:"popup-share",template:e,templateData:{routes:Model.getRoutesByClazz()},params:t})},render:function(){this._super.apply(this,arguments),this.$ctaClose=this.$el.find(".js-cta-close")},bind:function(){this._super.apply(this,arguments),this.$ctaClose.on("click",function(){Events.trigger(Events.POPUP_EVENT.CLOSE_ALL)}),this.$ctaFacebook=this.$el.find(".js-cta-facebook"),this.$ctaTwitter=this.$el.find(".js-cta-twitter"),this.$bg=this.$el.find(".js-bg"),this.$ctaFacebook.on("click",$.proxy(this.clickFacebookHandler,this)),this.$ctaTwitter.on("click",$.proxy(this.clickTwitterHandler,this))},show:function(){TweenMax.set(this.$el,{autoAlpha:1,scale:.4}),TweenMax.set(this.$bg,{scale:.3}),TweenMax.to(this.$el,.5,{scale:1,ease:Back.easeOut}),TweenMax.to(this.$bg,.8,{scale:1,ease:Back.easeOut})},hide:function(){TweenMax.to(this.$el,.25,{autoAlpha:0,scale:.7,ease:Back.easeIn}),TweenMax.to(this.$bg,.4,{scale:.7,ease:Back.easeIn})},clickFacebookHandler:function(){psy.social.openFacebookShare(Config.SITE_URL,"Loving this mix from Pepsi Spire®!",this.params.data.sharePhotoUrl,"Pepsi Spire®: It's Your Drink, Your Way","Pepsi Spire®")},clickTwitterHandler:function(){psy.social.openTwitterShare(Config.SITE_URL,"Loving this mix from #PepsiSpire!")}})}),define("app/view/module/viewModulePopup",["app/view/viewBase","hgn!partial/module/popup","app/view/popup/viewPopupShare"],function(t,e,i){return t.extend({init:function(){this.trash=[],this.stack=[],this.currentPopup=0,this.prevPopup=0,this.currentClazz=0,this._super({id:"popup",className:"popup",template:e})},render:function(){this._super(),TweenMax.set(this.$el,{autoAlpha:0}),this.$ctaBg=this.$el.find(".js-bg"),this.$ctaClose=this.$el.find(".js-cta-close"),this.$contents=this.$el.find(".js-contents"),this.$ctaClose.remove()},bind:function(){this.listenTo(Events,Events.ROUTE_EVENT.UPDATE,$.proxy(this.closeAll,this)),this.listenTo(Events,Events.APP_EVENT.RESIZE,$.proxy(this.adjust,this)),this.listenTo(Events,Events.POPUP_EVENT.OPEN,$.proxy(this.open,this)),this.listenTo(Events,Events.POPUP_EVENT.CLOSE,$.proxy(this.closeHandler,this)),this.listenTo(Events,Events.POPUP_EVENT.CLOSE_ALL,$.proxy(this.closeAll,this)),this.listenTo(Events,Events.POPUP_EVENT.CLOSE_TO,$.proxy(this.closeAllTo,this)),this.$ctaBg.on("click",$.proxy(this.closeAll,this))},open:function(){var t=this,e=_.toArray(arguments),i=e[0],n=e[1],r="app/view/popup/viewPopup"+psy.string.capitalize(i),s=this.stack[this.stack.length-1];s&&s.id.search(i)>-1||(this.stack.push({id:i}),require([r],function(e){var i=new e;i.$ctaClose=t.$ctaClose.clone(),i.init(n),t.stack.pop(),t.addPopup(i),t.$contents.append(i.$el),t.listenToOnce(i,i.EVENT.LOADED,$.proxy(t.loadHandler,t)),t.listenToOnce(i,i.EVENT.CLOSE,$.proxy(t.closeHandler,t)),t.listenToOnce(i,i.EVENT.CLOSE_ALL,$.proxy(t.closeAll,t)),i.load()}))},addPopup:function(t){this.prevPopup=this.currentPopup,this.currentPopup=t,this.stack.push(t)},removePopup:function(){this.trash.push(this.stack.pop()),this.currentPopup=this.stack[this.stack.length-1],this.prevPopup=this.stack[this.stack.length-2],this.cleanPopups()},removeAllPopups:function(){for(var t=this.stack.length,e=0;t>e;e++)this.removePopup()},showAll:function(){this.adjust();var t=this.currentPopup.$el;TweenMax.to(this.$el,.3,{autoAlpha:1,ease:Sine.easeOut}),t.show(),this.currentPopup.show(),Events.trigger(Events.APP_EVENT.OVERLAY_SHOW)},closeAll:function(){if(this.currentPopup){this.currentPopup.hide();var t=this;TweenMax.to(this.$el,.3,{delay:.3,autoAlpha:0,ease:Sine.easeOut,onComplete:function(){t.removeAllPopups(),Events.trigger(Events.APP_EVENT.OVERLAY_HIDE)}})}},closeAllTo:function(t){for(var e=this.stack.length,i=0,n=e-1;n>-1;n--)if(t==this.stack[n].id){if(this.stack[n].params.closeTo){t=this.stack[n].params.closeTo;continue}i=n;break}var r=_.clone(this.stack);this.trash=r.slice(i,e-1),this.stack=r.slice(0,i),this.stack.push(this.currentPopup),i?(this.prevPopup=this.stack[i-1],this.flipToClose(),this.cleanPopups()):this.closeAll()},flipToShow:function(){var t=this.currentPopup.$el,e=this.prevPopup.$el,i=this,n=.7,r=n;TweenMax.set(t,{rotationY:-90,ease:Quint.easeIn}),TweenMax.to(e,n,{rotationY:90,ease:Quint.easeIn}),TweenMax.delayedCall(n,function(){e.hide(),t.show(),i.currentPopup.show(),i.adjust()}),TweenMax.to(t,n,{delay:r,rotationY:0,ease:Quint.easeOut})},flipToClose:function(){var t=this.currentPopup.$el,e=this.prevPopup.$el,i=this,n=.7,r=n;TweenMax.set(e,{rotationY:-90,ease:Quint.easeIn}),TweenMax.to(t,n,{rotationY:90,ease:Quint.easeIn}),TweenMax.delayedCall(n,function(){t.hide(),e.show(),i.adjust(),i.removePopup()}),TweenMax.to(e,n,{delay:r,rotationY:0,ease:Quint.easeOut})},cleanPopups:function(){for(var t=0;t<this.trash.length;t++)this.trash[t].clean();this.trash=[]},loadHandler:function(){this.stack.length<2?this.showAll():this.flipToShow()},closeHandler:function(){this.stack.length<2?this.closeAll():this.flipToClose()},adjust:function(t,e){this._width=t||this._width,this._height=e||this._height,this.currentPopup&&this.currentPopup.adjust(this._width,this._height)}})}),define("hgn!partial/page/pageBase",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="'),n.b(n.v(n.f("className",t,e,0))),n.b('">'),n.b("\n"+i),n.b('    <!--<div class="bg"></div>-->'),n.b("\n"+i),n.b('    <div class="page_bg js-page-bg"></div>'),n.b("\n"+i),n.b('    <div class="wrapper">'),n.b("\n"+i),n.b("        "),n.b(n.t(n.f("contents",t,e,0))),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},"",t);return e.template=i,e}),define("hgn!partial/component/ctaLoadmore",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<a class="cta-btn-loadmore js-cta-loadmore">'),n.b("\n"+i),n.b('    <div class="bg-container">'),n.b("\n"+i),n.b('        <div class="bg bg-gray"></div>'),n.b("\n"+i),n.b('        <div class="bg bg-blue"></div>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="inner">'),n.b("\n"+i),n.b('        <span class="cta-btn_text">Load<em>More</em></span>'),n.b("\n"+i),n.b('        <i class="icon-down"></i>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</a>"),n.fl()},"",t);return e.template=i,e}),define("app/view/page/viewPageBase",["hgn!partial/page/pageBase","hgn!partial/component/ctaLoadmore"],function(t,e){return Backbone.View.extend({init:function(t){this.id=t.id||"",this.classType="page",this.className=this.classType+" "+this.classType+"-"+this.id,this.template=t.template,this.templateData=t.templateData||{},_.extend(this.templateData,{id:this.id,className:this.className,menus:Model.getRoutes(),imagePath:Config.IMAGE_URL,assetPath:Config.ASSET_URL,routes:Model.getRoutesByClazz(),ctaLoadmoreTemplate:e()}),this.render(),this.bind()},render:function(){var e=this.template(this.templateData),i=_.extend(this.templateData,{contents:e});return this.el=t(i),this.$el=$(this.el),this.$el.hide(),this},bind:function(){this.listenTo(Events,Events.APP_EVENT.RESIZE,$.proxy(this.adjust,this)),this.listenTo(Events,Events.SCROLL_EVENT.SCROLL,$.proxy(this.scrollHandler,this))},load:function(){psy.loader.loadByContainer(this.$el,function(){Events.trigger(Events.ROUTE_EVENT.LOADED)},function(t,e){Events.trigger(Events.ROUTE_EVENT.LOADING,t,e)})},show:function(){this.$el.show()},hide:function(){var t=this;TweenMax.delayedCall(Config.SPEED_PAGE_OUT,function(){t.$el.hide(),Events.trigger(Events.ROUTE_EVENT.START,t.id),t.clean()})},scrollHandler:function(t){},unbind:function(){},adjust:function(t,e){t=t||window.innerWidth,e=e||window.innerHeight,this._width=t,this._height=e},destroy:function(){this.unbind(),this.hide()},clean:function(){this.$el.removeData().unbind().remove(),this.undelegateEvents(),this.remove(),Backbone.View.prototype.remove.call(this),this.$el=null}})}),define("hgn!partial/bubble/bubbleContainer",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="'),n.b(n.v(n.f("className",t,e,0))),n.b('"></div>'),n.fl()},"",t);return e.template=i,e}),define("app/view/bubble/viewBubbleContainer",["app/view/viewBase","hgn!partial/bubble/bubbleContainer","app/model/modelBubbles"],function(t,e,i){return t.extend({init:function(){this.bubbles=[],this.totalBubbles=0,this._super({classType:"bubbleContainer",template:e})},render:function(){this._super()},show:function(){this._super()},addBubble:function(t){var e=i.getBubbleView(t.type),n=new e;n.init({id:this.totalBubbles,data:t.data,scene:t.scene}),n.show(),this.$el.append(n.$el),this.bubbles.push(n),this.totalBubbles++},hide:function(){this.$el.hide()},adjust:function(t,e){this.$el.width(t),this.$el.height(e)}})}),define("hgn!partial/bubble/bubbleMixologyOpen",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="bubble-mixology-open">'),n.b("\n"+i),n.b('    <div class="inner js-content">'),n.b("\n"+i),n.b('        <div class="bubble_contents">'),n.b("\n"+i),n.b('            <h4 class="title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h4>"),n.b("\n"+i),n.b('            <ul class="mixList">'),n.b("\n"+i),n.s(n.f("mix",t,e,1),t,e,0,210,442,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("                <li>"),n.b("\n"+i),n.b('                    <img src="'),n.b(n.v(n.f("imagePath",t,e,0))),n.b('/alpha.png" style="background-image: url('),n.b(n.v(n.f("image",t,e,0))),n.b(')">'),n.b("\n"+i),n.b('                    <i class="icon-plus" style="color: '),n.b(n.v(n.f("iconColor",t,e,0))),n.b('"></i>'),n.b("\n"+i),n.b("                </li>"),n.b("\n")}),t.pop()),n.b("            </ul>"),n.b("\n"+i),n.b('            <p class="copy">'),n.b(n.v(n.f("copy",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b('        <a class="cta-btn-close js-cta-close">'),n.b("\n"+i),n.b('            <div class="bg bg-border"></div>'),n.b("\n"+i),n.b('            <i class="icon-close-small"></i>'),n.b("\n"+i),n.b("        </a>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="mixology_bubble js-bubble">'),n.b("\n"+i),n.b('        <!--<img src="'),n.b(n.v(n.f("photoHighUrl",t,e,0))),n.b('">-->'),n.b("\n"+i),n.b('        <img src="'),n.b(n.v(n.f("imagePath",t,e,0))),n.b('/alpha.png" style="background-image: url('),n.b(n.v(n.f("photoHighUrl",t,e,0))),n.b(');">'),n.b("\n"+i),n.b("\n"+i),n.b('        <div class="bg img_stroke js-stroke">'),n.b("\n"+i),n.b('            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"'),n.b("\n"+i),n.b('	 width="100%" height="100%" viewBox="0 0 780 780" style="enable-background:new 0 0 780 780;" xml:space="preserve">'),n.b("\n"+i),n.b('<path style="fill:none;stroke:'),n.b(n.v(n.f("borderColor",t,e,0))),n.b(';stroke-width:1.5;stroke-miterlimit:10;" d="M574.643,733.959'),n.b("\n"+i),n.b("	C376.7,834.818,137.975,760.593,41.44,568.17C-55.095,375.747,27.118,137.993,225.061,37.133"),n.b("\n"+i),n.b('	c197.948-100.862,411.49,21.88,508.025,214.302C829.621,443.857,772.591,633.098,574.643,733.959z"/>'),n.b("\n"+i),n.b("</svg>"),n.b("\n"+i),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},"",t);return e.template=i,e}),define("app/view/bubble/viewBubbleMixologyOpen",["app/view/viewBase","hgn!partial/bubble/bubbleMixologyOpen","app/event/eventsBubble"],function(t,e,i){return t.extend({init:function(t){this.bubbleWidth=0,t.template=e,this._super.apply(this,arguments)},render:function(){this.templateData.mix=[],this.templateData.mix.push({image:this.templateData.beverage.brandLogoUrl});for(var t=0;t<this.templateData.flavors.length;t++){var e=this.templateData.flavors[t];this.templateData.mix.push({image:e.logoUrl})}this._super.apply(this,arguments),this.$el.height(2*Config.BUBBLE_EXPEND_RADIUS),this.$el.css("marginTop",-Config.BUBBLE_EXPEND_RADIUS),this.id%2&&this.$el.addClass("right"),this.$ctaClose=this.$el.find(".js-cta-close"),this.$bubble=this.$el.find(".js-bubble"),this.$contents=this.$el.find(".js-content"),this.$border=this.$el.find(".js-stroke svg"),TweenMax.set(this.$contents,{autoAlpha:0}),TweenMax.set(this.$bubble,{autoAlpha:0}),TweenMax.set(this.$border,{autoAlpha:0,scale:.5})},bind:function(){this.$ctaClose.on("click",$.proxy(this.clickCloseHandler,this))},update:function(t){this.bubbleWidth&&this.bubbleWidth==t.bubbleWidth||(this.$bubble.width(t.bubbleWidth),this.$bubble.height(t.bubbleHeight),this.bubbleWidth=t.bubbleWidth);var e=t.x-this.bubbleWidth/2-(Config.WIDE_W>this._width?(Config.WIDE_W-this._width)/2:0),i=Config.BUBBLE_EXPEND_RADIUS-this.bubbleWidth/2;psy.css.translate3d(this.$el[0],0,t.y,0),psy.css.translateAndScale3d(this.$bubble[0],e,i,0,t.bubbleScale,t.bubbleScale,1)},show:function(){TweenMax.to(this.$bubble,.3,{autoAlpha:1}),TweenMax.to(this.$contents,1,{delay:.5,autoAlpha:1}),TweenMax.to(this.$border,1,{delay:1,autoAlpha:1,ease:Back.easeOut}),TweenMax.to(this.$border,1,{delay:1,autoAlpha:1,scale:1,x:psy.math.rand(20),y:psy.math.rand(20)})},hide:function(){TweenMax.to(this.$contents,.5,{delay:0,autoAlpha:0}),TweenMax.to(this.$bubble,.7,{delay:.7,autoAlpha:0,onComplete:$.proxy(this.clean,this)})},clickCloseHandler:function(){i.trigger(i.CLOSE_MIXOLOGY,this.id)},unbind:function(){this.$ctaClose.off()},destroy:function(){this.hide()},clean:function(){this.unbind(),this._super.apply(this,arguments)},adjust:function(t,e){this._width=t,this._height=e}})}),define("app/view/component/viewCtaLoadmore",["app/view/viewBase","hgn!partial/component/ctaLoadmore"],function(t,e){return t.extend({init:function(){this._super({classType:"cta-load-more",template:e,templateData:{routes:Model.getRoutesByClazz()}})}})}),define("app/view/component/viewBubbles",["app/view/viewBase","app/view/bubble/viewBubbleContainer","app/view/bubble/viewBubbleMixologyOpen","app/view/component/viewCtaLoadmore","app/event/eventsBubble"],function(t,e,i,n,r){return t.extend({init:function(t){this.totalBubbles=0,this.bubblesData=[],this.timestamp=new Date,this.SceneClazz=t.sceneClazz,this.maxBubbleNum=t.maxBubbleNum,this.displayOrder=t.displayOrder,this.displayOrderLength=this.displayOrder.length,this.dataManager={},this.dataManager[ModelBubbles.BUBBLE_MIX]=0,this.dataManager[ModelBubbles.BUBBLE_MIXOLOGY]=0,this.dataManager[ModelBubbles.BUBBLE_TWITTER]=0,this.dataManager[ModelBubbles.BUBBLE_INSTAGRAM]=0,
this.dataManager[ModelBubbles.BUBBLE_FAVORITE]=0,this._super(t)},render:function(){this.$view=this.$el.find(".js-view-bubbles"),this.$scene=this.$el.find(".js-scene-bubbles"),this.view=new e,this.view.init(),this.$view.append(this.view.$el),this.$ctaLoadmore=this.$el.find(".js-cta-loadmore"),this.scene=new this.SceneClazz,this.scene.init({$el:this.$scene}),this.adjust()},show:function(){this.addBubbles(this.maxBubbleNum),this.scene.show(),this.view.show()},bind:function(){this._super(),this.$ctaLoadmore.on("click",$.proxy(this.clickLoadmoreHandler,this)),this.listenTo(r,r.OPEN_MIXOLOGY,$.proxy(this.openMixologyHandler,this)),this.listenTo(r,r.CLOSE_MIXOLOGY,$.proxy(this.closeMixologyHandler,this))},openMixologyHandler:function(t,e){var n=this.view.bubbles[t];n.open();var r=new i;r.init({id:t,templateData:e}),this.$el.append(r.$el),n.openView=r,n.adjust(this._width,this._height),r.show()},clickLoadmoreHandler:function(){this.addBubbles(1)},closeMixologyHandler:function(t){var e=this.view.bubbles[t];e.openView.destroy(),e.close()},getBubble:function(t){for(var e=0;e<this.displayOrderLength;e++){var i=this.displayOrder[(t+e)%this.displayOrderLength],n=ModelBubbles.getBubbleModel(i);if(n){var r=n.getDataById(this.dataManager[i]);if(r)return r.type=i,r}else if(i==ModelBubbles.BUBBLE_FINDER&&this.totalBubbles<this.maxBubbleNum)return{type:i}}return!1},addBubbles:function(t){for(var e=0;t>e;e++){var i=this.getBubble(this.totalBubbles);if(!i)break;var n={type:i.type,data:i};this.dataManager[i.type]++,this.totalBubbles++;var r=this.scene.addBubble(n);this.view.addBubble(_.extend(n,{scene:r})),this.bubblesData.push(n)}var s=this.getBubble(this.totalBubbles+1);s&&s.type!=ModelBubbles.BUBBLE_FINDER||(this.$ctaLoadmore.off("click"),TweenMax.to(this.$ctaLoadmore,.3,{autoAlpha:0,scale:0,ease:Back.easeIn}))},destroy:function(){this.scene.destroy(),this.view.destroy(),this._super.apply(this,arguments)},adjust:function(){this.view.adjust(this.scene.width,this.scene.height)},unbind:function(){this._super.apply(this,arguments)}})}),define("app/view/component/viewPageBg",["app/view/viewBase"],function(t){return t.extend({init:function(t){this.baseW=Config.WIDE_W,this.bubbleR=.8,this.bubbleMargin=20,this.totalBubbles=0,this.bubbles=[],this._super(t)},render:function(){this._super(),this.$sample=$('<div class="bg_bubble"></div>')},adjust:function(t,e){var i=t*this.bubbleR,n=2*Math.ceil(this.$el.height()/(i+this.bubbleMargin));this.bubbleX=.2*-t,this.bubbleY=900;for(var r=this.totalBubbles;n>r;r++){var s=this.$sample.clone();this.bubbles.push(s),this.$el.append(s),this.totalBubbles++}for(var o=Math.sqrt(2)/2*i+this.bubbleMargin,r=0;n>r;r++){var s=this.bubbles[r];s.css({left:this.bubbleX,top:this.bubbleY,width:i+"px",height:i+"px"}),this.bubbleX+=o*(r%2?-1:1),this.bubbleY+=o}}})}),define("app/view/scene/particle/particleInteractive",[],function(){var t=function(){};return t.prototype={init:function(t){this.g=new PIXI.Graphics;var e=[8565226,4775791,16512177,10021615,15760015,16374638];this.origin={color:_.sample(e),alpha:psy.math.rand(.05,.17),delay:{min:0,max:5},speed:{min:2,max:4},scale:1,spinSpeed:.01,spinSize:psy.math.rand(10,15),size:psy.math.randByPower(3,15,-2),yr:{min:.05,max:.5},xr:{min:.1,max:.9}},App.isRespondFrom(Config.PAD_MODE)&&(this.origin.size/=3),_.extend(this.origin,t),_.extend(this,this.origin),this.draw(),this.distR=0,this.g.x=-500,this.g.y=-500},draw:function(){this.g.beginFill(this.color),this.g.drawCircle(0,0,this.size),this.g.endFill()},play:function(){this.reset(),this.update()},start:function(){var t=psy.math.rand(this.speed.min,this.speed.max);TweenMax.set(this,{alpha:0,scale:0}),TweenMax.to(this,t,{distR:1,onUpdate:$.proxy(this.update,this),ease:Quad.easeIn}),TweenMax.to(this,.3,{alpha:this.origin.alpha,scale:this.origin.scale,ease:Back.easeOut});var e=.8*t;TweenMax.to(this,.2*t,{delay:e,alpha:0,scale:0,ease:Quart.easeIn}),TweenMax.delayedCall(t,$.proxy(this.destory,this))},stop:function(){TweenMax.killTweensOf(this)},destory:function(){this.g.parent.removeChild(this.g)},update:function(){this.g.y=this.y*(1-this.distR),this.g.x=this.x+Math.sin(this.distR*this._height*this.spinSpeed)*this.spinSize,this.g.alpha=this.alpha,this.g.scale.x=this.g.scale.y=this.scale},adjust:function(t,e){this._width=t,this._height=e}},t}),define("app/view/scene/scenePageBase",["app/view/sceneBase","app/view/scene/particle/particleInteractive"],function(t,e){var i=5;return t.extend({render:function(){this._super.apply(this,arguments),this.isSceneVisible=!0,this.isRendered=!1,this.currentFrame=0,this.interactiveParticles=[],this.interactiveContainer=new PIXI.DisplayObjectContainer},bind:function(){this._super.apply(this,arguments),psy.browser.IS_DESKTOP&&$(this.renderer.view).on("mousemove",$.proxy(this.mousemoveHandler,this)),this.listenTo(Events,Events.SCROLL_EVENT.SCROLL,this.scrollHandler),this.listenTo(Events,Events.SCROLL_EVENT.DONE,this.doneScrollHandler)},update:function(){this._super.apply(this,arguments),!this.isRendered&&this.frame.current>i&&(this.isRendered=!0,this.scrollHandler(),this.doneScrollHandler()),this.currentFrame++},addParticle:function(t,i){if(!(30>t||t>Config.WIDE_W-30)){var n=new e;n.init({id:this.interactiveParticles.length}),n.x=t,n.y=i,n.adjust(this._width,this._height),n.start(),this.interactiveContainer.addChild(n.g)}},mousemoveHandler:function(t){var e=this;if(this.currentFrame++%20==0)for(var i=1,n=0;i>n;n++){var r=t.offsetX+(0==n?0:psy.math.rand(20)),s=t.offsetY+(0==n?0:psy.math.rand(20));TweenMax.delayedCall(.05*n,function(t,i){e.addParticle(t,i)},[r,s])}},scrollHandler:function(t){t=t||this.savedScroll;var e=$(this.renderer.view).offset().top,i=this.renderer.height||this.height||this.baseH,n=window.innerHeight,r=this.isSceneVisible;this.isSceneVisible=n>=e&&e+i>=0,this.savedScroll=t,this.isRendered&&(!this.isSceneVisible||this.isSceneVisible&&!psy.browser.IS_DESKTOP&&this.sceneType!=Model.SCENE_BUBBLES)&&this.frame.pause(),!r&&this.isSceneVisible&&this.frame.resume()},doneScrollHandler:function(){this.isSceneVisible&&this.frame.resume()},unbind:function(){$(this.renderer.view).off()}})}),define("app/view/scene/particle/particle",[],function(){var t=function(){};return t.prototype={init:function(t){this.g=new PIXI.Graphics,this.origin={color:_.sample(Config.PARTICLE_COLOR_SET),alpha:psy.math.rand(.15,.25),delay:{min:0,max:5},speed:{min:3,max:7},scale:1,syncTime:0,spinSpeed:.015,spinSize:psy.math.rand(15,20),size:psy.math.randByPower(10,30,3),y:0,x:0,fizzOffset:0},this.scale=0,this.distR=0,_.extend(this.origin,t),_.extend(this,this.origin),this.draw(),this.g.x=this.x,this.g.y=this.y},draw:function(){this.g.beginFill(this.color),this.g.drawCircle(0,0,this.size),this.g.endFill(),this.g.alpha=0},play:function(){this.reset()},start:function(){var t=this.isSpread?Quint.easeOut:Cubic.easeIn,e=psy.math.rand(this.speed.min,this.speed.max);TweenMax.to(this,e,{distR:1,onUpdate:$.proxy(this.update,this),ease:t}),TweenMax.to(this,.6*e,{alpha:this.origin.alpha,scale:this.origin.scale,ease:Cubic.easeIn});var i=this.isSpread?.05*e:.6*e;TweenMax.to(this,.7*e,{delay:i,alpha:0,scale:0,fizzOffset:1,ease:Quart.easeIn}),this.isSpread&&this.syncTime||TweenMax.delayedCall(e,$.proxy(this.reset,this))},stop:function(){TweenMax.killTweensOf(this)},reset:function(){this.fizzOffset=0,this.distR=0,this.x=psy.math.rand(150,400)*(psy.math.randInt(0,1)?-1:1),this.alpha=0,this.scale=0,this.isSpread&&(TweenMax.killTweensOf(this),this.x=0,this.alpha=this.origin.alpha=psy.math.rand(.15,.25),this.scale=this.origin.scale=psy.math.randByPower(.5,1.4,3),this.angle=90+psy.math.rand(60,150)*(psy.math.randInt(0,1)?1:-1),this.targetDistR=psy.math.rand(.2,.5),this.syncTime&&TweenMax.delayedCall(this.syncTime,$.proxy(this.reset,this))),TweenMax.delayedCall(psy.math.rand(this.delay.min,this.delay.max),$.proxy(this.start,this))},update:function(){if(this.isSpread){var t=this._width*this.targetDistR,e=psy.math.polar(t,this.angle);this.g.x=this.distR*e.x,this.g.y=this.yDiff+this.distR*e.y-150*this.fizzOffset}else this.g.y=-this._height*this.distR*.6,this.g.x=this.x+Math.sin(this.g.y*this.spinSpeed)*this.spinSize;this.g.alpha=this.alpha,this.g.scale.x=this.g.scale.y=this.scale},adjust:function(t,e){this._width=t,this._height=e}},t}),define("app/view/scene/particle/particleHero",[],function(){var t=function(){};return t.prototype={init:function(t){this.origin={color:_.sample(Config.PARTICLE_COLOR_SET),alpha:1,spinSpeed:.015,spinSize:psy.math.rand(15,20),startScale:{min:.8,max:1},scaleDiff:{min:.4,max:.5},targetAngle:0,targetDistR:0,rotation:0,y:0,x:0},this.scale=0,this.distR=0,_.extend(this.origin,t),_.extend(this,this.origin),this.p=this.mc.mc,this.p.alpha=1,this.p.x=this.x,this.p.y=this.y,this.typeOrb=this.mc.seqName.search("Orb")>-1,this.typeLemon=this.mc.seqName.search("Lemon")>-1,this.typeStrawberry=this.mc.seqName.search("Strawberry")>-1,this.typeLime=this.mc.seqName.search("Lime")>-1,this.typeCherry=this.mc.seqName.search("Cherry")>-1,this.typeHeadSpin=this.mc.seqName.search("HeadSpin")>-1,this.typeJump=this.mc.seqName.search("Jump")>-1,this.typeBike=this.mc.seqName.search("Bike")>-1,this.typeLoopable=this.typeLemon||this.typeStrawberry||this.typeLime||this.typeCherry||this.typeBike,this.typeCharacter=this.typeHeadSpin||this.typeJump},play:function(){this.reset()},start:function(){var t=psy.math.rand(this.speed.min,this.speed.max);TweenMax.to(this,t,{distR:.92,ease:Quint.easeOut}),TweenMax.to(this,t,{scale:this.endScale,ease:Sine.easeInOut}),this.typeLoopable&&TweenMax.to(this,.8*t,{delay:.6*t,scale:.6*this.endScale,yoyo:!0,repeat:-1,ease:Sine.easeInOut})},stop:function(){TweenMax.killTweensOf(this)},reset:function(){this.distR=0,this.targetAngle=(this.origin.targetAngle+psy.math.rand(3))*this.origin.direction,this.targetDistR=psy.math.rand(.35,.55),this.x=psy.math.rand(100,400)*(psy.math.randInt(0,1)?-1:1),this.scale=psy.math.rand(this.startScale.min,this.startScale.max),this.endScale=this.scale+psy.math.rand(this.scaleDiff.min,this.scaleDiff.max),this.p.loop=!1,this.isPlayed=!1,this.p.gotoAndStop(0),this.typeCharacter?this.p.alpha=this.alpha=0:this.p.alpha=this.alpha=1,this.typeOrb&&(this.p.loop=!0,this.scale=psy.math.rand(.2,.8),this.endScale=2*this.scale,this.alpha=this.origin.alpha=psy.math.rand(.15,.3),this.p.tint=_.sample(Config.PARTICLE_COLOR_SET),this.p.alpha=0,this.p.gotoAndStop(psy.math.rand(0,this.p.totalFrames-1))),TweenMax.killTweensOf(this),TweenMax.delayedCall(psy.math.rand(this.delay.min,this.delay.max),$.proxy(this.start,this))},update:function(){var t=this.targetDistR*this._width-this.p.width/2,e=psy.math.polar(t,this.targetAngle);this.typeCharacter?this.p.rotation=this.origin.rotation+psy.math.degToRad(15)*-this.distR:this.p.rotation=this.origin.rotation+psy.math.degToRad(90)*-this.distR,this.p.y=e.x*this.distR,this.p.x=e.y*this.distR,this.p.alpha=this.alpha,this.p.scale.x=this.p.scale.y=this.scale;var i=.1;this.distR>i&&!this.isPlayed&&(this.isPlayed=!0,this.p.gotoAndPlay(0)),this.typeLoopable&&Math.round(this.p.currentFrame)==this.p.totalFrames-1&&this.p.gotoAndPlay(133),this.typeCharacter&&(Math.round(this.p.currentFrame)==this.p.totalFrames-1?(this.p.alpha=this.alpha=0,this.reset()):0==Math.round(this.p.currentFrame)?this.p.alpha=this.alpha=0:this.p.alpha=this.alpha=1)},adjust:function(t,e){this._width=t,this._height=e}},t}),define("app/view/scene/home/sceneHomeIntro",["app/view/scene/scenePageBase","app/model/modelSceneAsset","app/view/scene/particle/particle","app/view/scene/particle/particleHero"],function(t,e,i,n){return t.extend({init:function(t){this.sceneId=Model.SCENE_HOME_INTRO,this.isOpen=!1,this.isOpening=!1,this.baseW=Config.WIDE_W,this.baseH=1150,this.machineTopR=.52,this.spreadParticles={total:35,particles:[]},this.heroParticles={heros:[e.getMovieClip(e.movieClipManager.mcIntroStrawberry),e.getMovieClip(e.movieClipManager.mcIntroBike),e.getMovieClip(e.movieClipManager.mcIntroLemon),e.getMovieClip(e.movieClipManager.mcIntroCherry),e.getMovieClip(e.movieClipManager.mcIntroHeadspin),e.getMovieClip(e.movieClipManager.mcIntroJump)],total:0,particles:[]},this.heroParticles.total=this.heroParticles.heros.length,this.machineContainer=new PIXI.DisplayObjectContainer,this.spMachine=e.getImageSprite(e.imageManager.homeIntroMachine),this._super(t)},render:function(){this._super();var t={transparent:!0,antialias:!0,resolution:psy.browser.SCREEN_RATIO};psy.browser.IS_WEBGL_SUPPORT?this.renderer=PIXI.autoDetectRenderer(this.width,this.height,t):this.renderer=new PIXI.CanvasRenderer(this.width,this.height,t),this.stage=new PIXI.Stage(16776960),this.frame=new psy.Frame,this.$el.append(this.renderer.view),this.machineContainer.pivot.x=Math.round(this.spMachine.width/2),this.machineContainer.pivot.y=530,this.container=new PIXI.DisplayObjectContainer,this.container.alpha=0,this.currentFrame=0,this.$screen=this.$el.find("video"),this.screen=this.$screen[0];var i=0;i=psy.browser.IS_MOBILE||psy.browser.IS_PAD?e.imageManager.homeIntroMachineScreen:e.imageManager.homeIntroMachineVideoCover,this.spScreen=e.getImageSprite(i),this.spScreen.x=165,this.spScreen.y=68,this.spreadParticlesContainer=new PIXI.DisplayObjectContainer,this.heroParticlesContainer=new PIXI.DisplayObjectContainer,this.machineContainer.addChild(this.spScreen),this.machineContainer.addChild(this.spMachine),this.container.addChild(this.spreadParticlesContainer),this.container.addChild(this.heroParticlesContainer),this.container.addChild(this.interactiveContainer),this.container.addChild(this.machineContainer),this.stage.addChild(this.container),this.drawSpreadParticles(this.spreadParticlesContainer),this.drawHeroParticles(this.heroParticlesContainer)},bind:function(){this._super(),this.frame.bind({id:"sceneHome",handler:$.proxy(this.update,this),fps:60}),this.$screen.on("canplay",$.proxy(this.loadVideoHandler,this)),this.listenTo(Events,Events.APP_EVENT.OPENING,$.proxy(this.openingHandler,this))},show:function(){this._super(),TweenMax.to(this.container,0,{alpha:1,ease:Sine.easeInOut}),TweenMax.delayedCall(2,$.proxy(this.startSceneElements,this))},update:function(){this._super.apply(this,arguments);for(var t=0;t<this.heroParticles.total;t++){var e=this.heroParticles.particles[t];e.update()}this.isOpening&&(this.adjust(),Events.trigger(Events.SCROLL_EVENT.ADJUST)),this.renderer.render(this.stage)},startSceneElements:function(){for(var t=0;t<this.heroParticles.total;t++){var e=this.heroParticles.particles[t];e.play()}for(var t=0;t<this.spreadParticles.total;t++){var e=this.spreadParticles.particles[t];e.play()}},drawHeroParticles:function(t){for(var e=0;e<this.heroParticles.total;e++){var i=new n;i.init({id:e,mc:this.heroParticles.heros[e],syncTime:5+10*Math.random(),delay:{min:0,max:.8},speed:{min:4,max:6},direction:e%2?1:-1,targetAngle:82+12*e}),t.addChild(i.mc.mc),this.heroParticles.particles.push(i)}},drawSpreadParticles:function(t){for(var e=0;e<this.spreadParticles.total;e++){var n=new i;n.init({id:e,isSpread:!0,syncTime:!1,delay:{min:0,max:2},speed:{min:3,max:5}}),t.addChild(n.g),this.spreadParticles.particles.push(n)}},loadVideoHandler:function(){if(!psy.browser.IS_MOBILE&&!psy.browser.IS_PAD){this.screen.play();var t=this.machineContainer.getChildIndex(this.spScreen),e=new PIXI.Sprite(PIXI.VideoTexture.textureFromVideo(this.screen));e.x=this.spScreen.x,e.y=this.spScreen.y,this.spScreen.mask&&(e.mask=this.spScreen.mask),this.machineContainer.addChildAt(e,t+1)}},openingHandler:function(t){this.isOpen=!0,this.height=this._height,this.heightR=0;var e=t?2.7:.1,i=t?.23:0,n=Quint.easeInOut,r=this;TweenMax.to(this,e,{delay:i,heightR:1,machineTopR:.57,ease:n,onStart:function(){r.isOpening=!0},onComplete:function(){r.isOpening=!1}})},unbind:function(){this._super.apply(this,arguments),this.$screen.off("canplay"),this.frame.unbind();for(var t=0;t<this.heroParticles.total;t++){var e=this.heroParticles.particles[t];e.stop()}for(var t=0;t<this.spreadParticles.total;t++){var e=this.spreadParticles.particles[t];e.stop()}TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.$el)},adjust:function(t,e){this._super(t,e);var i=App.isRespondFrom(Config.MOBILE_MODE)?310:600;this.height=this._height-this.heightR*(this._height-i),t=this._width>Config.WIDE_W?Config.WIDE_W:this._width,e=this.isOpen?this.height:this._height;var n=!psy.layout.getIsHeightFit(t,e,this.baseW,this.baseH),r=n?this.baseW/t:this.baseH/e,s=t;App.isRespondFrom(Config.PAD_MODE)&&(r=this.baseH/e,s=2*t),App.isRespondFrom(Config.MOBILE_MODE)&&(s=4*t),TweenMax.set(this.$el,{height:e}),this.machineContainer.scale.x=this.machineContainer.scale.y=1/r,this.machineContainer.x=Math.round(.5*t),this.machineContainer.y=Math.round(e*this.machineTopR),this.spreadParticlesContainer.scale.x=this.spreadParticlesContainer.scale.y=1/r,this.spreadParticlesContainer.x=.5*t,this.spreadParticlesContainer.y=this.machineContainer.y+.35*this.machineContainer.height,this.heroParticlesContainer.scale.x=this.heroParticlesContainer.scale.y=1/r,this.heroParticlesContainer.x=.5*t,this.heroParticlesContainer.y=this.machineContainer.y+.05*this.machineContainer.height;for(var o=0;o<this.heroParticles.total;o++){var a=this.heroParticles.particles[o];a.adjust(s,e)}for(var o=0;o<this.spreadParticles.total;o++){var a=this.spreadParticles.particles[o];a.yDiff=this.heroParticlesContainer.y-this.spreadParticlesContainer.y,a.adjust(s,e)}this.renderer.resize(t,e)},startTrackingMouse:function(){var t=this.heroParticlesContainer.x,e=this.heroParticlesContainer.y,i=this;$(window).mousemove(function(n){var r=Math.max(document.documentElement.clientWidth,window.innerWidth||0),s=Math.max(document.documentElement.clientHeight,window.innerHeight||0),o=n.clientX/r*2-1,a=n.clientY/s*2-1,l=-30*o,h=-30*a;TweenMax.to(i.heroParticlesContainer,20,{x:t+l,y:e+h,ease:Quint.easeOut})})}})}),define("app/view/scene/sceneBubblesBase",["app/view/scene/scenePageBase"],function(t){return t.extend({init:function(t){this.currntScrollR=0,this._super.apply(this,arguments)},render:function(){this._super(),this.renderer=new PIXI.autoDetectRenderer(this.width,this.height,{transparent:!0,antialias:!0,resolution:psy.browser.SCREEN_RATIO}),this.stage=new PIXI.Stage(0),this.frame=new psy.Frame,this.container=new PIXI.DisplayObjectContainer,this.container.position.x=(this.width-this.bubblesWidth)/2,this.stage.addChild(this.container),this.$el.append(this.renderer.view)},bind:function(){this._super.apply(this,arguments),this.listenTo(Events,Events.APP_EVENT.RESPOND,$.proxy(this.respondHandler,this)),this.listenTo(Events,Events.APP_EVENT.RESIZE,$.proxy(this.adjust,this)),this.frame.bind({id:"sceneBubblesbase",handler:$.proxy(this.update,this),fps:60})},show:function(){this._super(),this.respondHandler()},update:function(){this._super.apply(this,arguments);var t=0;if(this.hasDynamicHeight){var e=this.dynamicHeight-this._height,i=psy.math.crop(0,1,-this.$el.offset().top/e);t=-(this.dynamicHeight-this._height)*i,this.container.y=this.dynamicHeight+t;var n=i*e;TweenMax.set(this.renderer.view,{y:n})}else{var i=-this.$el.offset().top/(this.height-this._height),r=Config.BUBBLE_DEFAULT_RADIUS/(Config.BUBBLES_BASE_H-Config.BUBBLES_MIN_H),s=-r*this._height+r*Config.BUBBLES_BASE_H,e=this.bubbles[this.totalBubbles-1].y-this.bubbles[0].y-(this.height-this._height/2)+s,o=e*(1-psy.math.crop(0,1,i)),a=this.$el.offset().top/4;this.container.y=a>o?a:o}for(var l=0;l<this.totalBubbles;l++)this.bubbles[l].update(this.$el.offset().top,this._height,this.container.y,!1,-t);this.renderer.render(this.stage)},addBubble:function(t){var e=ModelBubbles.getBubbleScene(t.type),i=new e;i.init({type:t.type,id:this.totalBubbles,data:t.data,x:this.bubblesWidth/2,y:0});var n=this.getBubbleTargetPosition(this.anchorBubble,i);return i.setTargetPosition(n.x,n.y),i.start(),i.load(),this.container.addChild(i.container),this.bubbles.push(i),this.totalBubbles++,this.shownBubbles++,this.adjust(),this.updateBubblesPosition(),i},cropBubbleTargetX:function(t,e){var i=(this.baseW-this.width)/2+(e-Config.BUBBLE_DEFAULT_RADIUS),n=this.baseW-(this.baseW-this.width)/2-e-Config.BUBBLE_DEFAULT_RADIUS;return t=i>=n?this.baseW/2-Config.BUBBLE_DEFAULT_RADIUS:psy.math.crop(i,n,t)},updateBubblesPosition:function(t){if(!(this.totalBubbles<this.maxBubbleNum)){for(var e=this.totalBubbles-1;e>=0;e--){var i=this.bubbles[e],n=e==this.totalBubbles-1?this.anchorBubble:this.bubbles[e+1],r=this.getBubbleTargetPosition(n,i);i.setTargetPosition(r.x,r.y)}t||this.updateDynamicHeight()}},getBubblesHeight:function(t){var e=this.bubbles[0];return-e[t]+e.radius+4*Config.BUBBLE_MARGIN},updateDynamicHeight:function(){if(this.hasDynamicHeight){var t=this.getBubblesHeight("targetY");if(this.dynamicHeight&&!isNaN(t)){var e=.8;TweenMax.to(this,e,{dynamicHeight:t}),TweenMax.to(this.$el,e,{height:t,onUpdate:function(){Events.trigger(Events.SCROLL_EVENT.ADJUST)}})}else this.dynamicHeight=t,this.$el.height(t),Events.trigger(Events.SCROLL_EVENT.ADJUST)}},respondHandler:function(){for(var t=0;t<this.totalBubbles;t++){var e=this.bubbles[t];e.respond()}this.updateBubblesPosition()},unbind:function(){this._super.apply(this,arguments),this.frame.unbind()},adjust:function(t,e){t=t||window.innerWidth,e=e||window.innerHeight,this._width=t>Config.WIDE_W?Config.WIDE_W:t,this._height=e,psy.browser.IS_RETINA&&(TweenMax.set(this.renderer.view,{scale:1/psy.browser.SCREEN_RATIO}),this.$el.height(this.height||this.dynamicHeight))}})}),define("app/view/scene/home/sceneBubbles",["app/view/scene/sceneBubblesBase","app/event/eventsBubble"],function(t,e){return t.extend({init:function(t){this.sceneId=Model.SCENE_HOME_BUBBLES,this.sceneType=Model.SCENE_BUBBLES,this.baseW=Config.WIDE_W,this.width=Config.WIDE_W,this.bubblesWidth=Config.BUBBLES_W,this.bubbles=[],this.totalBubbles=0,this.shownBubbles=0,this.hasDynamicHeight=!0,this.anchorBubble={id:-1,x:this.bubblesWidth/2,y:-150,radius:Config.BUBBLE_DEFAULT_RADIUS/2,angle:50},this._super(t)},bind:function(){this._super.apply(this,arguments),this.listenTo(e,e.OPEN_MIXOLOGY,$.proxy(this.openBubbleHandler,this)),this.listenTo(e,e.CLOSE_MIXOLOGY,$.proxy(this.closeBubbleHandler,this))},openBubbleHandler:function(t){var e=this.bubbles[t];this.updateBubblesPosition(),TweenMax.delayedCall(.3,$.proxy(this.updateBubblesPosition,this)),e.open(Config.BUBBLE_EXPEND_RADIUS)},closeBubbleHandler:function(t){var e=this.bubbles[t];this.updateBubblesPosition(),TweenMax.delayedCall(.3,$.proxy(this.updateBubblesPosition,this)),e.close()},getBubbleTargetPosition:function(t,e){var i=e.id%2,n=t.angle||this.targetAngle,r=(i?180:0)+(n+psy.math.rand(0,10))*(i?-1:1),s=t.id<0?t.x:t.isOpen?t.origin.x:t.targetX,o=t.id<0?t.y:t.targetY;t.radius=t.radius||0;var a=e.origin?e.origin.radius:e.radius,l=t.origin?t.origin.radius:t.radius;e.isOpen&&!App.isRespondFrom(Config.MOBILE_MODE)&&(a=Config.BUBBLE_EXPEND_RADIUS+2*Config.BUBBLE_MARGIN);var h=Config.BUBBLE_MARGIN;App.isRespondTo(Config.PAD_MODE)?h=-Config.BUBBLE_MARGIN/2:App.isRespondTo(Config.MOBILE_MODE)&&(h=0);var c=l+a+h,u=s+Math.cos(psy.math.degToRad(r))*c,d=o-Math.sin(psy.math.degToRad(r))*c;return u=this.cropBubbleTargetX(u,a),t.isOpen&&!App.isRespondFrom(Config.MOBILE_MODE)&&(d-=2*Config.BUBBLE_MARGIN),App.isRespondFrom(Config.MOBILE_MODE)&&e.type==ModelBubbles.BUBBLE_MIXOLOGY&&(e.isOpen?d-=1.3*a:u+=10),{x:u,y:d}},respondHandler:function(){App.isRespondFrom(Config.MOBILE_MODE)?(this.width=Config.MOBILE_MIN_W,this.targetAngle=65):App.isRespondFrom(Config.PAD_MODE)?(this.width=Config.MOBILE_W,this.targetAngle=60):(this.width=Config.WIDE_W,this.targetAngle=Config.BUBBLE_ANGLE_BETWEEN),this._super.apply(this,arguments)},adjust:function(){this._super.apply(this,arguments),this.renderer.resize(this.baseW,this._height+Config.BUBBLES_SCROLL_PAD)}})}),define("app/view/page/viewPageHome",["app/view/page/viewPageBase","app/view/component/viewBubbles","app/view/component/viewPageBg","app/view/scene/home/sceneHomeIntro","app/view/scene/home/sceneBubbles"],function(t,e,i,n,r){var s="show",o="no-transition";return t.extend({init:function(t){this.isOpen=!1,this.autoStartDelay=8,this.bubblesViewTopMargin=-100,this.callShowOpening=$.proxy(this.showOpening,this),t.templateData=t.templateData||{},_.extend(t.templateData,{}),this._super(t)},render:function(){this._super(),this.$introSection=this.$el.find(".js-section-intro"),this.$ctaScrollDown=this.$el.find(".js-cta-scrolldown"),TweenMax.set(this.$ctaScrollDown,{x:"-50%",y:-100,autoAlpha:0}),this.bgView=new i,this.bgView.init({$el:this.$el.find(".js-page-bg")}),this.bubblesView=new e,this.bubblesView.init({$el:this.$el.find(".js-bubbles"),maxBubbleNum:6,sceneClazz:r,displayOrder:[ModelBubbles.BUBBLE_MIX,ModelBubbles.BUBBLE_FINDER,ModelBubbles.BUBBLE_MIXOLOGY,ModelBubbles.BUBBLE_TWITTER,ModelBubbles.BUBBLE_MIX,ModelBubbles.BUBBLE_MIXOLOGY,ModelBubbles.BUBBLE_INSTAGRAM,ModelBubbles.BUBBLE_MIX,ModelBubbles.BUBBLE_TWITTER,ModelBubbles.BUBBLE_MIXOLOGY]}),this.bubblesView.$el.css("marginTop",this.bubblesViewTopMargin),this.introScene=new n,this.introScene.init({$el:this.$el.find(".js-scene-intro")})},show:function(){this._super(),this.introScene.show(),this.bubblesView.show(),psy.trace("Router.prevRoute.state || Config.SKIP_INTRO",Router.prevRoute.state,Config.SKIP_INTRO),Router.prevRoute.state||Config.SKIP_INTRO?(this.hasOpening=!1,this.$introSection.addClass(o),TweenMax.set(this.$ctaScrollDown,{x:"-50%",y:0,autoAlpha:1}),TweenMax.delayedCall(.1,this.callShowOpening)):(this.hasOpening=!0,TweenMax.to(this.$ctaScrollDown,1,{delay:1,x:"-50%",y:0,autoAlpha:1}),this.$el.on("click",this.callShowOpening),psy.scroll.bindScroll(this.callShowOpening),TweenMax.delayedCall(this.autoStartDelay,this.callShowOpening))},showOpening:function(){this.hasOpening&&(TweenMax.killDelayedCallsTo(this.callShowOpening),psy.scroll.unbindScroll(this.callShowOpening),this.$el.off("click")),this.$el.addClass(s),TweenMax.killTweensOf(this.$ctaScrollDown),TweenMax.set(this.$ctaScrollDown,{autoAlpha:1}),this.$ctaScrollDown.removeCss("transform");var t=this;TweenMax.delayedCall(1,function(){t.$ctaScrollDown.on("click",$.proxy(t.scrollToBubbles,t))}),TweenMax.delayedCall(this.hasOpening?3:1,function(){Events.trigger(Events.SCROLL_EVENT.START)}),Events.trigger(Events.APP_EVENT.OPENING,this.hasOpening)},scrollToBubbles:function(){var t=this.bubblesView.$el.offset().top+this.bubblesViewTopMargin;Events.trigger(Events.SCROLL_EVENT.SCROLL_TO,t)},unbind:function(){this._super()},hide:function(){this._super()},clean:function(){this.bgView.destroy(),this.bubblesView.destroy(),this.introScene.destroy(),this._super()},adjust:function(t,e){this._super(t,e),this.bgView&&this.bgView.adjust(t,e)}})}),define("app/view/scene/about/sceneAboutIntro",["app/view/scene/scenePageBase","app/model/modelSceneAsset","app/view/scene/particle/particle","app/view/scene/particle/particleHero"],function(t,e,i,n){return t.extend({init:function(t){this.sceneId=Model.SCENE_ABOUT_INTRO,this.isOpen=!1,this.baseW=Config.WIDE_W,this.baseH=775,this.spreadParticles={total:35,particles:[]},this.heroParticles={heros:[e.getMovieClip(e.movieClipManager.mcIntroLemon),e.getMovieClip(e.movieClipManager.mcIntroLime),e.getMovieClip(e.movieClipManager.mcIntroStrawberry)],particles:[]},this.heroParticles.total=this.heroParticles.heros.length,this.spMachine5=e.getImageSprite(e.imageManager.aboutIntroMachine5),this.spMachine2=e.getImageSprite(e.imageManager.aboutIntroMachine2),this._super(t)},render:function(){this._super();var t={transparent:!0,antialias:!0,resolution:psy.browser.SCREEN_RATIO};psy.browser.IS_WEBGL_SUPPORT?this.renderer=PIXI.autoDetectRenderer(this.width,this.height,t):this.renderer=new PIXI.CanvasRenderer(this.width,this.height,t),this.stage=new PIXI.Stage(16776960),this.frame=new psy.Frame,this.$el.append(this.renderer.view),this.$screen5=this.$el.find(".js-video-5"),this.$screen2=this.$el.find(".js-video-2"),this.screen5=this.$screen5[0],this.screen2=this.$screen2[0];var i=0,n=0;psy.browser.IS_MOBILE||psy.browser.IS_PAD?(i=e.imageManager.aboutIntroMachine5Screen,n=e.imageManager.aboutIntroMachine2Screen):(i=e.imageManager.aboutIntroMachine5VideoCover,n=e.imageManager.aboutIntroMachine2VideoCover),this.spScreen5=e.getImageSprite(i),this.spScreen2=e.getImageSprite(n);var r=new PIXI.Graphics;r.beginFill(16711680),r.drawRect(0,0,78,160),r.endFill(),this.machineContainer=new PIXI.DisplayObjectContainer,this.machineContainer.width=648,this.machineContainer.pivot.x=Math.round(this.machineContainer.width/2),this.spMachine5.x=12,this.spMachine5.y=109,this.spMachine2.x=434,this.spMachine2.y=284,this.spScreen5.x=this.spMachine5.x+58,this.spScreen5.y=this.spMachine5.y+64,this.spScreen2.x=this.spMachine2.x+52,this.spScreen2.y=this.spMachine2.y+28,this.spScreen2.mask=r,r.x=this.spScreen2.x,r.y=this.spScreen2.y,r.rotation=psy.math.degToRad(-7),this.machineContainer.addChild(this.spScreen5),this.machineContainer.addChild(this.spScreen2),this.machineContainer.addChild(this.spMachine5),this.machineContainer.addChild(this.spMachine2),this.machineContainer.addChild(r),this.spreadParticlesContainer=new PIXI.DisplayObjectContainer,this.heroParticlesContainer=new PIXI.DisplayObjectContainer,this.container=new PIXI.DisplayObjectContainer,this.container.alpha=0,this.container.addChild(this.spreadParticlesContainer),this.container.addChild(this.heroParticlesContainer),this.container.addChild(this.interactiveContainer),this.container.addChild(this.machineContainer),this.stage.addChild(this.container),this.drawSpreadParticles(this.spreadParticlesContainer),this.drawHeroParticles(this.heroParticlesContainer)},bind:function(){this._super(),this.frame.bind({id:"aboutintro",handler:$.proxy(this.update,this),fps:60}),this.$screen5.on("canplay",$.proxy(this.loadVideoHandler,this,this.screen5,this.spScreen5)),this.$screen2.on("canplay",$.proxy(this.loadVideoHandler,this,this.screen2,this.spScreen2)),this.listenTo(Events,Events.APP_EVENT.OPENING,$.proxy(this.openingHandler,this))},show:function(){this._super(),TweenMax.to(this.container,.3,{alpha:1,ease:Sine.easeInOut}),TweenMax.delayedCall(.1,$.proxy(this.startSceneElements,this))},loadVideoHandler:function(t,e){if(!psy.browser.IS_MOBILE&&!psy.browser.IS_PAD){t.play();var i=this.machineContainer.getChildIndex(e),t=new PIXI.Sprite(PIXI.VideoTexture.textureFromVideo(t));t.x=e.x,t.y=e.y,e.mask&&(t.mask=e.mask),this.machineContainer.addChildAt(t,i+1)}},openingHandler:function(){this.isOpen=!0,this.height=this._height},update:function(){this._super.apply(this,arguments);for(var t=0;t<this.heroParticles.total;t++){var e=this.heroParticles.particles[t];e.update()}this.renderer.render(this.stage)},startSceneElements:function(){for(var t=0;t<this.heroParticles.total;t++){var e=this.heroParticles.particles[t];e.play()}for(var t=0;t<this.spreadParticles.total;t++){var e=this.spreadParticles.particles[t];e.play()}},drawHeroParticles:function(t){for(var e=0;e<this.heroParticles.total;e++){var i=new n;i.init({id:e,mc:this.heroParticles.heros[e],startScale:{min:.5,max:.7},syncTime:5+10*Math.random(),delay:{min:0,max:3},speed:{min:8,max:12},direction:e%2?-1:1,targetAngle:90+25*Math.floor(e/2)}),t.addChild(i.mc.mc),this.heroParticles.particles.push(i)}},drawSpreadParticles:function(t){for(var e=0;e<this.spreadParticles.total;e++){var n=new i;n.init({id:e,isSpread:!0,syncTime:!1,delay:{min:0,max:5},speed:{min:4,max:6}}),t.addChild(n.g),this.spreadParticles.particles.push(n)}},adjust:function(t,e){this._super(t,e),t=this._width>Config.WIDE_W?Config.WIDE_W:this._width,e=this.baseH,App.isRespondFrom(Config.MOBILE_MODE)?e=300:App.isRespondFrom(Config.PAD_MODE)&&(e=375);var i=e/this.baseH;this.machineContainer.scale.x=this.machineContainer.scale.y=i,this.machineContainer.x=Math.round((t-this.machineContainer.width)/2),this.heroParticlesContainer.x=.5*t,this.heroParticlesContainer.y=430*i,this.heroParticlesContainer.scale.x=this.heroParticlesContainer.scale.y=i,this.spreadParticlesContainer.x=.5*t,this.spreadParticlesContainer.y=380*i,this.spreadParticlesContainer.scale.x=this.spreadParticlesContainer.scale.y=i;for(var n=0;n<this.heroParticles.total;n++){
var r=this.heroParticles.particles[n];r.adjust(t/i,this.baseH)}for(var n=0;n<this.spreadParticles.total;n++){var r=this.spreadParticles.particles[n];r.yDiff=this.heroParticlesContainer.y-this.spreadParticlesContainer.y,r.adjust(t/i,this.baseH)}this.renderer.resize(t,e)},unbind:function(){this._super.apply(this,arguments),this.$screen5.off("canplay"),this.$screen2.off("canplay"),this.frame.unbind(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.$el)}})}),define("app/view/scene/about/sceneFinderAndFlavors",["app/view/scene/scenePageBase","app/model/modelSceneAsset","app/model/modelFlavor"],function(t,e,i){var n=50,r=180,s=32;return t.extend({init:function(t){this.sceneId=Model.SCENE_ABOUT_FINDER_BUBBLES_FLAVORS,this.baseW=1080,this.baseH=830,this.bubblesWidth=this.baseW,this.bubbles=[],this.totalBubbles=0,this.shownBubbles=0,this.anchorBubble={id:-1,x:this.bubblesWidth/2,y:this.baseH-r/2,radius:r/2,angle:50},this.mcFlavors=[];var n=i.getFlavorIds();for(var s in n){var o=e.getMovieClip(e.movieClipManager["mcFruits"+psy.string.capitalize(n[s])]);this.mcFlavors.push(o)}this.totalFlavors=this.mcFlavors.length,this._super(t)},load:function(){this.loadedHandler()},render:function(){this._super.apply(this,arguments),this.renderer=new PIXI.autoDetectRenderer(this.baseW,this.baseH,{transparent:!0,antialias:!0,resolution:psy.browser.SCREEN_RATIO}),this.stage=new PIXI.Stage(0),this.frame=new psy.Frame,this.bubblesContainer=new PIXI.DisplayObjectContainer,this.bubblesContainer.position.x=Math.round((this.baseW-this.bubblesWidth)/2),this.bubblesContainer.position.y=Math.round(-this.baseH/2+Config.BUBBLE_DEFAULT_RADIUS+2*Config.BUBBLE_MARGIN),this.flavorContainer=new PIXI.DisplayObjectContainer;for(var t=0;t<this.mcFlavors.length;t++){var e=this.mcFlavors[t].mc;e.anchor.x=.5,e.anchor.y=.5,e.origin={scale:{x:1,y:1}},e.origin.scale.x=e.origin.scale.y=.75,e.loop=!1,psy.browser.IS_DESKTOP&&(e.alpha=0),e.gotoAndPlay(0),this.flavorContainer.addChild(e)}this.setFlavorsPosition(this._width),this.stage.addChild(this.bubblesContainer),this.stage.addChild(this.flavorContainer),this.$el.append(this.renderer.view),psy.browser.IS_RETINA&&(TweenMax.set(this.renderer.view,{scale:1/psy.browser.SCREEN_RATIO}),this.$el.height(this.baseH),this.$el.width(this.baseW))},bind:function(){this._super.apply(this,arguments),this.frame.bind({id:"sceneFinder",handler:$.proxy(this.update,this),fps:60})},setFlavorsPosition:function(t){var e=this.baseH,i=1,n=1,r=86;App.isRespondFrom(Config.MOBILE_MODE)?(t=Config.MOBILE_MIN_W,n=2,i=.6,e-=r*n-40):App.isRespondFrom(Config.PAD_MODE)?(t=600,i=.6,e-=205):(t=Math.min(t,this.baseW),e-=90);for(var s=Math.ceil(this.totalFlavors/n),o=t/(this.totalFlavors/n),a=0;a<this.mcFlavors.length;a++){var l=this.mcFlavors[a].mc;l.scale.x=l.scale.y=l.origin.scale.x*i,l.x=Math.round(o*parseInt(a%s)+o/2),l.y=l.originY=Math.round(parseInt(a/s)*r)}this.flavorContainer.position.x=(this.baseW-t)/2,this.flavorContainer.position.y=e},playFlavor:function(t){var e=this.mcFlavors[t].mc,i=e.originY;e.playing&&e.currentFrame<10||(TweenMax.to(e,.15,{y:i+15,ease:Sine.easeOut}),TweenMax.to(e,1,{delay:.1,y:i,ease:Back.easeOut.config(3),onStart:function(){e.gotoAndPlay(0)}}))},showFlavor:function(t){var e=t.scale.x,i=t.originY;psy.browser.IS_DESKTOP&&(TweenMax.set(t,{y:i+100}),TweenMax.set(t.scale,{x:.3*e,y:.3*e}),TweenMax.to(t,.1,{alpha:1}),TweenMax.to(t.scale,.7,{x:e,y:e,ease:Expo.easeOut})),TweenMax.to(t,.8,{y:i,ease:Back.easeOut.config(3),onStart:function(){t.gotoAndPlay(0)}})},playAllFlavors:function(){if(!this.hadFlavorShow){this.hadFlavorShow=!0;for(var t=this.mcFlavors,e=0;e<t.length;e++){var i=t[e].mc;TweenMax.delayedCall(e*(psy.browser.IS_DESKTOP?.1:.2),this.showFlavor,[i])}}},scrollHandler:function(t){if(this._super.apply(this,arguments),t){var e=$(this.renderer.view).offset().top;e+this.flavorContainer.position.y+this.mcFlavors[0].mc.y<3*this._height/4&&this.playAllFlavors()}},getBubbleTargetPosition:function(t,e){var i=e.id%2,r=t.angle||s,o=(i?180:0)+(r+psy.math.rand(0,10))*(i?-1:1),a=t.id<0?t.x:t.targetX,l=t.id<0?t.y:t.targetY;t.radius=t.radius||0;var h=t.radius+e.radius+n,c=a+Math.cos(psy.math.degToRad(o))*h,u=l-Math.sin(psy.math.degToRad(o))*h;return{x:c,y:u}},addBubble:function(t){var e=ModelBubbles.getBubbleScene(t.type),i=new e;i.init({type:t.type,id:this.totalBubbles,data:t.data}),i.setPosition(this.baseW/2,this.baseH),i.setTargetPosition(this.bubblesWidth/2,this.baseH);this.getBubbleTargetPosition(this.anchorBubble,i);return i.setTargetPosition(this.baseW/2,this.baseH/2),i.start(),i.show(),this.bubblesContainer.addChild(i.container),this.bubbles.push(i),this.totalBubbles++,this.shownBubbles++,i},updateBubblesPosition:function(){for(var t=this.totalBubbles-1;t>=0;t--){var e=this.bubbles[t],i=t==this.totalBubbles-1?this.anchorBubble:this.bubbles[t+1],r=this.getBubbleTargetPosition(i,e);e.setTargetPosition(r.x,r.y)}if(this.shownBubbles>6){var s=this.bubbles[this.totalBubbles-this.shownBubbles];s.hide(),this.shownBubbles--}if(6==this.shownBubbles){var o=this.bubbles[this.totalBubbles-this.shownBubbles],a=n+o.radius,l=(o.targetY-a)/5;o.setTargetPosition(o.targetX,a);for(var t=0;t<this.shownBubbles-1;t++){var s=this.bubbles[this.totalBubbles-t-1],h=-l*(t+1);s.setTargetPosition(s.targetX,s.targetY+h)}}},update:function(){this._super.apply(this,arguments);for(var t=0;t<this.totalBubbles;t++)this.bubbles[t].update();this.renderer.render(this.stage)},loadedHandler:function(){this.show()},adjust:function(){this._super.apply(this,arguments),this.setFlavorsPosition(this._width)}})}),define("app/view/scene/about/sceneFanFavoriteBubbles",["app/view/scene/sceneBubblesBase","app/event/eventsBubble"],function(t,e){return t.extend({init:function(t){this.sceneId=Model.SCENE_ABOUT_FAN_BUBBLES,this.sceneType=Model.SCENE_BUBBLES,this.baseW=Config.WIDE_W,this.width=Config.WIDE_W,this.bubblesWidth=Config.BUBBLES_W,this.bubbles=[],this.totalBubbles=0,this.shownBubbles=0,this.hasDynamicHeight=!0,this.anchorBubble={id:-1,x:this.bubblesWidth/2,y:4*-Config.BUBBLE_MARGIN,radius:Config.BUBBLE_DEFAULT_RADIUS/2},this._super(t)},getBubbleTargetPosition:function(t,e){var i=e.id%2,n=e.id%3,r=0,s=e.origin?e.origin.radius:e.radius,o=t.origin?t.origin.radius:t.radius,a=t.id<0?t.x:t.targetX,l=t.id<0?t.y:t.targetY,h=o+s;App.isRespondFrom(Config.MOBILE_MODE)||App.isRespondFrom(Config.PAD_MODE)?(r=t.angle||this.targetAngle,r=(i?180:0)+(r+psy.math.rand(0,10))*(i?-1:1),h-=Config.BUBBLE_MARGIN):1==n?(r=t.id<0?135:185,h+=2*Config.BUBBLE_MARGIN):(r=65,h-=Config.BUBBLE_MARGIN);var c=psy.math.polar(h,r),u=a+c.x,d=l-c.y;return u=this.cropBubbleTargetX(u,s),{x:u,y:d}},respondHandler:function(){App.isRespondFrom(Config.MOBILE_MODE)?(this.targetAngle=65,this.width=Config.MOBILE_MIN_W):App.isRespondFrom(Config.PAD_MODE)?(this.targetAngle=65,this.width=Config.MOBILE_W):App.isRespondFrom(Config.DESK_MODE)?this.width=Config.PAD_W:this.width=Config.WIDE_W,this._super.apply(this,arguments)},adjust:function(){this._super.apply(this,arguments),this.renderer.resize(this.baseW,this._height+Config.BUBBLES_SCROLL_PAD)}})}),define("app/view/scene/particle/particleADA",[],function(){var t=function(){};return t.prototype={init:function(t){this.g=new PIXI.Graphics;var e=[8565226,4775791,16512177,10021615,15760015,16374638];this.origin={color:_.sample(e),alpha:psy.math.rand(.2,.8),delay:{min:0,max:5},speed:{min:3,max:10},scale:1,spinSpeed:.015,spinSize:psy.math.rand(15,20),size:psy.math.randByPower(2,15,3),yr:{min:.05,max:.5},xr:{min:.1,max:.9}},_.extend(this.origin,t),_.extend(this,this.origin),this.draw(),this.g.x=0,this.g.y=0},draw:function(){this.g.beginFill(this.color),this.g.drawCircle(0,0,this.size),this.g.endFill()},play:function(){this.reset(),this.update()},start:function(){var t=psy.math.rand(this.speed.min,this.speed.max);TweenMax.to(this,t,{distR:1,onUpdate:$.proxy(this.update,this),ease:Cubic.easeIn}),TweenMax.to(this,.2*t,{alpha:this.origin.alpha,scale:this.origin.scale,ease:Cubic.easeInOut});var e=.6*t;TweenMax.to(this,.2*t,{delay:e,alpha:0,scale:0,ease:Quart.easeIn}),TweenMax.delayedCall(t,$.proxy(this.reset,this))},stop:function(){TweenMax.killTweensOf(this)},reset:function(){this.distR=0,this.alpha=0,this.scale=0,this.distR=0,this.runR=.7,this.xr=psy.math.rand(this.origin.xr.min,this.origin.xr.max),this.yr=psy.math.rand(this.origin.yr.min,this.origin.yr.max),TweenMax.delayedCall(psy.math.rand(this.delay.min,this.delay.max),$.proxy(this.start,this))},update:function(){this.g.x=this._width*this.xr+Math.sin(this.distR*this._height*this.spinSpeed)*this.spinSize,this.g.y=-this._height*this.yr-this.runR*this._height*this.distR,this.g.alpha=this.alpha,this.g.scale.x=this.g.scale.y=this.scale},adjust:function(t,e){this._width=t,this._height=e}},t}),define("app/view/scene/about/sceneAboutADA",["app/view/scene/scenePageBase","app/model/modelSceneAsset","app/view/scene/particle/particleADA"],function(t,e,i){return t.extend({init:function(t){this.sceneId=Model.SCENE_ABOUT_ADA,this.currentFrame=0,this.isOpen=!1,this.baseW=Config.WIDE_W,this.baseH=780,this.machineTopR=.52,this.screenW=144,this.screenH=236,this.upParticles={total:25,particles:[]},this.spMachine=e.getImageSprite(e.imageManager.aboutADAMachine),this._super(t)},render:function(){this._super();var t={transparent:!0,antialias:!0,resolution:psy.browser.SCREEN_RATIO};psy.browser.IS_WEBGL_SUPPORT?this.renderer=PIXI.autoDetectRenderer(this.baseW,this.baseH,t):this.renderer=new PIXI.CanvasRenderer(this.baseW,this.baseH,t),this.stage=new PIXI.Stage(16776960),this.frame=new psy.Frame,this.$el.append(this.renderer.view),psy.browser.IS_RETINA&&(TweenMax.set(this.renderer.view,{scale:1/psy.browser.SCREEN_RATIO}),this.$el.height(this.renderer.view.height)),this.$screen=this.$el.find("video"),this.screen=this.$screen[0];var i=0;i=psy.browser.IS_MOBILE||psy.browser.IS_PAD?e.imageManager.aboutADAMachineScreen:e.imageManager.aboutADAMachineVideoCover,this.spScreen=e.getImageSprite(i),this.spScreen.x=109,this.spScreen.y=45;var n=new PIXI.Graphics;n.beginFill(16711680),n.drawRect(0,0,112,258),n.endFill(),n.rotation=psy.math.degToRad(-9),n.x=this.spScreen.x,n.y=this.spScreen.y,this.spScreen.mask=n,this.spMachine.x=this.spMachine.y=0,this.spMachine.anchor.x=this.spMachine.anchor.y=0,this.machineContainer=new PIXI.DisplayObjectContainer,this.upParticlesContainer=new PIXI.DisplayObjectContainer,this.container=new PIXI.DisplayObjectContainer,this.container.alpha=0,this.container.addChild(this.upParticlesContainer),this.container.addChild(this.interactiveContainer),this.machineContainer.addChild(this.spScreen),this.machineContainer.addChild(this.spMachine),this.machineContainer.addChild(n),this.container.addChild(this.machineContainer),this.stage.addChild(this.container),this.drawUpParticles(this.upParticlesContainer)},bind:function(){this._super(),this.frame.bind({id:"sceneADA",handler:$.proxy(this.update,this),fps:60}),this.$screen.on("canplay",$.proxy(this.loadVideoHandler,this))},show:function(){this._super(),TweenMax.to(this.container,0,{alpha:1,ease:Sine.easeInOut});for(var t=0;t<this.upParticles.total;t++){var e=this.upParticles.particles[t];e.play()}},update:function(){this._super.apply(this,arguments),this.renderer.render(this.stage)},drawUpParticles:function(t){for(var e=0;e<this.upParticles.total;e++){var n=new i;n.init({id:e}),t.addChild(n.g),this.upParticles.particles.push(n)}},loadVideoHandler:function(){if(!psy.browser.IS_MOBILE&&!psy.browser.IS_PAD){this.screen.play();var t=(this.machineContainer.getChildIndex(this.spScreen),new PIXI.Sprite(PIXI.VideoTexture.textureFromVideo(this.screen)));t.x=this.spScreen.x,t.y=this.spScreen.y,this.spScreen.mask&&(t.mask=this.spScreen.mask);var e=PIXI.VideoTexture.textureFromVideo(this.screen);this.spScreen.setTexture(e)}},unbind:function(){this._super.apply(this,arguments),this.$screen.off("canplay"),this.frame.unbind(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.$el)},adjust:function(t,e){this._super(t,e),t=this._width>Config.WIDE_W?Config.WIDE_W:this._width,e=this.baseH,App.isRespondFrom(Config.MOBILE_MODE)?(this.machineContainer.x=Math.round(t/2-137),this.machineContainer.y=74,this.machineContainer.scale.x=this.machineContainer.scale.y=.62,e=654):App.isRespondFrom(Config.PAD_MODE)?(this.machineContainer.x=Math.round(t/2-390),this.machineContainer.y=54,this.machineContainer.scale.x=this.machineContainer.scale.y=.55,e=420):(this.machineContainer.x=Math.round(t/2-540),this.machineContainer.y=104,this.machineContainer.scale.x=this.machineContainer.scale.y=1),this.upParticlesContainer.x=0,this.upParticlesContainer.y=this.machineContainer.y+this.machineContainer.height;for(var i=0;i<this.upParticles.total;i++){var n=this.upParticles.particles[i];n.adjust(t,e)}this.$el.height(e),this.renderer.resize(t,e)}})}),define("app/view/page/viewPageAbout",["app/view/page/viewPageBase","app/view/component/viewPageBg","app/model/modelFlavor","app/view/component/viewBubbles","app/view/scene/about/sceneAboutIntro","app/view/scene/about/sceneFinderAndFlavors","app/view/scene/about/sceneFanFavoriteBubbles","app/view/scene/about/sceneAboutADA"],function(t,e,i,n,r,s,o,a){return t.extend({init:function(t){t.templateData=t.templateData||{},_.extend(t.templateData,{}),this._super(t)},render:function(){this.templateData=_.extend(this.templateData,{flavors:i.getFlavors()}),this._super(),this.$flavors=this.$el.find(".js-view-flavors .js-flavor"),this.$flavors.on("mouseenter",$.proxy(this.overFlavorHandler,this)),this.bgView=new e,this.bgView.init({$el:this.$el.find(".js-page-bg")}),this.$pageBg=this.$el.find(".js-about-bg"),this.bgView.$el.after(this.$pageBg),this.introScene=new r,this.introScene.init({$el:this.$el.find(".js-scene-intro")}),this.finderAndFlavorsView=new n,this.finderAndFlavorsView.init({$el:this.$el.find(".js-finder-bubbles"),maxBubbleNum:1,sceneClazz:s,displayOrder:[ModelBubbles.BUBBLE_FINDER]}),this.FanFavoriteBubblesView=new n,this.FanFavoriteBubblesView.init({$el:this.$el.find(".js-fanfavorite-bubbles"),maxBubbleNum:4,sceneClazz:o,displayOrder:[ModelBubbles.BUBBLE_FAVORITE]}),this.adaScene=new a,this.adaScene.init({$el:this.$el.find(".js-scene-ada")})},show:function(){this._super(),this.introScene.show(),this.adaScene.show(),this.finderAndFlavorsView.show(),this.FanFavoriteBubblesView.show()},overFlavorHandler:function(t){var e=$(t.target),i=this.$flavors.index(e);i>-1&&this.finderAndFlavorsView.scene.playFlavor(i)},unbind:function(){this._super()},hide:function(){this._super()},clean:function(){this.bgView.destroy(),this.introScene.destroy(),this.finderAndFlavorsView.destroy(),this.FanFavoriteBubblesView.destroy(),this.adaScene.destroy(),this._super()},adjust:function(t,e){this._super(t,e),this.bgView&&this.bgView.adjust(t,e)}})}),define("app/view/scene/events/sceneEventsTop",["app/view/scene/scenePageBase","app/model/modelSceneAsset","app/view/scene/particle/particle","app/view/scene/particle/particleHero"],function(t,e,i,n){return t.extend({init:function(t){this.sceneId=Model.SCENE_EVENT_INTRO,this.isOpen=!1,this.isOpening=!1,this.baseW=Config.WIDE_W,this.baseH=1150,this.machineTopR=.52,this.spreadParticles={total:35,particles:[]},this.heroParticles={heros:[e.getMovieClip(e.movieClipManager.mcIntroStrawberry),e.getMovieClip(e.movieClipManager.mcIntroBike),e.getMovieClip(e.movieClipManager.mcIntroLemon),e.getMovieClip(e.movieClipManager.mcIntroCherry),e.getMovieClip(e.movieClipManager.mcIntroHeadspin),e.getMovieClip(e.movieClipManager.mcIntroJump)],total:0,particles:[]},this.heroParticles.total=this.heroParticles.heros.length,this._super(t)},render:function(){this._super();var t={transparent:!0,antialias:!0,resolution:psy.browser.SCREEN_RATIO};psy.browser.IS_WEBGL_SUPPORT?this.renderer=PIXI.autoDetectRenderer(this.width,this.height,t):this.renderer=new PIXI.CanvasRenderer(this.width,this.height,t),this.stage=new PIXI.Stage(16776960),this.frame=new psy.Frame,this.$el.append(this.renderer.view),this.container=new PIXI.DisplayObjectContainer,this.container.alpha=0,this.currentFrame=0,this.spreadParticlesContainer=new PIXI.DisplayObjectContainer,this.heroParticlesContainer=new PIXI.DisplayObjectContainer,this.container.addChild(this.spreadParticlesContainer),this.container.addChild(this.heroParticlesContainer),this.container.addChild(this.interactiveContainer),this.stage.addChild(this.container),this.drawSpreadParticles(this.spreadParticlesContainer),this.drawHeroParticles(this.heroParticlesContainer)},bind:function(){this._super(),this.frame.bind({id:"sceneEvents",handler:$.proxy(this.update,this),fps:60}),this.listenTo(Events,Events.APP_EVENT.OPENING,$.proxy(this.openingHandler,this))},show:function(){this._super(),TweenMax.to(this.container,0,{alpha:1,ease:Sine.easeInOut}),TweenMax.delayedCall(2,$.proxy(this.startSceneElements,this))},update:function(){this._super.apply(this,arguments);for(var t=0;t<this.heroParticles.total;t++){var e=this.heroParticles.particles[t];e.update()}this.isOpening&&(this.adjust(),Events.trigger(Events.SCROLL_EVENT.ADJUST)),this.renderer.render(this.stage)},startSceneElements:function(){for(var t=0;t<this.heroParticles.total;t++){var e=this.heroParticles.particles[t];e.play()}for(var t=0;t<this.spreadParticles.total;t++){var e=this.spreadParticles.particles[t];e.play()}},drawHeroParticles:function(t){for(var e=0;e<this.heroParticles.total;e++){var i=new n;i.init({id:e,mc:this.heroParticles.heros[e],syncTime:5+10*Math.random(),delay:{min:0,max:.8},speed:{min:4,max:6},direction:e%2?1:-1,targetAngle:82+12*e}),t.addChild(i.mc.mc),this.heroParticles.particles.push(i)}},drawSpreadParticles:function(t){for(var e=0;e<this.spreadParticles.total;e++){var n=new i;n.init({id:e,isSpread:!0,syncTime:!1,delay:{min:0,max:2},speed:{min:3,max:5}}),t.addChild(n.g),this.spreadParticles.particles.push(n)}},openingHandler:function(t){this.isOpen=!0,this.height=this._height,this.heightR=0;var e=t?2.7:.1,i=t?.23:0,n=Quint.easeInOut,r=this;TweenMax.to(this,e,{delay:i,heightR:1,machineTopR:.57,ease:n,onStart:function(){r.isOpening=!0},onComplete:function(){r.isOpening=!1}})},unbind:function(){this._super.apply(this,arguments),this.frame.unbind();for(var t=0;t<this.heroParticles.total;t++){var e=this.heroParticles.particles[t];e.stop()}for(var t=0;t<this.spreadParticles.total;t++){var e=this.spreadParticles.particles[t];e.stop()}TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.$el)},destroy:function(){this._super.apply(this,arguments);try{this.renderer.destroy(this.el)}catch(t){}},adjust:function(t,e){this._super(t,e);var i=App.isRespondFrom(Config.MOBILE_MODE)?310:600;this.height=this._height-this.heightR*(this._height-i),t=this._width>Config.WIDE_W?Config.WIDE_W:this._width,e=this.isOpen?this.height:this._height;var n=!psy.layout.getIsHeightFit(t,e,this.baseW,this.baseH),r=n?this.baseW/t:this.baseH/e,s=t;App.isRespondFrom(Config.PAD_MODE)&&(r=this.baseH/e,s=2*t),App.isRespondFrom(Config.MOBILE_MODE)&&(s=4*t),TweenMax.set(this.$el,{height:e}),this.spreadParticlesContainer.scale.x=this.spreadParticlesContainer.scale.y=1/r,this.spreadParticlesContainer.x=t/2|0,this.spreadParticlesContainer.y=257,this.heroParticlesContainer.scale.x=this.heroParticlesContainer.scale.y=1/r,this.heroParticlesContainer.x=t/2|0,this.heroParticlesContainer.y=247;for(var o=0;o<this.heroParticles.total;o++){var a=this.heroParticles.particles[o];a.adjust(s,e)}for(var o=0;o<this.spreadParticles.total;o++){var a=this.spreadParticles.particles[o];a.yDiff=this.heroParticlesContainer.y-this.spreadParticlesContainer.y,a.adjust(s,e)}this.renderer.resize(t,e)},startTrackingMouse:function(){var t=this.heroParticlesContainer.x,e=this.heroParticlesContainer.y,i=this;$(window).mousemove(function(n){var r=Math.max(document.documentElement.clientWidth,window.innerWidth||0),s=Math.max(document.documentElement.clientHeight,window.innerHeight||0),o=n.clientX/r*2-1,a=n.clientY/s*2-1,l=-30*o,h=-30*a;TweenMax.to(i.heroParticlesContainer,20,{x:t+l,y:e+h,ease:Quint.easeOut})})}})});var Slick=window.Slick||{};Slick=function(){function t(t,i){var n,r=this;r.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:$(t),appendDots:$(t),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,e){return'<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(e+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},r.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},$.extend(r,r.initials),r.activeBreakpoint=null,r.animType=null,r.animProp=null,r.breakpoints=[],r.breakpointSettings=[],r.cssTransitions=!1,r.hidden="hidden",r.paused=!1,r.positionProp=null,r.respondTo=null,r.rowCount=1,r.shouldClick=!0,r.$slider=$(t),r.$slidesCache=null,r.transformType=null,r.transitionType=null,r.visibilityChange="visibilitychange",r.windowWidth=0,r.windowTimer=null,n=$(t).data("slick")||{},r.options=$.extend({},r.defaults,n,i),r.currentSlide=r.options.initialSlide,r.originalSettings=r.options,"undefined"!=typeof document.mozHidden?(r.hidden="mozHidden",r.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(r.hidden="webkitHidden",r.visibilityChange="webkitvisibilitychange"),r.autoPlay=$.proxy(r.autoPlay,r),r.autoPlayClear=$.proxy(r.autoPlayClear,r),r.changeSlide=$.proxy(r.changeSlide,r),r.clickHandler=$.proxy(r.clickHandler,r),r.selectHandler=$.proxy(r.selectHandler,r),r.setPosition=$.proxy(r.setPosition,r),r.swipeHandler=$.proxy(r.swipeHandler,r),r.dragHandler=$.proxy(r.dragHandler,r),r.keyHandler=$.proxy(r.keyHandler,r),r.autoPlayIterator=$.proxy(r.autoPlayIterator,r),r.instanceUid=e++,r.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,r.registerBreakpoints(),r.init(!0),r.checkResponsive(!0)}var e=0;return t}(),Slick.prototype.addSlide=Slick.prototype.slickAdd=function(t,e,i){var n=this;if("boolean"==typeof e)i=e,e=null;else if(0>e||e>=n.slideCount)return!1;n.unload(),"number"==typeof e?0===e&&0===n.$slides.length?$(t).appendTo(n.$slideTrack):i?$(t).insertBefore(n.$slides.eq(e)):$(t).insertAfter(n.$slides.eq(e)):i===!0?$(t).prependTo(n.$slideTrack):$(t).appendTo(n.$slideTrack),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slides.each(function(t,e){$(e).attr("data-slick-index",t)}),n.$slidesCache=n.$slides,n.reinit()},Slick.prototype.animateHeight=function(){var t=this;if(1===t.options.slidesToShow&&t.options.adaptiveHeight===!0&&t.options.vertical===!1){var e=t.$slides.eq(t.currentSlide).outerHeight(!0);t.$list.animate({height:e},t.options.speed)}},Slick.prototype.animateSlide=function(t,e){var i={},n=this;n.animateHeight(),n.options.rtl===!0&&n.options.vertical===!1&&(t=-t),n.transformsEnabled===!1?n.options.vertical===!1?n.$slideTrack.animate({left:t},n.options.speed,n.options.easing,e):n.$slideTrack.animate({top:t},n.options.speed,n.options.easing,e):n.cssTransitions===!1?(n.options.rtl===!0&&(n.currentLeft=-n.currentLeft),$({animStart:n.currentLeft}).animate({animStart:t},{duration:n.options.speed,easing:n.options.easing,step:function(t){t=Math.ceil(t),n.options.vertical===!1?(i[n.animType]="translate("+t+"px, 0px)",n.$slideTrack.css(i)):(i[n.animType]="translate(0px,"+t+"px)",n.$slideTrack.css(i))},complete:function(){e&&e.call()}})):(n.applyTransition(),t=Math.ceil(t),n.options.vertical===!1?i[n.animType]="translate3d("+t+"px, 0px, 0px)":i[n.animType]="translate3d(0px,"+t+"px, 0px)",n.$slideTrack.css(i),e&&setTimeout(function(){n.disableTransition(),e.call()},n.options.speed))},Slick.prototype.asNavFor=function(t){var e=this,i=e.options.asNavFor;i&&null!==i&&(i=$(i).not(e.$slider)),null!==i&&"object"==typeof i&&i.each(function(){var e=$(this).slick("getSlick");e.unslicked||e.slideHandler(t,!0)})},Slick.prototype.applyTransition=function(t){var e=this,i={};e.options.fade===!1?i[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:i[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,e.options.fade===!1?e.$slideTrack.css(i):e.$slides.eq(t).css(i)},Slick.prototype.autoPlay=function(){var t=this;t.autoPlayTimer&&clearInterval(t.autoPlayTimer),t.slideCount>t.options.slidesToShow&&t.paused!==!0&&(t.autoPlayTimer=setInterval(t.autoPlayIterator,t.options.autoplaySpeed))},Slick.prototype.autoPlayClear=function(){var t=this;t.autoPlayTimer&&clearInterval(t.autoPlayTimer)},Slick.prototype.autoPlayIterator=function(){var t=this;t.options.infinite===!1?1===t.direction?(t.currentSlide+1===t.slideCount-1&&(t.direction=0),t.slideHandler(t.currentSlide+t.options.slidesToScroll)):(t.currentSlide-1===0&&(t.direction=1),t.slideHandler(t.currentSlide-t.options.slidesToScroll)):t.slideHandler(t.currentSlide+t.options.slidesToScroll)},Slick.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&(t.$prevArrow=$(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=$(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},Slick.prototype.buildDots=function(){var t,e,i=this;if(i.options.dots===!0&&i.slideCount>i.options.slidesToShow){for(e='<ul class="'+i.options.dotsClass+'">',t=0;t<=i.getDotCount();t+=1)e+="<li>"+i.options.customPaging.call(this,i,t)+"</li>";e+="</ul>",i.$dots=$(e).appendTo(i.options.appendDots),i.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},Slick.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,e){$(e).attr("data-slick-index",t).data("originalStyling",$(e).attr("style")||"")}),t.$slidesCache=t.$slides,t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?$('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),(t.options.centerMode===!0||t.options.swipeToSlide===!0)&&(t.options.slidesToScroll=1),$("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},Slick.prototype.buildRows=function(){var t,e,i,n,r,s,o,a=this;if(n=document.createDocumentFragment(),s=a.$slider.children(),a.options.rows>1){for(o=a.options.slidesPerRow*a.options.rows,r=Math.ceil(s.length/o),t=0;r>t;t++){var l=document.createElement("div");for(e=0;e<a.options.rows;e++){var h=document.createElement("div");for(i=0;i<a.options.slidesPerRow;i++){var c=t*o+(e*a.options.slidesPerRow+i);s.get(c)&&h.appendChild(s.get(c))}l.appendChild(h)}n.appendChild(l)}a.$slider.html(n),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},Slick.prototype.checkResponsive=function(t,e){var i,n,r,s=this,o=!1,a=s.$slider.width(),l=window.innerWidth||$(window).width();if("window"===s.respondTo?r=l:"slider"===s.respondTo?r=a:"min"===s.respondTo&&(r=Math.min(l,a)),s.options.responsive&&s.options.responsive.length&&null!==s.options.responsive){n=null;for(i in s.breakpoints)s.breakpoints.hasOwnProperty(i)&&(s.originalSettings.mobileFirst===!1?r<s.breakpoints[i]&&(n=s.breakpoints[i]):r>s.breakpoints[i]&&(n=s.breakpoints[i]));null!==n?null!==s.activeBreakpoint?(n!==s.activeBreakpoint||e)&&(s.activeBreakpoint=n,"unslick"===s.breakpointSettings[n]?s.unslick(n):(s.options=$.extend({},s.originalSettings,s.breakpointSettings[n]),t===!0&&(s.currentSlide=s.options.initialSlide),s.refresh(t)),o=n):(s.activeBreakpoint=n,"unslick"===s.breakpointSettings[n]?s.unslick(n):(s.options=$.extend({},s.originalSettings,s.breakpointSettings[n]),t===!0&&(s.currentSlide=s.options.initialSlide),s.refresh(t)),o=n):null!==s.activeBreakpoint&&(s.activeBreakpoint=null,s.options=s.originalSettings,t===!0&&(s.currentSlide=s.options.initialSlide),s.refresh(t),o=n),t||o===!1||s.$slider.trigger("breakpoint",[s,o])}},Slick.prototype.changeSlide=function(t,e){var i,n,r,s=this,o=$(t.target);switch(o.is("a")&&t.preventDefault(),o.is("li")||(o=o.closest("li")),r=s.slideCount%s.options.slidesToScroll!==0,i=r?0:(s.slideCount-s.currentSlide)%s.options.slidesToScroll,t.data.message){case"previous":n=0===i?s.options.slidesToScroll:s.options.slidesToShow-i,s.slideCount>s.options.slidesToShow&&s.slideHandler(s.currentSlide-n,!1,e);break;case"next":n=0===i?s.options.slidesToScroll:i,s.slideCount>s.options.slidesToShow&&s.slideHandler(s.currentSlide+n,!1,e);break;case"index":var a=0===t.data.index?0:t.data.index||o.index()*s.options.slidesToScroll;s.slideHandler(s.checkNavigable(a),!1,e),o.children().trigger("focus");break;default:return}},Slick.prototype.checkNavigable=function(t){var e,i,n=this;if(e=n.getNavigableIndexes(),i=0,t>e[e.length-1])t=e[e.length-1];else for(var r in e){if(t<e[r]){t=i;break}i=e[r]}return t},Slick.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&($("li",t.$dots).off("click.slick",t.changeSlide),t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&$("li",t.$dots).off("mouseenter.slick",$.proxy(t.setPaused,t,!0)).off("mouseleave.slick",$.proxy(t.setPaused,t,!1))),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide)),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),$(document).off(t.visibilityChange,t.visibility),t.$list.off("mouseenter.slick",$.proxy(t.setPaused,t,!0)),t.$list.off("mouseleave.slick",$.proxy(t.setPaused,t,!1)),t.options.accessibility===!0&&t.$list.off("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&$(t.$slideTrack).children().off("click.slick",t.selectHandler),$(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),$(window).off("resize.slick.slick-"+t.instanceUid,t.resize),$("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),$(window).off("load.slick.slick-"+t.instanceUid,t.setPosition),$(document).off("ready.slick.slick-"+t.instanceUid,t.setPosition)},Slick.prototype.cleanUpRows=function(){var t,e=this;e.options.rows>1&&(t=e.$slides.children().children(),t.removeAttr("style"),
e.$slider.html(t))},Slick.prototype.clickHandler=function(t){var e=this;e.shouldClick===!1&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())},Slick.prototype.destroy=function(t){var e=this;e.autoPlayClear(),e.touchObject={},e.cleanUpEvents(),$(".slick-cloned",e.$slider).detach(),e.$dots&&e.$dots.remove(),e.options.arrows===!0&&(e.$prevArrow&&e.$prevArrow.length&&(e.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove()),e.$nextArrow&&e.$nextArrow.length&&(e.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove())),e.$slides&&(e.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){$(this).attr("style",$(this).data("originalStyling"))}),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.detach(),e.$list.detach(),e.$slider.append(e.$slides)),e.cleanUpRows(),e.$slider.removeClass("slick-slider"),e.$slider.removeClass("slick-initialized"),e.unslicked=!0,t||e.$slider.trigger("destroy",[e])},Slick.prototype.disableTransition=function(t){var e=this,i={};i[e.transitionType]="",e.options.fade===!1?e.$slideTrack.css(i):e.$slides.eq(t).css(i)},Slick.prototype.fadeSlide=function(t,e){var i=this;i.cssTransitions===!1?(i.$slides.eq(t).css({zIndex:i.options.zIndex}),i.$slides.eq(t).animate({opacity:1},i.options.speed,i.options.easing,e)):(i.applyTransition(t),i.$slides.eq(t).css({opacity:1,zIndex:i.options.zIndex}),e&&setTimeout(function(){i.disableTransition(t),e.call()},i.options.speed))},Slick.prototype.fadeSlideOut=function(t){var e=this;e.cssTransitions===!1?e.$slides.eq(t).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(t),e.$slides.eq(t).css({opacity:0,zIndex:e.options.zIndex-2}))},Slick.prototype.filterSlides=Slick.prototype.slickFilter=function(t){var e=this;null!==t&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(t).appendTo(e.$slideTrack),e.reinit())},Slick.prototype.getCurrent=Slick.prototype.slickCurrentSlide=function(){var t=this;return t.currentSlide},Slick.prototype.getDotCount=function(){var t=this,e=0,i=0,n=0;if(t.options.infinite===!0)for(;e<t.slideCount;)++n,e=i+t.options.slidesToShow,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else if(t.options.centerMode===!0)n=t.slideCount;else for(;e<t.slideCount;)++n,e=i+t.options.slidesToShow,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return n-1},Slick.prototype.getLeft=function(t){var e,i,n,r=this,s=0;return r.slideOffset=0,i=r.$slides.first().outerHeight(!0),r.options.infinite===!0?(r.slideCount>r.options.slidesToShow&&(r.slideOffset=r.slideWidth*r.options.slidesToShow*-1,s=i*r.options.slidesToShow*-1),r.slideCount%r.options.slidesToScroll!==0&&t+r.options.slidesToScroll>r.slideCount&&r.slideCount>r.options.slidesToShow&&(t>r.slideCount?(r.slideOffset=(r.options.slidesToShow-(t-r.slideCount))*r.slideWidth*-1,s=(r.options.slidesToShow-(t-r.slideCount))*i*-1):(r.slideOffset=r.slideCount%r.options.slidesToScroll*r.slideWidth*-1,s=r.slideCount%r.options.slidesToScroll*i*-1))):t+r.options.slidesToShow>r.slideCount&&(r.slideOffset=(t+r.options.slidesToShow-r.slideCount)*r.slideWidth,s=(t+r.options.slidesToShow-r.slideCount)*i),r.slideCount<=r.options.slidesToShow&&(r.slideOffset=0,s=0),r.options.centerMode===!0&&r.options.infinite===!0?r.slideOffset+=r.slideWidth*Math.floor(r.options.slidesToShow/2)-r.slideWidth:r.options.centerMode===!0&&(r.slideOffset=0,r.slideOffset+=r.slideWidth*Math.floor(r.options.slidesToShow/2)),e=r.options.vertical===!1?t*r.slideWidth*-1+r.slideOffset:t*i*-1+s,r.options.variableWidth===!0&&(n=r.slideCount<=r.options.slidesToShow||r.options.infinite===!1?r.$slideTrack.children(".slick-slide").eq(t):r.$slideTrack.children(".slick-slide").eq(t+r.options.slidesToShow),e=n[0]?-1*n[0].offsetLeft:0,r.options.centerMode===!0&&(n=r.options.infinite===!1?r.$slideTrack.children(".slick-slide").eq(t):r.$slideTrack.children(".slick-slide").eq(t+r.options.slidesToShow+1),e=n[0]?-1*n[0].offsetLeft:0,e+=(r.$list.width()-n.outerWidth())/2)),e},Slick.prototype.getOption=Slick.prototype.slickGetOption=function(t){var e=this;return e.options[t]},Slick.prototype.getNavigableIndexes=function(){var t,e=this,i=0,n=0,r=[];for(e.options.infinite===!1?t=e.slideCount:(i=-1*e.options.slidesToScroll,n=-1*e.options.slidesToScroll,t=2*e.slideCount);t>i;)r.push(i),i=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return r},Slick.prototype.getSlick=function(){return this},Slick.prototype.getSlideCount=function(){var t,e,i,n=this;return i=n.options.centerMode===!0?n.slideWidth*Math.floor(n.options.slidesToShow/2):0,n.options.swipeToSlide===!0?(n.$slideTrack.find(".slick-slide").each(function(t,r){return r.offsetLeft-i+$(r).outerWidth()/2>-1*n.swipeLeft?(e=r,!1):void 0}),t=Math.abs($(e).attr("data-slick-index")-n.currentSlide)||1):n.options.slidesToScroll},Slick.prototype.goTo=Slick.prototype.slickGoTo=function(t,e){var i=this;i.changeSlide({data:{message:"index",index:parseInt(t)}},e)},Slick.prototype.init=function(t){var e=this;$(e.$slider).hasClass("slick-initialized")||($(e.$slider).addClass("slick-initialized"),e.buildRows(),e.buildOut(),e.setProps(),e.startLoad(),e.loadSlider(),e.initializeEvents(),e.updateArrows(),e.updateDots()),t&&e.$slider.trigger("init",[e]),e.options.accessibility===!0&&e.initADA()},Slick.prototype.initArrowEvents=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.on("click.slick",{message:"previous"},t.changeSlide),t.$nextArrow.on("click.slick",{message:"next"},t.changeSlide))},Slick.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&$("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&$("li",t.$dots).on("mouseenter.slick",$.proxy(t.setPaused,t,!0)).on("mouseleave.slick",$.proxy(t.setPaused,t,!1))},Slick.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),$(document).on(t.visibilityChange,$.proxy(t.visibility,t)),t.$list.on("mouseenter.slick",$.proxy(t.setPaused,t,!0)),t.$list.on("mouseleave.slick",$.proxy(t.setPaused,t,!1)),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&$(t.$slideTrack).children().on("click.slick",t.selectHandler),$(window).on("orientationchange.slick.slick-"+t.instanceUid,$.proxy(t.orientationChange,t)),$(window).on("resize.slick.slick-"+t.instanceUid,$.proxy(t.resize,t)),$("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),$(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),$(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},Slick.prototype.initUI=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.show(),t.$nextArrow.show()),t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&t.$dots.show(),t.options.autoplay===!0&&t.autoPlay()},Slick.prototype.keyHandler=function(t){var e=this;t.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===t.keyCode&&e.options.accessibility===!0?e.changeSlide({data:{message:"previous"}}):39===t.keyCode&&e.options.accessibility===!0&&e.changeSlide({data:{message:"next"}}))},Slick.prototype.lazyLoad=function(){function t(t){$("img[data-lazy]",t).each(function(){var t=$(this),e=$(this).attr("data-lazy"),i=document.createElement("img");i.onload=function(){t.animate({opacity:0},100,function(){t.attr("src",e).animate({opacity:1},200,function(){t.removeAttr("data-lazy").removeClass("slick-loading")})})},i.src=e})}var e,i,n,r,s=this;s.options.centerMode===!0?s.options.infinite===!0?(n=s.currentSlide+(s.options.slidesToShow/2+1),r=n+s.options.slidesToShow+2):(n=Math.max(0,s.currentSlide-(s.options.slidesToShow/2+1)),r=2+(s.options.slidesToShow/2+1)+s.currentSlide):(n=s.options.infinite?s.options.slidesToShow+s.currentSlide:s.currentSlide,r=n+s.options.slidesToShow,s.options.fade===!0&&(n>0&&n--,r<=s.slideCount&&r++)),e=s.$slider.find(".slick-slide").slice(n,r),t(e),s.slideCount<=s.options.slidesToShow?(i=s.$slider.find(".slick-slide"),t(i)):s.currentSlide>=s.slideCount-s.options.slidesToShow?(i=s.$slider.find(".slick-cloned").slice(0,s.options.slidesToShow),t(i)):0===s.currentSlide&&(i=s.$slider.find(".slick-cloned").slice(-1*s.options.slidesToShow),t(i))},Slick.prototype.loadSlider=function(){var t=this;t.setPosition(),t.$slideTrack.css({opacity:1}),t.$slider.removeClass("slick-loading"),t.initUI(),"progressive"===t.options.lazyLoad&&t.progressiveLazyLoad()},Slick.prototype.next=Slick.prototype.slickNext=function(){var t=this;t.changeSlide({data:{message:"next"}})},Slick.prototype.orientationChange=function(){var t=this;t.checkResponsive(),t.setPosition()},Slick.prototype.pause=Slick.prototype.slickPause=function(){var t=this;t.autoPlayClear(),t.paused=!0},Slick.prototype.play=Slick.prototype.slickPlay=function(){var t=this;t.paused=!1,t.autoPlay()},Slick.prototype.postSlide=function(t){var e=this;e.$slider.trigger("afterChange",[e,t]),e.animating=!1,e.setPosition(),e.swipeLeft=null,e.options.autoplay===!0&&e.paused===!1&&e.autoPlay(),e.options.accessibility===!0&&e.initADA()},Slick.prototype.prev=Slick.prototype.slickPrev=function(){var t=this;t.changeSlide({data:{message:"previous"}})},Slick.prototype.preventDefault=function(t){t.preventDefault()},Slick.prototype.progressiveLazyLoad=function(){var t,e,i=this;t=$("img[data-lazy]",i.$slider).length,t>0&&(e=$("img[data-lazy]",i.$slider).first(),e.attr("src",e.attr("data-lazy")).removeClass("slick-loading").load(function(){e.removeAttr("data-lazy"),i.progressiveLazyLoad(),i.options.adaptiveHeight===!0&&i.setPosition()}).error(function(){e.removeAttr("data-lazy"),i.progressiveLazyLoad()}))},Slick.prototype.refresh=function(t){var e=this,i=e.currentSlide;e.destroy(!0),$.extend(e,e.initials,{currentSlide:i}),e.init(),t||e.changeSlide({data:{message:"index",index:i}},!1)},Slick.prototype.registerBreakpoints=function(){var t,e,i,n=this,r=n.options.responsive||null;if("array"===$.type(r)&&r.length){n.respondTo=n.options.respondTo||"window";for(t in r)if(i=n.breakpoints.length-1,e=r[t].breakpoint,r.hasOwnProperty(t)){for(;i>=0;)n.breakpoints[i]&&n.breakpoints[i]===e&&n.breakpoints.splice(i,1),i--;n.breakpoints.push(e),n.breakpointSettings[e]=r[t].settings}n.breakpoints.sort(function(t,e){return n.options.mobileFirst?t-e:e-t})}},Slick.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.checkResponsive(!1,!0),t.options.focusOnSelect===!0&&$(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses(0),t.setPosition(),t.$slider.trigger("reInit",[t]),t.options.autoplay===!0&&t.focusHandler()},Slick.prototype.resize=function(){var t=this;$(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=$(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},Slick.prototype.removeSlide=Slick.prototype.slickRemove=function(t,e,i){var n=this;return"boolean"==typeof t?(e=t,t=e===!0?0:n.slideCount-1):t=e===!0?--t:t,n.slideCount<1||0>t||t>n.slideCount-1?!1:(n.unload(),i===!0?n.$slideTrack.children().remove():n.$slideTrack.children(this.options.slide).eq(t).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,void n.reinit())},Slick.prototype.setCSS=function(t){var e,i,n=this,r={};n.options.rtl===!0&&(t=-t),e="left"==n.positionProp?Math.ceil(t)+"px":"0px",i="top"==n.positionProp?Math.ceil(t)+"px":"0px",r[n.positionProp]=t,n.transformsEnabled===!1?n.$slideTrack.css(r):(r={},n.cssTransitions===!1?(r[n.animType]="translate("+e+", "+i+")",n.$slideTrack.css(r)):(r[n.animType]="translate3d("+e+", "+i+", 0px)",n.$slideTrack.css(r)))},Slick.prototype.setDimensions=function(){var t=this;t.options.vertical===!1?t.options.centerMode===!0&&t.$list.css({padding:"0px "+t.options.centerPadding}):(t.$list.height(t.$slides.first().outerHeight(!0)*t.options.slidesToShow),t.options.centerMode===!0&&t.$list.css({padding:t.options.centerPadding+" 0px"})),t.listWidth=t.$list.width(),t.listHeight=t.$list.height(),t.options.vertical===!1&&t.options.variableWidth===!1?(t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.width(Math.ceil(t.slideWidth*t.$slideTrack.children(".slick-slide").length))):t.options.variableWidth===!0?t.$slideTrack.width(5e3*t.slideCount):(t.slideWidth=Math.ceil(t.listWidth),t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0)*t.$slideTrack.children(".slick-slide").length)));var e=t.$slides.first().outerWidth(!0)-t.$slides.first().width();t.options.variableWidth===!1&&t.$slideTrack.children(".slick-slide").width(t.slideWidth-e)},Slick.prototype.setFade=function(){var t,e=this;e.$slides.each(function(i,n){t=e.slideWidth*i*-1,e.options.rtl===!0?$(n).css({position:"relative",right:t,top:0,zIndex:e.options.zIndex-2,opacity:0}):$(n).css({position:"relative",left:t,top:0,zIndex:e.options.zIndex-2,opacity:0})}),e.$slides.eq(e.currentSlide).css({zIndex:e.options.zIndex-1,opacity:1})},Slick.prototype.setHeight=function(){var t=this;if(1===t.options.slidesToShow&&t.options.adaptiveHeight===!0&&t.options.vertical===!1){var e=t.$slides.eq(t.currentSlide).outerHeight(!0);t.$list.css("height",e)}},Slick.prototype.setOption=Slick.prototype.slickSetOption=function(t,e,i){var n,r,s=this;if("responsive"===t&&"array"===$.type(e))for(r in e)if("array"!==$.type(s.options.responsive))s.options.responsive=[e[r]];else{for(n=s.options.responsive.length-1;n>=0;)s.options.responsive[n].breakpoint===e[r].breakpoint&&s.options.responsive.splice(n,1),n--;s.options.responsive.push(e[r])}else s.options[t]=e;i===!0&&(s.unload(),s.reinit())},Slick.prototype.setPosition=function(){var t=this;t.setDimensions(),t.setHeight(),t.options.fade===!1?t.setCSS(t.getLeft(t.currentSlide)):t.setFade(),t.$slider.trigger("setPosition",[t])},Slick.prototype.setProps=function(){var t=this,e=document.body.style;t.positionProp=t.options.vertical===!0?"top":"left","top"===t.positionProp?t.$slider.addClass("slick-vertical"):t.$slider.removeClass("slick-vertical"),(void 0!==e.WebkitTransition||void 0!==e.MozTransition||void 0!==e.msTransition)&&t.options.useCSS===!0&&(t.cssTransitions=!0),t.options.fade&&("number"==typeof t.options.zIndex?t.options.zIndex<3&&(t.options.zIndex=3):t.options.zIndex=t.defaults.zIndex),void 0!==e.OTransform&&(t.animType="OTransform",t.transformType="-o-transform",t.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.MozTransform&&(t.animType="MozTransform",t.transformType="-moz-transform",t.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(t.animType=!1)),void 0!==e.webkitTransform&&(t.animType="webkitTransform",t.transformType="-webkit-transform",t.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.msTransform&&(t.animType="msTransform",t.transformType="-ms-transform",t.transitionType="msTransition",void 0===e.msTransform&&(t.animType=!1)),void 0!==e.transform&&t.animType!==!1&&(t.animType="transform",t.transformType="transform",t.transitionType="transition"),t.transformsEnabled=null!==t.animType&&t.animType!==!1},Slick.prototype.setSlideClasses=function(t){var e,i,n,r,s=this;i=s.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),s.$slides.eq(t).addClass("slick-current"),s.options.centerMode===!0?(e=Math.floor(s.options.slidesToShow/2),s.options.infinite===!0&&(t>=e&&t<=s.slideCount-1-e?s.$slides.slice(t-e,t+e+1).addClass("slick-active").attr("aria-hidden","false"):(n=s.options.slidesToShow+t,i.slice(n-e+1,n+e+2).addClass("slick-active").attr("aria-hidden","false")),0===t?i.eq(i.length-1-s.options.slidesToShow).addClass("slick-center"):t===s.slideCount-1&&i.eq(s.options.slidesToShow).addClass("slick-center")),s.$slides.eq(t).addClass("slick-center")):t>=0&&t<=s.slideCount-s.options.slidesToShow?s.$slides.slice(t,t+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=s.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(r=s.slideCount%s.options.slidesToShow,n=s.options.infinite===!0?s.options.slidesToShow+t:t,s.options.slidesToShow==s.options.slidesToScroll&&s.slideCount-t<s.options.slidesToShow?i.slice(n-(s.options.slidesToShow-r),n+r).addClass("slick-active").attr("aria-hidden","false"):i.slice(n,n+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===s.options.lazyLoad&&s.lazyLoad()},Slick.prototype.setupInfinite=function(){var t,e,i,n=this;if(n.options.fade===!0&&(n.options.centerMode=!1),n.options.infinite===!0&&n.options.fade===!1&&(e=null,n.slideCount>n.options.slidesToShow)){for(i=n.options.centerMode===!0?n.options.slidesToShow+1:n.options.slidesToShow,t=n.slideCount;t>n.slideCount-i;t-=1)e=t-1,$(n.$slides[e]).clone(!0).attr("id","").attr("data-slick-index",e-n.slideCount).prependTo(n.$slideTrack).addClass("slick-cloned");for(t=0;i>t;t+=1)e=t,$(n.$slides[e]).clone(!0).attr("id","").attr("data-slick-index",e+n.slideCount).appendTo(n.$slideTrack).addClass("slick-cloned");n.$slideTrack.find(".slick-cloned").find("[id]").each(function(){$(this).attr("id","")})}},Slick.prototype.setPaused=function(t){var e=this;e.options.autoplay===!0&&e.options.pauseOnHover===!0&&(e.paused=t,t?e.autoPlayClear():e.autoPlay())},Slick.prototype.selectHandler=function(t){var e=this,i=$(t.target).is(".slick-slide")?$(t.target):$(t.target).parents(".slick-slide"),n=parseInt(i.attr("data-slick-index"));return n||(n=0),e.slideCount<=e.options.slidesToShow?(e.setSlideClasses(n),void e.asNavFor(n)):void e.slideHandler(n)},Slick.prototype.slideHandler=function(t,e,i){var n,r,s,o,a=null,l=this;return e=e||!1,l.animating===!0&&l.options.waitForAnimate===!0||l.options.fade===!0&&l.currentSlide===t||l.slideCount<=l.options.slidesToShow?void 0:(e===!1&&l.asNavFor(t),n=t,a=l.getLeft(n),o=l.getLeft(l.currentSlide),l.currentLeft=null===l.swipeLeft?o:l.swipeLeft,l.options.infinite===!1&&l.options.centerMode===!1&&(0>t||t>l.getDotCount()*l.options.slidesToScroll)?void(l.options.fade===!1&&(n=l.currentSlide,i!==!0?l.animateSlide(o,function(){l.postSlide(n)}):l.postSlide(n))):l.options.infinite===!1&&l.options.centerMode===!0&&(0>t||t>l.slideCount-l.options.slidesToScroll)?void(l.options.fade===!1&&(n=l.currentSlide,i!==!0?l.animateSlide(o,function(){l.postSlide(n)}):l.postSlide(n))):(l.options.autoplay===!0&&clearInterval(l.autoPlayTimer),r=0>n?l.slideCount%l.options.slidesToScroll!==0?l.slideCount-l.slideCount%l.options.slidesToScroll:l.slideCount+n:n>=l.slideCount?l.slideCount%l.options.slidesToScroll!==0?0:n-l.slideCount:n,l.animating=!0,l.$slider.trigger("beforeChange",[l,l.currentSlide,r]),s=l.currentSlide,l.currentSlide=r,l.setSlideClasses(l.currentSlide),l.updateDots(),l.updateArrows(),l.options.fade===!0?(i!==!0?(l.fadeSlideOut(s),l.fadeSlide(r,function(){l.postSlide(r)})):l.postSlide(r),void l.animateHeight()):void(i!==!0?l.animateSlide(a,function(){l.postSlide(r)}):l.postSlide(r))))},Slick.prototype.startLoad=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.hide(),t.$nextArrow.hide()),t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&t.$dots.hide(),t.$slider.addClass("slick-loading")},Slick.prototype.swipeDirection=function(){var t,e,i,n,r=this;return t=r.touchObject.startX-r.touchObject.curX,e=r.touchObject.startY-r.touchObject.curY,i=Math.atan2(e,t),n=Math.round(180*i/Math.PI),0>n&&(n=360-Math.abs(n)),45>=n&&n>=0?r.options.rtl===!1?"left":"right":360>=n&&n>=315?r.options.rtl===!1?"left":"right":n>=135&&225>=n?r.options.rtl===!1?"right":"left":r.options.verticalSwiping===!0?n>=35&&135>=n?"left":"right":"vertical"},Slick.prototype.swipeEnd=function(t){var e,i=this;if(i.dragging=!1,i.shouldClick=i.touchObject.swipeLength>10?!1:!0,void 0===i.touchObject.curX)return!1;if(i.touchObject.edgeHit===!0&&i.$slider.trigger("edge",[i,i.swipeDirection()]),i.touchObject.swipeLength>=i.touchObject.minSwipe)switch(i.swipeDirection()){case"left":e=i.options.swipeToSlide?i.checkNavigable(i.currentSlide+i.getSlideCount()):i.currentSlide+i.getSlideCount(),i.slideHandler(e),i.currentDirection=0,i.touchObject={},i.$slider.trigger("swipe",[i,"left"]);break;case"right":e=i.options.swipeToSlide?i.checkNavigable(i.currentSlide-i.getSlideCount()):i.currentSlide-i.getSlideCount(),i.slideHandler(e),i.currentDirection=1,i.touchObject={},i.$slider.trigger("swipe",[i,"right"])}else i.touchObject.startX!==i.touchObject.curX&&(i.slideHandler(i.currentSlide),i.touchObject={})},Slick.prototype.swipeHandler=function(t){var e=this;if(!(e.options.swipe===!1||"ontouchend"in document&&e.options.swipe===!1||e.options.draggable===!1&&-1!==t.type.indexOf("mouse")))switch(e.touchObject.fingerCount=t.originalEvent&&void 0!==t.originalEvent.touches?t.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,e.options.verticalSwiping===!0&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),t.data.action){case"start":e.swipeStart(t);break;case"move":e.swipeMove(t);break;case"end":e.swipeEnd(t)}},Slick.prototype.swipeMove=function(t){var e,i,n,r,s,o=this;return s=void 0!==t.originalEvent?t.originalEvent.touches:null,!o.dragging||s&&1!==s.length?!1:(e=o.getLeft(o.currentSlide),o.touchObject.curX=void 0!==s?s[0].pageX:t.clientX,o.touchObject.curY=void 0!==s?s[0].pageY:t.clientY,o.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(o.touchObject.curX-o.touchObject.startX,2))),o.options.verticalSwiping===!0&&(o.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(o.touchObject.curY-o.touchObject.startY,2)))),i=o.swipeDirection(),"vertical"!==i?(void 0!==t.originalEvent&&o.touchObject.swipeLength>4&&t.preventDefault(),r=(o.options.rtl===!1?1:-1)*(o.touchObject.curX>o.touchObject.startX?1:-1),o.options.verticalSwiping===!0&&(r=o.touchObject.curY>o.touchObject.startY?1:-1),n=o.touchObject.swipeLength,o.touchObject.edgeHit=!1,o.options.infinite===!1&&(0===o.currentSlide&&"right"===i||o.currentSlide>=o.getDotCount()&&"left"===i)&&(n=o.touchObject.swipeLength*o.options.edgeFriction,o.touchObject.edgeHit=!0),o.options.vertical===!1?o.swipeLeft=e+n*r:o.swipeLeft=e+n*(o.$list.height()/o.listWidth)*r,o.options.verticalSwiping===!0&&(o.swipeLeft=e+n*r),o.options.fade===!0||o.options.touchMove===!1?!1:o.animating===!0?(o.swipeLeft=null,!1):void o.setCSS(o.swipeLeft)):void 0)},Slick.prototype.swipeStart=function(t){var e,i=this;return 1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow?(i.touchObject={},!1):(void 0!==t.originalEvent&&void 0!==t.originalEvent.touches&&(e=t.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==e?e.pageX:t.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==e?e.pageY:t.clientY,void(i.dragging=!0))},Slick.prototype.unfilterSlides=Slick.prototype.slickUnfilter=function(){var t=this;null!==t.$slidesCache&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.appendTo(t.$slideTrack),t.reinit())},Slick.prototype.unload=function(){var t=this;$(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},Slick.prototype.unslick=function(t){var e=this;e.$slider.trigger("unslick",[e,t]),e.destroy()},Slick.prototype.updateArrows=function(){var t,e=this;t=Math.floor(e.options.slidesToShow/2),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&e.options.centerMode===!1?(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-1&&e.options.centerMode===!0&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},Slick.prototype.updateDots=function(){var t=this;null!==t.$dots&&(t.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),t.$dots.find("li").eq(Math.floor(t.currentSlide/t.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},Slick.prototype.visibility=function(){var t=this;document[t.hidden]?(t.paused=!0,t.autoPlayClear()):t.options.autoplay===!0&&(t.paused=!1,t.autoPlay())},Slick.prototype.initADA=function(){var t=this;t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),t.$slideTrack.attr("role","listbox"),t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(e){$(this).attr({role:"option","aria-describedby":"slick-slide"+t.instanceUid+e})}),null!==t.$dots&&t.$dots.attr("role","tablist").find("li").each(function(e){$(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+t.instanceUid+e,id:"slick-slide"+t.instanceUid+e})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),t.activateADA()},Slick.prototype.activateADA=function(){var t=this,e=t.$slider.find("*").is(":focus");t.$slideTrack.find(".slick-active").attr({"aria-hidden":"false",tabindex:"0"}).find("a, input, button, select").attr({tabindex:"0"}),e&&t.$slideTrack.find(".slick-active").focus()},Slick.prototype.focusHandler=function(){var t=this;t.$slider.on("focus.slick blur.slick","*",function(e){e.stopImmediatePropagation();var i=$(this);setTimeout(function(){t.isPlay&&(i.is(":focus")?(t.autoPlayClear(),t.paused=!0):(t.paused=!1,t.autoPlay()))},0)})},$.fn.slick=function(){var t,e=this,i=arguments[0],n=Array.prototype.slice.call(arguments,1),r=e.length,s=0;for(s;r>s;s++)if("object"==typeof i||"undefined"==typeof i?e[s].slick=new Slick(e[s],i):t=e[s].slick[i].apply(e[s].slick,n),"undefined"!=typeof t)return t;return e},define("lib/slick",function(){}),define("app/view/page/viewPageEvents",["app/view/page/viewPageBase","app/view/component/viewPageBg","app/view/scene/events/sceneEventsTop","app/model/modelEvents","lib/slick"],function(t,e,i,n){var r="show",s="no-transition";return t.extend({init:function(t){this.isOpen=!1,this.autoStartDelay=8,this.callShowOpening=$.proxy(this.showOpening,this),t.templateData=t.templateData||{},_.extend(t.templateData,{mEvents:n.getEvents(),mAssets:n.getAssets()}),this._super(t)},render:function(){this._super(),this.$introSection=this.$el.find(".js-section-intro"),this.$ctaScrollDown=this.$el.find(".js-cta-scrolldown"),this.bgView=new e,this.bgView.init({$el:this.$el.find(".js-page-bg")}),this.eventIntroScene=new i,this.eventIntroScene.init({$el:this.$el.find(".js-scene-events-intro")}),this.$eventItems=this.$el.find(".js-load-more-content > li").filter(function(){return"block"!==this.style.display}),this.toggleLoadmoreButton(),this.$el.find(".js-slider").slick({respondTo:".wrapper",dots:!0,prevArrow:!1,nextArrow:!1})},show:function(){this._super(),this.eventIntroScene.show(),psy.trace("Router.prevRoute.state || Config.SKIP_INTRO",Router.prevRoute.state,Config.SKIP_INTRO),this.hasOpening=!1,this.$introSection.addClass(s),TweenMax.delayedCall(.1,this.callShowOpening),TweenMax.from(this.$ctaScrollDown,.5,{autoAlpha:0})},showOpening:function(){this.hasOpening&&(TweenMax.killDelayedCallsTo(this.callShowOpening),this.$el.off("click")),$(".wrapper").resize(),this.eventIntroScene.adjust(),this.$el.addClass(r),TweenMax.to(this.$ctaScrollDown,.5,{autoAlpha:1}),this.$ctaScrollDown.removeCss("transform")},onScroll:function(t,e){var i;t.find("div").each(function(t){i="translateY(-"+e.ratio*(35+3*(1+t%2))+"px)",this.style.transform=i,this.style.webKitTransform=i})},onLoadMoreHandler:function(){this.$eventItems=this.$eventItems.filter(":hidden"),this.$eventItems.filter(function(t){return 6>t}).each(function(t,e){e.style.display="block",TweenMax.from(e,.5,{y:"+=100",autoAlpha:0,delay:.1*t}),Events.trigger(Events.APP_EVENT.INVALIDATE)}),this.toggleLoadmoreButton()},toggleLoadmoreButton:function(){0===this.$eventItems.length&&(this.$el.find(".js-cta-loadmore").hide(),Events.trigger(Events.APP_EVENT.INVALIDATE))},bind:function(){this._super(),this.$el.find(".js-cta-loadmore").on("click",this.onLoadMoreHandler.bind(this));var t=this.$el.find(".js-page-bg");this.listenTo(Events,Events.SCROLL_EVENT.SCROLL,this.onScroll.bind(this,t))},unbind:function(){this._super()},hide:function(){this._super()},clean:function(){this.bgView.destroy(),this.eventIntroScene.destroy(),this._super()},adjust:function(t,e){this._super(t,e),this.bgView&&this.bgView.adjust(t,e)}})}),define("app/model/modelMapBrands",[],function(){var t=function(){};return t.prototype={init:function(t){this.data=_.map(t,function(t,e){var i=_.clone(t,!0);return i.id=e,i.icon="/cms/uploads/"+i.icon,i})},getDataById:function(t){return _.find(this.data,{id:t.toString()})},getBrands:function(t){var e=[],i=this;return t.map(function(t,n){e.push(_.find(i.data,{id:t.toString()}))}),e.length?{items:e,count:e.length}:null}},new t}),define("app/model/modelMapCustomers",[],function(){var t=function(){};return t.prototype={init:function(t){this.data=_.map(t,function(t,e){var i=_.clone(t,!0);return i.id=e,i.icon="/cms/uploads/"+i.icon,i})},getDataById:function(t){return _.find(this.data,{id:t.toString()})}},new t}),define("app/model/modelMapFlavors",[],function(){var t=function(){};return t.prototype={init:function(t){this.data=_.map(t,function(t,e){var i=_.clone(t,!0);return i.id=e,i.icon="/cms/uploads/"+i.icon,i})},getDataById:function(t){return _.find(this.data,{id:t.toString()})},getFlavors:function(t){var e=[],i=this;return t.map(function(t,n){e.push(_.find(i.data,{id:t.toString()}))}),e.length?{items:e,count:e.length}:null}},new t}),define("app/model/modelMapLocations",["app/model/modelMapCustomers","app/model/modelMapFlavors","app/model/modelMapBrands"],function(t,e,i){var n=function(){};return n.prototype={init:function(n){this.data=_.map(n,function(n){var r=_.clone(n,!0);return r.customer=t.getDataById(r.customer_id),
r.brandsData=i.getBrands(r.brands),r.flavorsData=e.getFlavors(r.flavors),r.address_2=r.address_2&&r.address_2.length?r.address_2:null,r})},getDataById:function(t){return _.find(this.data,{id:t.toString()})},getCountries:function(){var t=_.groupBy(this.data,"country"),e=[];return _.forEach(t,function(t,i){e.push({name:i,items:t})}),this.countries=_.sortBy(e,"name"),this.countries},getLocations:function(t){return t?_.sortBy(this.data,t):this.data},getStates:function(){return _.chain(this.data).sortBy("state").pluck("state").uniq().value()},getStatesForCountry:function(t){var e=_.find(this.countries,{name:t}),i=_.groupBy(e.items,"state"),n=[];return _.forEach(i,function(t,e){n.push({name:e,count:t.length,items:t})}),_.sortBy(n,"name")}},new n}),define("app/view/page/finder/mapsScrollManager",[],function(){function t(){function t(t){console.log("map onEnter",t,this.listening),t&&"touchstart"===t.type&&(a=t.originalEvent.touches[0].pageY),this.listening=!0,o.height=o.el.outerHeight(),o.scrollHeight=o.el[0].scrollHeight,o.diff=o.el.outerHeight()-o.scrollHeight,t&&(Events.trigger(Events.SCROLL_EVENT.PAUSE),$(window).on("mousewheel DOMMouseScroll wheel touchmove",i))}function e(t){console.log("map onLeave"),Events.trigger(Events.SCROLL_EVENT.START),this.listening=!1,$(window).off("mousewheel DOMMouseScroll wheel",i)}function i(t){var i=o.el.scrollTop(),r=t.originalEvent.deltaY;if("touchmove"===t.type){var s=t.originalEvent.touches[0];r=s.pageY-a;var l={x:n.offset().left,y:n.offset().top,width:n.outerWidth(),height:n.outerHeight()};if(s.pageX>l.x+l.width)return void e()}0===i&&0>r?Events.trigger(Events.SCROLL_EVENT.START):i===Math.abs(o.diff)&&r>0?Events.trigger(Events.SCROLL_EVENT.START):Events.trigger(Events.SCROLL_EVENT.PAUSE)}var n=$(".find-listContainer"),r=n.find(".find-list"),s=(n.outerHeight(),{countries:{el:n.find(".find-list-countries"),height:0,scrollHeight:0,diff:0},states:{el:n.find(".find-list-states"),height:0,scrollHeight:0,diff:0},locations:{el:n.find(".find-list-locations"),height:0,scrollHeight:0,diff:0}}),o=s.countries;r.on("mouseenter touchstart",t),r.on("mouseleave",e);var a=0;return{update:function(e){switch(e){case"countries":o=s.countries;break;case"states":o=s.states;break;case"locations":o=s.locations}t()},exit:function(){e()},clean:function(){e(),n=null,r.off(),r=null}}}return t}),define("hgn!partial/map/countList",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="find-list-title '),n.s(n.f("closeTrigger",t,e,1),t,e,0,46,90,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("find-list-location-title js-"),i.b(i.v(i.f("closeTrigger",t,e,0)))}),t.pop()),n.b('"><span>'),n.b(n.v(n.f("title",t,e,0))),n.b("</span><span>"),n.b(n.v(n.f("mobileTitle",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,0,177,349,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('<div class="find-list-state">'),n.b("\n"+i),n.b('    <div class="find-list-label js-'),n.b(n.v(n.f("trigger",t,e,0))),n.b('">'),n.s(n.f("count",t,e,1),t,e,0,266,312,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('<span class="find-list-count">'),i.b(i.v(i.f("count",t,e,0))),i.b("</span>")}),t.pop()),n.b(n.v(n.f("name",t,e,0))),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n")}),t.pop()),n.fl()},"",t);return e.template=i,e}),define("hgn!partial/map/locationsList",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="find-list-stateLocations">'),n.b("\n"+i),n.b('    <div class="find-list-location-title js-closeState">'),n.b(n.v(n.f("name",t,e,0))),n.b("</div>"),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,0,124,729,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div class="find-list-location js-openLocation" data-location="'),n.b(n.v(n.f("id",t,e,0))),n.b('">'),n.b("\n"+i),n.b('        <div class="find-list-copy">'),n.b("\n"+i),n.b('            <div class="find-list-brand">'),n.s(n.f("customer",t,e,1),t,e,0,292,300,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("name",t,e,0)))}),t.pop()),n.b("</div>"),n.b("\n"+i),n.b('            <div class="find-list-address">'),n.b("\n"+i),n.b("                "),n.b(n.v(n.f("address_1",t,e,0))),n.b(",<br/>"),n.b("\n"+i),n.b("                "),n.s(n.f("address_2",t,e,1),t,e,0,430,448,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("address_2",t,e,0))),i.b("<br/>")}),t.pop()),n.b("\n"+i),n.b("                "),n.b(n.v(n.f("city",t,e,0))),n.b(", "),n.b(n.v(n.f("state",t,e,0))),n.b(", "),n.b(n.v(n.f("zip",t,e,0))),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b("\n"+i),n.b('            <a class="find-list-directions" href="http://maps.google.com/?q='),n.b(n.v(n.f("address_1",t,e,0))),n.b(", "),n.b(n.v(n.f("city",t,e,0))),n.b(", "),n.b(n.v(n.f("state",t,e,0))),n.b(", "),n.b(n.v(n.f("zip",t,e,0))),n.b('"'),n.b("\n"+i),n.b('               target="_blank">Get directions</a>'),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n")}),t.pop()),n.b("</div>"),n.fl()},"",t);return e.template=i,e}),define("hgn!partial/map/infoWindow",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="marker-info">'),n.b("\n"+i),n.s(n.f("customer",t,e,1),t,e,0,43,111,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('    <div class="marker-info-image"><img src="'),i.b(i.v(i.f("icon",t,e,0))),i.b('"/></div>'),i.b("\n")}),t.pop()),n.b('    <div class="marker-info-text">'),n.b("\n"+i),n.b("        <h3>"),n.s(n.f("customer",t,e,1),t,e,0,185,193,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b(i.v(i.f("name",t,e,0)))}),t.pop()),n.b("</h3>"),n.b("\n"+i),n.b("        <h4>"),n.b(n.v(n.f("address_1",t,e,0))),n.b(", "),n.b(n.v(n.f("city",t,e,0))),n.b(", "),n.b(n.v(n.f("state",t,e,0))),n.b(", "),n.b(n.v(n.f("zip",t,e,0))),n.b("</h4>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="link-holder">'),n.b("\n"+i),n.b('        <a href="http://maps.google.com/?q='),n.b(n.v(n.f("address_1",t,e,0))),n.b(", "),n.b(n.v(n.f("city",t,e,0))),n.b(", "),n.b(n.v(n.f("state",t,e,0))),n.b(", "),n.b(n.v(n.f("zip",t,e,0))),n.b('" target="_blank">Get'),n.b("\n"+i),n.b("            directions</a>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("\n"+i),n.s(n.f("brandsData",t,e,1),t,e,0,480,613,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div class="brands">'),n.b("\n"+i),n.b("        <h5>Brands</h5>"),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,0,548,587,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('        <img src="'),i.b(i.v(i.f("icon",t,e,0))),i.b('"/>'),i.b("\n")}),t.pop()),n.b("    </div>"),n.b("\n")}),t.pop()),n.b("\n"+i),n.s(n.f("flavorsData",t,e,1),t,e,0,650,785,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <div class="flavors">'),n.b("\n"+i),n.b("        <h5>Flavors</h5>"),n.b("\n"+i),n.s(n.f("items",t,e,1),t,e,0,720,759,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('        <img src="'),i.b(i.v(i.f("icon",t,e,0))),i.b('"/>'),i.b("\n")}),t.pop()),n.b("    </div>"),n.b("\n")}),t.pop()),n.b("</div>"),n.fl()},"",t);return e.template=i,e}),MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},MarkerClusterer.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),i=new google.maps.LatLngBounds,n=0;t=e[n];n++)i.extend(t.getPosition());this.map_.fitBounds(i)},MarkerClusterer.prototype.setStyles=function(t){this.styles_=t},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(t){this.maxZoom_=t},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(t,e){for(var i=0,n=t.length,r=n;0!==r;)r=parseInt(r/10,10),i++;return i=Math.min(i,e),{text:n,index:i}},MarkerClusterer.prototype.setCalculator=function(t){this.calculator_=t},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(t,e){for(var i,n=0;i=t[n];n++)this.pushMarkerTo_(i);e||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",function(){t.isAdded=!1,e.repaint()})}this.markers_.push(t)},MarkerClusterer.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var i,n=0;i=this.markers_[n];n++)if(i==t){e=n;break}return-1==e?!1:(t.setMap(null),this.markers_.splice(e,1),!0)},MarkerClusterer.prototype.removeMarker=function(t,e){var i=this.removeMarker_(t);return!e&&i?(this.resetViewport(),this.redraw(),!0):!1},MarkerClusterer.prototype.removeMarkers=function(t,e){for(var i,n=!1,r=0;i=t[r];r++){var s=this.removeMarker_(i);n=n||s}return!e&&n?(this.resetViewport(),this.redraw(),!0):void 0},MarkerClusterer.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(t){this.map_=t},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(t){this.gridSize_=t},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},MarkerClusterer.prototype.getExtendedBounds=function(t){var e=this.getProjection(),i=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),n=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),r=e.fromLatLngToDivPixel(i);r.x+=this.gridSize_,r.y-=this.gridSize_;var s=e.fromLatLngToDivPixel(n);s.x-=this.gridSize_,s.y+=this.gridSize_;var o=e.fromDivPixelToLatLng(r),a=e.fromDivPixelToLatLng(s);return t.extend(o),t.extend(a),t},MarkerClusterer.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(t){for(var e,i=0;e=this.clusters_[i];i++)e.remove();for(var n,i=0;n=this.markers_[i];i++)n.isAdded=!1,t&&n.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var e,i=0;e=t[i];i++)e.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var i=6371,n=(e.lat()-t.lat())*Math.PI/180,r=(e.lng()-t.lng())*Math.PI/180,s=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),o=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),a=i*o;return a},MarkerClusterer.prototype.addToClosestCluster_=function(t){for(var e,i=4e4,n=null,r=(t.getPosition(),0);e=this.clusters_[r];r++){var s=e.getCenter();if(s){var o=this.distanceBetweenPoints_(s,t.getPosition());i>o&&(i=o,n=e)}}if(n&&n.isMarkerInClusterBounds(t))n.addMarker(t);else{var e=new Cluster(this);e.addMarker(t),this.clusters_.push(e)}},MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),i=this.getExtendedBounds(e),n=0;t=this.markers_[n];n++)!t.isAdded&&this.isMarkerInBounds_(t,i)&&this.addToClosestCluster_(t)},Cluster.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,i=0;e=this.markers_[i];i++)if(e==t)return!0;return!1},Cluster.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,i=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,n=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(i,n),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var r=this.markers_.length;if(r<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),r==this.minClusterSize_)for(var s=0;r>s;s++)this.markers_[s].setMap(null);return r>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),i=this.getMarkers(),n=0;t=i[n];n++)e.extend(t.getPosition());return e},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},Cluster.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&t>e)for(var i,n=0;i=this.markers_[n];n++)i.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var r=this.markerClusterer_.getStyles().length,s=this.markerClusterer_.getCalculator()(this.markers_,r);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(s),this.clusterIcon_.show()}},ClusterIcon.prototype.triggerClusterClick=function(){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}var e=this.getPanes();e.overlayMouseTarget.appendChild(this.div_);var i=this;google.maps.event.addDomListener(this.div_,"click",function(){i.triggerClusterClick()})},ClusterIcon.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10),e},ClusterIcon.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.backgroundPosition_=e.backgroundPosition},ClusterIcon.prototype.setCenter=function(t){this.center_=t},ClusterIcon.prototype.createCss=function(t){var e=[];e.push("background-image:url("+this.url_+");");var i=this.backgroundPosition_?this.backgroundPosition_:"0 0";e.push("background-position:"+i+"; background-size: cover;"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?e.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?e.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):e.push("width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var n=this.textColor_?this.textColor_:"black",r=this.textSize_?this.textSize_:11;return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+n+"; position:absolute; font-size:"+r+"px; font-family:Arial,sans-serif; font-weight:bold"),e.join("")},window.MarkerClusterer=MarkerClusterer,MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker,MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers,MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers,MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers,MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator,MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize,MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds,MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap,MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers,MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom,MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles,MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters,MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers,MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw,MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker,MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers,MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport,MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint,MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator,MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize,MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom,MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd,MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw,Cluster.prototype.getCenter=Cluster.prototype.getCenter,Cluster.prototype.getSize=Cluster.prototype.getSize,Cluster.prototype.getMarkers=Cluster.prototype.getMarkers,ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd,ClusterIcon.prototype.draw=ClusterIcon.prototype.draw,ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove,define("app/view/page/finder/markerclusters",function(){}),define("app/view/page/finder/infobox",["async!http://maps.google.com/maps/api/js?sensor=false"],function(){function t(t){google.maps.OverlayView.call(this),this.latlng_=t.latlng,this.map_=t.map,this.content=t.content,this.width_=t.width||352,this.height_=t.height||515,this.offsetVertical_=t.offsetVertical||-(this.height_+65),this.offsetHorizontal_=t.offsetHorizontal||this.width_*-.5,this.padding=t.padding||0;var e=this;this.boundsChangedListener_=google.maps.event.addListener(this.map_,"bounds_changed",function(){return e.panMap.apply(e)}),this.setMap(this.map_)}return t.prototype=new google.maps.OverlayView,t.prototype.close=function(){this.div_&&(this.div_.classList.add("close"),this.div_.classList.remove("show"));var t=this;setTimeout(function(){t.remove()},300)},t.prototype.remove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_.classList.remove("close"),this.div_=null),this.setMap(null)},t.prototype.draw=function(t){if(this.createElement(),this.div_){var e=this.getProjection().fromLatLngToDivPixel(this.latlng_);e&&(this.height_=this.measureContentHeight()+this.padding,this.div_.style.width=this.width_+"px",this.div_.style.left=e.x+this.offsetHorizontal_+"px",this.div_.style.height=this.height_+"px",this.div_.style.top=e.y+this.offsetVertical_+"px",this.div_.style.display="block",t&&(this.panMap(),this.div_.classList.add("show")))}},t.prototype.createElement=function(){function t(t){return function(){t.close()}}function e(t){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(window.event.cancelBubble=!0,window.event.returnValue=!1):t.stopPropagation()}var i=this.getPanes(),n=this.div_;if(n)n.parentNode!=i.floatPane&&(n.parentNode.removeChild(n),i.floatPane.appendChild(n));else{n=this.div_=document.createElement("div"),n.className="infobox";var r=document.createElement("div");r.className="content",r.innerHTML=this.content;var s=document.createElement("div");s.className="close icon-close",n.appendChild(s),google.maps.event.addDomListener(s,"click",t(this)),google.maps.event.addDomListener(r,"mousedown",e),n.appendChild(r),n.style.display="none",i.floatPane.appendChild(n),this.panMap()}},t.prototype.measureContentHeight=function(){if(this.div_){var t=this.div_.querySelector(".content");return t.clientHeight}return-1},t.prototype.panMap=function(){var t=this.map_,e=t.getBounds();if(e){var i=this.latlng_,n=this.width_,r=this.height_,s=this.offsetHorizontal_,o=this.offsetVertical_,a=40,l=40,h=t.getDiv(),c=h.offsetWidth,u=h.offsetHeight,d=e.toSpan(),p=d.lng(),f=d.lat(),g=p/c,m=f/u,v=e.getSouthWest().lng(),b=e.getNorthEast().lng(),y=e.getNorthEast().lat(),_=e.getSouthWest().lat(),x=i.lng()+(s-a)*g,w=i.lng()+(s+n+a)*g,T=i.lat()-(o-l)*m,C=i.lat()-(o+r+l)*m,S=(v>x?v-x:0)+(w>b?b-w:0),E=(T>y?y-T:0)+(_>C?_-C:0),M=t.getCenter(),A=M.lng()-S,k=M.lat()-E;t.setCenter(new google.maps.LatLng(k,A)),google.maps.event.removeListener(this.boundsChangedListener_),this.boundsChangedListener_=null}},window.InfoBox=t,t}),define("app/view/page/finder/maps",["app/model/modelMapBrands","app/model/modelMapCustomers","app/model/modelMapFlavors","app/model/modelMapLocations","./mapsScrollManager","hgn!partial/map/countList","hgn!partial/map/locationsList","hgn!partial/map/infoWindow","async!http://maps.google.com/maps/api/js?sensor=false","./markerclusters","./infobox"],function(t,e,n,r,s,o,a,l){function h(o){function a(){E.hasClass(H)&&E.removeClass(H)}function h(){E.hasClass(H)||E.addClass(H)}function u(){var t=b.getZoom();t+=1,b.setZoom(t)}function d(){var t=b.getZoom();t-=1,b.setZoom(t)}function p(t,e){var i=new google.maps.LatLngBounds;i.extend(t),i.extend(e.getPosition()),b.fitBounds(i),b.setZoom(b.getZoom()-1),b.getZoom()>15&&b.setZoom(15)}function g(){if(b.setCenter(v),b.setZoom(5),navigator.geolocation){this.supportsGeoLocation=!0,m(this.supportsGeoLocation);var t=this;google.maps.event.addDomListener(U[0],"click",function(){m(t.supportsGeoLocation)})}else this.supportsGeoLocation=!1,handleNoGeolocation(this.supportsGeoLocation),U.css("display","none")}function m(t){navigator.geolocation.getCurrentPosition(function(t){var e=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);b.setCenter(e);var i=S(b,e);p(e,i)},function(){t?console.log("Geolocation service failed."):console.log("Your browser doesn't support geolocation. We've placed you in Siberia."),b.setCenter(v),b.setZoom(5)})}function _(t){return t*Math.PI/180}function S(t,e){var n,r,s;e&&(e.latLng?(n=event.latLng.lat(),r=event.latLng.lng()):e.getPosition?(s=e.getPosition(),n=s.lat,r=s.lng):e.lat&&(n=e.lat(),r=e.lng()));var o=6371,a=[],l=-1,h=t.markers||T;for(i=0;i<h.length;i++){var c=h[i].getPosition(),u=c.lat(),d=c.lng(),p=_(u-n),f=_(d-r),g=Math.sin(p/2)*Math.sin(p/2)+Math.cos(_(n))*Math.cos(_(n))*Math.sin(f/2)*Math.sin(f/2),m=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),v=o*m;a[i]=v,(-1==l||v<a[l])&&(l=i)}return h[l]}E=$(".find-listContainer");var M=[{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#8080808"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#7fbae6"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ccc5be"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#9de0cc"}]},{elementType:"labels.text.fill",stylers:[{color:"#414140"}]},{elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{featureType:"landscape",stylers:[{color:"#e9dfd6"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#578ab1"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#fbfbfb"}]},{featureType:"road.local",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.stroke",stylers:[{weight:4.5}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"simplified"}]},{featureType:"poi.business",elementType:"labels.text.stroke",stylers:[{visibility:"off"},{weight:.1}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"on"}]}];v=new google.maps.LatLng(38.538731,-96.927701);var A={center:v,scrollwheel:!1,styles:M,zoom:11,disableDefaultUI:!0};b=new google.maps.Map(document.getElementById("map-canvas"),A),B.on("resize",this.resize),R=B.outerWidth()<=P;var I={gridSize:70,maxZoom:10,averageCenter:!0,styles:[{url:o+"/map/spire-cluster-2x.png",width:70,height:65,anchor:[10,0],textColor:"#fff",textSize:22}]},L=$('<div><div class="bg"></div></div>'),O={url:o+"/map/spire-pin-2x.png",size:new google.maps.Size(140,110),anchor:new google.maps.Point(35,55),scaledSize:new google.maps.Size(70,55)},D=new google.maps.LatLngBounds,F=$("<div>").addClass("map-controls"),N=L.clone().addClass("cta-btn map-control-zoom map-control-zoom--in icon-zoom-in"),j=L.clone().addClass("cta-btn map-control-zoom map-control-zoom--out icon-zoom-out"),U=L.clone().addClass("cta-btn map-control-geolocation icon-move");F.append(N),F.append(j),F.append(U),F[0].index=1,b.controls[google.maps.ControlPosition.TOP_RIGHT].push(F[0]),C=[],T=[],$.ajax({url:k}).done(function(i){t.init(i.brands),e.init(i.customers),n.init(i.flavors),r.init(i.locations),w=r.getLocations("state");for(var o=0;o<w.length;o++){var a=w[o],p=new google.maps.LatLng(a.lat,a.lng),m=new google.maps.Marker({position:p,icon:O,locationData:a}),_=l(a);a.marker=m,m.info=new google.maps.InfoWindow({content:$(_).wrap("<div/>").parent().html(),maxWidth:336,pixelOffset:new google.maps.Size(-35,0)}),D.extend(p),T.push(m)}c();for(var C=0;C<T.length;C++){var m=T[C];google.maps.event.addListener(m,"click",function(t){x.exit(),f(this)})}y=new MarkerClusterer(b,T,I),x=new s,google.maps.event.addListener(b,"dragstart",h),b.fitBounds(D),g(),v=b.getCenter(),google.maps.event.addDomListener(N[0],"click",function(){h(),u()}),google.maps.event.addDomListener(j[0],"click",function(){h(),d()})}).fail(function(){console.log("JSON LOAD FAILED")});var H="is-hidden",G=$(".find-listHandle");G.click(function(){E.hasClass(H)?a():h()})}function c(){$(".find-list-states"),$(".find-list-locations"),$(".find-listMobile");S=$(".find-list-stateLocations"),M=$(".find-list");var t=r.getCountries(),e=(r.getStates(),$(".find-list-countries")),i=o({title:"COUNTRIES:",mobileTitle:"SELECT A COUNTRY:",items:t,trigger:"openCountry"});e.html(i);var n=$(".find-listHandle");n.css("left",M.outerWidth()+"px"),$(".js-openCountry").on("click",function(e){var i=$(this).parent().index()-1,n=t[i];u(n)}),E.addClass("is-ready"),$(window).on("resize",function(){n.css("left",M.outerWidth()+"px")})}function u(t,e){$(".js-openState").off("click"),$(".js-closeCountry").off("click");var i=r.getStatesForCountry(t.name),n=$(".find-list-states"),s=o({title:t.name,mobileTitle:t.name,items:i,trigger:"openState",closeTrigger:"closeCountry"});n.html(s),$(".js-openState").click(function(t){var e=$(this).parent().index()-1,n=i[e];d(n)}),$(".js-closeCountry").click(function(t){M.removeClass("is-country"),x.update("countries")}),M.addClass("is-country"),x.update("states")}function d(t,e){var i=$(".find-list-locations"),n=a(t);if(i.html(n),$(".js-closeState").click(function(t){M.addClass("is-country"),M.removeClass("is-location"),x.update("states")}),M.addClass("is-location"),M.removeClass("is-country"),A=$(".js-openLocation").click(function(t){var e=$(this).data("location"),i=_.find(w,{id:e});f(i.marker)}),!e){var r=_.pluck(t.items,"marker");m(r)}x.update("locations")}function p(){var t=$(this).data("location"),e=_.find(w,{id:t});f(e.marker)}function f(t){g();var e=t.locationData,i=r.getCountries(),n=_.find(i,{name:e.country}),s=r.getStatesForCountry(e.country),o=_.find(s,{name:e.state});u(n,!0),d(o,!0);var a=t.locationData.id,l=$(".find-list-locations"),h=l.find('[data-location="'+a+'"]');A.removeClass("is-active"),h.addClass("is-active"),A=h,t.infoBox&&t.infoBox.remove(),t.infoBox=new InfoBox({latlng:t.getPosition(),map:b,content:t.info.content,padding:10});var c=65;m([t]),$(".marker-info").parent().addClass("hide"),setTimeout(function(){var e=t.infoBox.measureContentHeight();t.infoBox.offsetVertical_=-(e+c+t.infoBox.padding),m([t]),t.infoBox.draw(!0)},100)}function g(){for(var t=0;t<T.length;t++){var e=T[t];e.infoBox&&e.infoBox.close()}}function m(t){var e=new google.maps.LatLngBounds;for(var i in t){var n=t[i].getPosition();e.extend(n)}if(e.getNorthEast().equals(e.getSouthWest())){var r=new google.maps.LatLng(e.getNorthEast().lat()+.03,e.getNorthEast().lng()+.03),s=new google.maps.LatLng(e.getNorthEast().lat()-.03,e.getNorthEast().lng()-.03);e.extend(r),e.extend(s)}b.fitBounds(e)}var v,b,y,x,w,T,C,S,E,M,A,k="/cms/map",P=767,R=!1,B=$(window),I=h.prototype;return I.resize=function(){var t=$(window).outerWidth();R&&t>P?(R=!1,A&&p.call(A)):P>=t&&(R=!0)},I.unbind=function(){B.off("resize",this.resize)},I.clean=function(){for(g(),i=0;i<T.length;i++)T[i].info=null,T[i].infoBox=null,T[i].setMap(null);T=[],x.clean(),x=null},h}),define("app/view/scene/finder/sceneFinderIntro",["app/view/scene/scenePageBase","app/view/scene/particle/particleADA"],function(t,e){return t.extend({init:function(t){this.sceneId=Model.SCENE_FINDER_INTRO,this.isOpen=!1,this.baseW=Config.WIDE_W,this.baseH=320,this.upParticles={total:20,particles:[]},this._super.apply(this,arguments)},render:function(){this._super();var t={transparent:!0,antialias:!0,resolution:psy.browser.SCREEN_RATIO};psy.browser.IS_WEBGL_SUPPORT?this.renderer=PIXI.autoDetectRenderer(this.width,this.height,t):this.renderer=new PIXI.CanvasRenderer(this.width,this.height,t),this.stage=new PIXI.Stage(16776960),this.frame=new psy.Frame,this.$el.append(this.renderer.view),this.upParticlesContainer=new PIXI.DisplayObjectContainer,this.container=new PIXI.DisplayObjectContainer,
this.container.alpha=0,this.container.addChild(this.upParticlesContainer),this.stage.addChild(this.container),this.drawUpParticles(this.upParticlesContainer)},bind:function(){this._super.apply(this,arguments),this.frame.bind({id:"sceneFinder",handler:$.proxy(this.update,this),fps:60})},show:function(){this._super.apply(this,arguments),TweenMax.to(this.container,.3,{alpha:1,ease:Sine.easeInOut});for(var t=0;t<this.upParticles.total;t++){var e=this.upParticles.particles[t];e.play()}},update:function(){this._super.apply(this,arguments),this.renderer.render(this.stage)},drawUpParticles:function(t){for(var i=0;i<this.upParticles.total;i++){var n=new e;n.init({id:i}),t.addChild(n.g),this.upParticles.particles.push(n)}},adjust:function(t,e){this._super(t,e),t=this._width>Config.WIDE_W?Config.WIDE_W:this._width,e=this.baseH,this.upParticlesContainer.x=0,this.upParticlesContainer.y=e;for(var i=0;i<this.upParticles.total;i++){var n=this.upParticles.particles[i];n.adjust(t,e)}this.$el.height(e),this.renderer.resize(t,e)}})}),define("app/view/page/viewPageLocations",["app/view/page/viewPageBase","app/view/page/finder/maps","app/view/scene/finder/sceneFinderIntro"],function(t,e,i){return t.extend({init:function(t){t.templateData=t.templateData||{},_.extend(t.templateData,{}),this._super.apply(this,arguments)},render:function(){this._super.apply(this,arguments),this.introScene=new i,this.introScene.init({$el:this.$el.find(".js-scene-intro")})},show:function(){this._super.apply(this,arguments);var t=this.templateData.imagePath;this.mapsController=new e(t),this.introScene.show()},unbind:function(){this.mapsController.unbind(),this._super.apply(this,arguments)},adjust:function(){this._super.apply(this,arguments),this.introScene.adjust(this._width,this._height)},clean:function(){this.mapsController.clean(),this.mapsController=null,this.introScene.destroy(),this._super.apply(this,arguments)}})}),define("app/view/scene/404/scene404Intro",["app/view/scene/scenePageBase","app/model/modelSceneAsset","app/view/scene/particle/particle","app/view/scene/particle/particleHero"],function(t,e,i,n){return t.extend({init:function(t){this.sceneId=Model.SCENE_404_INTRO,this.isOpen=!1,this.baseW=Config.WIDE_W,this.baseH=775,this.spreadParticles={total:35,particles:[]},this.heroParticles={heros:[e.getMovieClip(e.movieClipManager.mcIntroLemon),e.getMovieClip(e.movieClipManager.mcIntroLime),e.getMovieClip(e.movieClipManager.mcIntroStrawberry)],particles:[]},this.heroParticles.total=this.heroParticles.heros.length,this._super.apply(this,arguments)},render:function(){this._super();var t={transparent:!0,antialias:!0,resolution:psy.browser.SCREEN_RATIO};psy.browser.IS_WEBGL_SUPPORT?this.renderer=PIXI.autoDetectRenderer(this.width,this.height,t):this.renderer=new PIXI.CanvasRenderer(this.width,this.height,t),this.stage=new PIXI.Stage(16776960),this.frame=new psy.Frame,this.$el.append(this.renderer.view),this.spreadParticlesContainer=new PIXI.DisplayObjectContainer,this.heroParticlesContainer=new PIXI.DisplayObjectContainer,this.container=new PIXI.DisplayObjectContainer,this.container.alpha=0,this.container.addChild(this.spreadParticlesContainer),this.container.addChild(this.heroParticlesContainer),this.container.addChild(this.interactiveContainer),this.stage.addChild(this.container),this.drawSpreadParticles(this.spreadParticlesContainer),this.drawHeroParticles(this.heroParticlesContainer)},bind:function(){this._super(),this.frame.bind({id:"scene404",handler:$.proxy(this.update,this),fps:60})},show:function(){this._super(),TweenMax.to(this.container,.3,{alpha:1,ease:Sine.easeInOut}),TweenMax.delayedCall(.1,$.proxy(this.startSceneElements,this))},update:function(){this._super.apply(this,arguments);for(var t=0;t<this.heroParticles.total;t++){var e=this.heroParticles.particles[t];e.update()}this.renderer.render(this.stage)},startSceneElements:function(){for(var t=0;t<this.heroParticles.total;t++){var e=this.heroParticles.particles[t];e.play()}for(var t=0;t<this.spreadParticles.total;t++){var e=this.spreadParticles.particles[t];e.play()}},drawHeroParticles:function(t){for(var e=0;e<this.heroParticles.total;e++){var i=new n;i.init({id:e,mc:this.heroParticles.heros[e],startScale:{min:.5,max:.7},syncTime:5+10*Math.random(),delay:{min:0,max:3},speed:{min:8,max:12},direction:e%2?-1:1,targetAngle:90+25*Math.floor(e/2)}),t.addChild(i.mc.mc),this.heroParticles.particles.push(i)}},drawSpreadParticles:function(t){for(var e=0;e<this.spreadParticles.total;e++){var n=new i;n.init({id:e,isSpread:!0,syncTime:!1,delay:{min:0,max:5},speed:{min:4,max:6}}),t.addChild(n.g),this.spreadParticles.particles.push(n)}},adjust:function(t,e){this._super(t,e),t=this._width>Config.WIDE_W?Config.WIDE_W:this._width,e=this.baseH,App.isRespondFrom(Config.MOBILE_MODE)?e=300:App.isRespondFrom(Config.PAD_MODE)&&(e=375);var i=e/this.baseH;this.heroParticlesContainer.x=.5*t,this.heroParticlesContainer.y=430*i,this.heroParticlesContainer.scale.x=this.heroParticlesContainer.scale.y=i,this.spreadParticlesContainer.x=.5*t,this.spreadParticlesContainer.y=380*i,this.spreadParticlesContainer.scale.x=this.spreadParticlesContainer.scale.y=i;for(var n=0;n<this.heroParticles.total;n++){var r=this.heroParticles.particles[n];r.adjust(t/i,this.baseH)}for(var n=0;n<this.spreadParticles.total;n++){var r=this.spreadParticles.particles[n];r.yDiff=this.heroParticlesContainer.y-this.spreadParticlesContainer.y,r.adjust(t/i,this.baseH)}this.renderer.resize(t,e)},unbind:function(){this._super.apply(this,arguments),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.$el)}})}),define("app/view/page/viewPage404",["app/view/page/viewPageBase","app/view/scene/404/scene404Intro"],function(t,e){return t.extend({render:function(){this._super.apply(this,arguments),this.introScene=new e,this.introScene.init({$el:this.$el.find(".js-scene-intro")})},show:function(){this._super.apply(this,arguments),this.introScene.show()},clean:function(){this.introScene.destroy(),this._super.apply(this,arguments)}})}),define("hgn!partial/page/pageHome",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<section class="section-intro js-section-intro">'),n.b("\n"+i),n.b('    <div class="section_scene js-scene-intro">'),n.b("\n"+i),n.b("        <video loop>"),n.b("\n"+i),n.b('            <source src="'),n.b(n.v(n.f("assetPath",t,e,0))),n.b('/video/home/home-intro.webm" type="video/webm">'),n.b("\n"+i),n.b('            <source src="'),n.b(n.v(n.f("assetPath",t,e,0))),n.b('/video/home/home-intro.mp4" type="video/mp4">'),n.b("\n"+i),n.b("        </video>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <a class="cta-btn-down cta-btn-scrolldown js-cta-scrolldown">'),n.b("\n"+i),n.b('        <i class="icon-down"></i>'),n.b("\n"+i),n.b("    </a>"),n.b("\n"+i),n.b("\n"+i),n.b('    <div class="inner">'),n.b("\n"+i),n.b('        <div class="mask mask-title">'),n.b("\n"+i),n.b('            <h3 class="section_title">INSPIRED CREATIONS</h3>'),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b('        <div class="mask mask-copy">'),n.b("\n"+i),n.b('            <p class="section_copy">Pepsi Spire<sup>&#174;</sup> lets you mix up a totally unique creation with just the'),n.b("\n"+i),n.b("                touch of a button. Check out some fan-favorite recipes below and discover how you can create your own"),n.b("\n"+i),n.b("                custom mix.</p>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</section>"),n.b("\n"+i),n.b('<section class="section-bubbles js-bubbles">'),n.b("\n"+i),n.b('    <div class="bubbles_scene js-scene-bubbles"></div>'),n.b("\n"+i),n.b('    <div class="bubbles_view js-view-bubbles"></div>'),n.b("\n"+i),n.b("    "),n.b(n.t(n.f("ctaLoadmoreTemplate",t,e,0))),n.b("\n"+i),n.b("</section>"),n.fl()},"",t);return e.template=i,e}),define("hgn!partial/page/pageAbout",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<div class="about_bg js-about-bg">'),n.b("\n"+i),n.b('    <div class="bg-intro">'),n.b("\n"+i),n.b('        <div class="bg-gradient"></div>'),n.b("\n"+i),n.b('        <div class="bg-line"></div>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="bg-ada">'),n.b("\n"+i),n.b('        <div class="bg-circle"></div>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.b("\n"+i),n.b('<section class="section-intro">'),n.b("\n"+i),n.b('    <div class="section_scene js-scene-intro">'),n.b("\n"+i),n.b('        <video class="js-video-5" loop>'),n.b("\n"+i),n.b('            <source src="'),n.b(n.v(n.f("assetPath",t,e,0))),n.b('/video/about/about-intro-5.webm" type="video/webm">'),n.b("\n"+i),n.b('            <source src="'),n.b(n.v(n.f("assetPath",t,e,0))),n.b('/video/about/about-intro-5.mp4" type="video/mp4">'),n.b("\n"+i),n.b("        </video>"),n.b("\n"+i),n.b('        <video class="js-video-2" loop>'),n.b("\n"+i),n.b('            <source src="'),n.b(n.v(n.f("assetPath",t,e,0))),n.b('/video/about/about-intro-2.webm" type="video/webm">'),n.b("\n"+i),n.b('            <source src="'),n.b(n.v(n.f("assetPath",t,e,0))),n.b('/video/about/about-intro-2.mp4" type="video/mp4">'),n.b("\n"+i),n.b("        </video>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="scene_info">'),n.b("\n"+i),n.b('        <span class="info_name name-machine-5">Pepsi Spire<sup>&#174;</sup> 5.0</span>'),n.b("\n"+i),n.b('        <span class="info_name name-machine-2">Pepsi Spire<sup>&#174;</sup> 2.0</span>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <h4 class="section_subtitle">Pepsi Spire<sup>&#174;</sup></h4>'),n.b("\n"+i),n.b("\n"+i),n.b('    <h3 class="section_title">Mix it Up</h3>'),n.b("\n"+i),n.b("\n"+i),n.b('    <p class="section_copy">Pepsi Spire<sup>&#174;</sup> lets you mix up a totally custom creation. It\'s your drink,'),n.b("\n"+i),n.b("        your way.</p>"),n.b("\n"+i),n.b("</section>"),n.b("\n"+i),n.b('<section class="section-find js-finder-bubbles">'),n.b("\n"+i),n.b('    <div class="bubble_scene js-scene-bubbles"></div>'),n.b("\n"+i),n.b('    <div class="bubbles_view js-view-bubbles"></div>'),n.b("\n"+i),n.b('    <div class="flavor_view js-view-flavors">'),n.b("\n"+i),n.b('        <h3 class="section_title">You call the shots</h3>'),n.b("\n"+i),n.b("\n"+i),n.b('        <p class="section_copy">Add up to three flavor* shots to customize your drink. Choose from cherry, vanilla,'),n.b("\n"+i),n.b("            strawberry, lemon and more.</p>"),n.b("\n"+i),n.b('        <ul class="list-flavor">'),n.b("\n"+i),n.s(n.f("flavors",t,e,1),t,e,0,1748,1901,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('            <li class="js-flavor">'),n.b("\n"+i),n.b('                <span class="flavor_name" style="color: '),n.b(n.v(n.f("colorText",t,e,0))),n.b('">'),n.b(n.v(n.f("name",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b("            </li>"),n.b("\n")}),t.pop()),n.b("        </ul>"),n.b("\n"+i),n.b('        <p class="notice">'),n.b("\n"+i),n.b("            *Flavors and brands vary by location"),n.b("\n"+i),n.b("        </p>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</section>"),n.b("\n"+i),n.b('<section class="section-favorite">'),n.b("\n"+i),n.b('    <div class="section_content">'),n.b("\n"+i),n.b('        <h3 class="section_title">fan favorites</h3>'),n.b("\n"+i),n.b('        <h4 class="section_copy">Try one of these top custom combinations created by Pepsi Spire users!</h4>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="bubbles js-fanfavorite-bubbles">'),n.b("\n"+i),n.b('        <div class="bubbles_scene js-scene-bubbles"></div>'),n.b("\n"+i),n.b('        <div class="bubbles_view js-view-bubbles"></div>'),n.b("\n"+i),n.b("        "),n.b(n.t(n.f("ctaLoadmoreTemplate",t,e,0))),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</section>"),n.b("\n"+i),n.b('<section class="section-ada">'),n.b("\n"+i),n.b('    <div class="section_scene js-scene-ada">'),n.b("\n"+i),n.b('        <video class="js-video" loop>'),n.b("\n"+i),n.b('            <source src="'),n.b(n.v(n.f("assetPath",t,e,0))),n.b('/video/about/about-ada.webm" type="video/webm">'),n.b("\n"+i),n.b('            <source src="'),n.b(n.v(n.f("assetPath",t,e,0))),n.b('/video/about/about-ada.mp4" type="video/mp4">'),n.b("\n"+i),n.b("        </video>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b('    <div class="section_view">'),n.b("\n"+i),n.b('        <div class="ada_copy">'),n.b("\n"+i),n.b('            <h3 class="section_title">ADA COMPLIANT</h3>'),n.b("\n"+i),n.b("\n"+i),n.b('            <p class="section_copy">Press the ADA button on the machine or on the screen and the drops shift into reach.'),n.b("\n"+i),n.b("                Users can mix up their drinks by pressing the drops onscreen or using the selection arrows at the base"),n.b("\n"+i),n.b("                of the machine.</p>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</section>"),n.fl()},"",t);return e.template=i,e}),define("hgn!partial/page/pageEvents",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<section class="section-intro js-section-intro">'),n.b("\n"+i),n.b('	<div class="section_scene js-scene-events-intro"></div>'),n.b("\n"+i),n.b('	<a class="cta-btn-down cta-btn-scrolldown js-cta-scrolldown">'),n.b("\n"+i),n.b('		<i class="icon-down"></i>'),n.b("\n"+i),n.b("	</a>"),n.b("\n"+i),n.b('	<div class="inner">'),n.b("\n"+i),n.b('		<div class="mask mask-title">'),n.b("\n"+i),n.b("			<h4>EXPERIENCE</h4>"),n.b("\n"+i),n.b('			<h3 class="section_title">PEPSI SPIRE<sup>&#174;</sup></h3>'),n.b("\n"+i),n.b("		</div>"),n.b("\n"+i),n.b("	</div>"),n.b("\n"+i),n.b("\n"+i),n.b('	<div class="js-slider">'),n.b("\n"+i),n.s(n.f("mAssets",t,e,1),t,e,0,399,498,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('			<div><div class="slider__image-container" style="background-image: url('),i.b(i.t(i.f("asset",t,e,0))),i.b(')"/></div>'),i.b("\n")}),t.pop()),n.b("	</div>"),n.b("\n"+i),n.b('	<div class="events__upcoming-events-wrapper">'),n.b("\n"+i),n.b('		<h1 class="events__title">Upcoming events</h1>'),n.b("\n"+i),n.b("\n"+i),n.b('		<ul class="events__events-wrapper js-load-more-content">'),n.b("\n"+i),n.s(n.f("mEvents",t,e,1),t,e,0,690,1603,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('			<li style="display:'),n.b(n.v(n.f("displayType",t,e,0))),n.b(';">'),n.b("\n"+i),n.b('				<ol class="events__event-content">'),n.b("\n"+i),n.b('					<li class="events__date">'),n.b("\n"+i),n.b('						<span class="events__date-month">'),n.b(n.v(n.f("dateMonth",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('						<span class="events__date-day">'),n.b(n.v(n.f("dateDay",t,e,0))),n.b("</span>"),n.b("\n"+i),n.b('						<span class="events__date-bg" />'),n.b("\n"+i),n.b("					</li>"),n.b("\n"+i),n.b('					<li class="events__location">'),n.b("\n"+i),n.b('						<h1 class="events__location-header">'),n.b(n.v(n.f("name",t,e,0))),n.b("</h1>"),n.b("\n"+i),n.b("					</li>"),n.b("\n"+i),n.b('					<li class="events__address">'),n.b("\n"+i),n.b('						<h2><a href="'),n.b(n.v(n.f("google_link",t,e,0))),n.b('" target="_blank">'),n.b(n.v(n.f("address_name",t,e,0))),n.b("</a></h2>"),n.b("\n"+i),n.b("						<p>"),n.b("\n"+i),n.b("							"),n.b(n.v(n.f("address",t,e,0))),n.b("<br/>"),n.b("\n"+i),n.b("							"),n.b(n.v(n.f("combinedAddress",t,e,0))),n.b("\n"+i),n.b("						</p>"),n.b("\n"+i),n.b("					</li>"),n.b("\n"+i),n.b('					<li class="events__description">'),n.b("\n"+i),n.b('						<div class="events__description-image-wrap" data-display="'),n.b(n.v(n.f("display_asset",t,e,0))),n.b('"><img src="'),n.b(n.v(n.f("asset",t,e,0))),n.b('" /></div>'),n.b("\n"+i),n.b("						<p>"),n.b("\n"+i),n.b("							"),n.b(n.v(n.f("description",t,e,0))),n.b("\n"+i),n.b("						</p>"),n.b("\n"+i),n.b('						<a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" class="events__more-information" target="_blank">More information</a>'),n.b("\n"+i),n.b("					</li>"),n.b("\n"+i),n.b("				</ol>"),n.b("\n"+i),n.b("			</li>"),n.b("\n")}),t.pop()),n.b("		</ul>"),n.b("\n"+i),n.b("	</div>"),n.b("\n"+i),n.b("	"),n.b(n.t(n.f("ctaLoadmoreTemplate",t,e,0))),n.b("\n"+i),n.b("</section>"),n.b("\n"),n.fl()},"",t);return e.template=i,e}),define("hgn!partial/page/pageLocations",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<section class="section-intro">'),n.b("\n"+i),n.b('    <div class="intro_scene js-scene-intro"></div>'),n.b("\n"+i),n.b('    <div class="inner">'),n.b("\n"+i),n.b('        <h3 class="section_title">WHERE TO FIND SPIRE</h3>'),n.b("\n"+i),n.b('        <p class="section_copy">Select a location below for more information.</p>'),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</section>"),n.b("\n"+i),n.b('<section class="section-map">'),n.b("\n"+i),n.b('	<div id="map-canvas"></div>'),n.b("\n"+i),n.b('	<div class="find-listContainer">'),n.b("\n"+i),n.b('		<div class="find-list">'),n.b("\n"+i),n.b('			<div class="find-list-countries"></div>'),n.b("\n"+i),n.b('			<div class="find-list-states"></div>'),n.b("\n"+i),n.b('			<div class="find-list-locations"></div>'),n.b("\n"+i),n.b("		</div>"),n.b("\n"+i),n.b('		<div class="find-listHandle"></div>'),n.b("\n"+i),n.b("	</div>"),n.b("\n"+i),n.b('	<div class="find-listMobile"></div>'),n.b("\n"+i),n.b("\n"+i),n.b("</section>"),n.fl()},"",t);return e.template=i,e}),define("hgn!partial/page/page404",["hogan"],function(t){function e(){return i.render.apply(i,arguments)}var i=new t.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<!--<div class="page_bg">-->'),n.b("\n"+i),n.b('<!--<div class="bg-intro">-->'),n.b("\n"+i),n.b('<!--<div class="bg-line"></div>-->'),n.b("\n"+i),n.b("<!--</div>-->"),n.b("\n"+i),n.b("<!--</div>-->"),n.b("\n"+i),n.b('<div class="section">'),n.b("\n"+i),n.b('    <div class="section_scene js-scene-intro"></div>'),n.b("\n"+i),n.b('    <div class="section_view js-view-intro">'),n.b("\n"+i),n.b('        <div class="bubble">'),n.b("\n"+i),n.b('            <div class="bubble_bg"></div>'),n.b("\n"+i),n.b('            <div class="bubble_stroke"></div>'),n.b("\n"+i),n.b('            <div class="bubble_content">'),n.b("\n"+i),n.b("                <p><em>Uh oh…</em><br>It looks like things got a little too mixed up.</p>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i),n.b('            <a class="cta-btn-loadmore js-cta-home" href="#'),n.b(n.v(n.d("routes.home.uri",t,e,0))),n.b('">'),n.b("\n"+i),n.b('                <div class="bg bg-gray"></div>'),n.b("\n"+i),n.b('                <div class="bg bg-blue"></div>'),n.b("\n"+i),n.b('                <div class="inner">'),n.b("\n"+i),n.b('                    <span class="cta-btn_text">go<em>back</em></span>'),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i),n.b("            </a>"),n.b("\n"+i),n.b("        </div>"),n.b("\n"+i),n.b("    </div>"),n.b("\n"+i),n.b("</div>"),n.fl()},"",t);return e.template=i,e}),define("app/app",["app/router","app/proxy/proxyApi","app/model/modelSceneAsset","app/model/modelBubbles","app/view/module/viewModuleHeader","app/view/module/viewModuleFooter","app/view/module/viewModulePopup","app/view/page/viewPageHome","app/view/page/viewPageAbout","app/view/page/viewPageEvents","app/view/page/viewPageLocations","app/view/page/viewPage404","hgn!partial/page/pageHome","hgn!partial/page/pageAbout","hgn!partial/page/pageEvents","hgn!partial/page/pageLocations","hgn!partial/page/page404"],function(t,e,i,n,r,s,o){var a=Backbone.View.extend({init:function(){this.isAppEverLoaded=!1,this.responseManager={current:!1,prev:!1},this.$body=$("body"),this.$viewport=$("#viewport"),this.$el=$("#app"),this.prevPage={},this.currentPage={$el:$("#body")},window.Router=t,window.ModelBubbles=n},render:function(){this.$scrollTrack=this.$body.find(".js-track"),this.$scrollBar=this.$scrollTrack.find(".js-bar"),this.header=new r,this.header.init(),this.$scrollTrack.before(this.header.$el),this.footer=new s,this.footer.init(),this.$el.append(this.footer.$el),this.popup=new o,this.popup.init(),this.$body.append(this.popup.$el),this.scrollbar=new psy.Scrollbar,this.scrollbar.init(1,1,this.$scrollTrack,this.$scrollBar),this.adjust()},bind:function(){window.addEventListener("resize",$.proxy(this.adjust,this)),this.scrollbar.bind("update",$.proxy(this.scrollHandler,this)),this.scrollbar.bind("done",$.proxy(this.doneScrollHandler,this)),this.scrollbar.stop(),this.$scrollBar.focus(),this.listenTo(Events,Events.ROUTE_EVENT.UPDATE,this.routeHandler),this.listenTo(Events,Events.ROUTE_EVENT.LOADED,this.pageLoadedHandler),this.listenTo(Events,Events.ROUTE_EVENT.LOADING,this.pageLoadingHandler),this.listenTo(Events,Events.ROUTE_EVENT.START,this.pageStartHandler),this.listenTo(Events,Events.SCROLL_EVENT.ADJUST,this.adjustScrollbarHandler),this.listenTo(Events,Events.SCROLL_EVENT.SCROLL_TO,this.scrollToHandler),this.listenTo(Events,Events.SCROLL_EVENT.START,this.startScrollbarHandler),this.listenTo(Events,Events.SCROLL_EVENT.PAUSE,this.pauseScrollbarHandler),this.listenTo(Events,Events.SCROLL_EVENT.STOP,this.stopScrollbarHandler),this.listenTo(Events,Events.APP_EVENT.OVERLAY_SHOW,this.showOverlayHandler),this.listenTo(Events,Events.APP_EVENT.OVERLAY_HIDE,this.hideOverlayHandler),this.listenTo(Events,Events.APP_EVENT.INVALIDATE,$.proxy(this.adjust,this))},load:function(t){var i=psy.async.start(3,$.proxy(this.loadBubbleProxy,this));e.getBeverageData(function(){psy.async.count(i)}),e.getFlavorData(function(){psy.async.count(i)}),e.getEvents(function(){psy.async.count(i)}),this.listenTo(Events,Events.ROUTE_EVENT.LOADING,t)},loadBubbleProxy:function(){var t=psy.async.start(2,$.proxy(this.loadSceneAssetModel,this));e.getMixData(function(){psy.async.count(t)}),e.getMixologyData(function(){psy.async.count(t)}),e.getTwitterData(function(){psy.async.count(t)}),e.getInstagramData(function(){psy.async.count(t)}),e.getFavoriteData(function(){psy.async.count(t)})},loadSceneAssetModel:function(){i.init(),i.load($.proxy(this.start,this))},start:function(){ModelBubbles.init(),t.init()},startScrollbarHandler:function(){this.scrollbar.start()},pauseScrollbarHandler:function(){this.scrollbar.pause()},stopScrollbarHandler:function(){this.scrollbar.stop()},doneScrollHandler:function(){Events.trigger(Events.SCROLL_EVENT.DONE)},showOverlayHandler:function(){Events.trigger(Events.SCROLL_EVENT.STOP)},hideOverlayHandler:function(){Events.trigger(Events.SCROLL_EVENT.START)},pageStartHandler:function(e){if(e==Preloader.id){(t.prevRoute.page||this.currentPage.id!=Model.ROUTE_DEFAULT)&&(Events.trigger(Events.SCROLL_EVENT.START),Events.trigger(Events.APP_EVENT.OPENING)),this.currentPage.show(),this.adjust();var i=this;TweenMax.delayedCall(.05,function(){i.adjust(),i.scrollbar.forceScrollTo(.01)})}},pageLoadedHandler:function(){this.isAppEverLoaded?this.prevPage&&this.prevPage.destroy&&this.prevPage.destroy():this.isAppEverLoaded=!0,Preloader.destroy()},pageLoadingHandler:function(t,e){this.isAppEverLoaded},routeHandler:function(t,e){var i=this,n=t,r="app/view/page/viewPage"+psy.string.capitalize(n),s="hgn!partial/page/page"+psy.string.capitalize(n);this.isAppEverLoaded&&Preloader.resume(),Events.trigger(Events.POPUP_EVENT.CLOSE_ALL),Events.trigger(Events.SCROLL_EVENT.STOP),require([r,s],function(t,e){var r=new t;r.init({id:n,template:e}),i.prevPage=i.currentPage,i.currentPage=r,i.footer.$el.before(r.$el),r.load()})},scrollHandler:function(t){Events.trigger(Events.SCROLL_EVENT.SCROLL,t),psy.css.translate3d(this.$el[0],0,-t.current,0)},scrollToHandler:function(t){this.scrollbar.scrollTo(t)},adjustScrollbarHandler:function(){this.scrollbar&&(this.width=this._width,this.height=this.$el.height(),this.scrollbar.adjust(this.height,this._height))},isRespondFrom:function(t){return t>=this.responseManager.current},isRespondTo:function(t){return t==this.responseManager.current},respond:function(t,e){var i=Config.DESK_MODE;t<=Config.MOBILE_W?i=Config.MOBILE_MODE:t<Config.PAD_W&&(i=Config.PAD_MODE),this.responseManager.current!=i&&(this.responseManager.prev=this.responseManager.current,this.responseManager.current=i,Events.trigger(Events.APP_EVENT.RESPOND,this.responseManager),TweenMax.delayedCall(.3,$.proxy(this.adjustScrollbarHandler,this)))},adjust:function(){this._width=this.$body.width(),this._height=window.innerHeight,this.respond(this._width,this._height),this.adjustScrollbarHandler(),Events.trigger(Events.APP_EVENT.RESIZE,this._width,this._height)}});return new a}),define("app/model",["underscore"],function(t){var e=function(){this.init()};return e.prototype={init:function(){this.FIND_PEPSI="js-find-pepsi",this.POPUP_SHARE="share",this.POPUP_LEGAL="legal",this.POPUP_LEGAL_POLICY="policy",this.POPUP_LEGAL_TERMS="terms",this.ROUTE_HOME="home",this.ROUTE_ABOUT="about",this.ROUTE_LOCATIONS="locations",this.ROUTE_EVENTS="events",this.ROUTE_404="404",this.SCENE_BUBBLES="bubbles",this.SCENE_HOME_INTRO="home-intro",this.SCENE_HOME_BUBBLES="home-bubbles",this.SCENE_ABOUT_INTRO="about-intro",this.SCENE_ABOUT_FINDER_BUBBLES_FLAVORS="about-finder-bubbles_flavors",this.SCENE_ABOUT_FAN_BUBBLES="about-fan-bubbles",this.SCENE_ABOUT_ADA="about-ada",this.SCENE_EVENT_INTRO="event-intro",this.SCENE_FINDER_INTRO="finder-intro",this.SCENE_404_INTRO="404-intro",this.ROUTE_DEFAULT=this.ROUTE_HOME,this.routes=[{clazz:this.ROUTE_HOME,uri:"",name:"Inspired Creations",trackingName:"Inspired Creations"},{clazz:this.ROUTE_ABOUT,uri:this.ROUTE_ABOUT,name:"About Pepsi Spire<sup>&#174;</sup>",trackingName:"About Pepsi Spire®"},{children:this.FIND_PEPSI,name:"Find Pepsi Spire<sup>&#174;</sup>",trackingName:"Find Pepsi Spire®"},{parent:this.FIND_PEPSI,clazz:this.ROUTE_LOCATIONS,uri:this.ROUTE_LOCATIONS,name:"Pepsi Spire<sup>&#174;</sup> Locations",trackingName:"Pepsi Spire® Locations"},{parent:this.FIND_PEPSI,clazz:this.ROUTE_EVENTS,uri:this.ROUTE_EVENTS,name:"Pepsi Spire<sup>&#174;</sup> Events",trackingName:"Pepsi Spire® Events"},{clazz:this.ROUTE_404,uri:this.ROUTE_404,trackingName:"404"}];for(var t=0;t<this.routes.length;t++)this.routes[t].uri?this.routes[t].url="#"+this.routes[t].uri:this.routes[t].url="#"},formatDataImageUrl:function(t){return"/"==t[0]?Config.DATA_IMAGE_URL+t:t},getUrlByClazz:function(e){return t.findWhere(this.routes,{clazz:e}).url},getRouteByUri:function(e){return t.findWhere(this.routes,{uri:e})},getRoutesByClazz:function(){return t.indexBy(this.routes,"clazz")},getRouteByClazz:function(e){return t.findWhere(this.routes,{clazz:e})},getRoutesForRouter:function(){var t={};for(var e in this.routes){var i=this.routes[e],n=i.uri;t[n]=i.clazz}return t},getRoutesForMenu:function(){return t.filter(this.routes,function(t){return t.name&&!t.parent})},getDropDown:function(e){return t.filter(this.routes,function(t){return t.parent===e})},getRoutes:function(){return t.clone(this.routes)}},new e}),define("app/events",[],function(){return _.extend({APP_EVENT:{RESIZE:"app:resize",RESPOND:"app:respond",OPENING:"app:opening",INVALIDATE:"app:invalidate",OVERLAY_SHOW:"app:overlay_show",OVERLAY_HIDE:"app:overlay_hide"},ROUTE_EVENT:{APP_LOADED:"route:app_loaded",APP_LOADING:"route:app_loading",UPDATE:"route:update",LOADED:"route:loaded",LOADING:"route:loading",START:"route:start"},SCROLL_EVENT:{START:"app:scroll_start",PAUSE:"app:scroll_pause",STOP:"app:scroll_stop",SCROLL:"app:scroll_scroll",DONE:"app:scroll_done",ADJUST:"app:scroll_adjust",SCROLL_TO:"app:scroll_to"},POPUP_EVENT:{OPEN:"popup:open",CLOSE:"popup:close",CLOSE_TO:"popup:close_to",CLOSE_ALL:"popup:close_all"}},Backbone.Events)}),define("bootstrap",["library","app/app","app/model","app/events"],function(t,e,i,n){Config.DEBUG_MODE&&void 0!==Config.IS_WEBGL_SUPPORT&&(psy.browser.IS_WEBGL_SUPPORT=Config.IS_WEBGL_SUPPORT),window.App=e,window.Model=i,window.Events=n,window.App.init(),window.App.render(),window.App.bind(),Preloader.readyAppHandler()});